(()=>{var Hte=Object.create;var Sf=Object.defineProperty;var jte=Object.getOwnPropertyDescriptor;var Kte=Object.getOwnPropertyNames;var Zte=Object.getPrototypeOf,Jte=Object.prototype.hasOwnProperty;var Qte=e=>Sf(e,"__esModule",{value:!0});var l=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var $te=(e,t,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of Kte(t))!Jte.call(e,r)&&r!=="default"&&Sf(e,r,{get:()=>t[r],enumerable:!(i=jte(t,r))||i.enumerable});return e},eie=e=>$te(Qte(Sf(e!=null?Hte(Zte(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var mi=l((aBe,ax)=>{ax.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}});var Cf=l((oBe,ox)=>{var tie={DEFAULT:0,LINEAR:0,NEAREST:1};ox.exports=tie});var Ut=l((hBe,hx)=>{var iie={VERSION:"3.55.2",BlendModes:mi(),ScaleModes:Cf(),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};hx.exports=iie});var te=l((uBe,ux)=>{var rie=function(e){if(typeof e!="object"||e.nodeType||e===e.window)return!1;try{if(e.constructor&&!{}.hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}return!0};ux.exports=rie});var Fe=l((lBe,dx)=>{var lx=te(),fx=function(){var e,t,i,r,s,n,a=arguments[0]||{},o=1,h=arguments.length,u=!1;for(typeof a=="boolean"&&(u=a,a=arguments[1]||{},o=2),h===o&&(a=this,--o);o<h;o++)if((e=arguments[o])!=null)for(t in e)i=a[t],r=e[t],a!==r&&(u&&r&&(lx(r)||(s=Array.isArray(r)))?(s?(s=!1,n=i&&Array.isArray(i)?i:[]):n=i&&lx(i)?i:{},a[t]=fx(u,n,r)):r!==void 0&&(a[t]=r));return a};dx.exports=fx});var _=l((fBe,cx)=>{function sie(e){return!!e.get&&typeof e.get=="function"||!!e.set&&typeof e.set=="function"}function nie(e,t,i){var r=i?e[t]:Object.getOwnPropertyDescriptor(e,t);return!i&&r.value&&typeof r.value=="object"&&(r=r.value),r&&sie(r)?(typeof r.enumerable=="undefined"&&(r.enumerable=!0),typeof r.configurable=="undefined"&&(r.configurable=!0),r):!1}function aie(e,t){var i=Object.getOwnPropertyDescriptor(e,t);return i?(i.value&&typeof i.value=="object"&&(i=i.value),i.configurable===!1):!1}function Rf(e,t,i,r){for(var s in t)if(!!t.hasOwnProperty(s)){var n=nie(t,s,i);if(n!==!1){var a=r||e;if(aie(a.prototype,s)){if(_a.ignoreFinals)continue;throw new Error("cannot override final property '"+s+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(e.prototype,s,n)}else e.prototype[s]=t[s]}}function vx(e,t){if(!!t){Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++)Rf(e,t[i].prototype||t[i])}}function _a(e){e||(e={});var t,i;if(e.initialize){if(typeof e.initialize!="function")throw new Error("initialize must be a function");t=e.initialize,delete e.initialize}else if(e.Extends){var r=e.Extends;t=function(){r.apply(this,arguments)}}else t=function(){};e.Extends?(t.prototype=Object.create(e.Extends.prototype),t.prototype.constructor=t,i=e.Extends,delete e.Extends):t.prototype.constructor=t;var s=null;return e.Mixins&&(s=e.Mixins,delete e.Mixins),vx(t,s),Rf(t,e,!0,i),t}_a.extend=Rf;_a.mixin=vx;_a.ignoreFinals=!1;cx.exports=_a});var vn=l((dBe,px)=>{var Q={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};function oie(){if(typeof importScripts=="function")return Q;var e=navigator.userAgent;/Windows/.test(e)?Q.windows=!0:/Mac OS/.test(e)&&!/like Mac OS/.test(e)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(Q.iOS=!0,Q.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),Q.iOSVersion=parseInt(RegExp.$1,10)):Q.macOS=!0:/Android/.test(e)?Q.android=!0:/Linux/.test(e)?Q.linux=!0:/iP[ao]d|iPhone/i.test(e)?(Q.iOS=!0,navigator.appVersion.match(/OS (\d+)/),Q.iOSVersion=parseInt(RegExp.$1,10),Q.iPhone=e.toLowerCase().indexOf("iphone")!==-1,Q.iPad=e.toLowerCase().indexOf("ipad")!==-1):/Kindle/.test(e)||/\bKF[A-Z][A-Z]+/.test(e)||/Silk.*Mobile Safari/.test(e)?Q.kindle=!0:/CrOS/.test(e)&&(Q.chromeOS=!0),(/Windows Phone/i.test(e)||/IEMobile/i.test(e))&&(Q.android=!1,Q.iOS=!1,Q.macOS=!1,Q.windows=!0,Q.windowsPhone=!0);var t=/Silk/.test(e);return(Q.windows||Q.macOS||Q.linux&&!t||Q.chromeOS)&&(Q.desktop=!0),(Q.windowsPhone||/Windows NT/i.test(e)&&/Touch/i.test(e))&&(Q.desktop=!1),navigator.standalone&&(Q.webApp=!0),typeof importScripts!="function"&&(window.cordova!==void 0&&(Q.cordova=!0),window.ejecta!==void 0&&(Q.ejecta=!0)),typeof process!="undefined"&&process.versions&&process.versions.node&&(Q.node=!0),Q.node&&typeof process.versions=="object"&&(Q.nodeWebkit=!!process.versions["node-webkit"],Q.electron=!!process.versions.electron),/Crosswalk/.test(e)&&(Q.crosswalk=!0),Q.pixelRatio=window.devicePixelRatio||1,Q}px.exports=oie()});var wa=l((vBe,mx)=>{var _f=vn(),ut={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0};function hie(){var e=navigator.userAgent;return/Edge\/\d+/.test(e)?ut.edge=!0:/Chrome\/(\d+)/.test(e)&&!_f.windowsPhone?(ut.chrome=!0,ut.chromeVersion=parseInt(RegExp.$1,10)):/Firefox\D+(\d+)/.test(e)?(ut.firefox=!0,ut.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(e)&&_f.iOS?ut.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(e)?(ut.ie=!0,ut.ieVersion=parseInt(RegExp.$1,10)):/Opera/.test(e)?ut.opera=!0:/Safari/.test(e)&&!_f.windowsPhone?ut.safari=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(e)&&(ut.ie=!0,ut.trident=!0,ut.tridentVersion=parseInt(RegExp.$1,10),ut.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(e)&&(ut.silk=!0),ut}mx.exports=hie()});var Wo=l((cBe,gx)=>{var Ni="",uie=function(){var e=function(s){for(var n=["i","webkitI","msI","mozI","oI"],a=0;a<n.length;a++){var o=n[a]+"mageSmoothingEnabled";if(o in s)return o}return null},t=function(s){return Ni===""&&(Ni=e(s)),Ni&&(s[Ni]=!0),s},i=function(s){return Ni===""&&(Ni=e(s)),Ni&&(s[Ni]=!1),s},r=function(s){return Ni!==null?s[Ni]:null};return{disable:i,enable:t,getPrefix:e,isEnabled:r}};gx.exports=uie()});var Et=l((pBe,xx)=>{var Os=Ut(),lie=Wo(),Ls=[],wf=!1,fie=function(){var e=function(u,f,d,v,c){f===void 0&&(f=1),d===void 0&&(d=1),v===void 0&&(v=Os.CANVAS),c===void 0&&(c=!1);var p,m=r(v);return m===null?(m={parent:u,canvas:document.createElement("canvas"),type:v},v===Os.CANVAS&&Ls.push(m),p=m.canvas):(m.parent=u,p=m.canvas),c&&(m.parent=p),p.width=f,p.height=d,wf&&v===Os.CANVAS&&lie.disable(p.getContext("2d")),p},t=function(u,f,d){return e(u,f,d,Os.CANVAS)},i=function(u,f,d){return e(u,f,d,Os.WEBGL)},r=function(u){if(u===void 0&&(u=Os.CANVAS),u===Os.WEBGL)return null;for(var f=0;f<Ls.length;f++){var d=Ls[f];if(!d.parent&&d.type===u)return d}return null},s=function(u){var f=u instanceof HTMLCanvasElement;Ls.forEach(function(d){(f&&d.canvas===u||!f&&d.parent===u)&&(d.parent=null,d.canvas.width=1,d.canvas.height=1)})},n=function(){var u=0;return Ls.forEach(function(f){f.parent&&u++}),u},a=function(){return Ls.length-n()},o=function(){wf=!0},h=function(){wf=!1};return{create2D:t,create:e,createWebGL:i,disableSmoothing:o,enableSmoothing:h,first:r,free:a,pool:Ls,remove:s,total:n}};xx.exports=fie()});var jo=l((mBe,Tx)=>{var die=vn(),Fs=wa(),Ho=Et(),ke={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};function vie(){var e=new ArrayBuffer(4),t=new Uint8Array(e),i=new Uint32Array(e);return t[0]=161,t[1]=178,t[2]=195,t[3]=212,i[0]===3569595041?!0:i[0]===2712847316?!1:null}function cie(){if(typeof importScripts=="function")return ke;ke.canvas=!!window.CanvasRenderingContext2D;try{ke.localStorage=!!localStorage.getItem}catch(i){ke.localStorage=!1}ke.file=!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob,ke.fileSystem=!!window.requestFileSystem;var e=!1,t=function(){if(window.WebGLRenderingContext)try{var i=Ho.createWebGL(this),r=i.getContext("webgl")||i.getContext("experimental-webgl"),s=Ho.create2D(this),n=s.getContext("2d"),a=n.createImageData(1,1);return e=a.data instanceof Uint8ClampedArray,Ho.remove(i),Ho.remove(s),!!r}catch(o){return!1}return!1};return ke.webGL=t(),ke.worker=!!window.Worker,ke.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,ke.getUserMedia=ke.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,Fs.firefox&&Fs.firefoxVersion<21&&(ke.getUserMedia=!1),!die.iOS&&(Fs.ie||Fs.firefox||Fs.chrome)&&(ke.canvasBitBltShift=!0),(Fs.safari||Fs.mobileSafari)&&(ke.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(ke.vibration=!0),typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined"&&typeof Uint32Array!="undefined"&&(ke.littleEndian=vie()),ke.support32bit=typeof ArrayBuffer!="undefined"&&typeof Uint8ClampedArray!="undefined"&&typeof Int32Array!="undefined"&&ke.littleEndian!==null&&e,ke}Tx.exports=cie()});var Sx=l((gBe,yx)=>{var Ex=wa(),Mr={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};function pie(){return typeof importScripts=="function"||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(Mr.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(Mr.mspointer=!0),navigator.getGamepads&&(Mr.gamepads=!0),"onwheel"in window||Ex.ie&&"WheelEvent"in window?Mr.wheelEvent="wheel":"onmousewheel"in window?Mr.wheelEvent="mousewheel":Ex.firefox&&"MouseScrollEvent"in window&&(Mr.wheelEvent="DOMMouseScroll")),Mr}yx.exports=pie()});var Rx=l((xBe,Cx)=>{var Pf=wa(),ri={audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};function mie(){if(typeof importScripts=="function")return ri;ri.audioData=!!window.Audio,ri.webAudio=!!(window.AudioContext||window.webkitAudioContext);var e=document.createElement("audio"),t=!!e.canPlayType;try{if(t&&(e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(ri.ogg=!0),(e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||e.canPlayType("audio/opus;").replace(/^no$/,""))&&(ri.opus=!0),e.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(ri.mp3=!0),e.canPlayType("audio/wav").replace(/^no$/,"")&&(ri.wav=!0),(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;").replace(/^no$/,""))&&(ri.m4a=!0),e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(ri.webm=!0),e.canPlayType('audio/mp4;codecs="ec-3"')!=="")){if(Pf.edge)ri.dolby=!0;else if(Pf.safari&&Pf.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var i=parseInt(RegExp.$1,10),r=parseInt(RegExp.$2,10);(i===10&&r>=11||i>10)&&(ri.dolby=!0)}}}catch(s){}return ri}Cx.exports=mie()});var wx=l((TBe,_x)=>{var qr={h264:!1,hls:!1,mp4:!1,ogg:!1,vp9:!1,webm:!1};function gie(){if(typeof importScripts=="function")return qr;var e=document.createElement("video"),t=!!e.canPlayType;try{t&&(e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"")&&(qr.ogg=!0),e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"")&&(qr.h264=!0,qr.mp4=!0),e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")&&(qr.webm=!0),e.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,"")&&(qr.vp9=!0),e.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,"")&&(qr.hls=!0))}catch(i){}return qr}_x.exports=gie()});var Ax=l((EBe,Px)=>{var Or={available:!1,cancel:"",keyboard:!1,request:""};function xie(){if(typeof importScripts=="function")return Or;var e,t="Fullscreen",i="FullScreen",r=["request"+t,"request"+i,"webkitRequest"+t,"webkitRequest"+i,"msRequest"+t,"msRequest"+i,"mozRequest"+i,"mozRequest"+t];for(e=0;e<r.length;e++)if(document.documentElement[r[e]]){Or.available=!0,Or.request=r[e];break}var s=["cancel"+i,"exit"+t,"webkitCancel"+i,"webkitExit"+t,"msCancel"+i,"msExit"+t,"mozCancel"+i,"mozExit"+t];if(Or.available){for(e=0;e<s.length;e++)if(document[s[e]]){Or.cancel=s[e];break}}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(Or.keyboard=!0),Object.defineProperty(Or,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),Or}Px.exports=xie()});var bf=l((yBe,bx)=>{var Af=Et(),Ko={supportInverseAlpha:!1,supportNewBlendModes:!1};function Tie(){var e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",t="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",i=new Image;return i.onload=function(){var r=new Image;r.onload=function(){var s=Af.create(r,6,1),n=s.getContext("2d");if(n.globalCompositeOperation="multiply",n.drawImage(i,0,0),n.drawImage(r,2,0),!n.getImageData(2,0,1,1))return!1;var a=n.getImageData(2,0,1,1).data;Af.remove(r),Ko.supportNewBlendModes=a[0]===255&&a[1]===0&&a[2]===0},r.src=e+"/wCKxvRF"+t},i.src=e+"AP804Oa6"+t,!1}function Eie(){var e=Af.create(this,2,1),t=e.getContext("2d");t.fillStyle="rgba(10, 20, 30, 0.5)",t.fillRect(0,0,1,1);var i=t.getImageData(0,0,1,1);if(i===null)return!1;t.putImageData(i,1,0);var r=t.getImageData(1,0,1,1);return r.data[0]===i.data[0]&&r.data[1]===i.data[1]&&r.data[2]===i.data[2]&&r.data[3]===i.data[3]}function yie(){return typeof importScripts!="function"&&document!==void 0&&(Ko.supportNewBlendModes=Tie(),Ko.supportInverseAlpha=Eie()),Ko}bx.exports=yie()});var Mf=l((SBe,Mx)=>{Mx.exports={os:vn(),browser:wa(),features:jo(),input:Sx(),audio:Rx(),video:wx(),fullscreen:Ax(),canvasFeatures:bf()}});var X=l((CBe,qx)=>{var Sie=function(e,t,i){var r=typeof e;return!e||r==="number"||r==="string"?i:e.hasOwnProperty(t)&&e[t]!==void 0?e[t]:i};qx.exports=Sie});var ie=l((RBe,Ox)=>{var Cie=function(e,t,i){if(!e||typeof e=="number")return i;if(e.hasOwnProperty(t))return e[t];if(t.indexOf(".")!==-1){for(var r=t.split("."),s=e,n=i,a=0;a<r.length;a++)if(s.hasOwnProperty(r[a]))n=s[r[a]],s=s[r[a]];else{n=i;break}return n}else return i};Ox.exports=Cie});var we=l((_Be,Lx)=>{var Rie={PI2:Math.PI*2,TAU:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};Lx.exports=Rie});var qf=l((wBe,Fx)=>{var _ie=function(e,t,i,r){return Math.atan2(r-t,i-e)};Fx.exports=_ie});var Gx=l((PBe,Nx)=>{var wie=function(e,t){return Math.atan2(t.y-e.y,t.x-e.x)};Nx.exports=wie});var Ix=l((ABe,Dx)=>{var Pie=function(e,t){return Math.atan2(t.x-e.x,t.y-e.y)};Dx.exports=Pie});var Vx=l((bBe,Bx)=>{var Aie=function(e,t,i,r){return Math.atan2(i-e,r-t)};Bx.exports=Aie});var kx=l((MBe,Ux)=>{var Pa=we(),bie=function(e){return e>Math.PI&&(e-=Pa.PI2),Math.abs(((e+Pa.TAU)%Pa.PI2-Pa.PI2)%Pa.PI2)};Ux.exports=bie});var Of=l((qBe,zx)=>{var Mie=function(e){return e=e%(2*Math.PI),e>=0?e:e+2*Math.PI};zx.exports=Mie});var Aa=l((OBe,Xx)=>{var qie=function(e,t){return Math.random()*(t-e)+e};Xx.exports=qie});var Wx=l((LBe,Yx)=>{var Oie=Aa(),Lie=function(){return Oie(-Math.PI,Math.PI)};Yx.exports=Lie});var jx=l((FBe,Hx)=>{var Fie=Aa(),Nie=function(){return Fie(-180,180)};Hx.exports=Nie});var Zx=l((NBe,Kx)=>{var Gie=Of(),Die=function(e){return Gie(e+Math.PI)};Kx.exports=Die});var Qx=l((GBe,Jx)=>{var Lf=we(),Iie=function(e,t,i){return i===void 0&&(i=.05),e===t||(Math.abs(t-e)<=i||Math.abs(t-e)>=Lf.PI2-i?e=t:(Math.abs(t-e)>Math.PI&&(t<e?t+=Lf.PI2:t-=Lf.PI2),t>e?e+=i:t<e&&(e-=i))),e};Jx.exports=Iie});var eT=l((DBe,$x)=>{var Bie=function(e,t){var i=t-e;if(i===0)return 0;var r=Math.floor((i- -180)/360);return i-r*360};$x.exports=Bie});var Lr=l((IBe,tT)=>{var Vie=function(e,t,i){var r=i-t;return t+((e-t)%r+r)%r};tT.exports=Vie});var Ff=l((BBe,iT)=>{var Uie=Lr(),kie=function(e){return Uie(e,-Math.PI,Math.PI)};iT.exports=kie});var Nf=l((VBe,rT)=>{var zie=Lr(),Xie=function(e){return zie(e,-180,180)};rT.exports=Xie});var nT=l((UBe,sT)=>{sT.exports={Between:qf(),BetweenPoints:Gx(),BetweenPointsY:Ix(),BetweenY:Vx(),CounterClockwise:kx(),Normalize:Of(),Random:Wx(),RandomDegrees:jx(),Reverse:Zx(),RotateTo:Qx(),ShortestBetween:eT(),Wrap:Ff(),WrapDegrees:Nf()}});var Fr=l((kBe,aT)=>{var Yie=function(e,t,i,r){var s=e-i,n=t-r;return Math.sqrt(s*s+n*n)};aT.exports=Yie});var Gf=l((zBe,oT)=>{var Wie=function(e,t){var i=e.x-t.x,r=e.y-t.y;return Math.sqrt(i*i+r*r)};oT.exports=Wie});var uT=l((XBe,hT)=>{var Hie=function(e,t){var i=e.x-t.x,r=e.y-t.y;return i*i+r*r};hT.exports=Hie});var fT=l((YBe,lT)=>{var jie=function(e,t,i,r){return Math.max(Math.abs(e-i),Math.abs(t-r))};lT.exports=jie});var vT=l((WBe,dT)=>{var Kie=function(e,t,i,r,s){return s===void 0&&(s=2),Math.sqrt(Math.pow(i-e,s)+Math.pow(r-t,s))};dT.exports=Kie});var pT=l((HBe,cT)=>{var Zie=function(e,t,i,r){return Math.abs(e-i)+Math.abs(t-r)};cT.exports=Zie});var gT=l((jBe,mT)=>{var Jie=function(e,t,i,r){var s=e-i,n=t-r;return s*s+n*n};mT.exports=Jie});var TT=l((KBe,xT)=>{xT.exports={Between:Fr(),BetweenPoints:Gf(),BetweenPointsSquared:uT(),Chebyshev:fT(),Power:vT(),Snake:pT(),Squared:gT()}});var yT=l((ZBe,ET)=>{var Qie=function(e,t){return t===void 0&&(t=1.70158),e*e*((t+1)*e-t)};ET.exports=Qie});var CT=l((JBe,ST)=>{var $ie=function(e,t){return t===void 0&&(t=1.70158),--e*e*((t+1)*e+t)+1};ST.exports=$ie});var _T=l((QBe,RT)=>{var ere=function(e,t){t===void 0&&(t=1.70158);var i=t*1.525;return(e*=2)<1?.5*(e*e*((i+1)*e-i)):.5*((e-=2)*e*((i+1)*e+i)+2)};RT.exports=ere});var Df=l(($Be,wT)=>{wT.exports={In:yT(),Out:CT(),InOut:_T()}});var AT=l((eVe,PT)=>{var tre=function(e){return e=1-e,e<1/2.75?1-7.5625*e*e:e<2/2.75?1-(7.5625*(e-=1.5/2.75)*e+.75):e<2.5/2.75?1-(7.5625*(e-=2.25/2.75)*e+.9375):1-(7.5625*(e-=2.625/2.75)*e+.984375)};PT.exports=tre});var MT=l((tVe,bT)=>{var ire=function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375};bT.exports=ire});var OT=l((iVe,qT)=>{var rre=function(e){var t=!1;return e<.5?(e=1-e*2,t=!0):e=e*2-1,e<1/2.75?e=7.5625*e*e:e<2/2.75?e=7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?e=7.5625*(e-=2.25/2.75)*e+.9375:e=7.5625*(e-=2.625/2.75)*e+.984375,t?(1-e)*.5:e*.5+.5};qT.exports=rre});var If=l((rVe,LT)=>{LT.exports={In:AT(),Out:MT(),InOut:OT()}});var NT=l((sVe,FT)=>{var sre=function(e){return 1-Math.sqrt(1-e*e)};FT.exports=sre});var DT=l((nVe,GT)=>{var nre=function(e){return Math.sqrt(1- --e*e)};GT.exports=nre});var BT=l((aVe,IT)=>{var are=function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)};IT.exports=are});var Bf=l((oVe,VT)=>{VT.exports={In:NT(),Out:DT(),InOut:BT()}});var kT=l((hVe,UT)=>{var ore=function(e){return e*e*e};UT.exports=ore});var XT=l((uVe,zT)=>{var hre=function(e){return--e*e*e+1};zT.exports=hre});var WT=l((lVe,YT)=>{var ure=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)};YT.exports=ure});var Vf=l((fVe,HT)=>{HT.exports={In:kT(),Out:XT(),InOut:WT()}});var KT=l((dVe,jT)=>{var lre=function(e,t,i){if(t===void 0&&(t=.1),i===void 0&&(i=.1),e===0)return 0;if(e===1)return 1;var r=i/4;return t<1?t=1:r=i*Math.asin(1/t)/(2*Math.PI),-(t*Math.pow(2,10*(e-=1))*Math.sin((e-r)*(2*Math.PI)/i))};jT.exports=lre});var JT=l((vVe,ZT)=>{var fre=function(e,t,i){if(t===void 0&&(t=.1),i===void 0&&(i=.1),e===0)return 0;if(e===1)return 1;var r=i/4;return t<1?t=1:r=i*Math.asin(1/t)/(2*Math.PI),t*Math.pow(2,-10*e)*Math.sin((e-r)*(2*Math.PI)/i)+1};ZT.exports=fre});var $T=l((cVe,QT)=>{var dre=function(e,t,i){if(t===void 0&&(t=.1),i===void 0&&(i=.1),e===0)return 0;if(e===1)return 1;var r=i/4;return t<1?t=1:r=i*Math.asin(1/t)/(2*Math.PI),(e*=2)<1?-.5*(t*Math.pow(2,10*(e-=1))*Math.sin((e-r)*(2*Math.PI)/i)):t*Math.pow(2,-10*(e-=1))*Math.sin((e-r)*(2*Math.PI)/i)*.5+1};QT.exports=dre});var Uf=l((pVe,eE)=>{eE.exports={In:KT(),Out:JT(),InOut:$T()}});var iE=l((mVe,tE)=>{var vre=function(e){return Math.pow(2,10*(e-1))-.001};tE.exports=vre});var sE=l((gVe,rE)=>{var cre=function(e){return 1-Math.pow(2,-10*e)};rE.exports=cre});var aE=l((xVe,nE)=>{var pre=function(e){return(e*=2)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*(e-1)))};nE.exports=pre});var kf=l((TVe,oE)=>{oE.exports={In:iE(),Out:sE(),InOut:aE()}});var uE=l((EVe,hE)=>{var mre=function(e){return e};hE.exports=mre});var zf=l((yVe,lE)=>{lE.exports=uE()});var dE=l((SVe,fE)=>{var gre=function(e){return e*e};fE.exports=gre});var cE=l((CVe,vE)=>{var xre=function(e){return e*(2-e)};vE.exports=xre});var mE=l((RVe,pE)=>{var Tre=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)};pE.exports=Tre});var Xf=l((_Ve,gE)=>{gE.exports={In:dE(),Out:cE(),InOut:mE()}});var TE=l((wVe,xE)=>{var Ere=function(e){return e*e*e*e};xE.exports=Ere});var yE=l((PVe,EE)=>{var yre=function(e){return 1- --e*e*e*e};EE.exports=yre});var CE=l((AVe,SE)=>{var Sre=function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)};SE.exports=Sre});var Yf=l((bVe,RE)=>{RE.exports={In:TE(),Out:yE(),InOut:CE()}});var wE=l((MVe,_E)=>{var Cre=function(e){return e*e*e*e*e};_E.exports=Cre});var AE=l((qVe,PE)=>{var Rre=function(e){return--e*e*e*e*e+1};PE.exports=Rre});var ME=l((OVe,bE)=>{var _re=function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)};bE.exports=_re});var Wf=l((LVe,qE)=>{qE.exports={In:wE(),Out:AE(),InOut:ME()}});var LE=l((FVe,OE)=>{var wre=function(e){return e===0?0:e===1?1:1-Math.cos(e*Math.PI/2)};OE.exports=wre});var NE=l((NVe,FE)=>{var Pre=function(e){return e===0?0:e===1?1:Math.sin(e*Math.PI/2)};FE.exports=Pre});var DE=l((GVe,GE)=>{var Are=function(e){return e===0?0:e===1?1:.5*(1-Math.cos(Math.PI*e))};GE.exports=Are});var Hf=l((DVe,IE)=>{IE.exports={In:LE(),Out:NE(),InOut:DE()}});var VE=l((IVe,BE)=>{var bre=function(e,t){return t===void 0&&(t=1),e<=0?0:e>=1?1:((t*e|0)+1)*(1/t)};BE.exports=bre});var jf=l((BVe,UE)=>{UE.exports=VE()});var zE=l((VVe,kE)=>{kE.exports={Back:Df(),Bounce:If(),Circular:Bf(),Cubic:Vf(),Elastic:Uf(),Expo:kf(),Linear:zf(),Quadratic:Xf(),Quartic:Yf(),Quintic:Wf(),Sine:Hf(),Stepped:jf()}});var YE=l((UVe,XE)=>{var Mre=function(e,t){return t===void 0&&(t=1e-4),Math.ceil(e-t)};XE.exports=Mre});var Zo=l((kVe,WE)=>{var qre=function(e,t,i){return i===void 0&&(i=1e-4),Math.abs(e-t)<i};WE.exports=qre});var jE=l((zVe,HE)=>{var Ore=function(e,t){return t===void 0&&(t=1e-4),Math.floor(e+t)};HE.exports=Ore});var ZE=l((XVe,KE)=>{var Lre=function(e,t,i){return i===void 0&&(i=1e-4),e>t-i};KE.exports=Lre});var QE=l((YVe,JE)=>{var Fre=function(e,t,i){return i===void 0&&(i=1e-4),e<t+i};JE.exports=Fre});var ey=l((WVe,$E)=>{$E.exports={Ceil:YE(),Equal:Zo(),Floor:jE(),GreaterThan:ZE(),LessThan:QE()}});var Kf=l((HVe,ty)=>{var Nre=function(e){if(e===0)return 1;for(var t=e;--e;)t*=e;return t};ty.exports=Nre});var Jf=l((jVe,iy)=>{var Zf=Kf(),Gre=function(e,t){return Zf(e)/Zf(t)/Zf(e-t)};iy.exports=Gre});var sy=l((KVe,ry)=>{var Dre=Jf(),Ire=function(e,t){for(var i=0,r=e.length-1,s=0;s<=r;s++)i+=Math.pow(1-t,r-s)*Math.pow(t,s)*e[s]*Dre(r,s);return i};ry.exports=Ire});var Qf=l((ZVe,ny)=>{var Bre=function(e,t,i,r,s){var n=(r-t)*.5,a=(s-i)*.5,o=e*e,h=e*o;return(2*i-2*r+n+a)*h+(-3*i+3*r-2*n-a)*o+n*e+i};ny.exports=Bre});var oy=l((JVe,ay)=>{var Jo=Qf(),Vre=function(e,t){var i=e.length-1,r=i*t,s=Math.floor(r);return e[0]===e[i]?(t<0&&(s=Math.floor(r=i*(1+t))),Jo(r-s,e[(s-1+i)%i],e[s],e[(s+1)%i],e[(s+2)%i])):t<0?e[0]-(Jo(-r,e[0],e[0],e[1],e[1])-e[0]):t>1?e[i]-(Jo(r-i,e[i],e[i],e[i-1],e[i-1])-e[i]):Jo(r-s,e[s?s-1:0],e[s],e[i<s+1?i:s+1],e[i<s+2?i:s+2])};ay.exports=Vre});var uy=l((QVe,hy)=>{function Ure(e,t){var i=1-e;return i*i*i*t}function kre(e,t){var i=1-e;return 3*i*i*e*t}function zre(e,t){return 3*(1-e)*e*e*t}function Xre(e,t){return e*e*e*t}var Yre=function(e,t,i,r,s){return Ure(e,t)+kre(e,i)+zre(e,r)+Xre(e,s)};hy.exports=Yre});var ba=l(($Ve,ly)=>{var Wre=function(e,t,i){return(t-e)*i+e};ly.exports=Wre});var dy=l((eUe,fy)=>{var $f=ba(),Hre=function(e,t){var i=e.length-1,r=i*t,s=Math.floor(r);return t<0?$f(e[0],e[1],r):t>1?$f(e[i],e[i-1],i-r):$f(e[s],e[s+1>i?i:s+1],r-s)};fy.exports=Hre});var cy=l((tUe,vy)=>{function jre(e,t){var i=1-e;return i*i*t}function Kre(e,t){return 2*(1-e)*e*t}function Zre(e,t){return e*e*t}var Jre=function(e,t,i,r){return jre(e,t)+Kre(e,i)+Zre(e,r)};vy.exports=Jre});var Qo=l((iUe,py)=>{var Qre=function(e,t,i){return e<=t?0:e>=i?1:(e=(e-t)/(i-t),e*e*(3-2*e))};py.exports=Qre});var ed=l((rUe,my)=>{var $re=Qo(),ese=function(e,t,i){return t+(i-t)*$re(e,0,1)};my.exports=ese});var $o=l((sUe,gy)=>{var tse=function(e,t,i){return e=Math.max(0,Math.min(1,(e-t)/(i-t))),e*e*e*(e*(e*6-15)+10)};gy.exports=tse});var Ty=l((nUe,xy)=>{var ise=$o(),rse=function(e,t,i){return t+(i-t)*ise(e,0,1)};xy.exports=rse});var yy=l((aUe,Ey)=>{Ey.exports={Bezier:sy(),CatmullRom:oy(),CubicBezier:uy(),Linear:dy(),QuadraticBezier:cy(),SmoothStep:ed(),SmootherStep:Ty()}});var td=l((oUe,Sy)=>{var sse=function(e){var t=Math.log(e)/.6931471805599453;return 1<<Math.ceil(t)};Sy.exports=sse});var Ma=l((hUe,Cy)=>{var nse=function(e,t){return e>0&&(e&e-1)==0&&t>0&&(t&t-1)==0};Cy.exports=nse});var _y=l((uUe,Ry)=>{var ase=function(e){return e>0&&(e&e-1)==0};Ry.exports=ase});var Py=l((lUe,wy)=>{wy.exports={GetNext:td(),IsSize:Ma(),IsValue:_y()}});var by=l((fUe,Ay)=>{var ose=function(e,t,i,r){return i===void 0&&(i=0),t===0?e:(e-=i,e=t*Math.ceil(e/t),r?(i+e)/t:i+e)};Ay.exports=ose});var qa=l((dUe,My)=>{var hse=function(e,t,i,r){return i===void 0&&(i=0),t===0?e:(e-=i,e=t*Math.floor(e/t),r?(i+e)/t:i+e)};My.exports=hse});var Oy=l((vUe,qy)=>{var use=function(e,t,i,r){return i===void 0&&(i=0),t===0?e:(e-=i,e=t*Math.round(e/t),r?(i+e)/t:i+e)};qy.exports=use});var Fy=l((cUe,Ly)=>{Ly.exports={Ceil:by(),Floor:qa(),To:Oy()}});var Gy=l((pUe,Ny)=>{var lse=_(),fse=new lse({initialize:function(t){t===void 0&&(t=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],t&&this.init(t)},rnd:function(){var e=2091639*this.s0+this.c*23283064365386963e-26;return this.c=e|0,this.s0=this.s1,this.s1=this.s2,this.s2=e-this.c,this.s2},hash:function(e){var t,i=this.n;e=e.toString();for(var r=0;r<e.length;r++)i+=e.charCodeAt(r),t=.02519603282416938*i,i=t>>>0,t-=i,t*=i,i=t>>>0,t-=i,i+=t*4294967296;return this.n=i,(i>>>0)*23283064365386963e-26},init:function(e){typeof e=="string"?this.state(e):this.sow(e)},sow:function(e){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,!!e)for(var t=0;t<e.length&&e[t]!=null;t++){var i=e[t];this.s0-=this.hash(i),this.s0+=~~(this.s0<0),this.s1-=this.hash(i),this.s1+=~~(this.s1<0),this.s2-=this.hash(i),this.s2+=~~(this.s2<0)}},integer:function(){return this.rnd()*4294967296},frac:function(){return this.rnd()+(this.rnd()*2097152|0)*11102230246251565e-32},real:function(){return this.integer()+this.frac()},integerInRange:function(e,t){return Math.floor(this.realInRange(0,t-e+1)+e)},between:function(e,t){return Math.floor(this.realInRange(0,t-e+1)+e)},realInRange:function(e,t){return this.frac()*(t-e)+e},normal:function(){return 1-2*this.frac()},uuid:function(){var e="",t="";for(t=e="";e++<36;t+=~e%5|e*3&4?(e^15?8^this.frac()*(e^20?16:4):4).toString(16):"-");return t},pick:function(e){return e[this.integerInRange(0,e.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(e){return e[~~(Math.pow(this.frac(),2)*(e.length-1)+.5)]},timestamp:function(e,t){return this.realInRange(e||9466848e5,t||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(e){return typeof e=="string"&&e.match(/^!rnd/)&&(e=e.split(","),this.c=parseFloat(e[1]),this.s0=parseFloat(e[2]),this.s1=parseFloat(e[3]),this.s2=parseFloat(e[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(e){for(var t=e.length-1,i=t;i>0;i--){var r=Math.floor(this.frac()*(i+1)),s=e[r];e[r]=e[i],e[i]=s}return e}});Ny.exports=fse});var Iy=l((mUe,Dy)=>{var dse=function(e){for(var t=0,i=0;i<e.length;i++)t+=+e[i];return t/e.length};Dy.exports=dse});var eh=l((gUe,By)=>{var vse=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)};By.exports=vse});var Uy=l((xUe,Vy)=>{var cse=function(e,t,i){t===void 0&&(t=0),i===void 0&&(i=10);var r=Math.pow(i,-t);return Math.ceil(e*r)/r};Vy.exports=cse});var Pe=l((TUe,ky)=>{var pse=function(e,t,i){return Math.max(t,Math.min(i,e))};ky.exports=pse});var or=l((EUe,zy)=>{var mse=we(),gse=function(e){return e*mse.DEG_TO_RAD};zy.exports=gse});var Yy=l((yUe,Xy)=>{var xse=function(e,t){return Math.abs(e-t)};Xy.exports=xse});var si=l((SUe,Wy)=>{var Tse=_(),Ze=new Tse({initialize:function(t,i,r){this.x=0,this.y=0,this.z=0,typeof t=="object"?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=i||0,this.z=r||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clone:function(){return new Ze(this.x,this.y,this.z)},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},crossVectors:function(e,t){var i=e.x,r=e.y,s=e.z,n=t.x,a=t.y,o=t.z;return this.x=r*o-s*a,this.y=s*n-i*o,this.z=i*a-r*n,this},equals:function(e){return this.x===e.x&&this.y===e.y&&this.z===e.z},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z||0,this},set:function(e,t,i){return typeof e=="object"?(this.x=e.x||0,this.y=e.y||0,this.z=e.z||0):(this.x=e||0,this.y=t||0,this.z=i||0),this},setFromMatrixPosition:function(e){return this.fromArray(e.val,12)},setFromMatrixColumn:function(e,t){return this.fromArray(e.val,t*4)},fromArray:function(e,t){return t===void 0&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},add:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z||0,this},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addScale:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t||0,this},subtract:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z||0,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z||1,this},scale:function(e){return isFinite(e)?(this.x*=e,this.y*=e,this.z*=e):(this.x=0,this.y=0,this.z=0),this},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(e){var t=e.x-this.x,i=e.y-this.y,r=e.z-this.z||0;return Math.sqrt(t*t+i*i+r*r)},distanceSq:function(e){var t=e.x-this.x,i=e.y-this.y,r=e.z-this.z||0;return t*t+i*i+r*r},length:function(){var e=this.x,t=this.y,i=this.z;return Math.sqrt(e*e+t*t+i*i)},lengthSq:function(){var e=this.x,t=this.y,i=this.z;return e*e+t*t+i*i},normalize:function(){var e=this.x,t=this.y,i=this.z,r=e*e+t*t+i*i;return r>0&&(r=1/Math.sqrt(r),this.x=e*r,this.y=t*r,this.z=i*r),this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},cross:function(e){var t=this.x,i=this.y,r=this.z,s=e.x,n=e.y,a=e.z;return this.x=i*a-r*n,this.y=r*s-t*a,this.z=t*n-i*s,this},lerp:function(e,t){t===void 0&&(t=0);var i=this.x,r=this.y,s=this.z;return this.x=i+t*(e.x-i),this.y=r+t*(e.y-r),this.z=s+t*(e.z-s),this},applyMatrix3:function(e){var t=this.x,i=this.y,r=this.z,s=e.val;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this},applyMatrix4:function(e){var t=this.x,i=this.y,r=this.z,s=e.val,n=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*n,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*n,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*n,this},transformMat3:function(e){var t=this.x,i=this.y,r=this.z,s=e.val;return this.x=t*s[0]+i*s[3]+r*s[6],this.y=t*s[1]+i*s[4]+r*s[7],this.z=t*s[2]+i*s[5]+r*s[8],this},transformMat4:function(e){var t=this.x,i=this.y,r=this.z,s=e.val;return this.x=s[0]*t+s[4]*i+s[8]*r+s[12],this.y=s[1]*t+s[5]*i+s[9]*r+s[13],this.z=s[2]*t+s[6]*i+s[10]*r+s[14],this},transformCoordinates:function(e){var t=this.x,i=this.y,r=this.z,s=e.val,n=t*s[0]+i*s[4]+r*s[8]+s[12],a=t*s[1]+i*s[5]+r*s[9]+s[13],o=t*s[2]+i*s[6]+r*s[10]+s[14],h=t*s[3]+i*s[7]+r*s[11]+s[15];return this.x=n/h,this.y=a/h,this.z=o/h,this},transformQuat:function(e){var t=this.x,i=this.y,r=this.z,s=e.x,n=e.y,a=e.z,o=e.w,h=o*t+n*r-a*i,u=o*i+a*t-s*r,f=o*r+s*i-n*t,d=-s*t-n*i-a*r;return this.x=h*o+d*-s+u*-a-f*-n,this.y=u*o+d*-n+f*-s-h*-a,this.z=f*o+d*-a+h*-n-u*-s,this},project:function(e){var t=this.x,i=this.y,r=this.z,s=e.val,n=s[0],a=s[1],o=s[2],h=s[3],u=s[4],f=s[5],d=s[6],v=s[7],c=s[8],p=s[9],m=s[10],g=s[11],x=s[12],T=s[13],E=s[14],R=s[15],y=1/(t*h+i*v+r*g+R);return this.x=(t*n+i*u+r*c+x)*y,this.y=(t*a+i*f+r*p+T)*y,this.z=(t*o+i*d+r*m+E)*y,this},projectViewMatrix:function(e,t){return this.applyMatrix4(e).applyMatrix4(t)},unprojectViewMatrix:function(e,t){return this.applyMatrix4(e).applyMatrix4(t)},unproject:function(e,t){var i=e.x,r=e.y,s=e.z,n=e.w,a=this.x-i,o=n-this.y-1-r,h=this.z;return this.x=2*a/s-1,this.y=2*o/n-1,this.z=2*h-1,this.project(t)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});Ze.ZERO=new Ze;Ze.RIGHT=new Ze(1,0,0);Ze.LEFT=new Ze(-1,0,0);Ze.UP=new Ze(0,-1,0);Ze.DOWN=new Ze(0,1,0);Ze.FORWARD=new Ze(0,0,1);Ze.BACK=new Ze(0,0,-1);Ze.ONE=new Ze(1,1,1);Wy.exports=Ze});var hr=l((CUe,Hy)=>{var Ese=_(),id=si(),th=1e-6,ih=new Ese({initialize:function(t){this.val=new Float32Array(16),t?this.copy(t):this.identity()},clone:function(){return new ih(this)},set:function(e){return this.copy(e)},setValues:function(e,t,i,r,s,n,a,o,h,u,f,d,v,c,p,m){var g=this.val;return g[0]=e,g[1]=t,g[2]=i,g[3]=r,g[4]=s,g[5]=n,g[6]=a,g[7]=o,g[8]=h,g[9]=u,g[10]=f,g[11]=d,g[12]=v,g[13]=c,g[14]=p,g[15]=m,this},copy:function(e){var t=e.val;return this.setValues(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},fromArray:function(e){return this.setValues(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(e,t,i){var r=cn.fromQuat(i),s=r.val,n=t.x,a=t.y,o=t.z;return this.setValues(s[0]*n,s[1]*n,s[2]*n,0,s[4]*a,s[5]*a,s[6]*a,0,s[8]*o,s[9]*o,s[10]*o,0,e.x,e.y,e.z,1)},xyz:function(e,t,i){this.identity();var r=this.val;return r[12]=e,r[13]=t,r[14]=i,this},scaling:function(e,t,i){this.zero();var r=this.val;return r[0]=e,r[5]=t,r[10]=i,r[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var e=this.val,t=e[1],i=e[2],r=e[3],s=e[6],n=e[7],a=e[11];return e[1]=e[4],e[2]=e[8],e[3]=e[12],e[4]=t,e[6]=e[9],e[7]=e[13],e[8]=i,e[9]=s,e[11]=e[14],e[12]=r,e[13]=n,e[14]=a,this},getInverse:function(e){return this.copy(e),this.invert()},invert:function(){var e=this.val,t=e[0],i=e[1],r=e[2],s=e[3],n=e[4],a=e[5],o=e[6],h=e[7],u=e[8],f=e[9],d=e[10],v=e[11],c=e[12],p=e[13],m=e[14],g=e[15],x=t*a-i*n,T=t*o-r*n,E=t*h-s*n,R=i*o-r*a,y=i*h-s*a,C=r*h-s*o,S=u*p-f*c,w=u*m-d*c,P=u*g-v*c,A=f*m-d*p,M=f*g-v*p,N=d*g-v*m,O=x*N-T*M+E*A+R*P-y*w+C*S;return O?(O=1/O,this.setValues((a*N-o*M+h*A)*O,(r*M-i*N-s*A)*O,(p*C-m*y+g*R)*O,(d*y-f*C-v*R)*O,(o*P-n*N-h*w)*O,(t*N-r*P+s*w)*O,(m*E-c*C-g*T)*O,(u*C-d*E+v*T)*O,(n*M-a*P+h*S)*O,(i*P-t*M-s*S)*O,(c*y-p*E+g*x)*O,(f*E-u*y-v*x)*O,(a*w-n*A-o*S)*O,(t*A-i*w+r*S)*O,(p*T-c*R-m*x)*O,(u*R-f*T+d*x)*O)):this},adjoint:function(){var e=this.val,t=e[0],i=e[1],r=e[2],s=e[3],n=e[4],a=e[5],o=e[6],h=e[7],u=e[8],f=e[9],d=e[10],v=e[11],c=e[12],p=e[13],m=e[14],g=e[15];return this.setValues(a*(d*g-v*m)-f*(o*g-h*m)+p*(o*v-h*d),-(i*(d*g-v*m)-f*(r*g-s*m)+p*(r*v-s*d)),i*(o*g-h*m)-a*(r*g-s*m)+p*(r*h-s*o),-(i*(o*v-h*d)-a*(r*v-s*d)+f*(r*h-s*o)),-(n*(d*g-v*m)-u*(o*g-h*m)+c*(o*v-h*d)),t*(d*g-v*m)-u*(r*g-s*m)+c*(r*v-s*d),-(t*(o*g-h*m)-n*(r*g-s*m)+c*(r*h-s*o)),t*(o*v-h*d)-n*(r*v-s*d)+u*(r*h-s*o),n*(f*g-v*p)-u*(a*g-h*p)+c*(a*v-h*f),-(t*(f*g-v*p)-u*(i*g-s*p)+c*(i*v-s*f)),t*(a*g-h*p)-n*(i*g-s*p)+c*(i*h-s*a),-(t*(a*v-h*f)-n*(i*v-s*f)+u*(i*h-s*a)),-(n*(f*m-d*p)-u*(a*m-o*p)+c*(a*d-o*f)),t*(f*m-d*p)-u*(i*m-r*p)+c*(i*d-r*f),-(t*(a*m-o*p)-n*(i*m-r*p)+c*(i*o-r*a)),t*(a*d-o*f)-n*(i*d-r*f)+u*(i*o-r*a))},determinant:function(){var e=this.val,t=e[0],i=e[1],r=e[2],s=e[3],n=e[4],a=e[5],o=e[6],h=e[7],u=e[8],f=e[9],d=e[10],v=e[11],c=e[12],p=e[13],m=e[14],g=e[15],x=t*a-i*n,T=t*o-r*n,E=t*h-s*n,R=i*o-r*a,y=i*h-s*a,C=r*h-s*o,S=u*p-f*c,w=u*m-d*c,P=u*g-v*c,A=f*m-d*p,M=f*g-v*p,N=d*g-v*m;return x*N-T*M+E*A+R*P-y*w+C*S},multiply:function(e){var t=this.val,i=t[0],r=t[1],s=t[2],n=t[3],a=t[4],o=t[5],h=t[6],u=t[7],f=t[8],d=t[9],v=t[10],c=t[11],p=t[12],m=t[13],g=t[14],x=t[15],T=e.val,E=T[0],R=T[1],y=T[2],C=T[3];return t[0]=E*i+R*a+y*f+C*p,t[1]=E*r+R*o+y*d+C*m,t[2]=E*s+R*h+y*v+C*g,t[3]=E*n+R*u+y*c+C*x,E=T[4],R=T[5],y=T[6],C=T[7],t[4]=E*i+R*a+y*f+C*p,t[5]=E*r+R*o+y*d+C*m,t[6]=E*s+R*h+y*v+C*g,t[7]=E*n+R*u+y*c+C*x,E=T[8],R=T[9],y=T[10],C=T[11],t[8]=E*i+R*a+y*f+C*p,t[9]=E*r+R*o+y*d+C*m,t[10]=E*s+R*h+y*v+C*g,t[11]=E*n+R*u+y*c+C*x,E=T[12],R=T[13],y=T[14],C=T[15],t[12]=E*i+R*a+y*f+C*p,t[13]=E*r+R*o+y*d+C*m,t[14]=E*s+R*h+y*v+C*g,t[15]=E*n+R*u+y*c+C*x,this},multiplyLocal:function(e){var t=this.val,i=e.val;return this.setValues(t[0]*i[0]+t[1]*i[4]+t[2]*i[8]+t[3]*i[12],t[0]*i[1]+t[1]*i[5]+t[2]*i[9]+t[3]*i[13],t[0]*i[2]+t[1]*i[6]+t[2]*i[10]+t[3]*i[14],t[0]*i[3]+t[1]*i[7]+t[2]*i[11]+t[3]*i[15],t[4]*i[0]+t[5]*i[4]+t[6]*i[8]+t[7]*i[12],t[4]*i[1]+t[5]*i[5]+t[6]*i[9]+t[7]*i[13],t[4]*i[2]+t[5]*i[6]+t[6]*i[10]+t[7]*i[14],t[4]*i[3]+t[5]*i[7]+t[6]*i[11]+t[7]*i[15],t[8]*i[0]+t[9]*i[4]+t[10]*i[8]+t[11]*i[12],t[8]*i[1]+t[9]*i[5]+t[10]*i[9]+t[11]*i[13],t[8]*i[2]+t[9]*i[6]+t[10]*i[10]+t[11]*i[14],t[8]*i[3]+t[9]*i[7]+t[10]*i[11]+t[11]*i[15],t[12]*i[0]+t[13]*i[4]+t[14]*i[8]+t[15]*i[12],t[12]*i[1]+t[13]*i[5]+t[14]*i[9]+t[15]*i[13],t[12]*i[2]+t[13]*i[6]+t[14]*i[10]+t[15]*i[14],t[12]*i[3]+t[13]*i[7]+t[14]*i[11]+t[15]*i[15])},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var i=e.val,r=t.val,s=i[0],n=i[4],a=i[8],o=i[12],h=i[1],u=i[5],f=i[9],d=i[13],v=i[2],c=i[6],p=i[10],m=i[14],g=i[3],x=i[7],T=i[11],E=i[15],R=r[0],y=r[4],C=r[8],S=r[12],w=r[1],P=r[5],A=r[9],M=r[13],N=r[2],O=r[6],D=r[10],b=r[14],q=r[3],G=r[7],L=r[11],F=r[15];return this.setValues(s*R+n*w+a*N+o*q,h*R+u*w+f*N+d*q,v*R+c*w+p*N+m*q,g*R+x*w+T*N+E*q,s*y+n*P+a*O+o*G,h*y+u*P+f*O+d*G,v*y+c*P+p*O+m*G,g*y+x*P+T*O+E*G,s*C+n*A+a*D+o*L,h*C+u*A+f*D+d*L,v*C+c*A+p*D+m*L,g*C+x*A+T*D+E*L,s*S+n*M+a*b+o*F,h*S+u*M+f*b+d*F,v*S+c*M+p*b+m*F,g*S+x*M+T*b+E*F)},translate:function(e){return this.translateXYZ(e.x,e.y,e.z)},translateXYZ:function(e,t,i){var r=this.val;return r[12]=r[0]*e+r[4]*t+r[8]*i+r[12],r[13]=r[1]*e+r[5]*t+r[9]*i+r[13],r[14]=r[2]*e+r[6]*t+r[10]*i+r[14],r[15]=r[3]*e+r[7]*t+r[11]*i+r[15],this},scale:function(e){return this.scaleXYZ(e.x,e.y,e.z)},scaleXYZ:function(e,t,i){var r=this.val;return r[0]=r[0]*e,r[1]=r[1]*e,r[2]=r[2]*e,r[3]=r[3]*e,r[4]=r[4]*t,r[5]=r[5]*t,r[6]=r[6]*t,r[7]=r[7]*t,r[8]=r[8]*i,r[9]=r[9]*i,r[10]=r[10]*i,r[11]=r[11]*i,this},makeRotationAxis:function(e,t){var i=Math.cos(t),r=Math.sin(t),s=1-i,n=e.x,a=e.y,o=e.z,h=s*n,u=s*a;return this.setValues(h*n+i,h*a-r*o,h*o+r*a,0,h*a+r*o,u*a+i,u*o-r*n,0,h*o-r*a,u*o+r*n,s*o*o+i,0,0,0,0,1)},rotate:function(e,t){var i=this.val,r=t.x,s=t.y,n=t.z,a=Math.sqrt(r*r+s*s+n*n);if(Math.abs(a)<th)return this;a=1/a,r*=a,s*=a,n*=a;var o=Math.sin(e),h=Math.cos(e),u=1-h,f=i[0],d=i[1],v=i[2],c=i[3],p=i[4],m=i[5],g=i[6],x=i[7],T=i[8],E=i[9],R=i[10],y=i[11],C=i[12],S=i[13],w=i[14],P=i[15],A=r*r*u+h,M=s*r*u+n*o,N=n*r*u-s*o,O=r*s*u-n*o,D=s*s*u+h,b=n*s*u+r*o,q=r*n*u+s*o,G=s*n*u-r*o,L=n*n*u+h;return this.setValues(f*A+p*M+T*N,d*A+m*M+E*N,v*A+g*M+R*N,c*A+x*M+y*N,f*O+p*D+T*b,d*O+m*D+E*b,v*O+g*D+R*b,c*O+x*D+y*b,f*q+p*G+T*L,d*q+m*G+E*L,v*q+g*G+R*L,c*q+x*G+y*L,C,S,w,P)},rotateX:function(e){var t=this.val,i=Math.sin(e),r=Math.cos(e),s=t[4],n=t[5],a=t[6],o=t[7],h=t[8],u=t[9],f=t[10],d=t[11];return t[4]=s*r+h*i,t[5]=n*r+u*i,t[6]=a*r+f*i,t[7]=o*r+d*i,t[8]=h*r-s*i,t[9]=u*r-n*i,t[10]=f*r-a*i,t[11]=d*r-o*i,this},rotateY:function(e){var t=this.val,i=Math.sin(e),r=Math.cos(e),s=t[0],n=t[1],a=t[2],o=t[3],h=t[8],u=t[9],f=t[10],d=t[11];return t[0]=s*r-h*i,t[1]=n*r-u*i,t[2]=a*r-f*i,t[3]=o*r-d*i,t[8]=s*i+h*r,t[9]=n*i+u*r,t[10]=a*i+f*r,t[11]=o*i+d*r,this},rotateZ:function(e){var t=this.val,i=Math.sin(e),r=Math.cos(e),s=t[0],n=t[1],a=t[2],o=t[3],h=t[4],u=t[5],f=t[6],d=t[7];return t[0]=s*r+h*i,t[1]=n*r+u*i,t[2]=a*r+f*i,t[3]=o*r+d*i,t[4]=h*r-s*i,t[5]=u*r-n*i,t[6]=f*r-a*i,t[7]=d*r-o*i,this},fromRotationTranslation:function(e,t){var i=e.x,r=e.y,s=e.z,n=e.w,a=i+i,o=r+r,h=s+s,u=i*a,f=i*o,d=i*h,v=r*o,c=r*h,p=s*h,m=n*a,g=n*o,x=n*h;return this.setValues(1-(v+p),f+x,d-g,0,f-x,1-(u+p),c+m,0,d+g,c-m,1-(u+v),0,t.x,t.y,t.z,1)},fromQuat:function(e){var t=e.x,i=e.y,r=e.z,s=e.w,n=t+t,a=i+i,o=r+r,h=t*n,u=t*a,f=t*o,d=i*a,v=i*o,c=r*o,p=s*n,m=s*a,g=s*o;return this.setValues(1-(d+c),u+g,f-m,0,u-g,1-(h+c),v+p,0,f+m,v-p,1-(h+d),0,0,0,0,1)},frustum:function(e,t,i,r,s,n){var a=1/(t-e),o=1/(r-i),h=1/(s-n);return this.setValues(s*2*a,0,0,0,0,s*2*o,0,0,(t+e)*a,(r+i)*o,(n+s)*h,-1,0,0,n*s*2*h,0)},perspective:function(e,t,i,r){var s=1/Math.tan(e/2),n=1/(i-r);return this.setValues(s/t,0,0,0,0,s,0,0,0,0,(r+i)*n,-1,0,0,2*r*i*n,0)},perspectiveLH:function(e,t,i,r){return this.setValues(2*i/e,0,0,0,0,2*i/t,0,0,0,0,-r/(i-r),1,0,0,i*r/(i-r),0)},ortho:function(e,t,i,r,s,n){var a=e-t,o=i-r,h=s-n;return a=a===0?a:1/a,o=o===0?o:1/o,h=h===0?h:1/h,this.setValues(-2*a,0,0,0,0,-2*o,0,0,0,0,2*h,0,(e+t)*a,(r+i)*o,(n+s)*h,1)},lookAtRH:function(e,t,i){var r=this.val;return kt.subVectors(e,t),kt.getLengthSquared()===0&&(kt.z=1),kt.normalize(),Nr.crossVectors(i,kt),Nr.getLengthSquared()===0&&(Math.abs(i.z)===1?kt.x+=1e-4:kt.z+=1e-4,kt.normalize(),Nr.crossVectors(i,kt)),Nr.normalize(),rh.crossVectors(kt,Nr),r[0]=Nr.x,r[1]=Nr.y,r[2]=Nr.z,r[4]=rh.x,r[5]=rh.y,r[6]=rh.z,r[8]=kt.x,r[9]=kt.y,r[10]=kt.z,this},lookAt:function(e,t,i){var r=e.x,s=e.y,n=e.z,a=i.x,o=i.y,h=i.z,u=t.x,f=t.y,d=t.z;if(Math.abs(r-u)<th&&Math.abs(s-f)<th&&Math.abs(n-d)<th)return this.identity();var v=r-u,c=s-f,p=n-d,m=1/Math.sqrt(v*v+c*c+p*p);v*=m,c*=m,p*=m;var g=o*p-h*c,x=h*v-a*p,T=a*c-o*v;m=Math.sqrt(g*g+x*x+T*T),m?(m=1/m,g*=m,x*=m,T*=m):(g=0,x=0,T=0);var E=c*T-p*x,R=p*g-v*T,y=v*x-c*g;return m=Math.sqrt(E*E+R*R+y*y),m?(m=1/m,E*=m,R*=m,y*=m):(E=0,R=0,y=0),this.setValues(g,E,v,0,x,R,c,0,T,y,p,0,-(g*r+x*s+T*n),-(E*r+R*s+y*n),-(v*r+c*s+p*n),1)},yawPitchRoll:function(e,t,i){this.zero(),cn.zero(),Oa.zero();var r=this.val,s=cn.val,n=Oa.val,a=Math.sin(i),o=Math.cos(i);return r[10]=1,r[15]=1,r[0]=o,r[1]=a,r[4]=-a,r[5]=o,a=Math.sin(t),o=Math.cos(t),s[0]=1,s[15]=1,s[5]=o,s[10]=o,s[9]=-a,s[6]=a,a=Math.sin(e),o=Math.cos(e),n[5]=1,n[15]=1,n[0]=o,n[2]=-a,n[8]=a,n[10]=o,this.multiplyLocal(cn),this.multiplyLocal(Oa),this},setWorldMatrix:function(e,t,i,r,s){return this.yawPitchRoll(e.y,e.x,e.z),cn.scaling(i.x,i.y,i.z),Oa.xyz(t.x,t.y,t.z),this.multiplyLocal(cn),this.multiplyLocal(Oa),r&&this.multiplyLocal(r),s&&this.multiplyLocal(s),this},multiplyToMat4:function(e,t){var i=this.val,r=e.val,s=i[0],n=i[1],a=i[2],o=i[3],h=i[4],u=i[5],f=i[6],d=i[7],v=i[8],c=i[9],p=i[10],m=i[11],g=i[12],x=i[13],T=i[14],E=i[15],R=r[0],y=r[1],C=r[2],S=r[3],w=r[4],P=r[5],A=r[6],M=r[7],N=r[8],O=r[9],D=r[10],b=r[11],q=r[12],G=r[13],L=r[14],F=r[15];return t.setValues(R*s+y*h+C*v+S*g,y*n+y*u+C*c+S*x,C*a+y*f+C*p+S*T,S*o+y*d+C*m+S*E,w*s+P*h+A*v+M*g,w*n+P*u+A*c+M*x,w*a+P*f+A*p+M*T,w*o+P*d+A*m+M*E,N*s+O*h+D*v+b*g,N*n+O*u+D*c+b*x,N*a+O*f+D*p+b*T,N*o+O*d+D*m+b*E,q*s+G*h+L*v+F*g,q*n+G*u+L*c+F*x,q*a+G*f+L*p+F*T,q*o+G*d+L*m+F*E)},fromRotationXYTranslation:function(e,t,i){var r=t.x,s=t.y,n=t.z,a=Math.sin(e.x),o=Math.cos(e.x),h=Math.sin(e.y),u=Math.cos(e.y),f=r,d=s,v=n,c=-a,p=0-c*h,m=0-o*h,g=c*u,x=o*u;return i||(f=u*r+h*n,d=p*r+o*s+g*n,v=m*r+a*s+x*n),this.setValues(u,p,m,0,0,o,a,0,h,g,x,0,f,d,v,1)},getMaxScaleOnAxis:function(){var e=this.val,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}}),cn=new ih,Oa=new ih,Nr=new id,rh=new id,kt=new id;Hy.exports=ih});var B=l((RUe,jy)=>{var yse=function(){};jy.exports=yse});var Jy=l((_Ue,Zy)=>{var pn=Pe(),Sse=_(),Cse=hr(),Rse=B(),Ky=new Cse,rd=new Sse({initialize:function e(t,i,r,s){t===void 0&&(t=0),i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=e.DefaultOrder),this._x=t,this._y=i,this._z=r,this._order=s,this.onChangeCallback=Rse},x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(e){this._order=e,this.onChangeCallback(this)}},set:function(e,t,i,r){return r===void 0&&(r=this._order),this._x=e,this._y=t,this._z=i,this._order=r,this.onChangeCallback(this),this},copy:function(e){return this.set(e.x,e.y,e.z,e.order)},setFromQuaternion:function(e,t,i){return t===void 0&&(t=this._order),i===void 0&&(i=!1),Ky.fromQuat(e),this.setFromRotationMatrix(Ky,t,i)},setFromRotationMatrix:function(e,t,i){t===void 0&&(t=this._order),i===void 0&&(i=!1);var r=e.val,s=r[0],n=r[4],a=r[8],o=r[1],h=r[5],u=r[9],f=r[2],d=r[6],v=r[10],c=0,p=0,m=0,g=.99999;switch(t){case"XYZ":{p=Math.asin(pn(a,-1,1)),Math.abs(a)<g?(c=Math.atan2(-u,v),m=Math.atan2(-n,s)):c=Math.atan2(d,h);break}case"YXZ":{c=Math.asin(-pn(u,-1,1)),Math.abs(u)<g?(p=Math.atan2(a,v),m=Math.atan2(o,h)):p=Math.atan2(-f,s);break}case"ZXY":{c=Math.asin(pn(d,-1,1)),Math.abs(d)<g?(p=Math.atan2(-f,v),m=Math.atan2(-n,h)):m=Math.atan2(o,s);break}case"ZYX":{p=Math.asin(-pn(f,-1,1)),Math.abs(f)<g?(c=Math.atan2(d,v),m=Math.atan2(o,s)):m=Math.atan2(-n,h);break}case"YZX":{m=Math.asin(pn(o,-1,1)),Math.abs(o)<g?(c=Math.atan2(-u,h),p=Math.atan2(-f,s)):p=Math.atan2(a,v);break}case"XZY":{m=Math.asin(-pn(n,-1,1)),Math.abs(n)<g?(c=Math.atan2(d,h),p=Math.atan2(a,s)):c=Math.atan2(-u,v);break}}return this._x=c,this._y=p,this._z=m,this._order=t,i&&this.onChangeCallback(this),this}});rd.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"];rd.DefaultOrder="XYZ";Zy.exports=rd});var $y=l((wUe,Qy)=>{var _se=function(e,t,i){t===void 0&&(t=0),i===void 0&&(i=10);var r=Math.pow(i,-t);return Math.floor(e*r)/r};Qy.exports=_se});var mn=l((PUe,eS)=>{var wse=Pe(),Pse=function(e,t,i){return e=wse(e,0,1),(i-t)*e+t};eS.exports=Pse});var iS=l((AUe,tS)=>{var Ase=function(e,t){return e/t/1e3};tS.exports=Ase});var sS=l((bUe,rS)=>{var bse=function(e){return e==parseFloat(e)?!(e%2):void 0};rS.exports=bse});var aS=l((MUe,nS)=>{var Mse=function(e){return e===parseFloat(e)?!(e%2):void 0};nS.exports=Mse});var hS=l((qUe,oS)=>{var qse=function(e,t,i){return Math.min(e+t,i)};oS.exports=qse});var lS=l((OUe,uS)=>{var Ose=function(e){var t=e.length;if(t===0)return 0;e.sort(function(r,s){return r-s});var i=Math.floor(t/2);return t%2==0?(e[i]+e[i-1])/2:e[i]};uS.exports=Ose});var dS=l((LUe,fS)=>{var Lse=function(e,t,i){return Math.max(e-t,i)};fS.exports=Lse});var cS=l((FUe,vS)=>{var Fse=function(e,t,i,r){i===void 0&&(i=t+1);var s=(e-t)/(i-t);return s>1?r!==void 0?(s=(r-e)/(r-i),s<0&&(s=0)):s=1:s<0&&(s=0),s};vS.exports=Fse});var mS=l((NUe,pS)=>{var Nse=we(),Gse=function(e){return e*Nse.RAD_TO_DEG};pS.exports=Gse});var xS=l((GUe,gS)=>{var Dse=function(e,t){t===void 0&&(t=1);var i=Math.random()*2*Math.PI;return e.x=Math.cos(i)*t,e.y=Math.sin(i)*t,e};gS.exports=Dse});var ES=l((DUe,TS)=>{var Ise=function(e,t){t===void 0&&(t=1);var i=Math.random()*2*Math.PI,r=Math.random()*2-1,s=Math.sqrt(1-r*r)*t;return e.x=Math.cos(i)*s,e.y=Math.sin(i)*s,e.z=r*t,e};TS.exports=Ise});var SS=l((IUe,yS)=>{var Bse=function(e,t){return t===void 0&&(t=1),e.x=(Math.random()*2-1)*t,e.y=(Math.random()*2-1)*t,e.z=(Math.random()*2-1)*t,e.w=(Math.random()*2-1)*t,e};yS.exports=Bse});var RS=l((BUe,CS)=>{var Vse=function(e,t){var i=e.x,r=e.y;return e.x=i*Math.cos(t)-r*Math.sin(t),e.y=i*Math.sin(t)+r*Math.cos(t),e};CS.exports=Vse});var sd=l((VUe,_S)=>{var Use=function(e,t,i,r){var s=Math.cos(r),n=Math.sin(r),a=e.x-t,o=e.y-i;return e.x=a*s-o*n+t,e.y=a*n+o*s+i,e};_S.exports=Use});var sh=l((UUe,wS)=>{var kse=function(e,t,i,r,s){var n=r+Math.atan2(e.y-i,e.x-t);return e.x=t+s*Math.cos(n),e.y=i+s*Math.sin(n),e};wS.exports=kse});var AS=l((kUe,PS)=>{var zse=function(e,t,i,r,s){return e.x=t+s*Math.cos(r),e.y=i+s*Math.sin(r),e};PS.exports=zse});var nd=l((zUe,bS)=>{var Xse=function(e){return e>0?Math.ceil(e):Math.floor(e)};bS.exports=Xse});var qS=l((XUe,MS)=>{var Yse=function(e,t,i){t===void 0&&(t=0),i===void 0&&(i=10);var r=Math.pow(i,-t);return Math.round(e*r)/r};MS.exports=Yse});var LS=l((YUe,OS)=>{var Wse=function(e,t,i,r){t===void 0&&(t=1),i===void 0&&(i=1),r===void 0&&(r=1),r*=Math.PI/e;for(var s=[],n=[],a=0;a<e;a++)i-=t*r,t+=i*r,s[a]=i,n[a]=t;return{sin:n,cos:s,length:e}};OS.exports=Wse});var le=l((WUe,NS)=>{var Hse=_(),FS=Zo(),Mt=new Hse({initialize:function(t,i){this.x=0,this.y=0,typeof t=="object"?(this.x=t.x||0,this.y=t.y||0):(i===void 0&&(i=t),this.x=t||0,this.y=i||0)},clone:function(){return new Mt(this.x,this.y)},copy:function(e){return this.x=e.x||0,this.y=e.y||0,this},setFromObject:function(e){return this.x=e.x||0,this.y=e.y||0,this},set:function(e,t){return t===void 0&&(t=e),this.x=e,this.y=t,this},setTo:function(e,t){return this.set(e,t)},setToPolar:function(e,t){return t==null&&(t=1),this.x=Math.cos(e)*t,this.y=Math.sin(e)*t,this},equals:function(e){return this.x===e.x&&this.y===e.y},fuzzyEquals:function(e,t){return FS(this.x,e.x,t)&&FS(this.y,e.y,t)},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},setAngle:function(e){return this.setToPolar(e,this.length())},add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.x-=e.x,this.y-=e.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},scale:function(e){return isFinite(e)?(this.x*=e,this.y*=e):(this.x=0,this.y=0),this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(e){var t=e.x-this.x,i=e.y-this.y;return Math.sqrt(t*t+i*i)},distanceSq:function(e){var t=e.x-this.x,i=e.y-this.y;return t*t+i*i},length:function(){var e=this.x,t=this.y;return Math.sqrt(e*e+t*t)},setLength:function(e){return this.normalize().scale(e)},lengthSq:function(){var e=this.x,t=this.y;return e*e+t*t},normalize:function(){var e=this.x,t=this.y,i=e*e+t*t;return i>0&&(i=1/Math.sqrt(i),this.x=e*i,this.y=t*i),this},normalizeRightHand:function(){var e=this.x;return this.x=this.y*-1,this.y=e,this},normalizeLeftHand:function(){var e=this.x;return this.x=this.y,this.y=e*-1,this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lerp:function(e,t){t===void 0&&(t=0);var i=this.x,r=this.y;return this.x=i+t*(e.x-i),this.y=r+t*(e.y-r),this},transformMat3:function(e){var t=this.x,i=this.y,r=e.val;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this},transformMat4:function(e){var t=this.x,i=this.y,r=e.val;return this.x=r[0]*t+r[4]*i+r[12],this.y=r[1]*t+r[5]*i+r[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(e){var t=this.length();return t&&t>e&&this.scale(e/t),this},reflect:function(e){return e=e.clone().normalize(),this.subtract(e.scale(2*this.dot(e)))},mirror:function(e){return this.reflect(e).negate()},rotate:function(e){var t=Math.cos(e),i=Math.sin(e);return this.set(t*this.x-i*this.y,i*this.x+t*this.y)}});Mt.ZERO=new Mt;Mt.RIGHT=new Mt(1,0);Mt.LEFT=new Mt(-1,0);Mt.UP=new Mt(0,-1);Mt.DOWN=new Mt(0,1);Mt.ONE=new Mt(1,1);NS.exports=Mt});var DS=l((HUe,GS)=>{var jse=le(),Kse=function(e,t,i,r){r===void 0&&(r=new jse);var s=0,n=0,a=t*i;return e>0&&e<=a&&(e>t-1?(n=Math.floor(e/t),s=e-n*t):s=e),r.set(s,n)};GS.exports=Kse});var nh=l((jUe,IS)=>{var Zse=le(),Jse=function(e,t,i,r,s,n,a,o){o===void 0&&(o=new Zse);var h=Math.sin(s),u=Math.cos(s),f=u*n,d=h*n,v=-h*a,c=u*a,p=1/(f*c+v*-d);return o.x=c*p*e+-v*p*t+(r*v-i*c)*p,o.y=f*p*t+-d*p*e+(-r*f+i*d)*p,o};IS.exports=Jse});var VS=l((KUe,BS)=>{var Qse=function(e,t,i){return Math.abs(e-t)<=i};BS.exports=Qse});var La=l((ZUe,US)=>{var $se=_(),lt=new $se({initialize:function(t,i,r,s){this.x=0,this.y=0,this.z=0,this.w=0,typeof t=="object"?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=i||0,this.z=r||0,this.w=s||0)},clone:function(){return new lt(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z||0,this.w=e.w||0,this},equals:function(e){return this.x===e.x&&this.y===e.y&&this.z===e.z&&this.w===e.w},set:function(e,t,i,r){return typeof e=="object"?(this.x=e.x||0,this.y=e.y||0,this.z=e.z||0,this.w=e.w||0):(this.x=e||0,this.y=t||0,this.z=i||0,this.w=r||0),this},add:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z||0,this.w+=e.w||0,this},subtract:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z||0,this.w-=e.w||0,this},scale:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},length:function(){var e=this.x,t=this.y,i=this.z,r=this.w;return Math.sqrt(e*e+t*t+i*i+r*r)},lengthSq:function(){var e=this.x,t=this.y,i=this.z,r=this.w;return e*e+t*t+i*i+r*r},normalize:function(){var e=this.x,t=this.y,i=this.z,r=this.w,s=e*e+t*t+i*i+r*r;return s>0&&(s=1/Math.sqrt(s),this.x=e*s,this.y=t*s,this.z=i*s,this.w=r*s),this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lerp:function(e,t){t===void 0&&(t=0);var i=this.x,r=this.y,s=this.z,n=this.w;return this.x=i+t*(e.x-i),this.y=r+t*(e.y-r),this.z=s+t*(e.z-s),this.w=n+t*(e.w-n),this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z||1,this.w*=e.w||1,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z||1,this.w/=e.w||1,this},distance:function(e){var t=e.x-this.x,i=e.y-this.y,r=e.z-this.z||0,s=e.w-this.w||0;return Math.sqrt(t*t+i*i+r*r+s*s)},distanceSq:function(e){var t=e.x-this.x,i=e.y-this.y,r=e.z-this.z||0,s=e.w-this.w||0;return t*t+i*i+r*r+s*s},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(e){var t=this.x,i=this.y,r=this.z,s=this.w,n=e.val;return this.x=n[0]*t+n[4]*i+n[8]*r+n[12]*s,this.y=n[1]*t+n[5]*i+n[9]*r+n[13]*s,this.z=n[2]*t+n[6]*i+n[10]*r+n[14]*s,this.w=n[3]*t+n[7]*i+n[11]*r+n[15]*s,this},transformQuat:function(e){var t=this.x,i=this.y,r=this.z,s=e.x,n=e.y,a=e.z,o=e.w,h=o*t+n*r-a*i,u=o*i+a*t-s*r,f=o*r+s*i-n*t,d=-s*t-n*i-a*r;return this.x=h*o+d*-s+u*-a-f*-n,this.y=u*o+d*-n+f*-s-h*-a,this.z=f*o+d*-a+h*-n-u*-s,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});lt.prototype.sub=lt.prototype.subtract;lt.prototype.mul=lt.prototype.multiply;lt.prototype.div=lt.prototype.divide;lt.prototype.dist=lt.prototype.distance;lt.prototype.distSq=lt.prototype.distanceSq;lt.prototype.len=lt.prototype.length;lt.prototype.lenSq=lt.prototype.lengthSq;US.exports=lt});var ad=l((JUe,zS)=>{var ene=_(),kS=new ene({initialize:function(t){this.val=new Float32Array(9),t?this.copy(t):this.identity()},clone:function(){return new kS(this)},set:function(e){return this.copy(e)},copy:function(e){var t=this.val,i=e.val;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this},fromMat4:function(e){var t=e.val,i=this.val;return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[4],i[4]=t[5],i[5]=t[6],i[6]=t[8],i[7]=t[9],i[8]=t[10],this},fromArray:function(e){var t=this.val;return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],this},identity:function(){var e=this.val;return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,this},transpose:function(){var e=this.val,t=e[1],i=e[2],r=e[5];return e[1]=e[3],e[2]=e[6],e[3]=t,e[5]=e[7],e[6]=i,e[7]=r,this},invert:function(){var e=this.val,t=e[0],i=e[1],r=e[2],s=e[3],n=e[4],a=e[5],o=e[6],h=e[7],u=e[8],f=u*n-a*h,d=-u*s+a*o,v=h*s-n*o,c=t*f+i*d+r*v;return c?(c=1/c,e[0]=f*c,e[1]=(-u*i+r*h)*c,e[2]=(a*i-r*n)*c,e[3]=d*c,e[4]=(u*t-r*o)*c,e[5]=(-a*t+r*s)*c,e[6]=v*c,e[7]=(-h*t+i*o)*c,e[8]=(n*t-i*s)*c,this):null},adjoint:function(){var e=this.val,t=e[0],i=e[1],r=e[2],s=e[3],n=e[4],a=e[5],o=e[6],h=e[7],u=e[8];return e[0]=n*u-a*h,e[1]=r*h-i*u,e[2]=i*a-r*n,e[3]=a*o-s*u,e[4]=t*u-r*o,e[5]=r*s-t*a,e[6]=s*h-n*o,e[7]=i*o-t*h,e[8]=t*n-i*s,this},determinant:function(){var e=this.val,t=e[0],i=e[1],r=e[2],s=e[3],n=e[4],a=e[5],o=e[6],h=e[7],u=e[8];return t*(u*n-a*h)+i*(-u*s+a*o)+r*(h*s-n*o)},multiply:function(e){var t=this.val,i=t[0],r=t[1],s=t[2],n=t[3],a=t[4],o=t[5],h=t[6],u=t[7],f=t[8],d=e.val,v=d[0],c=d[1],p=d[2],m=d[3],g=d[4],x=d[5],T=d[6],E=d[7],R=d[8];return t[0]=v*i+c*n+p*h,t[1]=v*r+c*a+p*u,t[2]=v*s+c*o+p*f,t[3]=m*i+g*n+x*h,t[4]=m*r+g*a+x*u,t[5]=m*s+g*o+x*f,t[6]=T*i+E*n+R*h,t[7]=T*r+E*a+R*u,t[8]=T*s+E*o+R*f,this},translate:function(e){var t=this.val,i=e.x,r=e.y;return t[6]=i*t[0]+r*t[3]+t[6],t[7]=i*t[1]+r*t[4]+t[7],t[8]=i*t[2]+r*t[5]+t[8],this},rotate:function(e){var t=this.val,i=t[0],r=t[1],s=t[2],n=t[3],a=t[4],o=t[5],h=Math.sin(e),u=Math.cos(e);return t[0]=u*i+h*n,t[1]=u*r+h*a,t[2]=u*s+h*o,t[3]=u*n-h*i,t[4]=u*a-h*r,t[5]=u*o-h*s,this},scale:function(e){var t=this.val,i=e.x,r=e.y;return t[0]=i*t[0],t[1]=i*t[1],t[2]=i*t[2],t[3]=r*t[3],t[4]=r*t[4],t[5]=r*t[5],this},fromQuat:function(e){var t=e.x,i=e.y,r=e.z,s=e.w,n=t+t,a=i+i,o=r+r,h=t*n,u=t*a,f=t*o,d=i*a,v=i*o,c=r*o,p=s*n,m=s*a,g=s*o,x=this.val;return x[0]=1-(d+c),x[3]=u+g,x[6]=f-m,x[1]=u-g,x[4]=1-(h+c),x[7]=v+p,x[2]=f+m,x[5]=v-p,x[8]=1-(h+d),this},normalFromMat4:function(e){var t=e.val,i=this.val,r=t[0],s=t[1],n=t[2],a=t[3],o=t[4],h=t[5],u=t[6],f=t[7],d=t[8],v=t[9],c=t[10],p=t[11],m=t[12],g=t[13],x=t[14],T=t[15],E=r*h-s*o,R=r*u-n*o,y=r*f-a*o,C=s*u-n*h,S=s*f-a*h,w=n*f-a*u,P=d*g-v*m,A=d*x-c*m,M=d*T-p*m,N=v*x-c*g,O=v*T-p*g,D=c*T-p*x,b=E*D-R*O+y*N+C*M-S*A+w*P;return b?(b=1/b,i[0]=(h*D-u*O+f*N)*b,i[1]=(u*M-o*D-f*A)*b,i[2]=(o*O-h*M+f*P)*b,i[3]=(n*O-s*D-a*N)*b,i[4]=(r*D-n*M+a*A)*b,i[5]=(s*M-r*O-a*P)*b,i[6]=(g*w-x*S+T*C)*b,i[7]=(x*y-m*w-T*R)*b,i[8]=(m*S-g*y+T*E)*b,this):null}});zS.exports=kS});var hd=l((QUe,HS)=>{var tne=_(),ine=ad(),rne=B(),od=si(),XS=1e-6,YS=new Int8Array([1,2,0]),gn=new Float32Array([0,0,0]),sne=new od(1,0,0),nne=new od(0,1,0),Gr=new od,WS=new ine,ane=new tne({initialize:function(t,i,r,s){this.onChangeCallback=rne,this.set(t,i,r,s)},x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(e){this._w=e,this.onChangeCallback(this)}},copy:function(e){return this.set(e)},set:function(e,t,i,r,s){return s===void 0&&(s=!0),typeof e=="object"?(this._x=e.x||0,this._y=e.y||0,this._z=e.z||0,this._w=e.w||0):(this._x=e||0,this._y=t||0,this._z=i||0,this._w=r||0),s&&this.onChangeCallback(this),this},add:function(e){return this._x+=e.x,this._y+=e.y,this._z+=e.z,this._w+=e.w,this.onChangeCallback(this),this},subtract:function(e){return this._x-=e.x,this._y-=e.y,this._z-=e.z,this._w-=e.w,this.onChangeCallback(this),this},scale:function(e){return this._x*=e,this._y*=e,this._z*=e,this._w*=e,this.onChangeCallback(this),this},length:function(){var e=this.x,t=this.y,i=this.z,r=this.w;return Math.sqrt(e*e+t*t+i*i+r*r)},lengthSq:function(){var e=this.x,t=this.y,i=this.z,r=this.w;return e*e+t*t+i*i+r*r},normalize:function(){var e=this.x,t=this.y,i=this.z,r=this.w,s=e*e+t*t+i*i+r*r;return s>0&&(s=1/Math.sqrt(s),this._x=e*s,this._y=t*s,this._z=i*s,this._w=r*s),this.onChangeCallback(this),this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lerp:function(e,t){t===void 0&&(t=0);var i=this.x,r=this.y,s=this.z,n=this.w;return this.set(i+t*(e.x-i),r+t*(e.y-r),s+t*(e.z-s),n+t*(e.w-n))},rotationTo:function(e,t){var i=e.x*t.x+e.y*t.y+e.z*t.z;return i<-.999999?(Gr.copy(sne).cross(e).length()<XS&&Gr.copy(nne).cross(e),Gr.normalize(),this.setAxisAngle(Gr,Math.PI)):i>.999999?this.set(0,0,0,1):(Gr.copy(e).cross(t),this._x=Gr.x,this._y=Gr.y,this._z=Gr.z,this._w=1+i,this.normalize())},setAxes:function(e,t,i){var r=WS.val;return r[0]=t.x,r[3]=t.y,r[6]=t.z,r[1]=i.x,r[4]=i.y,r[7]=i.z,r[2]=-e.x,r[5]=-e.y,r[8]=-e.z,this.fromMat3(WS).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(e,t){t=t*.5;var i=Math.sin(t);return this.set(i*e.x,i*e.y,i*e.z,Math.cos(t))},multiply:function(e){var t=this.x,i=this.y,r=this.z,s=this.w,n=e.x,a=e.y,o=e.z,h=e.w;return this.set(t*h+s*n+i*o-r*a,i*h+s*a+r*n-t*o,r*h+s*o+t*a-i*n,s*h-t*n-i*a-r*o)},slerp:function(e,t){var i=this.x,r=this.y,s=this.z,n=this.w,a=e.x,o=e.y,h=e.z,u=e.w,f=i*a+r*o+s*h+n*u;f<0&&(f=-f,a=-a,o=-o,h=-h,u=-u);var d=1-t,v=t;if(1-f>XS){var c=Math.acos(f),p=Math.sin(c);d=Math.sin((1-t)*c)/p,v=Math.sin(t*c)/p}return this.set(d*i+v*a,d*r+v*o,d*s+v*h,d*n+v*u)},invert:function(){var e=this.x,t=this.y,i=this.z,r=this.w,s=e*e+t*t+i*i+r*r,n=s?1/s:0;return this.set(-e*n,-t*n,-i*n,r*n)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(e){e*=.5;var t=this.x,i=this.y,r=this.z,s=this.w,n=Math.sin(e),a=Math.cos(e);return this.set(t*a+s*n,i*a+r*n,r*a-i*n,s*a-t*n)},rotateY:function(e){e*=.5;var t=this.x,i=this.y,r=this.z,s=this.w,n=Math.sin(e),a=Math.cos(e);return this.set(t*a-r*n,i*a+s*n,r*a+t*n,s*a-i*n)},rotateZ:function(e){e*=.5;var t=this.x,i=this.y,r=this.z,s=this.w,n=Math.sin(e),a=Math.cos(e);return this.set(t*a+i*n,i*a-t*n,r*a+s*n,s*a-r*n)},calculateW:function(){var e=this.x,t=this.y,i=this.z;return this.w=-Math.sqrt(1-e*e-t*t-i*i),this},setFromEuler:function(e,t){var i=e.x/2,r=e.y/2,s=e.z/2,n=Math.cos(i),a=Math.cos(r),o=Math.cos(s),h=Math.sin(i),u=Math.sin(r),f=Math.sin(s);switch(e.order){case"XYZ":{this.set(h*a*o+n*u*f,n*u*o-h*a*f,n*a*f+h*u*o,n*a*o-h*u*f,t);break}case"YXZ":{this.set(h*a*o+n*u*f,n*u*o-h*a*f,n*a*f-h*u*o,n*a*o+h*u*f,t);break}case"ZXY":{this.set(h*a*o-n*u*f,n*u*o+h*a*f,n*a*f+h*u*o,n*a*o-h*u*f,t);break}case"ZYX":{this.set(h*a*o-n*u*f,n*u*o+h*a*f,n*a*f-h*u*o,n*a*o+h*u*f,t);break}case"YZX":{this.set(h*a*o+n*u*f,n*u*o+h*a*f,n*a*f-h*u*o,n*a*o-h*u*f,t);break}case"XZY":{this.set(h*a*o-n*u*f,n*u*o-h*a*f,n*a*f+h*u*o,n*a*o+h*u*f,t);break}}return this},setFromRotationMatrix:function(e){var t=e.val,i=t[0],r=t[4],s=t[8],n=t[1],a=t[5],o=t[9],h=t[2],u=t[6],f=t[10],d=i+a+f,v;return d>0?(v=.5/Math.sqrt(d+1),this.set((u-o)*v,(s-h)*v,(n-r)*v,.25/v)):i>a&&i>f?(v=2*Math.sqrt(1+i-a-f),this.set(.25*v,(r+n)/v,(s+h)/v,(u-o)/v)):a>f?(v=2*Math.sqrt(1+a-i-f),this.set((r+n)/v,.25*v,(o+u)/v,(s-h)/v)):(v=2*Math.sqrt(1+f-i-a),this.set((s+h)/v,(o+u)/v,.25*v,(n-r)/v)),this},fromMat3:function(e){var t=e.val,i=t[0]+t[4]+t[8],r;if(i>0)r=Math.sqrt(i+1),this.w=.5*r,r=.5/r,this._x=(t[7]-t[5])*r,this._y=(t[2]-t[6])*r,this._z=(t[3]-t[1])*r;else{var s=0;t[4]>t[0]&&(s=1),t[8]>t[s*3+s]&&(s=2);var n=YS[s],a=YS[n];r=Math.sqrt(t[s*3+s]-t[n*3+n]-t[a*3+a]+1),gn[s]=.5*r,r=.5/r,gn[n]=(t[n*3+s]+t[s*3+n])*r,gn[a]=(t[a*3+s]+t[s*3+a])*r,this._x=gn[0],this._y=gn[1],this._z=gn[2],this._w=(t[a*3+n]-t[n*3+a])*r}return this.onChangeCallback(this),this}});HS.exports=ane});var JS=l(($Ue,ZS)=>{var one=si(),hne=hr(),une=hd(),jS=new hne,KS=new une,lne=new one,fne=function(e,t,i){return KS.setAxisAngle(t,i),jS.fromRotationTranslation(KS,lne.set(0,0,0)),e.transformMat4(jS)};ZS.exports=fne});var ah=l((eke,QS)=>{var dne=we(),vne=Fe(),ud={Angle:nT(),Distance:TT(),Easing:zE(),Fuzzy:ey(),Interpolation:yy(),Pow2:Py(),Snap:Fy(),RandomDataGenerator:Gy(),Average:Iy(),Bernstein:Jf(),Between:eh(),CatmullRom:Qf(),CeilTo:Uy(),Clamp:Pe(),DegToRad:or(),Difference:Yy(),Euler:Jy(),Factorial:Kf(),FloatBetween:Aa(),FloorTo:$y(),FromPercent:mn(),GetSpeed:iS(),IsEven:sS(),IsEvenStrict:aS(),Linear:ba(),MaxAdd:hS(),Median:lS(),MinSub:dS(),Percent:cS(),RadToDeg:mS(),RandomXY:xS(),RandomXYZ:ES(),RandomXYZW:SS(),Rotate:RS(),RotateAround:sd(),RotateAroundDistance:sh(),RotateTo:AS(),RoundAwayFromZero:nd(),RoundTo:qS(),SinCosTableGenerator:LS(),SmootherStep:$o(),SmoothStep:Qo(),ToXY:DS(),TransformXY:nh(),Within:VS(),Wrap:Lr(),Vector2:le(),Vector3:si(),Vector4:La(),Matrix3:ad(),Matrix4:hr(),Quaternion:hd(),RotateVec3:JS()};ud=vne(!1,ud,dne);QS.exports=ud});var oh=l((tke,$S)=>{var ld={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};ld.DefaultScene.push("CameraManager3D");ld.Global.push("facebook");$S.exports=ld});var xn=l((ike,eC)=>{var cne=function(e,t,i){return e<<16|t<<8|i};eC.exports=cne});var fd=l((rke,tC)=>{var pne=function(e,t,i,r){return r<<24|e<<16|t<<8|i};tC.exports=pne});var hh=l((ske,rC)=>{var iC=xn();function dd(e,t,i,r){var s=(e+t*6)%6,n=Math.min(s,4-s,1);return Math.round(255*(r-r*i*Math.max(0,n)))}var mne=function(e,t,i,r){t===void 0&&(t=1),i===void 0&&(i=1);var s=dd(5,e,t,i),n=dd(3,e,t,i),a=dd(1,e,t,i);return r?r.setTo?r.setTo(s,n,a,r.alpha,!1):(r.r=s,r.g=n,r.b=a,r.color=iC(s,n,a),r):{r:s,g:n,b:a,color:iC(s,n,a)}};rC.exports=mne});var vd=l((nke,sC)=>{var gne=function(e,t,i,r){r===void 0&&(r={h:0,s:0,v:0}),e/=255,t/=255,i/=255;var s=Math.min(e,t,i),n=Math.max(e,t,i),a=n-s,o=0,h=n===0?0:a/n,u=n;return n!==s&&(n===e?o=(t-i)/a+(t<i?6:0):n===t?o=(i-e)/a+2:n===i&&(o=(e-t)/a+4),o/=6),r.hasOwnProperty("_h")?(r._h=o,r._s=h,r._v=u):(r.h=o,r.s=h,r.v=u),r};sC.exports=gne});var ni=l((ake,oC)=>{var xne=_(),Tne=xn(),Ene=fd(),uh=hh(),nC=vd(),aC=new xne({initialize:function(t,i,r,s){t===void 0&&(t=0),i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(t,i,r,s)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(e,t,i,r,s){return r===void 0&&(r=255),s===void 0&&(s=!0),this._locked=!0,this.red=e,this.green=t,this.blue=i,this.alpha=r,this._locked=!1,this.update(s)},setGLTo:function(e,t,i,r){return r===void 0&&(r=1),this._locked=!0,this.redGL=e,this.greenGL=t,this.blueGL=i,this.alphaGL=r,this._locked=!1,this.update(!0)},setFromRGB:function(e){return this._locked=!0,this.red=e.r,this.green=e.g,this.blue=e.b,e.hasOwnProperty("a")&&(this.alpha=e.a),this._locked=!1,this.update(!0)},setFromHSV:function(e,t,i){return uh(e,t,i,this)},update:function(e){if(e===void 0&&(e=!1),this._locked)return this;var t=this.r,i=this.g,r=this.b,s=this.a;return this._color=Tne(t,i,r),this._color32=Ene(t,i,r,s),this._rgba="rgba("+t+","+i+","+r+","+s/255+")",e&&nC(t,i,r,this),this},updateHSV:function(){var e=this.r,t=this.g,i=this.b;return nC(e,t,i,this),this},clone:function(){return new aC(this.r,this.g,this.b,this.a)},gray:function(e){return this.setTo(e,e,e)},random:function(e,t){e===void 0&&(e=0),t===void 0&&(t=255);var i=Math.floor(e+Math.random()*(t-e)),r=Math.floor(e+Math.random()*(t-e)),s=Math.floor(e+Math.random()*(t-e));return this.setTo(i,r,s)},randomGray:function(e,t){e===void 0&&(e=0),t===void 0&&(t=255);var i=Math.floor(e+Math.random()*(t-e));return this.setTo(i,i,i)},saturate:function(e){return this.s+=e/100,this},desaturate:function(e){return this.s-=e/100,this},lighten:function(e){return this.v+=e/100,this},darken:function(e){return this.v-=e/100,this},brighten:function(e){var t=this.r,i=this.g,r=this.b;return t=Math.max(0,Math.min(255,t-Math.round(255*-(e/100)))),i=Math.max(0,Math.min(255,i-Math.round(255*-(e/100)))),r=Math.max(0,Math.min(255,r-Math.round(255*-(e/100)))),this.setTo(t,i,r)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(e){this.gl[0]=Math.min(Math.abs(e),1),this.r=Math.floor(this.gl[0]*255),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(e){this.gl[1]=Math.min(Math.abs(e),1),this.g=Math.floor(this.gl[1]*255),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(e){this.gl[2]=Math.min(Math.abs(e),1),this.b=Math.floor(this.gl[2]*255),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(e){this.gl[3]=Math.min(Math.abs(e),1),this.a=Math.floor(this.gl[3]*255),this.update()}},red:{get:function(){return this.r},set:function(e){e=Math.floor(Math.abs(e)),this.r=Math.min(e,255),this.gl[0]=e/255,this.update(!0)}},green:{get:function(){return this.g},set:function(e){e=Math.floor(Math.abs(e)),this.g=Math.min(e,255),this.gl[1]=e/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(e){e=Math.floor(Math.abs(e)),this.b=Math.min(e,255),this.gl[2]=e/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(e){e=Math.floor(Math.abs(e)),this.a=Math.min(e,255),this.gl[3]=e/255,this.update()}},h:{get:function(){return this._h},set:function(e){this._h=e,uh(e,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(e){this._s=e,uh(this._h,e,this._v,this)}},v:{get:function(){return this._v},set:function(e){this._v=e,uh(this._h,this._s,e,this)}}});oC.exports=aC});var cd=l((oke,hC)=>{var yne=ni(),Sne=function(e){var t=new yne;e=e.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(a,o,h,u){return o+o+h+h+u+u});var i=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);if(i){var r=parseInt(i[1],16),s=parseInt(i[2],16),n=parseInt(i[3],16);t.setTo(r,s,n)}return t};hC.exports=Sne});var pd=l((hke,uC)=>{var Cne=function(e){return e>16777215?{a:e>>>24,r:e>>16&255,g:e>>8&255,b:e&255}:{a:255,r:e>>16&255,g:e>>8&255,b:e&255}};uC.exports=Cne});var lh=l((uke,lC)=>{var Rne=ni(),_ne=pd(),wne=function(e){var t=_ne(e);return new Rne(t.r,t.g,t.b,t.a)};lC.exports=wne});var md=l((lke,fC)=>{var Pne=ni(),Ane=function(e){return new Pne(e.r,e.g,e.b,e.a)};fC.exports=Ane});var gd=l((fke,dC)=>{var bne=ni(),Mne=function(e){var t=new bne,i=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(e.toLowerCase());if(i){var r=parseInt(i[1],10),s=parseInt(i[2],10),n=parseInt(i[3],10),a=i[4]!==void 0?parseFloat(i[4]):1;t.setTo(r,s,n,a*255)}return t};dC.exports=Mne});var fh=l((dke,vC)=>{var qne=cd(),One=lh(),Lne=md(),Fne=gd(),Nne=function(e){var t=typeof e;switch(t){case"string":return e.substr(0,3).toLowerCase()==="rgb"?Fne(e):qne(e);case"number":return One(e);case"object":return Lne(e)}};vC.exports=Nne});var Td=l((vke,TC)=>{var Gne=_(),xd=Ut(),cC=Mf(),pC=X(),I=ie(),Dne=te(),mC=ah(),gC=B(),Ine=oh(),xC=fh(),Bne=new Gne({initialize:function(t){t===void 0&&(t={});var i=["#ff0000","#ffff00","#00ff00","#00ffff","#000000"],r="#ffffff";this.width=I(t,"width",1024),this.height=I(t,"height",768),this.zoom=I(t,"zoom",1),this.parent=I(t,"parent",void 0),this.scaleMode=I(t,"scaleMode",0),this.expandParent=I(t,"expandParent",!0),this.autoRound=I(t,"autoRound",!1),this.autoCenter=I(t,"autoCenter",0),this.resizeInterval=I(t,"resizeInterval",500),this.fullscreenTarget=I(t,"fullscreenTarget",null),this.minWidth=I(t,"minWidth",0),this.maxWidth=I(t,"maxWidth",0),this.minHeight=I(t,"minHeight",0),this.maxHeight=I(t,"maxHeight",0);var s=I(t,"scale",null);s&&(this.width=I(s,"width",this.width),this.height=I(s,"height",this.height),this.zoom=I(s,"zoom",this.zoom),this.parent=I(s,"parent",this.parent),this.scaleMode=I(s,"mode",this.scaleMode),this.expandParent=I(s,"expandParent",this.expandParent),this.autoRound=I(s,"autoRound",this.autoRound),this.autoCenter=I(s,"autoCenter",this.autoCenter),this.resizeInterval=I(s,"resizeInterval",this.resizeInterval),this.fullscreenTarget=I(s,"fullscreenTarget",this.fullscreenTarget),this.minWidth=I(s,"min.width",this.minWidth),this.maxWidth=I(s,"max.width",this.maxWidth),this.minHeight=I(s,"min.height",this.minHeight),this.maxHeight=I(s,"max.height",this.maxHeight)),this.renderType=I(t,"type",xd.AUTO),this.canvas=I(t,"canvas",null),this.context=I(t,"context",null),this.canvasStyle=I(t,"canvasStyle",null),this.customEnvironment=I(t,"customEnvironment",!1),this.sceneConfig=I(t,"scene",null),this.seed=I(t,"seed",[(Date.now()*Math.random()).toString()]),mC.RND=new mC.RandomDataGenerator(this.seed),this.gameTitle=I(t,"title",""),this.gameURL=I(t,"url","https://phaser.io"),this.gameVersion=I(t,"version",""),this.autoFocus=I(t,"autoFocus",!0),this.domCreateContainer=I(t,"dom.createContainer",!1),this.domBehindCanvas=I(t,"dom.behindCanvas",!1),this.domPointerEvents=I(t,"dom.pointerEvents","none"),this.inputKeyboard=I(t,"input.keyboard",!0),this.inputKeyboardEventTarget=I(t,"input.keyboard.target",window),this.inputKeyboardCapture=I(t,"input.keyboard.capture",[]),this.inputMouse=I(t,"input.mouse",!0),this.inputMouseEventTarget=I(t,"input.mouse.target",null),this.inputMousePreventDefaultDown=I(t,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=I(t,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=I(t,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=I(t,"input.mouse.preventDefaultWheel",!0),this.inputTouch=I(t,"input.touch",cC.input.touch),this.inputTouchEventTarget=I(t,"input.touch.target",null),this.inputTouchCapture=I(t,"input.touch.capture",!0),this.inputActivePointers=I(t,"input.activePointers",1),this.inputSmoothFactor=I(t,"input.smoothFactor",0),this.inputWindowEvents=I(t,"input.windowEvents",!0),this.inputGamepad=I(t,"input.gamepad",!1),this.inputGamepadEventTarget=I(t,"input.gamepad.target",window),this.disableContextMenu=I(t,"disableContextMenu",!1),this.audio=I(t,"audio",{}),this.hideBanner=I(t,"banner",null)===!1,this.hidePhaser=I(t,"banner.hidePhaser",!1),this.bannerTextColor=I(t,"banner.text",r),this.bannerBackgroundColor=I(t,"banner.background",i),this.gameTitle===""&&this.hidePhaser&&(this.hideBanner=!0),this.fps=I(t,"fps",null);var n=I(t,"render",t);this.pipeline=I(n,"pipeline",null),this.antialias=I(n,"antialias",!0),this.antialiasGL=I(n,"antialiasGL",!0),this.mipmapFilter=I(n,"mipmapFilter","LINEAR"),this.desynchronized=I(n,"desynchronized",!1),this.roundPixels=I(n,"roundPixels",!1),this.pixelArt=I(n,"pixelArt",this.zoom!==1),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=I(n,"transparent",!1),this.clearBeforeRender=I(n,"clearBeforeRender",!0),this.preserveDrawingBuffer=I(n,"preserveDrawingBuffer",!1),this.premultipliedAlpha=I(n,"premultipliedAlpha",!0),this.failIfMajorPerformanceCaveat=I(n,"failIfMajorPerformanceCaveat",!1),this.powerPreference=I(n,"powerPreference","default"),this.batchSize=I(n,"batchSize",4096),this.maxTextures=I(n,"maxTextures",-1),this.maxLights=I(n,"maxLights",10);var a=I(t,"backgroundColor",0);this.backgroundColor=xC(a),this.transparent&&(this.backgroundColor=xC(0),this.backgroundColor.alpha=0),this.preBoot=I(t,"callbacks.preBoot",gC),this.postBoot=I(t,"callbacks.postBoot",gC),this.physics=I(t,"physics",{}),this.defaultPhysicsSystem=I(this.physics,"default",!1),this.loaderBaseURL=I(t,"loader.baseURL",""),this.loaderPath=I(t,"loader.path","");var o=cC.os.android?6:32;this.loaderMaxParallelDownloads=I(t,"loader.maxParallelDownloads",o),this.loaderCrossOrigin=I(t,"loader.crossOrigin",void 0),this.loaderResponseType=I(t,"loader.responseType",""),this.loaderAsync=I(t,"loader.async",!0),this.loaderUser=I(t,"loader.user",""),this.loaderPassword=I(t,"loader.password",""),this.loaderTimeout=I(t,"loader.timeout",0),this.loaderWithCredentials=I(t,"loader.withCredentials",!1),this.installGlobalPlugins=[],this.installScenePlugins=[];var h=I(t,"plugins",null),u=Ine.DefaultScene;h&&(Array.isArray(h)?this.defaultPlugins=h:Dne(h)&&(this.installGlobalPlugins=pC(h,"global",[]),this.installScenePlugins=pC(h,"scene",[]),Array.isArray(h.default)?u=h.default:Array.isArray(h.defaultMerge)&&(u=u.concat(h.defaultMerge)))),this.defaultPlugins=u;var f="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=I(t,"images.default",f+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=I(t,"images.missing",f+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=I(t,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=xd.WEBGL:window.FORCE_CANVAS&&(this.renderType=xd.CANVAS))}});TC.exports=Bne});var Ed=l((cke,EC)=>{var Vne={setCrisp:function(e){var t=["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"];return t.forEach(function(i){e.style["image-rendering"]=i}),e.style.msInterpolationMode="nearest-neighbor",e},setBicubic:function(e){return e.style["image-rendering"]="auto",e.style.msInterpolationMode="bicubic",e}};EC.exports=Vne});var SC=l((pke,yC)=>{yC.exports="cameradestroy"});var RC=l((mke,CC)=>{CC.exports="camerafadeincomplete"});var wC=l((gke,_C)=>{_C.exports="camerafadeinstart"});var AC=l((xke,PC)=>{PC.exports="camerafadeoutcomplete"});var MC=l((Tke,bC)=>{bC.exports="camerafadeoutstart"});var OC=l((Eke,qC)=>{qC.exports="cameraflashcomplete"});var FC=l((yke,LC)=>{LC.exports="cameraflashstart"});var GC=l((Ske,NC)=>{NC.exports="followupdate"});var IC=l((Cke,DC)=>{DC.exports="camerapancomplete"});var VC=l((Rke,BC)=>{BC.exports="camerapanstart"});var kC=l((_ke,UC)=>{UC.exports="postrender"});var XC=l((wke,zC)=>{zC.exports="prerender"});var WC=l((Pke,YC)=>{YC.exports="camerarotatecomplete"});var jC=l((Ake,HC)=>{HC.exports="camerarotatestart"});var ZC=l((bke,KC)=>{KC.exports="camerashakecomplete"});var QC=l((Mke,JC)=>{JC.exports="camerashakestart"});var eR=l((qke,$C)=>{$C.exports="camerazoomcomplete"});var iR=l((Oke,tR)=>{tR.exports="camerazoomstart"});var ai=l((Lke,rR)=>{rR.exports={DESTROY:SC(),FADE_IN_COMPLETE:RC(),FADE_IN_START:wC(),FADE_OUT_COMPLETE:AC(),FADE_OUT_START:MC(),FLASH_COMPLETE:OC(),FLASH_START:FC(),FOLLOW_UPDATE:GC(),PAN_COMPLETE:IC(),PAN_START:VC(),POST_RENDER:kC(),PRE_RENDER:XC(),ROTATE_COMPLETE:WC(),ROTATE_START:jC(),SHAKE_COMPLETE:ZC(),SHAKE_START:QC(),ZOOM_COMPLETE:eR(),ZOOM_START:iR()}});var Sd=l((Fke,sR)=>{var yd=Et(),Une=ni(),Dr=X(),kne=function(e,t){var i=Dr(t,"callback"),r=Dr(t,"type","image/png"),s=Dr(t,"encoder",.92),n=Math.abs(Math.round(Dr(t,"x",0))),a=Math.abs(Math.round(Dr(t,"y",0))),o=Dr(t,"width",e.width),h=Dr(t,"height",e.height),u=Dr(t,"getPixel",!1);if(u){var f=e.getContext("2d"),d=f.getImageData(n,a,1,1),v=d.data;i.call(null,new Une(v[0],v[1],v[2],v[3]/255))}else if(n!==0||a!==0||o!==e.width||h!==e.height){var c=yd.createWebGL(this,o,h),p=c.getContext("2d");p.drawImage(e,n,a,o,h,0,0,o,h);var m=new Image;m.onerror=function(){i.call(null),yd.remove(c)},m.onload=function(){i.call(null,m),yd.remove(c)},m.src=c.toDataURL(r,s)}else{var g=new Image;g.onerror=function(){i.call(null)},g.onload=function(){i.call(null,g)},g.src=e.toDataURL(r,s)}};sR.exports=kne});var se=l((Nke,Cd)=>{"use strict";var zne=Object.prototype.hasOwnProperty,yt="~";function Fa(){}Object.create&&(Fa.prototype=Object.create(null),new Fa().__proto__||(yt=!1));function Xne(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function nR(e,t,i,r,s){if(typeof i!="function")throw new TypeError("The listener must be a function");var n=new Xne(i,r||e,s),a=yt?yt+t:t;return e._events[a]?e._events[a].fn?e._events[a]=[e._events[a],n]:e._events[a].push(n):(e._events[a]=n,e._eventsCount++),e}function dh(e,t){--e._eventsCount==0?e._events=new Fa:delete e._events[t]}function ft(){this._events=new Fa,this._eventsCount=0}ft.prototype.eventNames=function(){var t=[],i,r;if(this._eventsCount===0)return t;for(r in i=this._events)zne.call(i,r)&&t.push(yt?r.slice(1):r);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(i)):t};ft.prototype.listeners=function(t){var i=yt?yt+t:t,r=this._events[i];if(!r)return[];if(r.fn)return[r.fn];for(var s=0,n=r.length,a=new Array(n);s<n;s++)a[s]=r[s].fn;return a};ft.prototype.listenerCount=function(t){var i=yt?yt+t:t,r=this._events[i];return r?r.fn?1:r.length:0};ft.prototype.emit=function(t,i,r,s,n,a){var o=yt?yt+t:t;if(!this._events[o])return!1;var h=this._events[o],u=arguments.length,f,d;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),u){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,i),!0;case 3:return h.fn.call(h.context,i,r),!0;case 4:return h.fn.call(h.context,i,r,s),!0;case 5:return h.fn.call(h.context,i,r,s,n),!0;case 6:return h.fn.call(h.context,i,r,s,n,a),!0}for(d=1,f=new Array(u-1);d<u;d++)f[d-1]=arguments[d];h.fn.apply(h.context,f)}else{var v=h.length,c;for(d=0;d<v;d++)switch(h[d].once&&this.removeListener(t,h[d].fn,void 0,!0),u){case 1:h[d].fn.call(h[d].context);break;case 2:h[d].fn.call(h[d].context,i);break;case 3:h[d].fn.call(h[d].context,i,r);break;case 4:h[d].fn.call(h[d].context,i,r,s);break;default:if(!f)for(c=1,f=new Array(u-1);c<u;c++)f[c-1]=arguments[c];h[d].fn.apply(h[d].context,f)}}return!0};ft.prototype.on=function(t,i,r){return nR(this,t,i,r,!1)};ft.prototype.once=function(t,i,r){return nR(this,t,i,r,!0)};ft.prototype.removeListener=function(t,i,r,s){var n=yt?yt+t:t;if(!this._events[n])return this;if(!i)return dh(this,n),this;var a=this._events[n];if(a.fn)a.fn===i&&(!s||a.once)&&(!r||a.context===r)&&dh(this,n);else{for(var o=0,h=[],u=a.length;o<u;o++)(a[o].fn!==i||s&&!a[o].once||r&&a[o].context!==r)&&h.push(a[o]);h.length?this._events[n]=h.length===1?h[0]:h:dh(this,n)}return this};ft.prototype.removeAllListeners=function(t){var i;return t?(i=yt?yt+t:t,this._events[i]&&dh(this,i)):(this._events=new Fa,this._eventsCount=0),this};ft.prototype.off=ft.prototype.removeListener;ft.prototype.addListener=ft.prototype.on;ft.prefixed=yt;ft.EventEmitter=ft;typeof Cd!="undefined"&&(Cd.exports=ft)});var oR=l((Gke,aR)=>{aR.exports="postrender"});var uR=l((Dke,hR)=>{hR.exports="prerender"});var fR=l((Ike,lR)=>{lR.exports="render"});var vR=l((Bke,dR)=>{dR.exports="resize"});var Ns=l((Vke,cR)=>{cR.exports={POST_RENDER:oR(),PRE_RENDER:uR(),RENDER:fR(),RESIZE:vR()}});var Rd=l((Uke,pR)=>{var he=mi(),Yne=bf(),Wne=function(){var e=[],t=Yne.supportNewBlendModes,i="source-over";return e[he.NORMAL]=i,e[he.ADD]="lighter",e[he.MULTIPLY]=t?"multiply":i,e[he.SCREEN]=t?"screen":i,e[he.OVERLAY]=t?"overlay":i,e[he.DARKEN]=t?"darken":i,e[he.LIGHTEN]=t?"lighten":i,e[he.COLOR_DODGE]=t?"color-dodge":i,e[he.COLOR_BURN]=t?"color-burn":i,e[he.HARD_LIGHT]=t?"hard-light":i,e[he.SOFT_LIGHT]=t?"soft-light":i,e[he.DIFFERENCE]=t?"difference":i,e[he.EXCLUSION]=t?"exclusion":i,e[he.HUE]=t?"hue":i,e[he.SATURATION]=t?"saturation":i,e[he.COLOR]=t?"color":i,e[he.LUMINOSITY]=t?"luminosity":i,e[he.ERASE]="destination-out",e[he.SOURCE_IN]="source-in",e[he.SOURCE_OUT]="source-out",e[he.SOURCE_ATOP]="source-atop",e[he.DESTINATION_OVER]="destination-over",e[he.DESTINATION_IN]="destination-in",e[he.DESTINATION_OUT]="destination-out",e[he.DESTINATION_ATOP]="destination-atop",e[he.LIGHTER]="lighter",e[he.COPY]="copy",e[he.XOR]="xor",e};pR.exports=Wne});var gR=l((kke,mR)=>{mR.exports="enterfullscreen"});var TR=l((zke,xR)=>{xR.exports="fullscreenfailed"});var yR=l((Xke,ER)=>{ER.exports="fullscreenunsupported"});var CR=l((Yke,SR)=>{SR.exports="leavefullscreen"});var _R=l((Wke,RR)=>{RR.exports="orientationchange"});var PR=l((Hke,wR)=>{wR.exports="resize"});var Tn=l((jke,AR)=>{AR.exports={ENTER_FULLSCREEN:gR(),FULLSCREEN_FAILED:TR(),FULLSCREEN_UNSUPPORTED:yR(),LEAVE_FULLSCREEN:CR(),ORIENTATION_CHANGE:_R(),RESIZE:PR()}});var MR=l((Kke,bR)=>{bR.exports="addtexture"});var OR=l((Zke,qR)=>{qR.exports="onerror"});var FR=l((Jke,LR)=>{LR.exports="onload"});var GR=l((Qke,NR)=>{NR.exports="ready"});var IR=l(($ke,DR)=>{DR.exports="removetexture"});var En=l((eze,BR)=>{BR.exports={ADD:MR(),ERROR:OR(),LOAD:FR(),READY:GR(),REMOVE:IR()}});var dt=l((tze,VR)=>{var Hne=_(),jne=we(),Kne=le(),Zne=new Hne({initialize:function(t,i,r,s,n,a){t===void 0&&(t=1),i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=1),n===void 0&&(n=0),a===void 0&&(a=0),this.matrix=new Float32Array([t,i,r,s,n,a,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0}},a:{get:function(){return this.matrix[0]},set:function(e){this.matrix[0]=e}},b:{get:function(){return this.matrix[1]},set:function(e){this.matrix[1]=e}},c:{get:function(){return this.matrix[2]},set:function(e){this.matrix[2]=e}},d:{get:function(){return this.matrix[3]},set:function(e){this.matrix[3]=e}},e:{get:function(){return this.matrix[4]},set:function(e){this.matrix[4]=e}},f:{get:function(){return this.matrix[5]},set:function(e){this.matrix[5]=e}},tx:{get:function(){return this.matrix[4]},set:function(e){this.matrix[4]=e}},ty:{get:function(){return this.matrix[5]},set:function(e){this.matrix[5]=e}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var e=this.matrix,t=e[0],i=e[1],r=e[2],s=e[3];return t||i?i>0?Math.acos(t/this.scaleX):-Math.acos(t/this.scaleX):r||s?jne.TAU-(s>0?Math.acos(-r/this.scaleY):-Math.acos(r/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var e=this.matrix;return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,this},translate:function(e,t){var i=this.matrix;return i[4]=i[0]*e+i[2]*t+i[4],i[5]=i[1]*e+i[3]*t+i[5],this},scale:function(e,t){var i=this.matrix;return i[0]*=e,i[1]*=e,i[2]*=t,i[3]*=t,this},rotate:function(e){var t=Math.sin(e),i=Math.cos(e),r=this.matrix,s=r[0],n=r[1],a=r[2],o=r[3];return r[0]=s*i+a*t,r[1]=n*i+o*t,r[2]=s*-t+a*i,r[3]=n*-t+o*i,this},multiply:function(e,t){var i=this.matrix,r=e.matrix,s=i[0],n=i[1],a=i[2],o=i[3],h=i[4],u=i[5],f=r[0],d=r[1],v=r[2],c=r[3],p=r[4],m=r[5],g=t===void 0?this:t;return g.a=f*s+d*a,g.b=f*n+d*o,g.c=v*s+c*a,g.d=v*n+c*o,g.e=p*s+m*a+h,g.f=p*n+m*o+u,g},multiplyWithOffset:function(e,t,i){var r=this.matrix,s=e.matrix,n=r[0],a=r[1],o=r[2],h=r[3],u=r[4],f=r[5],d=t*n+i*o+u,v=t*a+i*h+f,c=s[0],p=s[1],m=s[2],g=s[3],x=s[4],T=s[5];return r[0]=c*n+p*o,r[1]=c*a+p*h,r[2]=m*n+g*o,r[3]=m*a+g*h,r[4]=x*n+T*o+d,r[5]=x*a+T*h+v,this},transform:function(e,t,i,r,s,n){var a=this.matrix,o=a[0],h=a[1],u=a[2],f=a[3],d=a[4],v=a[5];return a[0]=e*o+t*u,a[1]=e*h+t*f,a[2]=i*o+r*u,a[3]=i*h+r*f,a[4]=s*o+n*u+d,a[5]=s*h+n*f+v,this},transformPoint:function(e,t,i){i===void 0&&(i={x:0,y:0});var r=this.matrix,s=r[0],n=r[1],a=r[2],o=r[3],h=r[4],u=r[5];return i.x=e*s+t*a+h,i.y=e*n+t*o+u,i},invert:function(){var e=this.matrix,t=e[0],i=e[1],r=e[2],s=e[3],n=e[4],a=e[5],o=t*s-i*r;return e[0]=s/o,e[1]=-i/o,e[2]=-r/o,e[3]=t/o,e[4]=(r*a-s*n)/o,e[5]=-(t*a-i*n)/o,this},copyFrom:function(e){var t=this.matrix;return t[0]=e.a,t[1]=e.b,t[2]=e.c,t[3]=e.d,t[4]=e.e,t[5]=e.f,this},copyFromArray:function(e){var t=this.matrix;return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],this},copyToContext:function(e){var t=this.matrix;return e.transform(t[0],t[1],t[2],t[3],t[4],t[5]),e},setToContext:function(e){var t=this.matrix;return e.setTransform(t[0],t[1],t[2],t[3],t[4],t[5]),e},copyToArray:function(e){var t=this.matrix;return e===void 0?e=[t[0],t[1],t[2],t[3],t[4],t[5]]:(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5]),e},setTransform:function(e,t,i,r,s,n){var a=this.matrix;return a[0]=e,a[1]=t,a[2]=i,a[3]=r,a[4]=s,a[5]=n,this},decomposeMatrix:function(){var e=this.decomposedMatrix,t=this.matrix,i=t[0],r=t[1],s=t[2],n=t[3],a=i*n-r*s;if(e.translateX=t[4],e.translateY=t[5],i||r){var o=Math.sqrt(i*i+r*r);e.rotation=r>0?Math.acos(i/o):-Math.acos(i/o),e.scaleX=o,e.scaleY=a/o}else if(s||n){var h=Math.sqrt(s*s+n*n);e.rotation=Math.PI*.5-(n>0?Math.acos(-s/h):-Math.acos(s/h)),e.scaleX=a/h,e.scaleY=h}else e.rotation=0,e.scaleX=0,e.scaleY=0;return e},applyITRS:function(e,t,i,r,s){var n=this.matrix,a=Math.sin(i),o=Math.cos(i);return n[4]=e,n[5]=t,n[0]=o*r,n[1]=a*r,n[2]=-a*s,n[3]=o*s,this},applyInverse:function(e,t,i){i===void 0&&(i=new Kne);var r=this.matrix,s=r[0],n=r[1],a=r[2],o=r[3],h=r[4],u=r[5],f=1/(s*o+a*-n);return i.x=o*f*e+-a*f*t+(u*a-h*o)*f,i.y=s*f*t+-n*f*e+(-u*s+h*n)*f,i},getX:function(e,t){return e*this.a+t*this.c+this.e},getY:function(e,t){return e*this.b+t*this.d+this.f},getXRound:function(e,t,i){var r=this.getX(e,t);return i&&(r=Math.round(r)),r},getYRound:function(e,t,i){var r=this.getY(e,t);return i&&(r=Math.round(r)),r},getCSSMatrix:function(){var e=this.matrix;return"matrix("+e[0]+","+e[1]+","+e[2]+","+e[3]+","+e[4]+","+e[5]+")"},destroy:function(){this.matrix=null,this.decomposedMatrix=null}});VR.exports=Zne});var wd=l((ize,XR)=>{var UR=ai(),kR=Sd(),Jne=_(),Qne=Ut(),zR=se(),vh=Ns(),$ne=Rd(),eae=Tn(),tae=En(),_d=dt(),iae=new Jne({Extends:zR,initialize:function(t){zR.call(this);var i=t.config;this.config={clearBeforeRender:i.clearBeforeRender,backgroundColor:i.backgroundColor,antialias:i.antialias,roundPixels:i.roundPixels},this.game=t,this.type=Qne.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=t.canvas;var r={alpha:t.config.transparent,desynchronized:t.config.desynchronized};this.gameContext=i.context?i.context:this.gameCanvas.getContext("2d",r),this.currentContext=this.gameContext,this.antialias=t.config.antialias,this.blendModes=$ne(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new _d,this._tempMatrix2=new _d,this._tempMatrix3=new _d,this.isBooted=!1,this.init()},init:function(){this.game.textures.once(tae.READY,this.boot,this)},boot:function(){var e=this.game,t=e.scale.baseSize;this.width=t.width,this.height=t.height,this.isBooted=!0,e.scale.on(eae.RESIZE,this.onResize,this),this.resize(t.width,t.height)},onResize:function(e,t){(t.width!==this.width||t.height!==this.height)&&this.resize(t.width,t.height)},resize:function(e,t){this.width=e,this.height=t,this.emit(vh.RESIZE,e,t)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(e){return this.currentContext.globalCompositeOperation=e,this},setContext:function(e){return this.currentContext=e||this.gameContext,this},setAlpha:function(e){return this.currentContext.globalAlpha=e,this},preRender:function(){var e=this.gameContext,t=this.config,i=this.width,r=this.height;e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),t.clearBeforeRender&&(e.clearRect(0,0,i,r),t.transparent||(e.fillStyle=t.backgroundColor.rgba,e.fillRect(0,0,i,r))),e.save(),this.drawCount=0,this.emit(vh.PRE_RENDER)},render:function(e,t,i){var r=t.length;this.emit(vh.RENDER,e,i);var s=i.x,n=i.y,a=i.width,o=i.height,h=i.renderToTexture?i.context:e.sys.context;h.save(),this.game.scene.customViewports&&(h.beginPath(),h.rect(s,n,a,o),h.clip()),this.currentContext=h;var u=i.mask;u&&u.preRenderCanvas(this,null,i._maskCamera),i.transparent||(h.fillStyle=i.backgroundColor.rgba,h.fillRect(s,n,a,o)),h.globalAlpha=i.alpha,h.globalCompositeOperation="source-over",this.drawCount+=r,i.renderToTexture&&i.emit(UR.PRE_RENDER,i),i.matrix.copyToContext(h);for(var f=0;f<r;f++){var d=t[f];d.mask&&d.mask.preRenderCanvas(this,d,i),d.renderCanvas(this,d,i),d.mask&&d.mask.postRenderCanvas(this,d,i)}h.setTransform(1,0,0,1,0,0),h.globalCompositeOperation="source-over",h.globalAlpha=1,i.flashEffect.postRenderCanvas(h),i.fadeEffect.postRenderCanvas(h),i.dirty=!1,u&&u.postRenderCanvas(this),h.restore(),i.renderToTexture&&(i.emit(UR.POST_RENDER,i),i.renderToGame&&e.sys.context.drawImage(i.canvas,s,n))},postRender:function(){var e=this.gameContext;e.restore(),this.emit(vh.POST_RENDER);var t=this.snapshotState;t.callback&&(kR(this.gameCanvas,t),t.callback=null)},snapshotCanvas:function(e,t,i,r,s,n,a,o,h){i===void 0&&(i=!1),this.snapshotArea(r,s,n,a,t,o,h);var u=this.snapshotState;return u.getPixel=i,kR(this.canvas,u),u.callback=null,this},snapshot:function(e,t,i){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,e,t,i)},snapshotArea:function(e,t,i,r,s,n,a){var o=this.snapshotState;return o.callback=s,o.type=n,o.encoder=a,o.getPixel=!1,o.x=e,o.y=t,o.width=Math.min(i,this.gameCanvas.width),o.height=Math.min(r,this.gameCanvas.height),this},snapshotPixel:function(e,t,i){return this.snapshotArea(e,t,1,1,i),this.snapshotState.getPixel=!0,this},batchSprite:function(e,t,i,r){var s=i.alpha*e.alpha;if(s!==0){var n=this.currentContext,a=this._tempMatrix1,o=this._tempMatrix2,h=t.canvasData,u=h.x,f=h.y,d=t.cutWidth,v=t.cutHeight,c=t.customPivot,p=t.source.resolution,m=e.displayOriginX,g=e.displayOriginY,x=-m+t.x,T=-g+t.y;if(e.isCropped){var E=e._crop;(E.flipX!==e.flipX||E.flipY!==e.flipY)&&t.updateCropUVs(E,e.flipX,e.flipY),d=E.cw,v=E.ch,u=E.cx,f=E.cy,x=-m+E.x,T=-g+E.y,e.flipX&&(x>=0?x=-(x+d):x<0&&(x=Math.abs(x)-d)),e.flipY&&(T>=0?T=-(T+v):T<0&&(T=Math.abs(T)-v))}var R=1,y=1;e.flipX&&(c||(x+=-t.realWidth+m*2),R=-1),e.flipY&&(c||(T+=-t.realHeight+g*2),y=-1),o.applyITRS(e.x,e.y,e.rotation,e.scaleX*R,e.scaleY*y),a.copyFrom(i.matrix),r?(a.multiplyWithOffset(r,-i.scrollX*e.scrollFactorX,-i.scrollY*e.scrollFactorY),o.e=e.x,o.f=e.y):(o.e-=i.scrollX*e.scrollFactorX,o.f-=i.scrollY*e.scrollFactorY),a.multiply(o),n.save(),a.setToContext(n),n.globalCompositeOperation=this.blendModes[e.blendMode],n.globalAlpha=s,n.imageSmoothingEnabled=!(!this.antialias||t.source.scaleMode),e.mask&&e.mask.preRenderCanvas(this,e,i),n.drawImage(t.source.image,u,f,d,v,x,T,d/p,v/p),e.mask&&e.mask.postRenderCanvas(this,e,i),n.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});XR.exports=iae});var Gs=l((rze,YR)=>{var rae=function(e,t){if(!(t>=e.length)){for(var i=e.length-1,r=e[t],s=t;s<i;s++)e[s]=e[s+1];return e.length=i,r}};YR.exports=rae});var Ds=l((sze,HR)=>{var WR=Gs(),sae=function(e,t,i,r){r===void 0&&(r=e);var s;if(!Array.isArray(t))return s=e.indexOf(t),s!==-1?(WR(e,s),i&&i.call(r,t),t):null;for(var n=t.length-1,a=[];n>=0;){var o=t[n];s=e.indexOf(o),s!==-1&&(WR(e,s),a.push(o),i&&i.call(r,o)),n--}return a};HR.exports=sae});var KR=l((nze,jR)=>{jR.exports="blur"});var JR=l((aze,ZR)=>{ZR.exports="boot"});var $R=l((oze,QR)=>{QR.exports="contextlost"});var t_=l((hze,e_)=>{e_.exports="contextrestored"});var r_=l((uze,i_)=>{i_.exports="destroy"});var n_=l((lze,s_)=>{s_.exports="focus"});var o_=l((fze,a_)=>{a_.exports="hidden"});var u_=l((dze,h_)=>{h_.exports="pause"});var f_=l((vze,l_)=>{l_.exports="postrender"});var v_=l((cze,d_)=>{d_.exports="poststep"});var p_=l((pze,c_)=>{c_.exports="prerender"});var g_=l((mze,m_)=>{m_.exports="prestep"});var T_=l((gze,x_)=>{x_.exports="ready"});var y_=l((xze,E_)=>{E_.exports="resume"});var C_=l((Tze,S_)=>{S_.exports="step"});var __=l((Eze,R_)=>{R_.exports="visible"});var Ne=l((yze,w_)=>{w_.exports={BLUR:KR(),BOOT:JR(),CONTEXT_LOST:$R(),CONTEXT_RESTORED:t_(),DESTROY:r_(),FOCUS:n_(),HIDDEN:o_(),PAUSE:u_(),POST_RENDER:f_(),POST_STEP:v_(),PRE_RENDER:p_(),PRE_STEP:g_(),READY:T_(),RESUME:y_(),STEP:C_(),VISIBLE:__()}});var Is=l((Sze,P_)=>{var nae={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline"};P_.exports=nae});var yn=l((Cze,A_)=>{var aae=_(),oae=new aae({initialize:function(t){if(this.entries={},this.size=0,Array.isArray(t))for(var i=0;i<t.length;i++)this.set(t[i][0],t[i][1])},set:function(e,t){return this.has(e)||this.size++,this.entries[e]=t,this},get:function(e){if(this.has(e))return this.entries[e]},getArray:function(){var e=[],t=this.entries;for(var i in t)e.push(t[i]);return e},has:function(e){return this.entries.hasOwnProperty(e)},delete:function(e){return this.has(e)&&(delete this.entries[e],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(e){delete this.entries[e]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var e=[],t=this.entries;for(var i in t)e.push(t[i]);return e},dump:function(){var e=this.entries;console.group("Map");for(var t in e)console.log(t,e[t]);console.groupEnd()},each:function(e){var t=this.entries;for(var i in t)if(e(i,t[i])===!1)break;return this},contains:function(e){var t=this.entries;for(var i in t)if(t[i]===e)return!0;return!1},merge:function(e,t){t===void 0&&(t=!1);var i=this.entries,r=e.entries;for(var s in r)i.hasOwnProperty(s)&&t?i[s]=r[s]:this.set(s,r[s]);return this}});A_.exports=oae});var M_=l((Rze,b_)=>{b_.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    float alpha = mainColor.a;","","    if (!uInvertMaskAlpha)","    {","        alpha *= (maskColor.a);","    }","    else","    {","        alpha *= (1.0 - maskColor.a);","    }","","    gl_FragColor = vec4(mainColor.rgb * alpha, alpha);","}",""].join(`
`)});var O_=l((_ze,q_)=>{q_.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","","precision mediump float;","","attribute vec2 inPosition;","","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}",""].join(`
`)});var Sn=l((wze,L_)=>{var hae={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}};L_.exports=hae});var ch=l((Pze,N_)=>{var F_=function(e){var t,i,r;if(typeof e!="object"||e===null)return e;t=Array.isArray(e)?[]:{};for(r in e)i=e[r],t[r]=F_(i);return t};N_.exports=F_});var D_=l((Aze,G_)=>{G_.exports="pipelineafterflush"});var B_=l((bze,I_)=>{I_.exports="pipelinebeforeflush"});var U_=l((Mze,V_)=>{V_.exports="pipelinebind"});var z_=l((qze,k_)=>{k_.exports="pipelineboot"});var Y_=l((Oze,X_)=>{X_.exports="pipelinedestroy"});var H_=l((Lze,W_)=>{W_.exports="pipelinerebind"});var K_=l((Fze,j_)=>{j_.exports="pipelineresize"});var Pd=l((Nze,Z_)=>{Z_.exports={AFTER_FLUSH:D_(),BEFORE_FLUSH:B_(),BIND:U_(),BOOT:z_(),DESTROY:Y_(),REBIND:H_(),RESIZE:K_()}});var Na=l((Gze,J_)=>{var uae=_(),Ad=Ns(),lae=new uae({initialize:function(t,i,r,s,n,a,o){s===void 0&&(s=1),n===void 0&&(n=0),a===void 0&&(a=!0),o===void 0&&(o=!1),this.renderer=t,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=s,this.minFilter=n,this.autoClear=a,this.autoResize=!1,this.resize(i,r),o&&this.setAutoResize(!0)},setAutoResize:function(e){return e&&!this.autoResize?(this.renderer.on(Ad.RESIZE,this.resize,this),this.autoResize=!0):!e&&this.autoResize&&(this.renderer.off(Ad.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(e,t){var i=e*this.scale,r=t*this.scale;if(i!==this.width||r!==this.height){var s=this.renderer;s.deleteFramebuffer(this.framebuffer),s.deleteTexture(this.texture),e*=this.scale,t*=this.scale,e=Math.round(e),t=Math.round(t),e<=0&&(e=1),t<=0&&(t=1),this.texture=s.createTextureFromSource(null,e,t,this.minFilter),this.framebuffer=s.createFramebuffer(e,t,this.texture,!1),this.width=e,this.height=t}return this},bind:function(e,t,i){if(e===void 0&&(e=!1),e&&this.renderer.flush(),t&&i&&this.resize(t,i),this.renderer.pushFramebuffer(this.framebuffer,!1,!1,!1),e&&this.adjustViewport(),this.autoClear){var r=this.renderer.gl;r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT)}},adjustViewport:function(){var e=this.renderer.gl;e.viewport(0,0,this.width,this.height),e.disable(e.SCISSOR_TEST)},clear:function(){var e=this.renderer,t=e.gl;e.pushFramebuffer(this.framebuffer),t.disable(t.SCISSOR_TEST),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),e.popFramebuffer(),e.resetScissor()},unbind:function(e){e===void 0&&(e=!1);var t=this.renderer;return e&&t.flush(),t.popFramebuffer()},destroy:function(){var e=this.renderer;e.deleteFramebuffer(this.framebuffer),e.deleteTexture(this.texture),e.off(Ad.RESIZE,this.resize,this),this.renderer=null,this.framebuffer=null,this.texture=null}});J_.exports=lae});var fe=l((Dze,Q_)=>{function fae(e){for(var t="",i=0;i<e;++i)i>0&&(t+=`
else `),i<e-1&&(t+="if(test == "+i+".0){}");return t}Q_.exports={getTintFromFloats:function(e,t,i,r){var s=(e*255|0)&255,n=(t*255|0)&255,a=(i*255|0)&255,o=(r*255|0)&255;return(o<<24|s<<16|n<<8|a)>>>0},getTintAppendFloatAlpha:function(e,t){var i=(t*255|0)&255;return(i<<24|e)>>>0},getTintAppendFloatAlphaAndSwap:function(e,t){var i=(e>>16|0)&255,r=(e>>8|0)&255,s=(e|0)&255,n=(t*255|0)&255;return(n<<24|s<<16|r<<8|i)>>>0},getFloatsFromUintRGB:function(e){var t=(e>>16|0)&255,i=(e>>8|0)&255,r=(e|0)&255;return[t/255,i/255,r/255]},checkShaderMax:function(e,t){(!t||t===-1)&&(t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS));for(var i=e.createShader(e.FRAGMENT_SHADER),r=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);;){var s=r.replace(/%forloop%/gi,fae(t));if(e.shaderSource(i,s),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS))t=t/2|0;else break}return t},parseFragmentShaderMaxTextures:function(e,t){if(!e)return"";for(var i="",r=0;r<t;r++)r>0&&(i+=`
	else `),r<t-1&&(i+="if (outTexId < "+r+".5)"),i+=`
	{`,i+=`
		texture = texture2D(uMainSampler[`+r+"], outTexCoord);",i+=`
	}`;return e=e.replace(/%count%/gi,t.toString()),e.replace(/%forloop%/gi,i)}}});var bd=l((Ize,ew)=>{var dae=_(),$_=X(),vae=Sn(),cae=new dae({initialize:function(t,i,r,s,n){this.pipeline=t,this.name=i,this.renderer=t.renderer,this.gl=this.renderer.gl,this.program=this.renderer.createProgram(r,s),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(n),this.createUniforms()},createAttributes:function(e){var t=0,i=0,r=[];this.vertexComponentCount=0;for(var s=0;s<e.length;s++){var n=e[s],a=n.name,o=$_(n,"size",1),h=$_(n,"type",vae.FLOAT),u=h.enum,f=h.size,d=!!n.normalized;r.push({name:a,size:o,type:u,normalized:d,offset:i,enabled:!1,location:-1}),f===4?t+=o:t++,i+=o*f}this.vertexSize=i,this.vertexComponentCount=t,this.attributes=r},bind:function(e,t){return e===void 0&&(e=!1),t===void 0&&(t=!1),t&&this.pipeline.flush(),this.renderer.setProgram(this.program),e&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(e){e===void 0&&(e=!1);for(var t=this.gl,i=this.vertexSize,r=this.attributes,s=this.program,n=0;n<r.length;n++){var a=r[n],o=a.size,h=a.type,u=a.offset,f=a.enabled,d=a.location,v=!!a.normalized;if(e){var c=t.getAttribLocation(s,a.name);c>=0?(t.enableVertexAttribArray(c),t.vertexAttribPointer(c,o,h,v,i,u),a.enabled=!0,a.location=c):c!==-1&&t.disableVertexAttribArray(c)}else f?t.vertexAttribPointer(d,o,h,v,i,u):!f&&d>-1&&(t.disableVertexAttribArray(d),a.location=-1)}return this},createUniforms:function(){var e=this.gl,t=this.program,i=this.uniforms,r,s,n,a=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(r=0;r<a;r++){var o=e.getActiveUniform(t,r);if(o){s=o.name,n=e.getUniformLocation(t,s),n!==null&&(i[s]={name:s,location:n,value1:null,value2:null,value3:null,value4:null});var h=s.indexOf("[");h>0&&(s=s.substr(0,h),i.hasOwnProperty(s)||(n=e.getUniformLocation(t,s),n!==null&&(i[s]={name:s,location:n,value1:null,value2:null,value3:null,value4:null})))}}return this},hasUniform:function(e){return this.uniforms.hasOwnProperty(e)},resetUniform:function(e){var t=this.uniforms[e];return t&&(t.value1=null,t.value2=null,t.value3=null,t.value4=null),this},setUniform1:function(e,t,i,r){var s=this.uniforms[t];return s?((r||s.value1!==i)&&(s.value1=i,this.renderer.setProgram(this.program),e.call(this.gl,s.location,i),this.pipeline.currentShader=this),this):this},setUniform2:function(e,t,i,r,s){var n=this.uniforms[t];return n?((s||n.value1!==i||n.value2!==r)&&(n.value1=i,n.value2=r,this.renderer.setProgram(this.program),e.call(this.gl,n.location,i,r),this.pipeline.currentShader=this),this):this},setUniform3:function(e,t,i,r,s,n){var a=this.uniforms[t];return a?((n||a.value1!==i||a.value2!==r||a.value3!==s)&&(a.value1=i,a.value2=r,a.value3=s,this.renderer.setProgram(this.program),e.call(this.gl,a.location,i,r,s),this.pipeline.currentShader=this),this):this},setUniform4:function(e,t,i,r,s,n,a){var o=this.uniforms[t];return o?((a||o.value1!==i||o.value2!==r||o.value3!==s||o.value4!==n)&&(o.value1=i,o.value2=r,o.value3=s,o.value4=n,this.renderer.setProgram(this.program),e.call(this.gl,o.location,i,r,s,n),this.pipeline.currentShader=this),this):this},set1f:function(e,t){return this.setUniform1(this.gl.uniform1f,e,t)},set2f:function(e,t,i){return this.setUniform2(this.gl.uniform2f,e,t,i)},set3f:function(e,t,i,r){return this.setUniform3(this.gl.uniform3f,e,t,i,r)},set4f:function(e,t,i,r,s){return this.setUniform4(this.gl.uniform4f,e,t,i,r,s)},set1fv:function(e,t){return this.setUniform1(this.gl.uniform1fv,e,t,!0)},set2fv:function(e,t){return this.setUniform1(this.gl.uniform2fv,e,t,!0)},set3fv:function(e,t){return this.setUniform1(this.gl.uniform3fv,e,t,!0)},set4fv:function(e,t){return this.setUniform1(this.gl.uniform4fv,e,t,!0)},set1iv:function(e,t){return this.setUniform1(this.gl.uniform1iv,e,t,!0)},set2iv:function(e,t){return this.setUniform1(this.gl.uniform2iv,e,t,!0)},set3iv:function(e,t){return this.setUniform1(this.gl.uniform3iv,e,t,!0)},set4iv:function(e,t){return this.setUniform1(this.gl.uniform4iv,e,t,!0)},set1i:function(e,t){return this.setUniform1(this.gl.uniform1i,e,t)},set2i:function(e,t,i){return this.setUniform2(this.gl.uniform2i,e,t,i)},set3i:function(e,t,i,r){return this.setUniform3(this.gl.uniform3i,e,t,i,r)},set4i:function(e,t,i,r,s){return this.setUniform4(this.gl.uniform4i,e,t,i,r,s)},setMatrix2fv:function(e,t,i){return this.setUniform2(this.gl.uniformMatrix2fv,e,t,i,!0)},setMatrix3fv:function(e,t,i){return this.setUniform2(this.gl.uniformMatrix3fv,e,t,i,!0)},setMatrix4fv:function(e,t,i){return this.setUniform2(this.gl.uniformMatrix4fv,e,t,i,!0)},destroy:function(){this.gl.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null,this.attributes=null,this.uniforms=null}});ew.exports=cae});var Gi=l((Bze,nw)=>{var pae=_(),tw=ch(),iw=se(),Bs=Pd(),et=X(),mae=hr(),Ir=Ns(),rw=Na(),Md=fe(),sw=bd(),gae=new pae({Extends:iw,initialize:function(t){iw.call(this);var i=t.game,r=i.renderer,s=r.gl;this.name=et(t,"name","WebGLPipeline"),this.game=i,this.renderer=r,this.manager,this.gl=s,this.view=i.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.topology=et(t,"topology",s.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.currentUnit=0,this.forceZero=et(t,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=t,this.glReset=!1},boot:function(){var e,t=this.gl,i=this.config,r=this.renderer;this.isPostFX||(this.projectionMatrix=new mae().identity());var s=this.renderTargets,n=et(i,"renderTarget",!1);typeof n=="boolean"&&n&&(n=1);var a=r.width,o=r.height;if(typeof n=="number")for(e=0;e<n;e++)s.push(new rw(r,a,o,1,0,!0));else if(Array.isArray(n))for(e=0;e<n.length;e++){var h=et(n[e],"scale",1),u=et(n[e],"minFilter",0),f=et(n[e],"autoClear",1);s.push(new rw(r,a,o,h,u,f))}s.length&&(this.currentRenderTarget=s[0]),this.setShadersFromConfig(i);var d=this.shaders,v=0;for(e=0;e<d.length;e++)d[e].vertexSize>v&&(v=d[e].vertexSize);var c=et(i,"batchSize",r.config.batchSize);this.vertexCapacity=c*6;var p=new ArrayBuffer(this.vertexCapacity*v);this.vertexData=p,this.bytes=new Uint8Array(p),this.vertexViewF32=new Float32Array(p),this.vertexViewU32=new Uint32Array(p);var m=et(i,"vertices",null);for(m?(this.vertexViewF32.set(m),this.vertexBuffer=r.createVertexBuffer(p,t.STATIC_DRAW)):this.vertexBuffer=r.createVertexBuffer(p.byteLength,t.DYNAMIC_DRAW),this.setVertexBuffer(),e=d.length-1;e>=0;e--)d[e].rebind();this.hasBooted=!0,r.on(Ir.RESIZE,this.resize,this),r.on(Ir.PRE_RENDER,this.onPreRender,this),r.on(Ir.RENDER,this.onRender,this),r.on(Ir.POST_RENDER,this.onPostRender,this),this.emit(Bs.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(e,t){var i=this.renderer;if(e!==this.currentShader||i.currentProgram!==this.currentShader.program){this.flush(),i.resetTextures();var r=this.setVertexBuffer();r&&!t&&(t=!0),e.bind(t,!1),this.currentShader=e}return this},getShaderByName:function(e){for(var t=this.shaders,i=0;i<t.length;i++)if(t[i].name===e)return t[i]},setShadersFromConfig:function(e){var t,i=this.shaders,r=this.renderer;for(t=0;t<i.length;t++)i[t].destroy();var s="vertShader",n="fragShader",a="attributes",o=et(e,s,null),h=Md.parseFragmentShaderMaxTextures(et(e,n,null),r.maxTextures),u=et(e,a,null),f=et(e,"shaders",[]),d=f.length;if(d===0)o&&h&&(this.shaders=[new sw(this,"default",o,h,tw(u))]);else{var v=[];for(t=0;t<d;t++){var c=f[t],p=et(c,"name","default"),m=et(c,s,o),g=Md.parseFragmentShaderMaxTextures(et(c,n,h),r.maxTextures),x=et(c,a,u);m&&g&&v.push(new sw(this,p,m,g,tw(x)))}this.shaders=v}return this.shaders.length===0?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},setGameObject:function(e,t){return t===void 0&&(t=e.frame),this.currentUnit=this.renderer.setTextureSource(t.source),this.currentUnit},shouldFlush:function(e){return e===void 0&&(e=0),this.vertexCount+e>this.vertexCapacity},resize:function(e,t){(e!==this.width||t!==this.height)&&this.flush(),this.width=e,this.height=t;for(var i=this.renderTargets,r=0;r<i.length;r++)i[r].resize(e,t);return this.setProjectionMatrix(e,t),this.emit(Bs.RESIZE,e,t,this),this.onResize(e,t),this},setProjectionMatrix:function(e,t){var i=this.projectionMatrix;if(!i)return this;this.projectionWidth=e,this.projectionHeight=t,i.ortho(0,e,t,0,-1e3,1e3);for(var r=this.shaders,s="uProjectionMatrix",n=0;n<r.length;n++){var a=r[n];a.hasUniform(s)&&(a.resetUniform(s),a.setMatrix4fv(s,!1,i.val,a))}return this},updateProjectionMatrix:function(){if(this.projectionMatrix){var e=this.renderer.projectionWidth,t=this.renderer.projectionHeight;(this.projectionWidth!==e||this.projectionHeight!==t)&&this.setProjectionMatrix(e,t)}},bind:function(e){if(e===void 0&&(e=this.currentShader),this.glReset)return this.rebind(e);var t=this.setVertexBuffer();return e.bind(t),this.currentShader=e,this.emit(Bs.BIND,this,e),this.onActive(e),this},rebind:function(e){this.setVertexBuffer();for(var t=this.shaders,i=t.length-1;i>=0;i--){var r=t[i].rebind();(!e||r===e)&&(this.currentShader=r)}return this.emit(Bs.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},setVertexBuffer:function(){var e=this.gl,t=this.vertexBuffer;return e.getParameter(e.ARRAY_BUFFER_BINDING)!==t?(e.bindBuffer(e.ARRAY_BUFFER,t),!0):!1},preBatch:function(e){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(e),this},postBatch:function(e){return this.onDraw(this.currentRenderTarget),this.onPostBatch(e),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(e){if(e===void 0&&(e=!1),this.vertexCount>0){this.emit(Bs.BEFORE_FLUSH,this,e),this.onBeforeFlush(e);var t=this.gl,i=this.vertexCount,r=this.currentShader.vertexSize;this.active&&(this.setVertexBuffer(),i===this.vertexCapacity?t.bufferData(t.ARRAY_BUFFER,this.vertexData,t.DYNAMIC_DRAW):t.bufferSubData(t.ARRAY_BUFFER,0,this.bytes.subarray(0,i*r)),t.drawArrays(this.topology,0,i)),this.vertexCount=0,this.emit(Bs.AFTER_FLUSH,this,e),this.onAfterFlush(e)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(e,t,i,r,s,n,a){var o=this.vertexViewF32,h=this.vertexViewU32,u=this.vertexCount*this.currentShader.vertexComponentCount-1;o[++u]=e,o[++u]=t,o[++u]=i,o[++u]=r,o[++u]=s,o[++u]=n,h[++u]=a,this.vertexCount++},batchQuad:function(e,t,i,r,s,n,a,o,h,u,f,d,v,c,p,m,g,x,T,E){E===void 0&&(E=this.currentUnit);var R=!1;return this.shouldFlush(6)&&(this.flush(),R=!0,E=this.setTexture2D(T)),this.batchVert(t,i,u,f,E,x,c),this.batchVert(r,s,u,v,E,x,m),this.batchVert(n,a,d,v,E,x,g),this.batchVert(t,i,u,f,E,x,c),this.batchVert(n,a,d,v,E,x,g),this.batchVert(o,h,d,f,E,x,p),this.onBatch(e),R},batchTri:function(e,t,i,r,s,n,a,o,h,u,f,d,v,c,p,m,g){g===void 0&&(g=this.currentUnit);var x=!1;return this.shouldFlush(3)&&(this.flush(),x=!0,g=this.setTexture2D(m)),this.batchVert(t,i,o,h,g,p,d),this.batchVert(r,s,o,f,g,p,v),this.batchVert(n,a,u,f,g,p,c),this.onBatch(e),x},drawFillRect:function(e,t,i,r,s,n,a,o){a===void 0&&(a=this.renderer.whiteTexture.glTexture),o===void 0&&(o=!0),e=Math.floor(e),t=Math.floor(t);var h=Math.floor(e+i),u=Math.floor(t+r),f=this.setTexture2D(a),d=Md.getTintAppendFloatAlphaAndSwap(s,n),v=0,c=0,p=1,m=1;o&&(c=1,m=0),this.batchQuad(null,e,t,e,u,h,u,h,t,v,c,p,m,d,d,d,d,0,a,f)},setTexture2D:function(e){return e===void 0&&(e=this.renderer.whiteTexture.glTexture),this.currentUnit=this.renderer.setTexture2D(e),this.currentUnit},bindTexture:function(e,t){t===void 0&&(t=0);var i=this.gl;return i.activeTexture(i.TEXTURE0+t),i.bindTexture(i.TEXTURE_2D,e),this},bindRenderTarget:function(e,t){return this.bindTexture(e.texture,t)},setTime:function(e){return this.set1f(e,this.game.loop.getDuration()),this},set1f:function(e,t,i){return i===void 0&&(i=this.currentShader),i.set1f(e,t),this},set2f:function(e,t,i,r){return r===void 0&&(r=this.currentShader),r.set2f(e,t,i),this},set3f:function(e,t,i,r,s){return s===void 0&&(s=this.currentShader),s.set3f(e,t,i,r),this},set4f:function(e,t,i,r,s,n){return n===void 0&&(n=this.currentShader),n.set4f(e,t,i,r,s),this},set1fv:function(e,t,i){return i===void 0&&(i=this.currentShader),i.set1fv(e,t),this},set2fv:function(e,t,i){return i===void 0&&(i=this.currentShader),i.set2fv(e,t),this},set3fv:function(e,t,i){return i===void 0&&(i=this.currentShader),i.set3fv(e,t),this},set4fv:function(e,t,i){return i===void 0&&(i=this.currentShader),i.set4fv(e,t),this},set1iv:function(e,t,i){return i===void 0&&(i=this.currentShader),i.set1iv(e,t),this},set2iv:function(e,t,i){return i===void 0&&(i=this.currentShader),i.set2iv(e,t),this},set3iv:function(e,t,i){return i===void 0&&(i=this.currentShader),i.set3iv(e,t),this},set4iv:function(e,t,i){return i===void 0&&(i=this.currentShader),i.set4iv(e,t),this},set1i:function(e,t,i){return i===void 0&&(i=this.currentShader),i.set1i(e,t),this},set2i:function(e,t,i,r){return r===void 0&&(r=this.currentShader),r.set2i(e,t,i),this},set3i:function(e,t,i,r,s){return s===void 0&&(s=this.currentShader),s.set3i(e,t,i,r),this},set4i:function(e,t,i,r,s,n){return n===void 0&&(n=this.currentShader),n.set4i(e,t,i,r,s),this},setMatrix2fv:function(e,t,i,r){return r===void 0&&(r=this.currentShader),r.setMatrix2fv(e,t,i),this},setMatrix3fv:function(e,t,i,r){return r===void 0&&(r=this.currentShader),r.setMatrix3fv(e,t,i),this},setMatrix4fv:function(e,t,i,r){return r===void 0&&(r=this.currentShader),r.setMatrix4fv(e,t,i),this},destroy:function(){this.emit(Bs.DESTROY,this);var e,t=this.shaders;for(e=0;e<t.length;e++)t[e].destroy();var i=this.renderTargets;for(e=0;e<i.length;e++)i[e].destroy();this.gl.deleteBuffer(this.vertexBuffer);var r=this.renderer;return r.off(Ir.RESIZE,this.resize,this),r.off(Ir.PRE_RENDER,this.onPreRender,this),r.off(Ir.RENDER,this.onRender,this),r.off(Ir.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this}});nw.exports=gae});var qd=l((Vze,aw)=>{var xae=_(),Ga=X(),Tae=M_(),Eae=O_(),yae=Sn(),ph=Gi(),Sae=new xae({Extends:ph,initialize:function(t){t.fragShader=Ga(t,"fragShader",Tae),t.vertShader=Ga(t,"vertShader",Eae),t.batchSize=Ga(t,"batchSize",1),t.vertices=Ga(t,"vertices",[-1,1,-1,-7,7,1]),t.attributes=Ga(t,"attributes",[{name:"inPosition",size:2,type:yae.FLOAT}]),ph.call(this,t)},boot:function(){ph.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(e,t){ph.prototype.resize.call(this,e,t),this.set2f("uResolution",e,t)},beginMask:function(e,t,i){var r=this.gl;if(e.bitmapMask&&r){var s=this.renderer;s.flush(),s.pushFramebuffer(e.mainFramebuffer),r.disable(r.STENCIL_TEST),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),s.currentCameraMask.mask!==e&&(s.currentMask.mask=e,s.currentMask.camera=i)}},endMask:function(e,t){var i=this.gl,r=this.renderer,s=e.bitmapMask;if(s&&i){r.flush(),r.pushFramebuffer(e.maskFramebuffer),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),r.setBlendMode(0,!0),s.renderWebGL(r,s,t),r.flush(),r.popFramebuffer(),r.popFramebuffer();var n=r.getCurrentStencilMask();n?(i.enable(i.STENCIL_TEST),n.mask.applyStencil(r,n.camera,!0)):r.currentMask.mask=null,r.pipelines.set(this),i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,e.maskTexture),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,e.mainTexture),this.set1i("uInvertMaskAlpha",e.invertAlpha),i.drawArrays(this.topology,0,3),r.resetTextures()}}});aw.exports=Sae});var Di=l((Uze,fw)=>{"use strict";function Od(e,t,i){i=i||2;var r=t&&t.length,s=r?t[0]*i:e.length,n=ow(e,0,s,i,!0),a=[];if(!n||n.next===n.prev)return a;var o,h,u,f,d,v,c;if(r&&(n=Pae(e,t,n,i)),e.length>80*i){o=u=e[0],h=f=e[1];for(var p=i;p<s;p+=i)d=e[p],v=e[p+1],d<o&&(o=d),v<h&&(h=v),d>u&&(u=d),v>f&&(f=v);c=Math.max(u-o,f-h),c=c!==0?1/c:0}return Da(n,a,i,o,h,c),a}function ow(e,t,i,r,s){var n,a;if(s===Nd(e,t,i,r)>0)for(n=t;n<i;n+=r)a=lw(n,e[n],e[n+1],a);else for(n=i-r;n>=t;n-=r)a=lw(n,e[n],e[n+1],a);return a&&mh(a,a.next)&&(Ba(a),a=a.next),a}function Br(e,t){if(!e)return e;t||(t=e);var i=e,r;do if(r=!1,!i.steiner&&(mh(i,i.next)||Se(i.prev,i,i.next)===0)){if(Ba(i),i=t=i.prev,i===i.next)break;r=!0}else i=i.next;while(r||i!==t);return t}function Da(e,t,i,r,s,n,a){if(!!e){!a&&n&&Oae(e,r,s,n);for(var o=e,h,u;e.prev!==e.next;){if(h=e.prev,u=e.next,n?Rae(e,r,s,n):Cae(e)){t.push(h.i/i),t.push(e.i/i),t.push(u.i/i),Ba(e),e=u.next,o=u.next;continue}if(e=u,e===o){a?a===1?(e=_ae(Br(e),t,i),Da(e,t,i,r,s,n,2)):a===2&&wae(e,t,i,r,s,n):Da(Br(e),t,i,r,s,n,1);break}}}}function Cae(e){var t=e.prev,i=e,r=e.next;if(Se(t,i,r)>=0)return!1;for(var s=e.next.next;s!==e.prev;){if(Cn(t.x,t.y,i.x,i.y,r.x,r.y,s.x,s.y)&&Se(s.prev,s,s.next)>=0)return!1;s=s.next}return!0}function Rae(e,t,i,r){var s=e.prev,n=e,a=e.next;if(Se(s,n,a)>=0)return!1;for(var o=s.x<n.x?s.x<a.x?s.x:a.x:n.x<a.x?n.x:a.x,h=s.y<n.y?s.y<a.y?s.y:a.y:n.y<a.y?n.y:a.y,u=s.x>n.x?s.x>a.x?s.x:a.x:n.x>a.x?n.x:a.x,f=s.y>n.y?s.y>a.y?s.y:a.y:n.y>a.y?n.y:a.y,d=Ld(o,h,t,i,r),v=Ld(u,f,t,i,r),c=e.prevZ,p=e.nextZ;c&&c.z>=d&&p&&p.z<=v;){if(c!==e.prev&&c!==e.next&&Cn(s.x,s.y,n.x,n.y,a.x,a.y,c.x,c.y)&&Se(c.prev,c,c.next)>=0||(c=c.prevZ,p!==e.prev&&p!==e.next&&Cn(s.x,s.y,n.x,n.y,a.x,a.y,p.x,p.y)&&Se(p.prev,p,p.next)>=0))return!1;p=p.nextZ}for(;c&&c.z>=d;){if(c!==e.prev&&c!==e.next&&Cn(s.x,s.y,n.x,n.y,a.x,a.y,c.x,c.y)&&Se(c.prev,c,c.next)>=0)return!1;c=c.prevZ}for(;p&&p.z<=v;){if(p!==e.prev&&p!==e.next&&Cn(s.x,s.y,n.x,n.y,a.x,a.y,p.x,p.y)&&Se(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function _ae(e,t,i){var r=e;do{var s=r.prev,n=r.next.next;!mh(s,n)&&hw(s,r,r.next,n)&&Ia(s,n)&&Ia(n,s)&&(t.push(s.i/i),t.push(r.i/i),t.push(n.i/i),Ba(r),Ba(r.next),r=e=n),r=r.next}while(r!==e);return Br(r)}function wae(e,t,i,r,s,n){var a=e;do{for(var o=a.next.next;o!==a.prev;){if(a.i!==o.i&&Nae(a,o)){var h=uw(a,o);a=Br(a,a.next),h=Br(h,h.next),Da(a,t,i,r,s,n),Da(h,t,i,r,s,n);return}o=o.next}a=a.next}while(a!==e)}function Pae(e,t,i,r){var s=[],n,a,o,h,u;for(n=0,a=t.length;n<a;n++)o=t[n]*r,h=n<a-1?t[n+1]*r:e.length,u=ow(e,o,h,r,!1),u===u.next&&(u.steiner=!0),s.push(Fae(u));for(s.sort(Aae),n=0;n<s.length;n++)bae(s[n],i),i=Br(i,i.next);return i}function Aae(e,t){return e.x-t.x}function bae(e,t){if(t=Mae(e,t),t){var i=uw(t,e);Br(t,t.next),Br(i,i.next)}}function Mae(e,t){var i=t,r=e.x,s=e.y,n=-1/0,a;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){var o=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(o<=r&&o>n){if(n=o,o===r){if(s===i.y)return i;if(s===i.next.y)return i.next}a=i.x<i.next.x?i:i.next}}i=i.next}while(i!==t);if(!a)return null;if(r===n)return a;var h=a,u=a.x,f=a.y,d=1/0,v;i=a;do r>=i.x&&i.x>=u&&r!==i.x&&Cn(s<f?r:n,s,u,f,s<f?n:r,s,i.x,i.y)&&(v=Math.abs(s-i.y)/(r-i.x),Ia(i,e)&&(v<d||v===d&&(i.x>a.x||i.x===a.x&&qae(a,i)))&&(a=i,d=v)),i=i.next;while(i!==h);return a}function qae(e,t){return Se(e.prev,e,t.prev)<0&&Se(t.next,e,e.next)<0}function Oae(e,t,i,r){var s=e;do s.z===null&&(s.z=Ld(s.x,s.y,t,i,r)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==e);s.prevZ.nextZ=null,s.prevZ=null,Lae(s)}function Lae(e){var t,i,r,s,n,a,o,h,u=1;do{for(i=e,e=null,n=null,a=0;i;){for(a++,r=i,o=0,t=0;t<u&&(o++,r=r.nextZ,!!r);t++);for(h=u;o>0||h>0&&r;)o!==0&&(h===0||!r||i.z<=r.z)?(s=i,i=i.nextZ,o--):(s=r,r=r.nextZ,h--),n?n.nextZ=s:e=s,s.prevZ=n,n=s;i=r}n.nextZ=null,u*=2}while(a>1);return e}function Ld(e,t,i,r,s){return e=32767*(e-i)*s,t=32767*(t-r)*s,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function Fae(e){var t=e,i=e;do(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next;while(t!==e);return i}function Cn(e,t,i,r,s,n,a,o){return(s-a)*(t-o)-(e-a)*(n-o)>=0&&(e-a)*(r-o)-(i-a)*(t-o)>=0&&(i-a)*(n-o)-(s-a)*(r-o)>=0}function Nae(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!Gae(e,t)&&(Ia(e,t)&&Ia(t,e)&&Dae(e,t)&&(Se(e.prev,e,t.prev)||Se(e,t.prev,t))||mh(e,t)&&Se(e.prev,e,e.next)>0&&Se(t.prev,t,t.next)>0)}function Se(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function mh(e,t){return e.x===t.x&&e.y===t.y}function hw(e,t,i,r){var s=xh(Se(e,t,i)),n=xh(Se(e,t,r)),a=xh(Se(i,r,e)),o=xh(Se(i,r,t));return!!(s!==n&&a!==o||s===0&&gh(e,i,t)||n===0&&gh(e,r,t)||a===0&&gh(i,e,r)||o===0&&gh(i,t,r))}function gh(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function xh(e){return e>0?1:e<0?-1:0}function Gae(e,t){var i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&hw(i,i.next,e,t))return!0;i=i.next}while(i!==e);return!1}function Ia(e,t){return Se(e.prev,e,e.next)<0?Se(e,t,e.next)>=0&&Se(e,e.prev,t)>=0:Se(e,t,e.prev)<0||Se(e,e.next,t)<0}function Dae(e,t){var i=e,r=!1,s=(e.x+t.x)/2,n=(e.y+t.y)/2;do i.y>n!=i.next.y>n&&i.next.y!==i.y&&s<(i.next.x-i.x)*(n-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next;while(i!==e);return r}function uw(e,t){var i=new Fd(e.i,e.x,e.y),r=new Fd(t.i,t.x,t.y),s=e.next,n=t.prev;return e.next=t,t.prev=e,i.next=s,s.prev=i,r.next=i,i.prev=r,n.next=r,r.prev=n,r}function lw(e,t,i,r){var s=new Fd(e,t,i);return r?(s.next=r.next,s.prev=r,r.next.prev=s,r.next=s):(s.prev=s,s.next=s),s}function Ba(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Fd(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}Od.deviation=function(e,t,i,r){var s=t&&t.length,n=s?t[0]*i:e.length,a=Math.abs(Nd(e,0,n,i));if(s)for(var o=0,h=t.length;o<h;o++){var u=t[o]*i,f=o<h-1?t[o+1]*i:e.length;a-=Math.abs(Nd(e,u,f,i))}var d=0;for(o=0;o<r.length;o+=3){var v=r[o]*i,c=r[o+1]*i,p=r[o+2]*i;d+=Math.abs((e[v]-e[p])*(e[c+1]-e[v+1])-(e[v]-e[c])*(e[p+1]-e[v+1]))}return a===0&&d===0?0:Math.abs((d-a)/a)};function Nd(e,t,i,r){for(var s=0,n=t,a=i-r;n<i;n+=r)s+=(e[a]-e[n])*(e[n+1]+e[a+1]),a=n;return s}Od.flatten=function(e){for(var t=e[0][0].length,i={vertices:[],holes:[],dimensions:t},r=0,s=0;s<e.length;s++){for(var n=0;n<e[s].length;n++)for(var a=0;a<t;a++)i.vertices.push(e[s][n][a]);s>0&&(r+=e[s-1].length,i.holes.push(r))}return i};fw.exports=Od});var vw=l((kze,dw)=>{dw.exports=["#define SHADER_NAME PHASER_GRAPHICS_FS","","precision mediump float;","","varying vec4 outColor;","","void main ()","{","    gl_FragColor = vec4(outColor.bgr * outColor.a, outColor.a);","}",""].join(`
`)});var pw=l((zze,cw)=>{cw.exports=["#define SHADER_NAME PHASER_GRAPHICS_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec4 inColor;","","varying vec4 outColor;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outColor = inColor;","}",""].join(`
`)});var Id=l((Xze,mw)=>{var Iae=_(),Bae=Di(),Gd=X(),Vae=vw(),Uae=pw(),kae=dt(),zae=Sn(),Dd=Gi(),Xae=new Iae({Extends:Dd,initialize:function(t){t.fragShader=Gd(t,"fragShader",Vae),t.vertShader=Gd(t,"vertShader",Uae),t.attributes=Gd(t,"attributes",[{name:"inPosition",size:2},{name:"inColor",size:4,type:zae.UNSIGNED_BYTE,normalized:!0}]),Dd.call(this,t),this.calcMatrix=new kae,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},batchFillRect:function(e,t,i,r,s,n){this.renderer.pipelines.set(this);var a=this.calcMatrix;n&&n.multiply(s,a);var o=e+i,h=t+r,u=a.getX(e,t),f=a.getY(e,t),d=a.getX(e,h),v=a.getY(e,h),c=a.getX(o,h),p=a.getY(o,h),m=a.getX(o,t),g=a.getY(o,t),x=this.fillTint;this.batchQuad(u,f,d,v,c,p,m,g,x.TL,x.TR,x.BL,x.BR)},batchFillTriangle:function(e,t,i,r,s,n,a,o){this.renderer.pipelines.set(this);var h=this.calcMatrix;o&&o.multiply(a,h);var u=h.getX(e,t),f=h.getY(e,t),d=h.getX(i,r),v=h.getY(i,r),c=h.getX(s,n),p=h.getY(s,n),m=this.fillTint;this.batchTri(u,f,d,v,c,p,m.TL,m.TR,m.BL)},batchStrokeTriangle:function(e,t,i,r,s,n,a,o,h){var u=this.tempTriangle;u[0].x=e,u[0].y=t,u[0].width=a,u[1].x=i,u[1].y=r,u[1].width=a,u[2].x=s,u[2].y=n,u[2].width=a,u[3].x=e,u[3].y=t,u[3].width=a,this.batchStrokePath(u,a,!1,o,h)},batchFillPath:function(e,t,i){this.renderer.pipelines.set(this);var r=this.calcMatrix;i&&i.multiply(t,r);for(var s=e.length,n=this.polygonCache,a,o,h=this.fillTint.TL,u=this.fillTint.TR,f=this.fillTint.BL,d=0;d<s;++d)o=e[d],n.push(o.x,o.y);a=Bae(n),s=a.length;for(var v=0;v<s;v+=3){var c=a[v+0]*2,p=a[v+1]*2,m=a[v+2]*2,g=n[c+0],x=n[c+1],T=n[p+0],E=n[p+1],R=n[m+0],y=n[m+1],C=r.getX(g,x),S=r.getY(g,x),w=r.getX(T,E),P=r.getY(T,E),A=r.getX(R,y),M=r.getY(R,y);this.batchTri(C,S,w,P,A,M,h,u,f)}n.length=0},batchStrokePath:function(e,t,i,r,s){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var n=e.length-1,a=0;a<n;a++){var o=e[a],h=e[a+1];this.batchLine(o.x,o.y,h.x,h.y,o.width/2,h.width/2,t,a,!i&&a===n-1,r,s)}},batchLine:function(e,t,i,r,s,n,a,o,h,u,f){this.renderer.pipelines.set(this);var d=this.calcMatrix;f&&f.multiply(u,d);var v=i-e,c=r-t,p=Math.sqrt(v*v+c*c),m=s*(r-t)/p,g=s*(e-i)/p,x=n*(r-t)/p,T=n*(e-i)/p,E=i-x,R=r-T,y=e-m,C=t-g,S=i+x,w=r+T,P=e+m,A=t+g,M=d.getX(E,R),N=d.getY(E,R),O=d.getX(y,C),D=d.getY(y,C),b=d.getX(S,w),q=d.getY(S,w),G=d.getX(P,A),L=d.getY(P,A),F=this.strokeTint,V=F.TL,Y=F.TR,z=F.BL,Z=F.BR;if(this.batchQuad(G,L,O,D,M,N,b,q,V,Y,z,Z),!(a<=2)){var U=this.prevQuad,H=this.firstQuad;o>0&&U[4]?this.batchQuad(G,L,O,D,U[0],U[1],U[2],U[3],V,Y,z,Z):(H[0]=G,H[1]=L,H[2]=O,H[3]=D,H[4]=1),h&&H[4]?this.batchQuad(M,N,b,q,H[0],H[1],H[2],H[3],V,Y,z,Z):(U[0]=M,U[1]=N,U[2]=b,U[3]=q,U[4]=1)}},batchVert:function(e,t,i){var r=this.vertexViewF32,s=this.vertexViewU32,n=this.vertexCount*this.currentShader.vertexComponentCount-1;r[++n]=e,r[++n]=t,s[++n]=i,this.vertexCount++},batchQuad:function(e,t,i,r,s,n,a,o,h,u,f,d){var v=!1;return this.shouldFlush(6)&&(this.flush(),v=!0),this.batchVert(e,t,h),this.batchVert(i,r,f),this.batchVert(s,n,d),this.batchVert(e,t,h),this.batchVert(s,n,d),this.batchVert(a,o,u),v},batchTri:function(e,t,i,r,s,n,a,o,h){var u=!1;return this.shouldFlush(3)&&(this.flush(),u=!0),this.batchVert(e,t,a),this.batchVert(i,r,o),this.batchVert(s,n,h),u},destroy:function(){return Dd.prototype.destroy.call(this),this.polygonCache=null,this}});mw.exports=Xae});var xw=l((Yze,gw)=>{gw.exports=["#define SHADER_NAME PHASER_LIGHT_FS","","precision mediump float;","","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","","const int kMaxLights = %LIGHT_COUNT%;","","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","","varying vec2 outTexCoord;","varying vec4 outTint;","","void main()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 color = texture2D(uMainSampler, outTexCoord) * vec4(outTint.bgr * outTint.a, outTint.a);","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","","    for (int index = 0; index < kMaxLights; ++index)","    {","        Light light = uLights[index];","        vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","        vec3 lightNormal = normalize(lightDir);","        float distToSurf = length(lightDir) * uCamera.w;","        float diffuseFactor = max(dot(normal, lightNormal), 0.0);","        float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","        float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","        vec3 diffuse = light.color * diffuseFactor;","        finalColor += (attenuation * diffuse) * light.intensity;","    }","","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}",""].join(`
`)});var Ew=l((Wze,Tw)=>{Tw.exports=["#define SHADER_NAME PHASER_MULTI_FS","","precision mediump float;","","uniform sampler2D uMainSampler[%count%];","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture;","","    %forloop%","","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join(`
`)});var Sw=l((Hze,yw)=>{yw.exports=["#define SHADER_NAME PHASER_MULTI_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join(`
`)});var Rn=l((jze,Cw)=>{var Yae=_(),Wae=Di(),Bd=X(),Hae=Ew(),jae=Sw(),Th=dt(),Vd=fe(),Kae=Sn(),Ud=Gi(),Zae=new Yae({Extends:Ud,initialize:function(t){var i=t.game.renderer,r=Bd(t,"fragShader",Hae);t.fragShader=Vd.parseFragmentShaderMaxTextures(r,i.maxTextures),t.vertShader=Bd(t,"vertShader",jae),t.attributes=Bd(t,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:Kae.UNSIGNED_BYTE,normalized:!0}]),Ud.call(this,t),this._tempMatrix1=new Th,this._tempMatrix2=new Th,this._tempMatrix3=new Th,this.calcMatrix=new Th,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){Ud.prototype.boot.call(this),this.currentShader.set1iv("uMainSampler",this.renderer.textureIndexes)},batchSprite:function(e,t,i){this.manager.set(this,e);var r=this._tempMatrix1,s=this._tempMatrix2,n=this._tempMatrix3,a=e.frame,o=a.glTexture,h=a.u0,u=a.v0,f=a.u1,d=a.v1,v=a.x,c=a.y,p=a.cutWidth,m=a.cutHeight,g=a.customPivot,x=e.displayOriginX,T=e.displayOriginY,E=-x+v,R=-T+c;if(e.isCropped){var y=e._crop;(y.flipX!==e.flipX||y.flipY!==e.flipY)&&a.updateCropUVs(y,e.flipX,e.flipY),h=y.u0,u=y.v0,f=y.u1,d=y.v1,p=y.width,m=y.height,v=y.x,c=y.y,E=-x+v,R=-T+c}var C=1,S=1;e.flipX&&(g||(E+=-a.realWidth+x*2),C=-1),(e.flipY||a.source.isGLTexture&&!o.flipY)&&(g||(R+=-a.realHeight+T*2),S=-1),s.applyITRS(e.x,e.y,e.rotation,e.scaleX*C,e.scaleY*S),r.copyFrom(t.matrix),i?(r.multiplyWithOffset(i,-t.scrollX*e.scrollFactorX,-t.scrollY*e.scrollFactorY),s.e=e.x,s.f=e.y):(s.e-=t.scrollX*e.scrollFactorX,s.f-=t.scrollY*e.scrollFactorY),r.multiply(s,n);var w=E+p,P=R+m,A=t.roundPixels,M=n.getXRound(E,R,A),N=n.getYRound(E,R,A),O=n.getXRound(E,P,A),D=n.getYRound(E,P,A),b=n.getXRound(w,P,A),q=n.getYRound(w,P,A),G=n.getXRound(w,R,A),L=n.getYRound(w,R,A),F=Vd.getTintAppendFloatAlpha,V=t.alpha,Y=F(e.tintTopLeft,V*e._alphaTL),z=F(e.tintTopRight,V*e._alphaTR),Z=F(e.tintBottomLeft,V*e._alphaBL),U=F(e.tintBottomRight,V*e._alphaBR);this.shouldFlush(6)&&this.flush();var H=this.setGameObject(e,a);this.manager.preBatch(e),this.batchQuad(e,M,N,O,D,b,q,G,L,h,u,f,d,Y,z,Z,U,e.tintFill,o,H),this.manager.postBatch(e)},batchTexture:function(e,t,i,r,s,n,a,o,h,u,f,d,v,c,p,m,g,x,T,E,R,y,C,S,w,P,A,M,N,O,D,b){this.manager.set(this,e);var q=this._tempMatrix1,G=this._tempMatrix2,L=this._tempMatrix3,F=x/i+A,V=T/r+M,Y=(x+E)/i+A,z=(T+R)/r+M,Z=a,U=o,H=-m,at=-g;if(e.isCropped){var Te=e._crop,Bt=Te.width,Ue=Te.height;Z=Bt,U=Ue,a=Bt,o=Ue,x=Te.x,T=Te.y;var ot=x,xt=T;d&&(ot=E-Te.x-Bt),v&&(xt=R-Te.y-Ue),F=ot/i+A,V=xt/r+M,Y=(ot+Bt)/i+A,z=(xt+Ue)/r+M,H=-m+x,at=-g+T}v=v^(!D&&t.isRenderTexture?1:0),d&&(Z*=-1,H+=a),v&&(U*=-1,at+=o);var re=H+Z,ht=at+U;G.applyITRS(s,n,f,h,u),q.copyFrom(N.matrix),O?(q.multiplyWithOffset(O,-N.scrollX*c,-N.scrollY*p),G.e=s,G.f=n):(G.e-=N.scrollX*c,G.f-=N.scrollY*p),q.multiply(G,L);var _e=N.roundPixels,ti=L.getXRound(H,at,_e),bt=L.getYRound(H,at,_e),$e=L.getXRound(H,ht,_e),Vt=L.getYRound(H,ht,_e),ii=L.getXRound(re,ht,_e),Ee=L.getYRound(re,ht,_e),oe=L.getXRound(re,at,_e),Tt=L.getYRound(re,at,_e);b===void 0&&(b=this.renderer.setTexture2D(t)),e&&this.manager.preBatch(e),this.batchQuad(e,ti,bt,$e,Vt,ii,Ee,oe,Tt,F,V,Y,z,y,C,S,w,P,t,b),e&&this.manager.postBatch(e)},batchTextureFrame:function(e,t,i,r,s,n,a){this.manager.set(this);var o=this._tempMatrix1.copyFrom(n),h=this._tempMatrix2,u=t+e.width,f=i+e.height;a?o.multiply(a,h):h=o;var d=h.getX(t,i),v=h.getY(t,i),c=h.getX(t,f),p=h.getY(t,f),m=h.getX(u,f),g=h.getY(u,f),x=h.getX(u,i),T=h.getY(u,i),E=this.renderer.setTextureSource(e.source);r=Vd.getTintAppendFloatAlpha(r,s),this.batchQuad(null,d,v,c,p,m,g,x,T,e.u0,e.v0,e.u1,e.v1,r,r,r,r,0,e.glTexture,E)},batchFillRect:function(e,t,i,r,s,n){this.renderer.pipelines.set(this);var a=this.calcMatrix;n&&n.multiply(s,a);var o=e+i,h=t+r,u=a.getX(e,t),f=a.getY(e,t),d=a.getX(e,h),v=a.getY(e,h),c=a.getX(o,h),p=a.getY(o,h),m=a.getX(o,t),g=a.getY(o,t),x=this.fillTint;this.batchQuad(null,u,f,d,v,c,p,m,g,0,0,1,1,x.TL,x.TR,x.BL,x.BR,2)},batchFillTriangle:function(e,t,i,r,s,n,a,o){this.renderer.pipelines.set(this);var h=this.calcMatrix;o&&o.multiply(a,h);var u=h.getX(e,t),f=h.getY(e,t),d=h.getX(i,r),v=h.getY(i,r),c=h.getX(s,n),p=h.getY(s,n),m=this.fillTint;this.batchTri(null,u,f,d,v,c,p,0,0,1,1,m.TL,m.TR,m.BL,2)},batchStrokeTriangle:function(e,t,i,r,s,n,a,o,h){var u=this.tempTriangle;u[0].x=e,u[0].y=t,u[0].width=a,u[1].x=i,u[1].y=r,u[1].width=a,u[2].x=s,u[2].y=n,u[2].width=a,u[3].x=e,u[3].y=t,u[3].width=a,this.batchStrokePath(u,a,!1,o,h)},batchFillPath:function(e,t,i){this.renderer.pipelines.set(this);var r=this.calcMatrix;i&&i.multiply(t,r);for(var s=e.length,n=this.polygonCache,a,o,h=this.fillTint.TL,u=this.fillTint.TR,f=this.fillTint.BL,d=0;d<s;++d)o=e[d],n.push(o.x,o.y);a=Wae(n),s=a.length;for(var v=0;v<s;v+=3){var c=a[v+0]*2,p=a[v+1]*2,m=a[v+2]*2,g=n[c+0],x=n[c+1],T=n[p+0],E=n[p+1],R=n[m+0],y=n[m+1],C=r.getX(g,x),S=r.getY(g,x),w=r.getX(T,E),P=r.getY(T,E),A=r.getX(R,y),M=r.getY(R,y);this.batchTri(null,C,S,w,P,A,M,0,0,1,1,h,u,f,2)}n.length=0},batchStrokePath:function(e,t,i,r,s){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var n=e.length-1,a=0;a<n;a++){var o=e[a],h=e[a+1];this.batchLine(o.x,o.y,h.x,h.y,o.width/2,h.width/2,t,a,!i&&a===n-1,r,s)}},batchLine:function(e,t,i,r,s,n,a,o,h,u,f){this.renderer.pipelines.set(this);var d=this.calcMatrix;f&&f.multiply(u,d);var v=i-e,c=r-t,p=Math.sqrt(v*v+c*c),m=s*(r-t)/p,g=s*(e-i)/p,x=n*(r-t)/p,T=n*(e-i)/p,E=i-x,R=r-T,y=e-m,C=t-g,S=i+x,w=r+T,P=e+m,A=t+g,M=d.getX(E,R),N=d.getY(E,R),O=d.getX(y,C),D=d.getY(y,C),b=d.getX(S,w),q=d.getY(S,w),G=d.getX(P,A),L=d.getY(P,A),F=this.strokeTint,V=F.TL,Y=F.TR,z=F.BL,Z=F.BR;if(this.batchQuad(null,G,L,O,D,M,N,b,q,0,0,1,1,V,Y,z,Z,2),!(a<=2)){var U=this.prevQuad,H=this.firstQuad;o>0&&U[4]?this.batchQuad(null,G,L,O,D,U[0],U[1],U[2],U[3],0,0,1,1,V,Y,z,Z,2):(H[0]=G,H[1]=L,H[2]=O,H[3]=D,H[4]=1),h&&H[4]?this.batchQuad(null,M,N,b,q,H[0],H[1],H[2],H[3],0,0,1,1,V,Y,z,Z,2):(U[0]=M,U[1]=N,U[2]=b,U[3]=q,U[4]=1)}}});Cw.exports=Zae});var Xd=l((Kze,_w)=>{var Jae=_(),Qae=X(),$ae=xw(),Va=Rn(),eoe=le(),toe=Gi(),kd=10,zd=new eoe,Rw=new Jae({Extends:Va,initialize:function(t){kd=t.game.renderer.config.maxLights;for(var i=Qae(t,"fragShader",$ae),r=[],s=1;s<=kd;s++)r.push({name:"lights"+s,fragShader:i.replace("%LIGHT_COUNT%",s.toString())});t.shaders=r,Va.call(this,t),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.defaultNormalMap,this.lightsActive=!0},boot:function(){toe.prototype.boot.call(this);var e=this.gl,t=e.createTexture();e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,t),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array([127,127,255,255])),this.defaultNormalMap={glTexture:t};for(var i=0;i<this.shaders.length;i++)this["lightShader"+(i+1)]=this.shaders[i]},onRender:function(e,t){var i=e.sys.lights;if(this.lightsActive=!1,!(!i||!i.active)){var r=i.getLights(t),s=r.length;if(s!==0){this.lightsActive=!0,this.setShader(this["lightShader"+s],!0);var n,a=this.renderer,o=a.height,h=t.matrix;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",t.x,t.y,t.rotation,t.zoom),this.set3f("uAmbientLightColor",i.ambientColor.r,i.ambientColor.g,i.ambientColor.b),n=0;n<s;n++){var u=r[n].light,f=u.color,d="uLights["+n+"].";h.transformPoint(u.x,u.y,zd),this.set2f(d+"position",zd.x-t.scrollX*u.scrollFactorX*t.zoom,o-(zd.y-t.scrollY*u.scrollFactorY*t.zoom)),this.set3f(d+"color",f.r,f.g,f.b),this.set1f(d+"intensity",u.intensity),this.set1f(d+"radius",u.radius)}this.currentNormalMapRotation=null}}},setNormalMapRotation:function(e){if(e!==this.currentNormalMapRotation||this.vertexCount===0){this.vertexCount>0&&this.flush();var t=this.inverseRotationMatrix;if(e){var i=-e,r=Math.cos(i),s=Math.sin(i);t[1]=s,t[3]=-s,t[0]=t[4]=r}else t[0]=t[4]=1,t[1]=t[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,t),this.currentNormalMapRotation=e}},setTexture2D:function(e,t){var i=this.renderer;e===void 0&&(e=i.tempTextures[0]);var r=this.getNormalMap(t);i.isNewNormalMap(e,r)&&(this.flush(),i.setTextureZero(e),i.setNormalMap(r));var s=t?t.rotation:0;return this.setNormalMapRotation(s),this.currentUnit=0,0},setGameObject:function(e,t){t===void 0&&(t=e.frame);var i=this.renderer,r=t.glTexture,s=this.getNormalMap(e);return i.isNewNormalMap()&&(this.flush(),i.setTextureZero(r),i.setNormalMap(s)),this.setNormalMapRotation(e.rotation),this.currentUnit=0,0},getNormalMap:function(e){var t;return e?e.displayTexture?t=e.displayTexture.dataSource[e.displayFrame.sourceIndex]:e.texture?t=e.texture.dataSource[e.frame.sourceIndex]:e.tileset&&(Array.isArray(e.tileset)?t=e.tileset[0].image.dataSource[0]:t=e.tileset.image.dataSource[0]):t=this.defaultNormalMap,t||(t=this.defaultNormalMap),t.glTexture},batchSprite:function(e,t,i){this.lightsActive&&Va.prototype.batchSprite.call(this,e,t,i)},batchTexture:function(e,t,i,r,s,n,a,o,h,u,f,d,v,c,p,m,g,x,T,E,R,y,C,S,w,P,A,M,N,O,D,b){this.lightsActive&&Va.prototype.batchTexture.call(this,e,t,i,r,s,n,a,o,h,u,f,d,v,c,p,m,g,x,T,E,R,y,C,S,w,P,A,M,N,O,D,b)},batchTextureFrame:function(e,t,i,r,s,n,a){this.lightsActive&&Va.prototype.batchTextureFrame.call(this,e,t,i,r,s,n,a)}});Rw.LIGHT_COUNT=kd;_w.exports=Rw});var Pw=l((Zze,ww)=>{ww.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform float uCameraZoom;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","","    float distToSurf = length(center - gl_FragCoord.xy);","","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}",""].join(`
`)});var bw=l((Jze,Aw)=>{Aw.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}",""].join(`
`)});var Wd=l((Qze,qw)=>{var ioe=_(),Yd=X(),roe=Pw(),soe=bw(),Mw=Gi(),noe=new ioe({Extends:Mw,initialize:function(t){t.vertShader=Yd(t,"vertShader",soe),t.fragShader=Yd(t,"fragShader",roe),t.attributes=Yd(t,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),Mw.call(this,t)},onRender:function(e,t){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",t.zoom)},batchPointLight:function(e,t,i,r,s,n,a,o,h,u,f,d){var v=e.color,c=e.intensity,p=e.radius,m=e.attenuation,g=v.r*c,x=v.g*c,T=v.b*c,E=t.alpha*e.alpha;this.shouldFlush(6)&&this.flush(),this.batchLightVert(i,r,f,d,p,m,g,x,T,E),this.batchLightVert(s,n,f,d,p,m,g,x,T,E),this.batchLightVert(a,o,f,d,p,m,g,x,T,E),this.batchLightVert(i,r,f,d,p,m,g,x,T,E),this.batchLightVert(a,o,f,d,p,m,g,x,T,E),this.batchLightVert(h,u,f,d,p,m,g,x,T,E)},batchLightVert:function(e,t,i,r,s,n,a,o,h,u){var f=this.vertexViewF32,d=this.vertexCount*this.currentShader.vertexComponentCount-1;f[++d]=e,f[++d]=t,f[++d]=i,f[++d]=r,f[++d]=s,f[++d]=n,f[++d]=a,f[++d]=o,f[++d]=h,f[++d]=u,this.vertexCount++}});qw.exports=noe});var Hd=l(($ze,Lw)=>{var aoe=_(),ooe=X(),Ow=Rn(),hoe=new aoe({Extends:Ow,initialize:function(t){t.topology=5,t.batchSize=ooe(t,"batchSize",256),Ow.call(this,t)}});Lw.exports=hoe});var Nw=l((eXe,Fw)=>{Fw.exports=["#define SHADER_NAME PHASER_SINGLE_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join(`
`)});var Dw=l((tXe,Gw)=>{Gw.exports=["#define SHADER_NAME PHASER_SINGLE_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join(`
`)});var jd=l((iXe,Vw)=>{var uoe=_(),Iw=X(),Bw=Rn(),loe=Nw(),foe=Dw(),doe=Gi(),voe=new uoe({Extends:Bw,initialize:function(t){t.fragShader=Iw(t,"fragShader",loe),t.vertShader=Iw(t,"vertShader",foe),t.forceZero=!0,Bw.call(this,t)},boot:function(){doe.prototype.boot.call(this),this.set1i("uMainSampler",0)}});Vw.exports=voe});var kw=l((rXe,Uw)=>{Uw.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = frame1 + frame2 * uStrength;","}",""].join(`
`)});var Eh=l((sXe,zw)=>{var coe=_(),poe=new coe({initialize:function(){this._matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.alpha=1,this._dirty=!0,this._data},set:function(e){return this._matrix=e,this._dirty=!0,this},reset:function(){var e=this._matrix;return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e[6]=1,e[7]=0,e[8]=0,e[9]=0,e[10]=0,e[11]=0,e[12]=1,e[13]=0,e[14]=0,e[15]=0,e[16]=0,e[17]=0,e[18]=1,e[19]=0,this._dirty=!0,this},getData:function(){if(this._dirty){var e=new Float32Array(this._matrix);e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,this._data=e,this._dirty=!1}return this._data},brightness:function(e,t){e===void 0&&(e=0),t===void 0&&(t=!1);var i=e;return this.multiply([i,0,0,0,0,0,i,0,0,0,0,0,i,0,0,0,0,0,1,0],t)},saturate:function(e,t){e===void 0&&(e=0),t===void 0&&(t=!1);var i=e*2/3+1,r=(i-1)*-.5;return this.multiply([i,r,r,0,0,r,i,r,0,0,r,r,i,0,0,0,0,0,1,0],t)},desaturate:function(e){return e===void 0&&(e=!1),this.saturate(-1,e)},hue:function(e,t){e===void 0&&(e=0),t===void 0&&(t=!1),e=e/180*Math.PI;var i=Math.cos(e),r=Math.sin(e),s=.213,n=.715,a=.072;return this.multiply([s+i*(1-s)+r*-s,n+i*-n+r*-n,a+i*-a+r*(1-a),0,0,s+i*-s+r*.143,n+i*(1-n)+r*.14,a+i*-a+r*-.283,0,0,s+i*-s+r*-(1-s),n+i*-n+r*n,a+i*(1-a)+r*a,0,0,0,0,0,1,0],t)},grayscale:function(e,t){return e===void 0&&(e=1),t===void 0&&(t=!1),this.saturate(-e,t)},blackWhite:function(e){return e===void 0&&(e=!1),this.multiply([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],e)},contrast:function(e,t){e===void 0&&(e=0),t===void 0&&(t=!1);var i=e+1,r=-.5*(i-1);return this.multiply([i,0,0,0,r,0,i,0,0,r,0,0,i,0,r,0,0,0,1,0],t)},negative:function(e){return e===void 0&&(e=!1),this.multiply([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],e)},desaturateLuminance:function(e){return e===void 0&&(e=!1),this.multiply([.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],e)},sepia:function(e){return e===void 0&&(e=!1),this.multiply([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],e)},night:function(e,t){return e===void 0&&(e=.1),t===void 0&&(t=!1),this.multiply([e*-2,-e,0,0,0,-e,0,e,0,0,0,e,e*2,0,0,0,0,0,1,0],t)},lsd:function(e){return e===void 0&&(e=!1),this.multiply([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],e)},brown:function(e){return e===void 0&&(e=!1),this.multiply([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],e)},vintagePinhole:function(e){return e===void 0&&(e=!1),this.multiply([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],e)},kodachrome:function(e){return e===void 0&&(e=!1),this.multiply([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],e)},technicolor:function(e){return e===void 0&&(e=!1),this.multiply([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],e)},polaroid:function(e){return e===void 0&&(e=!1),this.multiply([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],e)},shiftToBGR:function(e){return e===void 0&&(e=!1),this.multiply([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],e)},multiply:function(e,t){t||this.reset();for(var i=this._matrix,r=[],s=0;s<20;s++)r[s]=i[s];return i[0]=r[0]*e[0]+r[1]*e[5]+r[2]*e[10]+r[3]*e[15],i[1]=r[0]*e[1]+r[1]*e[6]+r[2]*e[11]+r[3]*e[16],i[2]=r[0]*e[2]+r[1]*e[7]+r[2]*e[12]+r[3]*e[17],i[3]=r[0]*e[3]+r[1]*e[8]+r[2]*e[13]+r[3]*e[18],i[4]=r[0]*e[4]+r[1]*e[9]+r[2]*e[14]+r[3]*e[19]+r[4],i[5]=r[5]*e[0]+r[6]*e[5]+r[7]*e[10]+r[8]*e[15],i[6]=r[5]*e[1]+r[6]*e[6]+r[7]*e[11]+r[8]*e[16],i[7]=r[5]*e[2]+r[6]*e[7]+r[7]*e[12]+r[8]*e[17],i[8]=r[5]*e[3]+r[6]*e[8]+r[7]*e[13]+r[8]*e[18],i[9]=r[5]*e[4]+r[6]*e[9]+r[7]*e[14]+r[8]*e[19]+r[9],i[10]=r[10]*e[0]+r[11]*e[5]+r[12]*e[10]+r[13]*e[15],i[11]=r[10]*e[1]+r[11]*e[6]+r[12]*e[11]+r[13]*e[16],i[12]=r[10]*e[2]+r[11]*e[7]+r[12]*e[12]+r[13]*e[17],i[13]=r[10]*e[3]+r[11]*e[8]+r[12]*e[13]+r[13]*e[18],i[14]=r[10]*e[4]+r[11]*e[9]+r[12]*e[14]+r[13]*e[19]+r[14],i[15]=r[15]*e[0]+r[16]*e[5]+r[17]*e[10]+r[18]*e[15],i[16]=r[15]*e[1]+r[16]*e[6]+r[17]*e[11]+r[18]*e[16],i[17]=r[15]*e[2]+r[16]*e[7]+r[17]*e[12]+r[18]*e[17],i[18]=r[15]*e[3]+r[16]*e[8]+r[17]*e[13]+r[18]*e[18],i[19]=r[15]*e[4]+r[16]*e[9]+r[17]*e[14]+r[18]*e[19]+r[19],this._dirty=!0,this}});zw.exports=poe});var Yw=l((nXe,Xw)=>{Xw.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","","        return;","    }","","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","","    vec4 result;","","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","","    rgb *= result.a;","","    gl_FragColor = vec4(rgb, result.a);","}",""].join(`
`)});var Hw=l((aXe,Ww)=>{Ww.exports=["#define SHADER_NAME PHASER_COPY_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uBrightness;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}",""].join(`
`)});var Kw=l((oXe,jw)=>{jw.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}",""].join(`
`)});var Kd=l((hXe,Zw)=>{Zw.exports=["#define SHADER_NAME PHASER_QUAD_VS","","precision mediump float;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","","varying vec2 outFragCoord;","varying vec2 outTexCoord;","","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","","    gl_Position = vec4(inPosition, 0, 1);","}",""].join(`
`)});var Jd=l((uXe,Jw)=>{var moe=kw(),goe=mi(),xoe=_(),Toe=Eh(),Eoe=Yw(),yoe=Hw(),yh=X(),Soe=Kw(),Coe=Kd(),Zd=Gi(),Roe=new xoe({Extends:Zd,initialize:function(t){t.renderTarget=yh(t,"renderTarget",[{scale:1},{scale:1},{scale:.5},{scale:.5}]),t.vertShader=yh(t,"vertShader",Coe),t.shaders=yh(t,"shaders",[{name:"Copy",fragShader:yoe},{name:"AddBlend",fragShader:moe},{name:"LinearBlend",fragShader:Soe},{name:"ColorMatrix",fragShader:Eoe}]),t.attributes=yh(t,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),t.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],t.batchSize=1,Zd.call(this,t),this.colorMatrix=new Toe,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){Zd.prototype.boot.call(this);var e=this.shaders,t=this.renderTargets;this.copyShader=e[0],this.addShader=e[1],this.linearShader=e[2],this.colorMatrixShader=e[3],this.fullFrame1=t[0],this.fullFrame2=t[1],this.halfFrame1=t[2],this.halfFrame2=t[3]},copyFrame:function(e,t,i,r,s){i===void 0&&(i=1),r===void 0&&(r=!0),s===void 0&&(s=!0);var n=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",i),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,e.texture),t?(n.viewport(0,0,t.width,t.height),n.bindFramebuffer(n.FRAMEBUFFER,t.framebuffer),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t.texture,0)):n.viewport(0,0,e.width,e.height),r&&(s?n.clearColor(0,0,0,0):n.clearColor(0,0,0,1),n.clear(n.COLOR_BUFFER_BIT)),n.bufferData(n.ARRAY_BUFFER,this.vertexData,n.STATIC_DRAW),n.drawArrays(n.TRIANGLES,0,6),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindTexture(n.TEXTURE_2D,null)},blitFrame:function(e,t,i,r,s,n){i===void 0&&(i=1),r===void 0&&(r=!0),s===void 0&&(s=!0),n===void 0&&(n=!1);var a=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",i),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,e.texture),e.height>t.height)a.viewport(0,0,e.width,e.height),this.setTargetUVs(e,t);else{var o=t.height-e.height;a.viewport(0,o,e.width,e.height)}if(a.bindFramebuffer(a.FRAMEBUFFER,t.framebuffer),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,t.texture,0),r&&(s?a.clearColor(0,0,0,0):a.clearColor(0,0,0,1),a.clear(a.COLOR_BUFFER_BIT)),n){var h=this.renderer.currentBlendMode;this.renderer.setBlendMode(goe.ERASE)}a.bufferData(a.ARRAY_BUFFER,this.vertexData,a.STATIC_DRAW),a.drawArrays(a.TRIANGLES,0,6),n&&this.renderer.setBlendMode(h),a.bindFramebuffer(a.FRAMEBUFFER,null),a.bindTexture(a.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(e,t,i,r,s,n,a,o){a===void 0&&(a=!0),o===void 0&&(o=!0);var h=this.gl;h.bindFramebuffer(h.FRAMEBUFFER,e.framebuffer),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,e.texture,0),a&&(o?h.clearColor(0,0,0,0):h.clearColor(0,0,0,1),h.clear(h.COLOR_BUFFER_BIT)),h.activeTexture(h.TEXTURE0),h.bindTexture(h.TEXTURE_2D,t.texture),h.copyTexSubImage2D(h.TEXTURE_2D,0,0,0,i,r,s,n),h.bindFramebuffer(h.FRAMEBUFFER,null),h.bindTexture(h.TEXTURE_2D,null)},copyToGame:function(e){var t=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,e.texture),t.bufferData(t.ARRAY_BUFFER,this.vertexData,t.STATIC_DRAW),t.drawArrays(t.TRIANGLES,0,6),this.renderer.resetTextures()},drawFrame:function(e,t,i,r){i===void 0&&(i=!0),r===void 0&&(r=this.colorMatrix);var s=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",r.getData()),this.set1f("uAlpha",r.alpha),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,e.texture),t?(s.viewport(0,0,t.width,t.height),s.bindFramebuffer(s.FRAMEBUFFER,t.framebuffer),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,t.texture,0)):s.viewport(0,0,e.width,e.height),i?s.clearColor(0,0,0,0):s.clearColor(0,0,0,1),s.clear(s.COLOR_BUFFER_BIT),s.bufferData(s.ARRAY_BUFFER,this.vertexData,s.STATIC_DRAW),s.drawArrays(s.TRIANGLES,0,6),s.bindFramebuffer(s.FRAMEBUFFER,null),s.bindTexture(s.TEXTURE_2D,null)},blendFrames:function(e,t,i,r,s,n){r===void 0&&(r=1),s===void 0&&(s=!0),n===void 0&&(n=this.linearShader);var a=this.gl;this.setShader(n),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",r),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,e.texture),a.activeTexture(a.TEXTURE1),a.bindTexture(a.TEXTURE_2D,t.texture),i?(a.bindFramebuffer(a.FRAMEBUFFER,i.framebuffer),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,i.texture,0),a.viewport(0,0,i.width,i.height)):a.viewport(0,0,e.width,e.height),s?a.clearColor(0,0,0,0):a.clearColor(0,0,0,1),a.clear(a.COLOR_BUFFER_BIT),a.bufferData(a.ARRAY_BUFFER,this.vertexData,a.STATIC_DRAW),a.drawArrays(a.TRIANGLES,0,6),a.bindFramebuffer(a.FRAMEBUFFER,null),a.bindTexture(a.TEXTURE_2D,null)},blendFramesAdditive:function(e,t,i,r,s){this.blendFrames(e,t,i,r,s,this.addShader)},clearFrame:function(e,t){t===void 0&&(t=!0);var i=this.gl;i.viewport(0,0,e.width,e.height),i.bindFramebuffer(i.FRAMEBUFFER,e.framebuffer),t?i.clearColor(0,0,0,0):i.clearColor(0,0,0,1),i.clear(i.COLOR_BUFFER_BIT);var r=this.renderer.currentFramebuffer;i.bindFramebuffer(i.FRAMEBUFFER,r)},setUVs:function(e,t,i,r,s,n,a,o){var h=this.vertexViewF32;h[2]=e,h[3]=t,h[6]=i,h[7]=r,h[10]=s,h[11]=n,h[14]=e,h[15]=t,h[18]=s,h[19]=n,h[22]=a,h[23]=o},setTargetUVs:function(e,t){var i=t.height/e.height;i>.5?i=.5-(i-.5):i=.5+(.5-i),this.setUVs(0,i,0,1+i,1,1+i,1,i)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});Jw.exports=Roe});var $d=l((lXe,Qw)=>{var _oe=_(),gi=Is(),Qd=yn(),woe=qd(),Poe=Id(),Aoe=Xd(),boe=Rn(),Moe=Wd(),qoe=Hd(),Ooe=jd(),Loe=Jd(),Foe=new _oe({initialize:function(t){this.game=t.game,this.renderer=t,this.classes=new Qd([[gi.UTILITY_PIPELINE,Loe],[gi.MULTI_PIPELINE,boe],[gi.BITMAPMASK_PIPELINE,woe],[gi.SINGLE_PIPELINE,Ooe],[gi.ROPE_PIPELINE,qoe],[gi.LIGHT_PIPELINE,Aoe],[gi.POINTLIGHT_PIPELINE,Moe],[gi.GRAPHICS_PIPELINE,Poe]]),this.postPipelineClasses=new Qd,this.pipelines=new Qd,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(e){var t,i,r=this,s=this.game;if(this.classes.each(function(a,o){t=r.add(a,new o({game:s})),a===gi.UTILITY_PIPELINE&&(r.UTILITY_PIPELINE=t,r.fullFrame1=t.fullFrame1,r.fullFrame2=t.fullFrame2,r.halfFrame1=t.halfFrame1,r.halfFrame2=t.halfFrame2)}),this.MULTI_PIPELINE=this.get(gi.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(gi.BITMAPMASK_PIPELINE),e)for(i in e){var n=e[i];t=new n(s),t.isPostFX?this.postPipelineClasses.set(i,n):this.has(i)||(this.classes.set(i,n),this.add(i,t))}},add:function(e,t){if(t.isPostFX){console.warn(e+" is a Post Pipeline. Use `addPostPipeline` instead");return}var i=this.pipelines,r=this.renderer;return i.has(e)?console.warn("Pipeline exists: "+e):(t.name=e,t.manager=this,i.set(e,t)),t.hasBooted||t.boot(),r.width!==0&&r.height!==0&&t.resize(r.width,r.height),t},addPostPipeline:function(e,t){this.postPipelineClasses.has(e)||this.postPipelineClasses.set(e,t)},flush:function(){this.current&&this.current.flush()},has:function(e){var t=this.pipelines;return typeof e=="string"?t.has(e):!!t.contains(e)},get:function(e){var t=this.pipelines;if(typeof e=="string")return t.get(e);if(t.contains(e))return e},getPostPipeline:function(e,t){var i=this.postPipelineClasses,r;if(typeof e=="string"?r=i.get(e):typeof e=="function"?i.contains(e)&&(r=e):typeof e=="object"&&(r=i.get(e.name)),r){var s=new r(this.game);return t&&(s.gameObject=t),s}},remove:function(e,t,i){t===void 0&&(t=!0),i===void 0&&(i=!0),this.pipelines.delete(e),t&&this.classes.delete(e),i&&this.postPipelineClasses.delete(e)},set:function(e,t,i){if(!e.isPostFX)return this.isCurrent(e,i)||(this.flush(),this.current&&this.current.unbind(),this.current=e,e.bind(i)),e.updateProjectionMatrix(),e.onBind(t),e},preBatch:function(e){if(e.hasPostPipeline){this.flush();for(var t=e.postPipelines,i=t.length-1;i>=0;i--){var r=t[i];r.active&&r.preBatch(e)}}},postBatch:function(e){if(e.hasPostPipeline){this.flush();for(var t=e.postPipelines,i=0;i<t.length;i++){var r=t[i];r.active&&r.postBatch(e)}}},preBatchCamera:function(e){if(e.hasPostPipeline){this.flush();for(var t=e.postPipelines,i=t.length-1;i>=0;i--){var r=t[i];r.active&&r.preBatch(e)}}},postBatchCamera:function(e){if(e.hasPostPipeline){this.flush();for(var t=e.postPipelines,i=0;i<t.length;i++){var r=t[i];r.active&&r.postBatch(e)}}},isCurrent:function(e,t){var i=this.renderer,r=this.current;return r&&!t&&(t=r.currentShader),!(r!==e||t.program!==i.currentProgram)},copyFrame:function(e,t,i,r,s){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(e,t,i,r,s),this},copyToGame:function(e){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(e),this},drawFrame:function(e,t,i,r){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(e,t,i,r),this},blendFrames:function(e,t,i,r,s){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(e,t,i,r,s),this},blendFramesAdditive:function(e,t,i,r,s){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(e,t,i,r,s),this},clearFrame:function(e,t){return this.UTILITY_PIPELINE.clearFrame(e,t),this},blitFrame:function(e,t,i,r,s,n){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(e,t,i,r,s,n),this},copyFrameRect:function(e,t,i,r,s,n,a,o){return this.UTILITY_PIPELINE.copyFrameRect(e,t,i,r,s,n,a,o),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(e){return this.UTILITY_PIPELINE.bind(e)},rebind:function(e){e===void 0&&this.previous&&(e=this.previous);var t=this.renderer,i=t.gl;i.disable(i.DEPTH_TEST),i.disable(i.CULL_FACE),t.hasActiveStencilMask()?i.clear(i.DEPTH_BUFFER_BIT):(i.disable(i.STENCIL_TEST),i.clear(i.DEPTH_BUFFER_BIT|i.STENCIL_BUFFER_BIT)),i.viewport(0,0,t.width,t.height),t.currentProgram=null,t.setBlendMode(0,!0);var r=this.pipelines.entries;for(var s in r)r[s].glReset=!0;e&&(this.current=e,e.rebind()),t.resetTextures()},clear:function(){var e=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,e.currentProgram=null,e.setBlendMode(0,!0)},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.current=null,this.previous=null}});Qw.exports=Foe});var tv=l((fXe,$w)=>{var ev=Et(),Noe=ni(),xi=X(),Goe=function(e,t){var i=e.getContext("experimental-webgl"),r=xi(t,"callback"),s=xi(t,"type","image/png"),n=xi(t,"encoder",.92),a=xi(t,"x",0),o=xi(t,"y",0),h=xi(t,"getPixel",!1),u=xi(t,"isFramebuffer",!1),f=u?xi(t,"bufferWidth",1):i.drawingBufferWidth,d=u?xi(t,"bufferHeight",1):i.drawingBufferHeight;if(h){var v=new Uint8Array(4),c=u?o:d-o;i.readPixels(a,c,1,1,i.RGBA,i.UNSIGNED_BYTE,v),r.call(null,new Noe(v[0],v[1],v[2],v[3]/255))}else{var p=xi(t,"width",f),m=xi(t,"height",d),g=p*m*4,x=new Uint8Array(g);i.readPixels(a,d-o-m,p,m,i.RGBA,i.UNSIGNED_BYTE,x);for(var T=ev.createWebGL(this,p,m),E=T.getContext("2d"),R=E.getImageData(0,0,p,m),y=R.data,C=0;C<m;C++)for(var S=0;S<p;S++){var w=((m-C-1)*p+S)*4,P=(C*p+S)*4;y[P+0]=x[w+0],y[P+1]=x[w+1],y[P+2]=x[w+2],y[P+3]=x[w+3]}E.putImageData(R,0,0);var A=new Image;A.onerror=function(){r.call(null),ev.remove(T)},A.onload=function(){r.call(null,A),ev.remove(T)},A.src=T.toDataURL(s,n)}};$w.exports=Goe});var iv=l((dXe,nP)=>{var Doe=Ds(),eP=ai(),Ioe=_(),_n=Ut(),tP=se(),Sh=Ns(),iP=Ne(),Ch=Ma(),Boe=hr(),rP=B(),Voe=$d(),Uoe=Na(),koe=Tn(),zoe=En(),Rh=fe(),sP=tv(),Xoe=new Ioe({Extends:tP,initialize:function(t){tP.call(this);var i=t.config,r={alpha:i.transparent,desynchronized:i.desynchronized,depth:!1,antialias:i.antialiasGL,premultipliedAlpha:i.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:i.failIfMajorPerformanceCaveat,powerPreference:i.powerPreference,preserveDrawingBuffer:i.preserveDrawingBuffer};this.config={clearBeforeRender:i.clearBeforeRender,antialias:i.antialias,backgroundColor:i.backgroundColor,contextCreation:r,roundPixels:i.roundPixels,maxTextures:i.maxTextures,maxTextureSize:i.maxTextureSize,batchSize:i.batchSize,maxLights:i.maxLights,mipmapFilter:i.mipmapFilter},this.game=t,this.type=_n.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=t.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.currentActiveTexture=0,this.startActiveTexture=0,this.maxTextures=0,this.textureIndexes,this.tempTextures,this.textureZero,this.normalTexture,this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=rP,this.contextRestoredHandler=rP,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats=[],this.compression={ETC1:!1,PVRTC:!1,S3TC:!1},this.drawingBufferHeight=0,this.blankTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.textureFlush=0,this.isTextureClean=!1,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.init(this.config)},init:function(e){var t,i=this.game,r=this.canvas,s=e.backgroundColor;if(i.config.context?t=i.config.context:t=r.getContext("webgl",e.contextCreation)||r.getContext("experimental-webgl",e.contextCreation),!t||t.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=t;var n=this;this.contextLostHandler=function(g){n.contextLost=!0,n.game.events.emit(iP.CONTEXT_LOST,n),g.preventDefault()},this.contextRestoredHandler=function(){n.contextLost=!1,n.init(n.config),n.game.events.emit(iP.CONTEXT_RESTORED,n)},r.addEventListener("webglcontextlost",this.contextLostHandler,!1),r.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),i.context=t;for(var a=0;a<=27;a++)this.blendModes.push({func:[t.ONE,t.ONE_MINUS_SRC_ALPHA],equation:t.FUNC_ADD});this.blendModes[1].func=[t.ONE,t.DST_ALPHA],this.blendModes[2].func=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[t.ONE,t.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[t.ZERO,t.ONE_MINUS_SRC_ALPHA],equation:t.FUNC_REVERSE_SUBTRACT},this.glFormats[0]=t.BYTE,this.glFormats[1]=t.SHORT,this.glFormats[2]=t.UNSIGNED_BYTE,this.glFormats[3]=t.UNSIGNED_SHORT,this.glFormats[4]=t.FLOAT,this.glFuncMap={mat2:{func:t.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:t.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:t.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:t.uniform1f,length:1},"1fv":{func:t.uniform1fv,length:1},"1i":{func:t.uniform1i,length:1},"1iv":{func:t.uniform1iv,length:1},"2f":{func:t.uniform2f,length:2},"2fv":{func:t.uniform2fv,length:1},"2i":{func:t.uniform2i,length:2},"2iv":{func:t.uniform2iv,length:1},"3f":{func:t.uniform3f,length:3},"3fv":{func:t.uniform3fv,length:1},"3i":{func:t.uniform3i,length:3},"3iv":{func:t.uniform3iv,length:1},"4f":{func:t.uniform4f,length:4},"4fv":{func:t.uniform4fv,length:1},"4i":{func:t.uniform4i,length:4},"4iv":{func:t.uniform4iv,length:1}};var o=t.getSupportedExtensions();(!e.maxTextures||e.maxTextures===-1)&&(e.maxTextures=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)),e.maxTextureSize||(e.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE));var h="WEBGL_compressed_texture_",u="WEBKIT_"+h;this.compression.ETC1=t.getExtension(h+"etc1")||t.getExtension(u+"etc1"),this.compression.PVRTC=t.getExtension(h+"pvrtc")||t.getExtension(u+"pvrtc"),this.compression.S3TC=t.getExtension(h+"s3tc")||t.getExtension(u+"s3tc"),this.supportedExtensions=o;var f="ANGLE_instanced_arrays";this.instancedArraysExtension=o.indexOf(f)>-1?t.getExtension(f):null;var d="OES_vertex_array_object";this.vaoExtension=o.indexOf(d)>-1?t.getExtension(d):null,t.disable(t.DEPTH_TEST),t.disable(t.CULL_FACE),t.enable(t.BLEND),t.clearColor(s.redGL,s.greenGL,s.blueGL,s.alphaGL),this.mipmapFilter=t[e.mipmapFilter],this.maxTextures=Rh.checkShaderMax(t,e.maxTextures),this.textureIndexes=[];var v=this.tempTextures;if(Array.isArray(v))for(var c=0;a<this.maxTextures;c++)t.deleteTexture(v[c]);else v=new Array(this.maxTextures);for(var p=0;p<this.maxTextures;p++){var m=t.createTexture();t.activeTexture(t.TEXTURE0+p),t.bindTexture(t.TEXTURE_2D,m),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),v[p]=m,this.textureIndexes.push(p)}return this.tempTextures=v,this.currentActiveTexture=1,this.startActiveTexture++,t.activeTexture(t.TEXTURE1),this.pipelines=new Voe(this),this.setBlendMode(_n.BlendModes.NORMAL),this.projectionMatrix=new Boe().identity(),i.textures.once(zoe.READY,this.boot,this),this},boot:function(){var e=this.game,t=this.pipelines,i=e.scale.baseSize;this.width=i.width,this.height=i.height,this.isBooted=!0,this.renderTarget=new Uoe(this,this.width,this.height,1,0,!0,!0),t.boot(e.config.pipeline),this.blankTexture=e.textures.getFrame("__DEFAULT"),this.whiteTexture=e.textures.getFrame("__WHITE");var r=this.gl;r.bindFramebuffer(r.FRAMEBUFFER,null),r.enable(r.SCISSOR_TEST),e.scale.on(koe.RESIZE,this.onResize,this),this.resize(i.width,i.height)},onResize:function(e,t){(t.width!==this.width||t.height!==this.height)&&this.resize(t.width,t.height)},beginCapture:function(e,t){e===void 0&&(e=this.width),t===void 0&&(t=this.height),this.renderTarget.bind(!0,e,t),this.setProjectionMatrix(e,t),this.resetTextures()},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(e,t){var i=this.gl;return this.width=e,this.height=t,this.setProjectionMatrix(e,t),i.viewport(0,0,e,t),this.drawingBufferHeight=i.drawingBufferHeight,i.scissor(0,i.drawingBufferHeight-t,e,t),this.defaultScissor[2]=e,this.defaultScissor[3]=t,this.emit(Sh.RESIZE,e,t),this},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(e,t){return(e!==this.projectionWidth||t!==this.projectionHeight)&&(this.projectionWidth=e,this.projectionHeight=t,this.projectionMatrix.ortho(0,e,t,0,-1e3,1e3)),this},resetProjectionMatrix:function(){this.projectionWidth=this.width,this.projectionHeight=this.height,this.projectionMatrix.ortho(0,this.width,this.height,0,-1e3,1e3)},hasExtension:function(e){return this.supportedExtensions?this.supportedExtensions.indexOf(e):!1},getExtension:function(e){return this.hasExtension(e)?(e in this.extensions||(this.extensions[e]=this.gl.getExtension(e)),this.extensions[e]):null},flush:function(){this.pipelines.flush()},pushScissor:function(e,t,i,r,s){s===void 0&&(s=this.drawingBufferHeight);var n=this.scissorStack,a=[e,t,i,r];return n.push(a),this.setScissor(e,t,i,r,s),this.currentScissor=a,a},setScissor:function(e,t,i,r,s){s===void 0&&(s=this.drawingBufferHeight);var n=this.gl,a=this.currentScissor,o=i>0&&r>0;if(a&&o){var h=a[0],u=a[1],f=a[2],d=a[3];o=h!==e||u!==t||f!==i||d!==r}o&&(this.flush(),n.scissor(e,s-t-r,i,r))},resetScissor:function(){var e=this.gl;e.enable(e.SCISSOR_TEST);var t=this.currentScissor;if(t){var i=t[0],r=t[1],s=t[2],n=t[3];s>0&&n>0&&e.scissor(i,this.drawingBufferHeight-r-n,s,n)}},popScissor:function(){var e=this.scissorStack;e.pop();var t=e[e.length-1];t&&this.setScissor(t[0],t[1],t[2],t[3]),this.currentScissor=t},hasActiveStencilMask:function(){var e=this.currentMask.mask,t=this.currentCameraMask.mask;return e&&e.isStencil||t&&t.isStencil},resetViewport:function(){var e=this.gl;e.viewport(0,0,this.width,this.height),this.drawingBufferHeight=e.drawingBufferHeight},setBlendMode:function(e,t){t===void 0&&(t=!1);var i=this.gl,r=this.blendModes[e];return t||e!==_n.BlendModes.SKIP_CHECK&&this.currentBlendMode!==e?(this.flush(),i.enable(i.BLEND),i.blendEquation(r.equation),r.func.length>2?i.blendFuncSeparate(r.func[0],r.func[1],r.func[2],r.func[3]):i.blendFunc(r.func[0],r.func[1]),this.currentBlendMode=e,!0):!1},addBlendMode:function(e,t){var i=this.blendModes.push({func:e,equation:t});return i-1},updateBlendMode:function(e,t,i){return this.blendModes[e]&&(this.blendModes[e].func=t,i&&(this.blendModes[e].equation=i)),this},removeBlendMode:function(e){return e>17&&this.blendModes[e]&&this.blendModes.splice(e,1),this},setBlankTexture:function(){this.setTexture2D(this.blankTexture.glTexture)},setTextureSource:function(e){if(this.pipelines.forceZero())return this.setTextureZero(e.glTexture,!0),0;var t=this.gl,i=this.currentActiveTexture;return e.glIndexCounter<this.startActiveTexture&&(e.glIndexCounter=this.startActiveTexture,i<this.maxTextures?(e.glIndex=i,t.activeTexture(t.TEXTURE0+i),t.bindTexture(t.TEXTURE_2D,e.glTexture),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,e.glIndexCounter=this.startActiveTexture,e.glIndex=1,t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,e.glTexture),this.currentActiveTexture=2)),this.isTextureClean=!1,e.glIndex},isNewNormalMap:function(e,t){return this.textureZero!==e||this.normalTexture!==t},setTextureZero:function(e,t){if(this.textureZero!==e){t&&this.flush();var i=this.gl;i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,e),this.textureZero=e}},clearTextureZero:function(){this.textureZero=null},setNormalMap:function(e){if(this.normalTexture!==e){var t=this.gl;t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,e),this.normalTexture=e,this.currentActiveTexture===1&&(this.currentActiveTexture=2)}},clearNormalMap:function(){this.normalTexture=null,this.startActiveTexture++,this.currentActiveTexture=1,this.textureFlush++},unbindTextures:function(){for(var e=this.gl,t=this.tempTextures,i=0;i<t.length;i++)e.activeTexture(e.TEXTURE0+i),e.bindTexture(e.TEXTURE_2D,null);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++},resetTextures:function(e){if(e===void 0&&(e=!1),!this.isTextureClean){this.flush();var t=this.gl,i=this.tempTextures;if(e){for(var r=0;r<i.length;r++)t.activeTexture(t.TEXTURE0+r),t.bindTexture(t.TEXTURE_2D,i[r]);t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,i[1]),this.isTextureClean=!0}else t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,i[0]),t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,i[1]);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++}},setTexture2D:function(e){if(this.pipelines.forceZero())return this.setTextureZero(e,!0),0;var t=this.gl,i=this.currentActiveTexture;return e.glIndexCounter<this.startActiveTexture&&(e.glIndexCounter=this.startActiveTexture,i<this.maxTextures?(e.glIndex=i,t.activeTexture(t.TEXTURE0+i),t.bindTexture(t.TEXTURE_2D,e),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,e.glIndexCounter=this.startActiveTexture,e.glIndex=1,t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,e),this.currentActiveTexture=2)),this.isTextureClean=!1,e.glIndex},pushFramebuffer:function(e,t,i,r){return e===this.currentFramebuffer?this:(this.fboStack.push(e),this.setFramebuffer(e,t,i,r))},setFramebuffer:function(e,t,i,r){if(t===void 0&&(t=!1),i===void 0&&(i=!1),r===void 0&&(r=!0),e===this.currentFramebuffer)return this;var s=this.gl,n=this.width,a=this.height;return e&&e.renderTexture&&r?(n=e.renderTexture.width,a=e.renderTexture.height):this.flush(),s.bindFramebuffer(s.FRAMEBUFFER,e),r&&s.viewport(0,0,n,a),t&&(e?(this.drawingBufferHeight=a,this.pushScissor(0,0,n,a)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=e,i&&this.resetTextures(),this},popFramebuffer:function(e,t,i){e===void 0&&(e=!1),t===void 0&&(t=!1),i===void 0&&(i=!0);var r=this.fboStack;r.pop();var s=r[r.length-1];return s||(s=null),this.setFramebuffer(s,e,t,i),s},setProgram:function(e){return e!==this.currentProgram?(this.flush(),this.gl.useProgram(e),this.currentProgram=e,!0):!1},resetProgram:function(){return this.gl.useProgram(this.currentProgram),this},createTextureFromSource:function(e,t,i,r){var s=this.gl,n=s.NEAREST,a=s.NEAREST,o=s.CLAMP_TO_EDGE,h=null;t=e?e.width:t,i=e?e.height:i;var u=Ch(t,i);return u&&(o=s.REPEAT),r===_n.ScaleModes.LINEAR&&this.config.antialias&&(n=u?this.mipmapFilter:s.LINEAR,a=s.LINEAR),!e&&typeof t=="number"&&typeof i=="number"?h=this.createTexture2D(0,n,a,o,o,s.RGBA,null,t,i):h=this.createTexture2D(0,n,a,o,o,s.RGBA,e),h},createTexture2D:function(e,t,i,r,s,n,a,o,h,u,f,d){u=u==null?!0:u,f===void 0&&(f=!1),d===void 0&&(d=!1);var v=this.gl,c=v.createTexture();v.activeTexture(v.TEXTURE0);var p=v.getParameter(v.TEXTURE_BINDING_2D);return v.bindTexture(v.TEXTURE_2D,c),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,t),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,i),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,s),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,r),v.pixelStorei(v.UNPACK_PREMULTIPLY_ALPHA_WEBGL,u),v.pixelStorei(v.UNPACK_FLIP_Y_WEBGL,d),a==null?v.texImage2D(v.TEXTURE_2D,e,n,o,h,0,n,v.UNSIGNED_BYTE,null):(f||(o=a.width,h=a.height),v.texImage2D(v.TEXTURE_2D,e,n,n,v.UNSIGNED_BYTE,a)),Ch(o,h)&&v.generateMipmap(v.TEXTURE_2D),p&&v.bindTexture(v.TEXTURE_2D,p),c.isAlphaPremultiplied=u,c.isRenderTexture=!1,c.width=o,c.height=h,c.glIndex=0,c.glIndexCounter=-1,c},createFramebuffer:function(e,t,i,r){var s=this.gl,n=s.createFramebuffer(),a=0;if(this.setFramebuffer(n),r){var o=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,o),s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,e,t),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,o)}if(i.isRenderTexture=!0,i.isAlphaPremultiplied=!1,s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,i,0),a=s.checkFramebufferStatus(s.FRAMEBUFFER),a!==s.FRAMEBUFFER_COMPLETE){var h={36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"};throw new Error("Framebuffer status: "+h[a])}return n.renderTexture=i,this.setFramebuffer(null),this.resetTextures(),n},createProgram:function(e,t){var i=this.gl,r=i.createProgram(),s=i.createShader(i.VERTEX_SHADER),n=i.createShader(i.FRAGMENT_SHADER);if(i.shaderSource(s,e),i.shaderSource(n,t),i.compileShader(s),i.compileShader(n),!i.getShaderParameter(s,i.COMPILE_STATUS))throw new Error(`Vertex Shader failed:
`+i.getShaderInfoLog(s));if(!i.getShaderParameter(n,i.COMPILE_STATUS))throw new Error(`Fragment Shader failed:
`+i.getShaderInfoLog(n));if(i.attachShader(r,s),i.attachShader(r,n),i.linkProgram(r),!i.getProgramParameter(r,i.LINK_STATUS))throw new Error(`Link Program failed:
`+i.getProgramInfoLog(r));return i.useProgram(r),r},createVertexBuffer:function(e,t){var i=this.gl,r=i.createBuffer();return i.bindBuffer(i.ARRAY_BUFFER,r),i.bufferData(i.ARRAY_BUFFER,e,t),i.bindBuffer(i.ARRAY_BUFFER,null),r},createIndexBuffer:function(e,t){var i=this.gl,r=i.createBuffer();return i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,r),i.bufferData(i.ELEMENT_ARRAY_BUFFER,e,t),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,null),r},deleteTexture:function(e,t){return t&&this.resetTextures(!0),e&&this.gl.deleteTexture(e),this},deleteFramebuffer:function(e){return e&&(this.gl.deleteFramebuffer(e),Doe(this.fboStack,e),this.currentFramebuffer===e&&(this.currentFramebuffer=null)),this},deleteProgram:function(e){return e&&this.gl.deleteProgram(e),this},deleteBuffer:function(e){return this.gl.deleteBuffer(e),this},preRenderCamera:function(e){var t=e.x,i=e.y,r=e.width,s=e.height,n=e.backgroundColor;if(e.emit(eP.PRE_RENDER,e),this.pipelines.preBatchCamera(e),this.pushScissor(t,i,r,s),e.mask&&(this.currentCameraMask.mask=e.mask,this.currentCameraMask.camera=e._maskCamera,e.mask.preRenderWebGL(this,e,e._maskCamera)),n.alphaGL>0){var a=this.pipelines.setMulti();a.drawFillRect(t,i,r,s,Rh.getTintFromFloats(n.blueGL,n.greenGL,n.redGL,1),n.alphaGL)}},getCurrentStencilMask:function(){var e=null,t=this.maskStack,i=this.currentCameraMask;return t.length>0?e=t[t.length-1]:i.mask&&i.mask.isStencil&&(e=i),e},postRenderCamera:function(e){var t=e.flashEffect,i=e.fadeEffect;if(t.isRunning||i.isRunning||i.isComplete){var r=this.pipelines.setMulti();t.postRenderWebGL(r,Rh.getTintFromFloats),i.postRenderWebGL(r,Rh.getTintFromFloats)}e.dirty=!1,this.popScissor(),e.mask&&(this.currentCameraMask.mask=null,e.mask.postRenderWebGL(this,e._maskCamera)),this.pipelines.postBatchCamera(e),e.emit(eP.POST_RENDER,e)},preRender:function(){if(!this.contextLost){var e=this.gl;if(e.bindFramebuffer(e.FRAMEBUFFER,null),this.config.clearBeforeRender){var t=this.config.backgroundColor;e.clearColor(t.redGL,t.greenGL,t.blueGL,t.alphaGL),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT|e.STENCIL_BUFFER_BIT)}e.enable(e.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&e.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.textureFlush=0,this.emit(Sh.PRE_RENDER)}},render:function(e,t,i){if(!this.contextLost){var r=t.length;if(this.emit(Sh.RENDER,e,i),this.preRenderCamera(i),r===0){this.setBlendMode(_n.BlendModes.NORMAL),this.postRenderCamera(i);return}this.currentType="";for(var s=this.currentMask,n=0;n<r;n++){this.finalType=n===r-1;var a=t[n],o=a.mask;s=this.currentMask,s.mask&&s.mask!==o&&s.mask.postRenderWebGL(this,s.camera),o&&s.mask!==o&&o.preRenderWebGL(this,a,i),a.blendMode!==this.currentBlendMode&&this.setBlendMode(a.blendMode);var h=a.type;h!==this.currentType&&(this.newType=!0,this.currentType=h),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=t[n+1].type===this.currentType,a.renderWebGL(this,a,i),this.newType=!1}s=this.currentMask,s.mask&&s.mask.postRenderWebGL(this,s.camera),this.setBlendMode(_n.BlendModes.NORMAL),this.postRenderCamera(i)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(Sh.POST_RENDER);var e=this.snapshotState;e.callback&&(sP(this.canvas,e),e.callback=null),this.textureFlush>0&&(this.startActiveTexture++,this.currentActiveTexture=1)}},snapshot:function(e,t,i){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,e,t,i)},snapshotArea:function(e,t,i,r,s,n,a){var o=this.snapshotState;return o.callback=s,o.type=n,o.encoder=a,o.getPixel=!1,o.x=e,o.y=t,o.width=Math.min(i,this.gl.drawingBufferWidth),o.height=Math.min(r,this.gl.drawingBufferHeight),this},snapshotPixel:function(e,t,i){return this.snapshotArea(e,t,1,1,i),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(e,t,i,r,s,n,a,o,h,u,f){s===void 0&&(s=!1),n===void 0&&(n=0),a===void 0&&(a=0),o===void 0&&(o=t),h===void 0&&(h=i);var d=this.currentFramebuffer;this.snapshotArea(n,a,o,h,r,u,f);var v=this.snapshotState;return v.getPixel=s,v.isFramebuffer=!0,v.bufferWidth=t,v.bufferHeight=i,this.setFramebuffer(e),sP(this.canvas,v),this.setFramebuffer(d),v.callback=null,v.isFramebuffer=!1,this},canvasToTexture:function(e,t,i,r){return i===void 0&&(i=!1),r===void 0&&(r=!1),t?this.updateCanvasTexture(e,t,r):this.createCanvasTexture(e,i,r)},createCanvasTexture:function(e,t,i){t===void 0&&(t=!1),i===void 0&&(i=!1);var r=this.gl,s=r.NEAREST,n=r.NEAREST,a=e.width,o=e.height,h=r.CLAMP_TO_EDGE,u=Ch(a,o);return!t&&u&&(h=r.REPEAT),this.config.antialias&&(s=u?this.mipmapFilter:r.LINEAR,n=r.LINEAR),this.createTexture2D(0,s,n,h,h,r.RGBA,e,a,o,!0,!1,i)},updateCanvasTexture:function(e,t,i){i===void 0&&(i=!1);var r=this.gl,s=e.width,n=e.height;if(s>0&&n>0){r.activeTexture(r.TEXTURE0);var a=r.getParameter(r.TEXTURE_BINDING_2D);r.bindTexture(r.TEXTURE_2D,t),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,i),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e),t.width=s,t.height=n,a&&r.bindTexture(r.TEXTURE_2D,a)}return t},createVideoTexture:function(e,t,i){t===void 0&&(t=!1),i===void 0&&(i=!1);var r=this.gl,s=r.NEAREST,n=r.NEAREST,a=e.videoWidth,o=e.videoHeight,h=r.CLAMP_TO_EDGE,u=Ch(a,o);return!t&&u&&(h=r.REPEAT),this.config.antialias&&(s=u?this.mipmapFilter:r.LINEAR,n=r.LINEAR),this.createTexture2D(0,s,n,h,h,r.RGBA,e,a,o,!0,!0,i)},updateVideoTexture:function(e,t,i){i===void 0&&(i=!1);var r=this.gl,s=e.videoWidth,n=e.videoHeight;if(s>0&&n>0){r.activeTexture(r.TEXTURE0);var a=r.getParameter(r.TEXTURE_BINDING_2D);r.bindTexture(r.TEXTURE_2D,t),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,i),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e),t.width=s,t.height=n,a&&r.bindTexture(r.TEXTURE_2D,a)}return t},setTextureFilter:function(e,t){var i=this.gl,r=[i.LINEAR,i.NEAREST][t];i.activeTexture(i.TEXTURE0);var s=i.getParameter(i.TEXTURE_BINDING_2D);return i.bindTexture(i.TEXTURE_2D,e),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,r),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,r),s&&i.bindTexture(i.TEXTURE_2D,s),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);for(var e=this.gl,t=this.tempTextures,i=0;i<t.length;i++)e.deleteTexture(t[i]);this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});nP.exports=Xoe});var rv=l((vXe,hP)=>{var Yoe=Ed(),aP=Et(),Vr=Ut(),oP=jo(),Woe=function(e){var t=e.config;if((t.customEnvironment||t.canvas)&&t.renderType===Vr.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!t.customEnvironment&&!t.canvas&&t.renderType!==Vr.HEADLESS)if(t.renderType===Vr.CANVAS||t.renderType!==Vr.CANVAS&&!oP.webGL)if(oP.canvas)t.renderType=Vr.CANVAS;else throw new Error("Cannot create Canvas or WebGL context, aborting.");else t.renderType=Vr.WEBGL;t.antialias||aP.disableSmoothing();var i=e.scale.baseSize,r=i.width,s=i.height;if(t.canvas?(e.canvas=t.canvas,e.canvas.width=r,e.canvas.height=s):e.canvas=aP.create(e,r,s,t.renderType),t.canvasStyle&&(e.canvas.style=t.canvasStyle),t.antialias||Yoe.setCrisp(e.canvas),t.renderType!==Vr.HEADLESS){var n,a;typeof WEBGL_RENDERER&&typeof CANVAS_RENDERER&&(n=wd(),a=iv(),t.renderType===Vr.WEBGL?e.renderer=new a(e):(e.renderer=new n(e),e.context=e.renderer.gameContext))}};hP.exports=Woe});var sv=l((cXe,uP)=>{var _h=Ut(),Hoe=function(e){var t=e.config;if(!t.hideBanner){var i="WebGL";t.renderType===_h.CANVAS?i="Canvas":t.renderType===_h.HEADLESS&&(i="Headless");var r=t.audio,s=e.device.audio,n;if(s.webAudio&&!r.disableWebAudio?n="Web Audio":r.noAudio||!s.webAudio&&!s.audioData?n="No Audio":n="HTML5 Audio",e.device.browser.ie)window.console&&console.log("Phaser v"+_h.VERSION+" / https://phaser.io");else{var a="",o=[a];if(Array.isArray(t.bannerBackgroundColor)){var h;t.bannerBackgroundColor.forEach(function(f){a=a.concat("%c "),o.push("background: "+f),h=f}),o[o.length-1]="color: "+t.bannerTextColor+"; background: "+h}else a=a.concat("%c "),o.push("color: "+t.bannerTextColor+"; background: "+t.bannerBackgroundColor);o.push("background: transparent"),t.gameTitle&&(a=a.concat(t.gameTitle),t.gameVersion&&(a=a.concat(" v"+t.gameVersion)),t.hidePhaser||(a=a.concat(" / ")));var u="-FB";t.hidePhaser||(a=a.concat("Phaser v"+_h.VERSION+u+" ("+i+" | "+n+")")),a=a.concat(" %c "+t.gameURL),o[0]=a,console.log.apply(console,o)}}};uP.exports=Hoe});var nv=l((pXe,fP)=>{var joe=_(),lP=B(),Koe=new joe({initialize:function(){this.isRunning=!1,this.callback=lP,this.tick=0,this.isSetTimeOut=!1,this.timeOutID=null,this.lastTime=0,this.target=0;var t=this;this.step=function i(){var r=window.performance.now();t.lastTime=t.tick,t.tick=r,t.callback(r),t.timeOutID=window.requestAnimationFrame(i)},this.stepTimeout=function i(){var r=Date.now(),s=Math.min(Math.max(t.target*2+t.tick-r,0),t.target);t.lastTime=t.tick,t.tick=r,t.callback(r),t.timeOutID=window.setTimeout(i,s)}},start:function(e,t,i){this.isRunning||(this.callback=e,this.isSetTimeOut=t,this.target=i,this.isRunning=!0,this.timeOutID=t?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=lP}});fP.exports=Koe});var av=l((mXe,vP)=>{var Zoe=_(),wn=ie(),dP=B(),Joe=nv(),Qoe=new Zoe({initialize:function(t,i){this.game=t,this.raf=new Joe,this.started=!1,this.running=!1,this.minFps=wn(i,"min",5),this.targetFps=wn(i,"target",60),this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=dP,this.forceSetTimeOut=wn(i,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=wn(i,"deltaHistory",10),this.panicMax=wn(i,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=wn(i,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var e=window.performance.now();this.time=e,this.lastTime=e,this.nextFpsUpdate=e+1e3,this.framesThisSecond=0;for(var t=0;t<this.deltaSmoothingMax;t++)this.deltaHistory[t]=Math.min(this._target,this.deltaHistory[t]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(e){if(this.started)return this;this.started=!0,this.running=!0;for(var t=0;t<this.deltaSmoothingMax;t++)this.deltaHistory[t]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=e,this.raf.start(this.step.bind(this),this.forceSetTimeOut,this._target)},step:function(){var e=window.performance.now();this.now=e;var t=e-this.lastTime;t<0&&(t=0),this.rawDelta=t;var i=this.deltaIndex,r=this.deltaHistory,s=this.deltaSmoothingMax,n=t,a=t;if(this.smoothStep){(this._coolDown>0||!this.inFocus)&&(this._coolDown--,n=Math.min(n,this._target)),n>this._min&&(n=r[i],n=Math.min(n,this._min)),r[i]=n,this.deltaIndex++,this.deltaIndex>s&&(this.deltaIndex=0),a=0;for(var o=0;o<s;o++)a+=r[o];a/=s}this.delta=a,this.time+=this.rawDelta,e>this.nextFpsUpdate&&(this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=e+1e3,this.framesThisSecond=0),this.framesThisSecond++;var h=a/this._target;this.callback(e,a,h),this.lastTime=e,this.frame++},tick:function(){this.step()},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(e){this.running||(e&&(this.startTime+=-this.lastTime+(this.lastTime+window.performance.now())),this.raf.start(this.step.bind(this),this.useRAF),this.running=!0,this.step())},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.callback=dP,this.raf=null,this.game=null}});vP.exports=Qoe});var ov=l((gXe,cP)=>{var wh=Ne(),$oe=function(e){var t,i=e.events;if(document.hidden!==void 0)t="visibilitychange";else{var r=["webkit","moz","ms"];r.forEach(function(n){document[n+"Hidden"]!==void 0&&(document.hidden=function(){return document[n+"Hidden"]},t=n+"visibilitychange")})}var s=function(n){document.hidden||n.type==="pause"?i.emit(wh.HIDDEN):i.emit(wh.VISIBLE)};t&&document.addEventListener(t,s,!1),window.onblur=function(){i.emit(wh.BLUR)},window.onfocus=function(){i.emit(wh.FOCUS)},window.focus&&e.config.autoFocus&&window.focus()};cP.exports=$oe});var mP=l((xXe,pP)=>{pP.exports={Config:Td(),CreateRenderer:rv(),DebugHeader:sv(),Events:Ne(),TimeStep:av(),VisibilityHandler:ov()}});var Ua=l((TXe,gP)=>{var ehe={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12};gP.exports=ehe});var Ti=l((EXe,xP)=>{var the=function(e){return e.y+e.height-e.height*e.originY};xP.exports=the});var Vs=l((yXe,TP)=>{var ihe=function(e){return e.x-e.width*e.originX+e.width*.5};TP.exports=ihe});var Us=l((SXe,EP)=>{var rhe=function(e,t){var i=e.width*e.originX;return e.x=t+i-e.width*.5,e};EP.exports=rhe});var Ii=l((CXe,yP)=>{var she=function(e,t){return e.y=t+e.height*e.originY,e};yP.exports=she});var hv=l((RXe,SP)=>{var nhe=Ti(),ahe=Vs(),ohe=Us(),hhe=Ii(),uhe=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),ohe(e,ahe(t)+i),hhe(e,nhe(t)+r),e};SP.exports=uhe});var Ei=l((_Xe,CP)=>{var lhe=function(e){return e.x-e.width*e.originX};CP.exports=lhe});var Bi=l((wXe,RP)=>{var fhe=function(e,t){return e.x=t+e.width*e.originX,e};RP.exports=fhe});var uv=l((PXe,_P)=>{var dhe=Ti(),vhe=Ei(),che=Bi(),phe=Ii(),mhe=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),che(e,vhe(t)-i),phe(e,dhe(t)+r),e};_P.exports=mhe});var yi=l((AXe,wP)=>{var ghe=function(e){return e.x+e.width-e.width*e.originX};wP.exports=ghe});var Vi=l((bXe,PP)=>{var xhe=function(e,t){return e.x=t-e.width+e.width*e.originX,e};PP.exports=xhe});var lv=l((MXe,AP)=>{var The=Ti(),Ehe=yi(),yhe=Vi(),She=Ii(),Che=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),yhe(e,Ehe(t)+i),She(e,The(t)+r),e};AP.exports=Che});var Ui=l((qXe,bP)=>{var Rhe=function(e,t){return e.y=t-e.height+e.height*e.originY,e};bP.exports=Rhe});var fv=l((OXe,MP)=>{var _he=Ti(),whe=Ei(),Phe=Ui(),Ahe=Vi(),bhe=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),Ahe(e,whe(t)-i),Phe(e,_he(t)+r),e};MP.exports=bhe});var ks=l((LXe,qP)=>{var Mhe=function(e){return e.y-e.height*e.originY+e.height*.5};qP.exports=Mhe});var zs=l((FXe,OP)=>{var qhe=function(e,t){var i=e.height*e.originY;return e.y=t+i-e.height*.5,e};OP.exports=qhe});var dv=l((NXe,LP)=>{var Ohe=ks(),Lhe=Ei(),Fhe=zs(),Nhe=Vi(),Ghe=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),Nhe(e,Lhe(t)-i),Fhe(e,Ohe(t)+r),e};LP.exports=Ghe});var Si=l((GXe,FP)=>{var Dhe=function(e){return e.y-e.height*e.originY};FP.exports=Dhe});var vv=l((DXe,NP)=>{var Ihe=Ei(),Bhe=Si(),Vhe=Vi(),Uhe=Ii(),khe=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),Vhe(e,Ihe(t)-i),Uhe(e,Bhe(t)-r),e};NP.exports=khe});var cv=l((IXe,GP)=>{var zhe=Ti(),Xhe=yi(),Yhe=Ui(),Whe=Bi(),Hhe=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),Whe(e,Xhe(t)+i),Yhe(e,zhe(t)+r),e};GP.exports=Hhe});var pv=l((BXe,DP)=>{var jhe=ks(),Khe=yi(),Zhe=zs(),Jhe=Bi(),Qhe=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),Jhe(e,Khe(t)+i),Zhe(e,jhe(t)+r),e};DP.exports=Qhe});var mv=l((VXe,IP)=>{var $he=yi(),eue=Si(),tue=Bi(),iue=Ii(),rue=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),tue(e,$he(t)+i),iue(e,eue(t)-r),e};IP.exports=rue});var gv=l((UXe,BP)=>{var sue=Vs(),nue=Si(),aue=Ui(),oue=Us(),hue=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),oue(e,sue(t)+i),aue(e,nue(t)-r),e};BP.exports=hue});var xv=l((kXe,VP)=>{var uue=Ei(),lue=Si(),fue=Ui(),due=Bi(),vue=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),due(e,uue(t)-i),fue(e,lue(t)-r),e};VP.exports=vue});var Tv=l((zXe,UP)=>{var cue=yi(),pue=Si(),mue=Ui(),gue=Vi(),xue=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),gue(e,cue(t)+i),mue(e,pue(t)-r),e};UP.exports=xue});var Ev=l((XXe,kP)=>{var oi=Ua(),zt=[];zt[oi.BOTTOM_CENTER]=hv();zt[oi.BOTTOM_LEFT]=uv();zt[oi.BOTTOM_RIGHT]=lv();zt[oi.LEFT_BOTTOM]=fv();zt[oi.LEFT_CENTER]=dv();zt[oi.LEFT_TOP]=vv();zt[oi.RIGHT_BOTTOM]=cv();zt[oi.RIGHT_CENTER]=pv();zt[oi.RIGHT_TOP]=mv();zt[oi.TOP_CENTER]=gv();zt[oi.TOP_LEFT]=xv();zt[oi.TOP_RIGHT]=Tv();var Tue=function(e,t,i,r,s){return zt[i](e,t,r,s)};kP.exports=Tue});var XP=l((YXe,zP)=>{var Eue=Ev(),yue=function(e,t,i,r){for(var s=e[0],n=1;n<e.length;n++){var a=e[n];Eue(a,s,t,i,r),s=a}return e};zP.exports=yue});var Ci=l((WXe,YP)=>{var Sue=function(e,t,i,r,s,n){r===void 0&&(r=0),s===void 0&&(s=0),n===void 0&&(n=1);var a,o=0,h=e.length;if(n===1)for(a=s;a<h;a++)e[a][t]+=i+o*r,o++;else for(a=s;a>=0;a--)e[a][t]+=i+o*r,o++;return e};YP.exports=Sue});var HP=l((HXe,WP)=>{var Cue=Ci(),Rue=function(e,t,i,r,s){return Cue(e,"angle",t,i,r,s)};WP.exports=Rue});var KP=l((jXe,jP)=>{var _ue=function(e,t,i){for(var r=0;r<e.length;r++){var s=e[r];t.call(i,s)}return e};jP.exports=_ue});var JP=l((KXe,ZP)=>{var wue=function(e,t,i){i===void 0&&(i=0);for(var r=i;r<e.length;r++){var s=e[r],n=!0;for(var a in t)s[a]!==t[a]&&(n=!1);if(n)return s}return null};ZP.exports=wue});var $P=l((ZXe,QP)=>{var Pue=function(e,t,i){i===void 0&&(i=0);for(var r=i;r<e.length;r++){var s=e[r],n=!0;for(var a in t)s[a]!==t[a]&&(n=!1);if(n)return s}return null};QP.exports=Pue});var yv=l((JXe,e1)=>{var Aue=Ti(),bue=Vs(),Mue=Ui(),que=Us(),Oue=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),que(e,bue(t)+i),Mue(e,Aue(t)+r),e};e1.exports=Oue});var Sv=l((QXe,t1)=>{var Lue=Ti(),Fue=Ei(),Nue=Ui(),Gue=Bi(),Due=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),Gue(e,Fue(t)-i),Nue(e,Lue(t)+r),e};t1.exports=Due});var Cv=l(($Xe,i1)=>{var Iue=Ti(),Bue=yi(),Vue=Ui(),Uue=Vi(),kue=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),Uue(e,Bue(t)+i),Vue(e,Iue(t)+r),e};i1.exports=kue});var Rv=l((eYe,r1)=>{var zue=Us(),Xue=zs(),Yue=function(e,t,i){return zue(e,t),Xue(e,i)};r1.exports=Yue});var _v=l((tYe,s1)=>{var Wue=Rv(),Hue=Vs(),jue=ks(),Kue=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),Wue(e,Hue(t)+i,jue(t)+r),e};s1.exports=Kue});var wv=l((iYe,n1)=>{var Zue=ks(),Jue=Ei(),Que=zs(),$ue=Bi(),ele=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),$ue(e,Jue(t)-i),Que(e,Zue(t)+r),e};n1.exports=ele});var Pv=l((rYe,a1)=>{var tle=ks(),ile=yi(),rle=zs(),sle=Vi(),nle=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),sle(e,ile(t)+i),rle(e,tle(t)+r),e};a1.exports=nle});var Av=l((sYe,o1)=>{var ale=Vs(),ole=Si(),hle=Us(),ule=Ii(),lle=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),hle(e,ale(t)+i),ule(e,ole(t)-r),e};o1.exports=lle});var bv=l((nYe,h1)=>{var fle=Ei(),dle=Si(),vle=Bi(),cle=Ii(),ple=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),vle(e,fle(t)-i),cle(e,dle(t)-r),e};h1.exports=ple});var Mv=l((aYe,u1)=>{var mle=yi(),gle=Si(),xle=Vi(),Tle=Ii(),Ele=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),xle(e,mle(t)+i),Tle(e,gle(t)-r),e};u1.exports=Ele});var qv=l((oYe,l1)=>{var tt=Ua(),Je=[];Je[tt.BOTTOM_CENTER]=yv();Je[tt.BOTTOM_LEFT]=Sv();Je[tt.BOTTOM_RIGHT]=Cv();Je[tt.CENTER]=_v();Je[tt.LEFT_CENTER]=wv();Je[tt.RIGHT_CENTER]=Pv();Je[tt.TOP_CENTER]=Av();Je[tt.TOP_LEFT]=bv();Je[tt.TOP_RIGHT]=Mv();Je[tt.LEFT_BOTTOM]=Je[tt.BOTTOM_LEFT];Je[tt.LEFT_TOP]=Je[tt.TOP_LEFT];Je[tt.RIGHT_BOTTOM]=Je[tt.BOTTOM_RIGHT];Je[tt.RIGHT_TOP]=Je[tt.TOP_RIGHT];var yle=function(e,t,i,r,s){return Je[i](e,t,r,s)};l1.exports=yle});var Ur=l((hYe,f1)=>{var Sle=function(e,t,i){if(e.radius>0&&t>=e.left&&t<=e.right&&i>=e.top&&i<=e.bottom){var r=(e.x-t)*(e.x-t),s=(e.y-i)*(e.y-i);return r+s<=e.radius*e.radius}else return!1};f1.exports=Sle});var ki=l((uYe,d1)=>{var Cle={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6};d1.exports=Cle});var j=l((lYe,v1)=>{var Rle=_(),_le=ki(),wle=new Rle({initialize:function(t,i){t===void 0&&(t=0),i===void 0&&(i=t),this.type=_le.POINT,this.x=t,this.y=i},setTo:function(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),this.x=e,this.y=t,this}});v1.exports=wle});var Ph=l((fYe,c1)=>{var Ple=j(),Ale=function(e,t,i){return i===void 0&&(i=new Ple),i.x=e.x+e.radius*Math.cos(t),i.y=e.y+e.radius*Math.sin(t),i};c1.exports=Ale});var Ov=l((dYe,p1)=>{var ble=Ph(),Mle=mn(),qle=we(),Ole=j(),Lle=function(e,t,i){i===void 0&&(i=new Ole);var r=Mle(t,0,qle.PI2);return ble(e,r,i)};p1.exports=Lle});var Lv=l((vYe,m1)=>{var Fle=function(e){return 2*(Math.PI*e.radius)};m1.exports=Fle});var Fv=l((cYe,g1)=>{var Nle=Lv(),Gle=Ph(),Dle=mn(),Ile=we(),Ble=function(e,t,i,r){r===void 0&&(r=[]),!t&&i>0&&(t=Nle(e)/i);for(var s=0;s<t;s++){var n=Dle(s/t,0,Ile.PI2);r.push(Gle(e,n))}return r};g1.exports=Ble});var Ah=l((pYe,x1)=>{var Vle=j(),Ule=function(e,t){t===void 0&&(t=new Vle);var i=2*Math.PI*Math.random(),r=Math.random()+Math.random(),s=r>1?2-r:r,n=s*Math.cos(i),a=s*Math.sin(i);return t.x=e.x+n*e.radius,t.y=e.y+a*e.radius,t};x1.exports=Ule});var kr=l((mYe,T1)=>{var kle=_(),zle=Ur(),Xle=Ov(),Yle=Fv(),Wle=ki(),Hle=Ah(),jle=new kle({initialize:function(t,i,r){t===void 0&&(t=0),i===void 0&&(i=0),r===void 0&&(r=0),this.type=Wle.CIRCLE,this.x=t,this.y=i,this._radius=r,this._diameter=r*2},contains:function(e,t){return zle(this,e,t)},getPoint:function(e,t){return Xle(this,e,t)},getPoints:function(e,t,i){return Yle(this,e,t,i)},getRandomPoint:function(e){return Hle(this,e)},setTo:function(e,t,i){return this.x=e,this.y=t,this._radius=i,this._diameter=i*2,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(e,t){return t===void 0&&(t=e),this.x=e,this.y=t,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(e){this._radius=e,this._diameter=e*2}},diameter:{get:function(){return this._diameter},set:function(e){this._diameter=e,this._radius=e*.5}},left:{get:function(){return this.x-this._radius},set:function(e){this.x=e+this._radius}},right:{get:function(){return this.x+this._radius},set:function(e){this.x=e-this._radius}},top:{get:function(){return this.y-this._radius},set:function(e){this.y=e+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(e){this.y=e-this._radius}}});T1.exports=jle});var y1=l((gYe,E1)=>{var ur=Pe(),Pn=2,Kle={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(e,t,i,r){return e===void 0&&(e=1),t===void 0?this.alpha=e:(this._alphaTL=ur(e,0,1),this._alphaTR=ur(t,0,1),this._alphaBL=ur(i,0,1),this._alphaBR=ur(r,0,1)),this},alpha:{get:function(){return this._alpha},set:function(e){var t=ur(e,0,1);this._alpha=t,this._alphaTL=t,this._alphaTR=t,this._alphaBL=t,this._alphaBR=t,t===0?this.renderFlags&=~Pn:this.renderFlags|=Pn}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(e){var t=ur(e,0,1);this._alphaTL=t,t!==0&&(this.renderFlags|=Pn)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(e){var t=ur(e,0,1);this._alphaTR=t,t!==0&&(this.renderFlags|=Pn)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(e){var t=ur(e,0,1);this._alphaBL=t,t!==0&&(this.renderFlags|=Pn)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(e){var t=ur(e,0,1);this._alphaBR=t,t!==0&&(this.renderFlags|=Pn)}}};E1.exports=Kle});var Nv=l((xYe,C1)=>{var Zle=Pe(),S1=2,Jle={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(e){return e===void 0&&(e=1),this.alpha=e,this},alpha:{get:function(){return this._alpha},set:function(e){var t=Zle(e,0,1);this._alpha=t,t===0?this.renderFlags&=~S1:this.renderFlags|=S1}}};C1.exports=Jle});var Gv=l((TYe,_1)=>{var R1=mi(),Qle={_blendMode:R1.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(e){typeof e=="string"&&(e=R1[e]),e|=0,e>=-1&&(this._blendMode=e)}},setBlendMode:function(e){return this.blendMode=e,this}};_1.exports=Qle});var P1=l((EYe,w1)=>{var $le={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(e){this.scaleX=e/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(e){this.scaleY=e/this.height}},setSize:function(e,t){return this.width=e,this.height=t,this},setDisplaySize:function(e,t){return this.displayWidth=e,this.displayHeight=t,this}};w1.exports=$le});var b1=l((yYe,A1)=>{var efe={texture:null,frame:null,isCropped:!1,setCrop:function(e,t,i,r){if(e===void 0)this.isCropped=!1;else if(this.frame){if(typeof e=="number")this.frame.setCropUVs(this._crop,e,t,i,r,this.flipX,this.flipY);else{var s=e;this.frame.setCropUVs(this._crop,s.x,s.y,s.width,s.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};A1.exports=efe});var Dv=l((SYe,M1)=>{var tfe={_depth:0,depth:{get:function(){return this._depth},set:function(e){this.displayList&&this.displayList.queueDepthSort(),this._depth=e}},setDepth:function(e){return e===void 0&&(e=0),this.depth=e,this}};M1.exports=tfe});var O1=l((CYe,q1)=>{var ife={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(e){return this.flipX=e,this},setFlipY:function(e){return this.flipY=e,this},setFlip:function(e,t){return this.flipX=e,this.flipY=t,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}};q1.exports=ife});var zr=l((RYe,L1)=>{var rfe=function(e,t,i){return e.width<=0||e.height<=0?!1:e.x<=t&&e.x+e.width>=t&&e.y<=i&&e.y+e.height>=i};L1.exports=rfe});var ka=l((_Ye,F1)=>{var sfe=function(e){return 2*(e.width+e.height)};F1.exports=sfe});var bh=l((wYe,N1)=>{var nfe=ka(),afe=j(),ofe=function(e,t,i){if(i===void 0&&(i=new afe),t<=0||t>=1)return i.x=e.x,i.y=e.y,i;var r=nfe(e)*t;return t>.5?(r-=e.width+e.height,r<=e.width?(i.x=e.right-r,i.y=e.bottom):(i.x=e.x,i.y=e.bottom-(r-e.width))):r<=e.width?(i.x=e.x+r,i.y=e.y):(i.x=e.right,i.y=e.y+(r-e.width)),i};N1.exports=ofe});var Iv=l((PYe,G1)=>{var hfe=bh(),ufe=ka(),lfe=function(e,t,i,r){r===void 0&&(r=[]),!t&&i>0&&(t=ufe(e)/i);for(var s=0;s<t;s++){var n=s/t;r.push(hfe(e,n))}return r};G1.exports=lfe});var Bv=l((AYe,D1)=>{var ffe=j(),dfe=function(e,t,i){return i===void 0&&(i=new ffe),i.x=e.x1+(e.x2-e.x1)*t,i.y=e.y1+(e.y2-e.y1)*t,i};D1.exports=dfe});var lr=l((bYe,I1)=>{var vfe=function(e){return Math.sqrt((e.x2-e.x1)*(e.x2-e.x1)+(e.y2-e.y1)*(e.y2-e.y1))};I1.exports=vfe});var Mh=l((MYe,B1)=>{var cfe=lr(),pfe=j(),mfe=function(e,t,i,r){r===void 0&&(r=[]),!t&&i>0&&(t=cfe(e)/i);for(var s=e.x1,n=e.y1,a=e.x2,o=e.y2,h=0;h<t;h++){var u=h/t,f=s+(a-s)*u,d=n+(o-n)*u;r.push(new pfe(f,d))}return r};B1.exports=mfe});var qh=l((qYe,V1)=>{var gfe=j(),xfe=function(e,t){t===void 0&&(t=new gfe);var i=Math.random();return t.x=e.x1+i*(e.x2-e.x1),t.y=e.y1+i*(e.y2-e.y1),t};V1.exports=xfe});var Ri=l((OYe,k1)=>{var Tfe=_(),Efe=Bv(),yfe=Mh(),Sfe=ki(),Cfe=qh(),U1=le(),Rfe=new Tfe({initialize:function(t,i,r,s){t===void 0&&(t=0),i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=0),this.type=Sfe.LINE,this.x1=t,this.y1=i,this.x2=r,this.y2=s},getPoint:function(e,t){return Efe(this,e,t)},getPoints:function(e,t,i){return yfe(this,e,t,i)},getRandomPoint:function(e){return Cfe(this,e)},setTo:function(e,t,i,r){return e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=0),r===void 0&&(r=0),this.x1=e,this.y1=t,this.x2=i,this.y2=r,this},getPointA:function(e){return e===void 0&&(e=new U1),e.set(this.x1,this.y1),e},getPointB:function(e){return e===void 0&&(e=new U1),e.set(this.x2,this.y2),e},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(e){this.x1<=this.x2?this.x1=e:this.x2=e}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(e){this.x1>this.x2?this.x1=e:this.x2=e}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(e){this.y1<=this.y2?this.y1=e:this.y2=e}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(e){this.y1>this.y2?this.y1=e:this.y2=e}}});k1.exports=Rfe});var Oh=l((LYe,z1)=>{var _fe=j(),wfe=function(e,t){return t===void 0&&(t=new _fe),t.x=e.x+Math.random()*e.width,t.y=e.y+Math.random()*e.height,t};z1.exports=wfe});var ye=l((FYe,X1)=>{var Pfe=_(),Afe=zr(),bfe=bh(),Mfe=Iv(),qfe=ki(),Lh=Ri(),Ofe=Oh(),Lfe=new Pfe({initialize:function(t,i,r,s){t===void 0&&(t=0),i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=0),this.type=qfe.RECTANGLE,this.x=t,this.y=i,this.width=r,this.height=s},contains:function(e,t){return Afe(this,e,t)},getPoint:function(e,t){return bfe(this,e,t)},getPoints:function(e,t,i){return Mfe(this,e,t,i)},getRandomPoint:function(e){return Ofe(this,e)},setTo:function(e,t,i,r){return this.x=e,this.y=t,this.width=i,this.height=r,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(e,t){return t===void 0&&(t=e),this.x=e,this.y=t,this},setSize:function(e,t){return t===void 0&&(t=e),this.width=e,this.height=t,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(e){return e===void 0&&(e=new Lh),e.setTo(this.x,this.y,this.right,this.y),e},getLineB:function(e){return e===void 0&&(e=new Lh),e.setTo(this.right,this.y,this.right,this.bottom),e},getLineC:function(e){return e===void 0&&(e=new Lh),e.setTo(this.right,this.bottom,this.x,this.bottom),e},getLineD:function(e){return e===void 0&&(e=new Lh),e.setTo(this.x,this.bottom,this.x,this.y),e},left:{get:function(){return this.x},set:function(e){e>=this.right?this.width=0:this.width=this.right-e,this.x=e}},right:{get:function(){return this.x+this.width},set:function(e){e<=this.x?this.width=0:this.width=e-this.x}},top:{get:function(){return this.y},set:function(e){e>=this.bottom?this.height=0:this.height=this.bottom-e,this.y=e}},bottom:{get:function(){return this.y+this.height},set:function(e){e<=this.y?this.height=0:this.height=e-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(e){this.x=e-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(e){this.y=e-this.height/2}}});X1.exports=Lfe});var W1=l((NYe,Y1)=>{var Ffe=ye(),Nfe=sd(),fr=le(),Gfe={prepareBoundsOutput:function(e,t){if(t===void 0&&(t=!1),this.rotation!==0&&Nfe(e,this.x,this.y,this.rotation),t&&this.parentContainer){var i=this.parentContainer.getBoundsTransformMatrix();i.transformPoint(e.x,e.y,e)}return e},getCenter:function(e){return e===void 0&&(e=new fr),e.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,e.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,e},getTopLeft:function(e,t){return e||(e=new fr),e.x=this.x-this.displayWidth*this.originX,e.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(e,t)},getTopCenter:function(e,t){return e||(e=new fr),e.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,e.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(e,t)},getTopRight:function(e,t){return e||(e=new fr),e.x=this.x-this.displayWidth*this.originX+this.displayWidth,e.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(e,t)},getLeftCenter:function(e,t){return e||(e=new fr),e.x=this.x-this.displayWidth*this.originX,e.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(e,t)},getRightCenter:function(e,t){return e||(e=new fr),e.x=this.x-this.displayWidth*this.originX+this.displayWidth,e.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(e,t)},getBottomLeft:function(e,t){return e||(e=new fr),e.x=this.x-this.displayWidth*this.originX,e.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(e,t)},getBottomCenter:function(e,t){return e||(e=new fr),e.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,e.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(e,t)},getBottomRight:function(e,t){return e||(e=new fr),e.x=this.x-this.displayWidth*this.originX+this.displayWidth,e.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(e,t)},getBounds:function(e){e===void 0&&(e=new Ffe);var t,i,r,s,n,a,o,h;if(this.parentContainer){var u=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(e),u.transformPoint(e.x,e.y,e),t=e.x,i=e.y,this.getTopRight(e),u.transformPoint(e.x,e.y,e),r=e.x,s=e.y,this.getBottomLeft(e),u.transformPoint(e.x,e.y,e),n=e.x,a=e.y,this.getBottomRight(e),u.transformPoint(e.x,e.y,e),o=e.x,h=e.y}else this.getTopLeft(e),t=e.x,i=e.y,this.getTopRight(e),r=e.x,s=e.y,this.getBottomLeft(e),n=e.x,a=e.y,this.getBottomRight(e),o=e.x,h=e.y;return e.x=Math.min(t,r,n,o),e.y=Math.min(i,s,a,h),e.width=Math.max(t,r,n,o)-e.x,e.height=Math.max(i,s,a,h)-e.y,e}};Y1.exports=Gfe});var Vv=l((GYe,j1)=>{var Dfe=_(),Ife=Ne(),H1=Ns(),Bfe=new Dfe({initialize:function(t,i){var r=t.sys.renderer;this.renderer=r,this.bitmapMask=i,this.maskTexture=null,this.mainTexture=null,this.dirty=!0,this.mainFramebuffer=null,this.maskFramebuffer=null,this.invertAlpha=!1,this.isStencil=!1,this.createMask(),t.sys.game.events.on(Ife.CONTEXT_RESTORED,this.createMask,this),r&&r.on(H1.RESIZE,this.createMask,this)},createMask:function(){var e=this.renderer;if(!(!e||!e.gl)){this.mainTexture&&this.clearMask();var t=e.width,i=e.height,r=(t&t-1)==0&&(i&i-1)==0,s=e.gl,n=r?s.REPEAT:s.CLAMP_TO_EDGE,a=s.LINEAR;this.mainTexture=e.createTexture2D(0,a,a,n,n,s.RGBA,null,t,i),this.maskTexture=e.createTexture2D(0,a,a,n,n,s.RGBA,null,t,i),this.mainFramebuffer=e.createFramebuffer(t,i,this.mainTexture,!0),this.maskFramebuffer=e.createFramebuffer(t,i,this.maskTexture,!0)}},clearMask:function(){var e=this.renderer;!e||!e.gl||!this.mainTexture||(e.deleteTexture(this.mainTexture),e.deleteTexture(this.maskTexture),e.deleteFramebuffer(this.mainFramebuffer),e.deleteFramebuffer(this.maskFramebuffer),this.mainTexture=null,this.maskTexture=null,this.mainFramebuffer=null,this.maskFramebuffer=null)},setBitmap:function(e){this.bitmapMask=e},preRenderWebGL:function(e,t,i){e.pipelines.BITMAPMASK_PIPELINE.beginMask(this,t,i)},postRenderWebGL:function(e,t){e.pipelines.BITMAPMASK_PIPELINE.endMask(this,t)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.clearMask(),this.renderer&&this.renderer.off(H1.RESIZE,this.createMask,this),this.bitmapMask=null,this.prevFramebuffer=null,this.renderer=null}});j1.exports=Bfe});var Uv=l((DYe,K1)=>{var Vfe=_(),Ufe=new Vfe({initialize:function(t,i){this.geometryMask=i,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(e){return this.geometryMask=e,this},setInvertAlpha:function(e){return e===void 0&&(e=!0),this.invertAlpha=e,this},preRenderWebGL:function(e,t,i){var r=e.gl;e.flush(),e.maskStack.length===0&&(r.enable(r.STENCIL_TEST),r.clear(r.STENCIL_BUFFER_BIT),e.maskCount=0),e.currentCameraMask.mask!==this&&(e.currentMask.mask=this),e.maskStack.push({mask:this,camera:i}),this.applyStencil(e,i,!0),e.maskCount++},applyStencil:function(e,t,i){var r=e.gl,s=this.geometryMask,n=e.maskCount;r.colorMask(!1,!1,!1,!1),i?(r.stencilFunc(r.EQUAL,n,255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)):(r.stencilFunc(r.EQUAL,n+1,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)),s.renderWebGL(e,s,t),e.flush(),r.colorMask(!0,!0,!0,!0),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),i?this.invertAlpha?r.stencilFunc(r.NOTEQUAL,n+1,255):r.stencilFunc(r.EQUAL,n+1,255):this.invertAlpha?r.stencilFunc(r.NOTEQUAL,n,255):r.stencilFunc(r.EQUAL,n,255)},postRenderWebGL:function(e){var t=e.gl;e.maskStack.pop(),e.maskCount--,e.flush();var i=e.currentMask;if(e.maskStack.length===0)i.mask=null,t.disable(t.STENCIL_TEST);else{var r=e.maskStack[e.maskStack.length-1];r.mask.applyStencil(e,r.camera,!1),e.currentCameraMask.mask!==r.mask?(i.mask=r.mask,i.camera=r.camera):i.mask=null}},preRenderCanvas:function(e,t,i){var r=this.geometryMask;e.currentContext.save(),r.renderCanvas(e,r,i,null,null,!0),e.currentContext.clip()},postRenderCanvas:function(e){e.currentContext.restore()},destroy:function(){this.geometryMask=null}});K1.exports=Ufe});var kv=l((IYe,Z1)=>{var kfe=Vv(),zfe=Uv(),Xfe={mask:null,setMask:function(e){return this.mask=e,this},clearMask:function(e){return e===void 0&&(e=!1),e&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(e){return e===void 0&&(this.texture||this.shader)&&(e=this),new kfe(this.scene,e)},createGeometryMask:function(e){return e===void 0&&this.type==="Graphics"&&(e=this),new zfe(this.scene,e)}};Z1.exports=Xfe});var Q1=l((BYe,J1)=>{var Yfe={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(e){this._displayOriginX=e,this.originX=e/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(e){this._displayOriginY=e,this.originY=e/this.height}},setOrigin:function(e,t){return e===void 0&&(e=.5),t===void 0&&(t=e),this.originX=e,this.originY=t,this.updateDisplayOrigin()},setOriginFromFrame:function(){return!this.frame||!this.frame.customPivot?this.setOrigin():(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin())},setDisplayOrigin:function(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),this.displayOriginX=e,this.displayOriginY=t,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};J1.exports=Yfe});var An=l((VYe,$1)=>{var Wfe=function(e,t,i){return e&&e.hasOwnProperty(t)?e[t]:i};$1.exports=Wfe});var bn=l((UYe,eA)=>{var Hfe={CREATED:0,INIT:1,DELAY:2,OFFSET_DELAY:3,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING_ADD:20,PAUSED:21,LOOP_DELAY:22,ACTIVE:23,COMPLETE_DELAY:24,PENDING_REMOVE:25,REMOVED:26};eA.exports=Hfe});var sA=l((kYe,rA)=>{var tA=or(),iA=An(),Fh=ie(),za=bn(),zv=le(),jfe={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:za.PLAYING_FORWARD,setPath:function(e,t){t===void 0&&(t=this.pathConfig);var i=this.pathTween;return i&&i.isPlaying()&&i.stop(),this.path=e,t&&this.startFollow(t),this},setRotateToPath:function(e,t){return t===void 0&&(t=0),this.rotateToPath=e,this.pathRotationOffset=t,this},isFollowing:function(){var e=this.pathTween;return e&&e.isPlaying()},startFollow:function(e,t){e===void 0&&(e={}),t===void 0&&(t=0);var i=this.pathTween;i&&i.isPlaying()&&i.stop(),typeof e=="number"&&(e={duration:e}),e.from=Fh(e,"from",0),e.to=Fh(e,"to",1);var r=iA(e,"positionOnPath",!1);this.rotateToPath=iA(e,"rotateToPath",!1),this.pathRotationOffset=Fh(e,"rotationOffset",0);var s=Fh(e,"startAt",t);if(s&&(e.onStart=function(a){var o=a.data[0];o.progress=s,o.elapsed=o.duration*s;var h=o.ease(o.progress);o.current=o.start+(o.end-o.start)*h,o.target[o.key]=o.current}),this.pathOffset||(this.pathOffset=new zv(this.x,this.y)),this.pathVector||(this.pathVector=new zv),this.pathDelta||(this.pathDelta=new zv),this.pathDelta.reset(),this.pathTween=this.scene.sys.tweens.addCounter(e),this.path.getStartPoint(this.pathOffset),r&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=za.PLAYING_FORWARD,this.rotateToPath){var n=this.path.getPoint(.1);this.rotation=Math.atan2(n.y-this.y,n.x-this.x)+tA(this.pathRotationOffset)}return this.pathConfig=e,this},pauseFollow:function(){var e=this.pathTween;return e&&e.isPlaying()&&e.pause(),this},resumeFollow:function(){var e=this.pathTween;return e&&e.isPaused()&&e.resume(),this},stopFollow:function(){var e=this.pathTween;return e&&e.isPlaying()&&e.stop(),this},pathUpdate:function(){var e=this.pathTween;if(e){var t=e.data[0],i=this.pathDelta,r=this.pathVector;if(i.copy(r).negate(),t.state===za.COMPLETE){this.path.getPoint(1,r),i.add(r),r.add(this.pathOffset),this.setPosition(r.x,r.y);return}else if(t.state!==za.PLAYING_FORWARD&&t.state!==za.PLAYING_BACKWARD)return;this.path.getPoint(e.getValue(),r),i.add(r),r.add(this.pathOffset);var s=this.x,n=this.y;this.setPosition(r.x,r.y);var a=this.x-s,o=this.y-n;if(a===0&&o===0)return;if(t.state!==this._prevDirection){this._prevDirection=t.state;return}this.rotateToPath&&(this.rotation=Math.atan2(o,a)+tA(this.pathRotationOffset))}}};rA.exports=jfe});var Xv=l((zYe,aA)=>{var nA=ch(),Kfe=Is(),Zfe=Gs(),Jfe={defaultPipeline:null,pipeline:null,hasPostPipeline:!1,postPipelines:null,pipelineData:null,initPipeline:function(e){e===void 0&&(e=Kfe.MULTI_PIPELINE);var t=this.scene.sys.renderer;if(!t)return!1;var i=t.pipelines;if(this.postPipelines=[],this.pipelineData={},i){var r=i.get(e);if(r)return this.defaultPipeline=r,this.pipeline=r,!0}return!1},setPipeline:function(e,t,i){var r=this.scene.sys.renderer;if(!r)return this;var s=r.pipelines;if(s){var n=s.get(e);n&&(this.pipeline=n),t&&(this.pipelineData=i?nA(t):t)}return this},setPostPipeline:function(e,t,i){var r=this.scene.sys.renderer;if(!r)return this;var s=r.pipelines;if(s){Array.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++){var a=s.getPostPipeline(e[n],this);a&&this.postPipelines.push(a)}t&&(this.pipelineData=i?nA(t):t)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPipelineData:function(e,t){var i=this.pipelineData;return t===void 0?delete i[e]:i[e]=t,this},getPostPipeline:function(e){for(var t=this.postPipelines,i=[],r=0;r<t.length;r++){var s=t[r];(typeof e=="string"&&s.name===e||s instanceof e)&&i.push(s)}return i.length===1?i[0]:i},resetPipeline:function(e,t){return e===void 0&&(e=!1),t===void 0&&(t=!1),this.pipeline=this.defaultPipeline,e&&(this.postPipelines=[],this.hasPostPipeline=!1),t&&(this.pipelineData={}),this.pipeline!==null},resetPostPipeline:function(e){e===void 0&&(e=!1);for(var t=this.postPipelines,i=0;i<t.length;i++)t[i].destroy();this.postPipelines=[],this.hasPostPipeline=!1,e&&(this.pipelineData={})},removePostPipeline:function(e){for(var t=this.postPipelines,i=t.length-1;i>=0;i--){var r=t[i];(typeof e=="string"&&r.name===e||typeof e!="string"&&r instanceof e)&&(r.destroy(),Zfe(t,i))}return this.hasPostPipeline=this.postPipelines.length>0,this},getPipelineName:function(){return this.pipeline.name}};aA.exports=Jfe});var Yv=l((XYe,oA)=>{var Qfe={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(e,t){return t===void 0&&(t=e),this.scrollFactorX=e,this.scrollFactorY=t,this}};oA.exports=Qfe});var uA=l((YYe,hA)=>{var $fe={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(e){this.scaleX=e/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(e){this.scaleY=e/this.frame.realHeight}},setSizeToFrame:function(e){return e===void 0&&(e=this.frame),this.width=e.realWidth,this.height=e.realHeight,this},setSize:function(e,t){return this.width=e,this.height=t,this},setDisplaySize:function(e,t){return this.displayWidth=e,this.displayHeight=t,this}};hA.exports=$fe});var dA=l((WYe,fA)=>{var lA=8,ede={texture:null,frame:null,isCropped:!1,setTexture:function(e,t){return this.texture=this.scene.sys.textures.get(e),this.setFrame(t)},setFrame:function(e,t,i){return t===void 0&&(t=!0),i===void 0&&(i=!0),this.frame=this.texture.get(e),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~lA:this.renderFlags|=lA,this._sizeComponent&&t&&this.setSizeToFrame(),this._originComponent&&i&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};fA.exports=ede});var pA=l((HYe,cA)=>{var vA=8,tde={texture:null,frame:null,isCropped:!1,setCrop:function(e,t,i,r){if(e===void 0)this.isCropped=!1;else if(this.frame){if(typeof e=="number")this.frame.setCropUVs(this._crop,e,t,i,r,this.flipX,this.flipY);else{var s=e;this.frame.setCropUVs(this._crop,s.x,s.y,s.width,s.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(e,t){return this.texture=this.scene.sys.textures.get(e),this.setFrame(t)},setFrame:function(e,t,i){return t===void 0&&(t=!0),i===void 0&&(i=!0),this.frame=this.texture.get(e),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~vA:this.renderFlags|=vA,this._sizeComponent&&t&&this.setSizeToFrame(),this._originComponent&&i&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};cA.exports=tde});var gA=l((jYe,mA)=>{var ide={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(e,t,i,r){return e===void 0&&(e=16777215),t===void 0&&(t=e,i=e,r=e),this.tintTopLeft=e,this.tintTopRight=t,this.tintBottomLeft=i,this.tintBottomRight=r,this.tintFill=!1,this},setTintFill:function(e,t,i,r){return this.setTint(e,t,i,r),this.tintFill=!0,this},tint:{set:function(e){this.setTint(e,e,e,e)}},isTinted:{get:function(){var e=16777215;return this.tintFill||this.tintTopLeft!==e||this.tintTopRight!==e||this.tintBottomLeft!==e||this.tintBottomRight!==e}}};mA.exports=ide});var Nh=l((KYe,xA)=>{var rde=function(e){var t={name:e.name,type:e.type,x:e.x,y:e.y,depth:e.depth,scale:{x:e.scaleX,y:e.scaleY},origin:{x:e.originX,y:e.originY},flipX:e.flipX,flipY:e.flipY,rotation:e.rotation,alpha:e.alpha,visible:e.visible,blendMode:e.blendMode,textureKey:"",frameKey:"",data:{}};return e.texture&&(t.textureKey=e.texture.key,t.frameKey=e.frame.name),t};xA.exports=rde});var Hv=l((ZYe,yA)=>{var TA=we(),Wv=dt(),sde=nh(),nde=Ff(),EA=Nf(),ade=le(),Mn=4,ode={_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(e){this._scaleX=e,this._scaleY=e,e===0?this.renderFlags&=~Mn:this.renderFlags|=Mn}},scaleX:{get:function(){return this._scaleX},set:function(e){this._scaleX=e,e===0?this.renderFlags&=~Mn:this.renderFlags|=Mn}},scaleY:{get:function(){return this._scaleY},set:function(e){this._scaleY=e,e===0?this.renderFlags&=~Mn:this.renderFlags|=Mn}},angle:{get:function(){return EA(this._rotation*TA.RAD_TO_DEG)},set:function(e){this.rotation=EA(e)*TA.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(e){this._rotation=nde(e)}},setPosition:function(e,t,i,r){return e===void 0&&(e=0),t===void 0&&(t=e),i===void 0&&(i=0),r===void 0&&(r=0),this.x=e,this.y=t,this.z=i,this.w=r,this},copyPosition:function(e){return e.x!==void 0&&(this.x=e.x),e.y!==void 0&&(this.y=e.y),e.z!==void 0&&(this.z=e.z),e.w!==void 0&&(this.w=e.w),this},setRandomPosition:function(e,t,i,r){return e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=this.scene.sys.scale.width),r===void 0&&(r=this.scene.sys.scale.height),this.x=e+Math.random()*i,this.y=t+Math.random()*r,this},setRotation:function(e){return e===void 0&&(e=0),this.rotation=e,this},setAngle:function(e){return e===void 0&&(e=0),this.angle=e,this},setScale:function(e,t){return e===void 0&&(e=1),t===void 0&&(t=e),this.scaleX=e,this.scaleY=t,this},setX:function(e){return e===void 0&&(e=0),this.x=e,this},setY:function(e){return e===void 0&&(e=0),this.y=e,this},setZ:function(e){return e===void 0&&(e=0),this.z=e,this},setW:function(e){return e===void 0&&(e=0),this.w=e,this},getLocalTransformMatrix:function(e){return e===void 0&&(e=new Wv),e.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(e,t){e===void 0&&(e=new Wv),t===void 0&&(t=new Wv);var i=this.parentContainer;if(!i)return this.getLocalTransformMatrix(e);for(e.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);i;)t.applyITRS(i.x,i.y,i._rotation,i._scaleX,i._scaleY),t.multiply(e,e),i=i.parentContainer;return e},getLocalPoint:function(e,t,i,r){i||(i=new ade),r||(r=this.scene.sys.cameras.main);var s=r.scrollX,n=r.scrollY,a=e+s*this.scrollFactorX-s,o=t+n*this.scrollFactorY-n;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(a,o,i):sde(a,o,this.x,this.y,this.rotation,this.scaleX,this.scaleY,i),this._originComponent&&(i.x+=this._displayOriginX,i.y+=this._displayOriginY),i},getParentRotation:function(){for(var e=0,t=this.parentContainer;t;)e+=t.rotation,t=t.parentContainer;return e}};yA.exports=ode});var jv=l((JYe,CA)=>{var SA=1,hde={_visible:!0,visible:{get:function(){return this._visible},set:function(e){e?(this._visible=!0,this.renderFlags|=SA):(this._visible=!1,this.renderFlags&=~SA)}},setVisible:function(e){return this.visible=e,this}};CA.exports=hde});var de=l((QYe,RA)=>{RA.exports={Alpha:y1(),AlphaSingle:Nv(),BlendMode:Gv(),ComputedSize:P1(),Crop:b1(),Depth:Dv(),Flip:O1(),GetBounds:W1(),Mask:kv(),Origin:Q1(),PathFollower:sA(),Pipeline:Xv(),ScrollFactor:Yv(),Size:uA(),Texture:dA(),TextureCrop:pA(),Tint:gA(),ToJSON:Nh(),Transform:Hv(),TransformMatrix:dt(),Visible:jv()}});var wA=l(($Ye,_A)=>{_A.exports="changedata"});var AA=l((e3e,PA)=>{PA.exports="changedata-"});var MA=l((t3e,bA)=>{bA.exports="destroy"});var OA=l((i3e,qA)=>{qA.exports="removedata"});var FA=l((r3e,LA)=>{LA.exports="setdata"});var Kv=l((s3e,NA)=>{NA.exports={CHANGE_DATA:wA(),CHANGE_DATA_KEY:AA(),DESTROY:MA(),REMOVE_DATA:OA(),SET_DATA:FA()}});var Xs=l((n3e,GA)=>{var ude=_(),dr=Kv(),lde=new ude({initialize:function(t,i){this.parent=t,this.events=i,i||(this.events=t.events?t.events:t),this.list={},this.values={},this._frozen=!1,!t.hasOwnProperty("sys")&&this.events&&this.events.once(dr.DESTROY,this.destroy,this)},get:function(e){var t=this.list;if(Array.isArray(e)){for(var i=[],r=0;r<e.length;r++)i.push(t[e[r]]);return i}else return t[e]},getAll:function(){var e={};for(var t in this.list)this.list.hasOwnProperty(t)&&(e[t]=this.list[t]);return e},query:function(e){var t={};for(var i in this.list)this.list.hasOwnProperty(i)&&i.match(e)&&(t[i]=this.list[i]);return t},set:function(e,t){if(this._frozen)return this;if(typeof e=="string")return this.setValue(e,t);for(var i in e)this.setValue(i,e[i]);return this},inc:function(e,t){if(this._frozen)return this;t===void 0&&(t=1);var i=this.get(e);return i===void 0&&(i=0),this.set(e,i+t),this},toggle:function(e){return this._frozen?this:(this.set(e,!this.get(e)),this)},setValue:function(e,t){if(this._frozen)return this;if(this.has(e))this.values[e]=t;else{var i=this,r=this.list,s=this.events,n=this.parent;Object.defineProperty(this.values,e,{enumerable:!0,configurable:!0,get:function(){return r[e]},set:function(a){if(!i._frozen){var o=r[e];r[e]=a,s.emit(dr.CHANGE_DATA,n,e,a,o),s.emit(dr.CHANGE_DATA_KEY+e,n,a,o)}}}),r[e]=t,s.emit(dr.SET_DATA,n,e,t)}return this},each:function(e,t){for(var i=[this.parent,null,void 0],r=1;r<arguments.length;r++)i.push(arguments[r]);for(var s in this.list)i[1]=s,i[2]=this.list[s],e.apply(t,i);return this},merge:function(e,t){t===void 0&&(t=!0);for(var i in e)e.hasOwnProperty(i)&&(t||!t&&!this.has(i))&&this.setValue(i,e[i]);return this},remove:function(e){if(this._frozen)return this;if(Array.isArray(e))for(var t=0;t<e.length;t++)this.removeValue(e[t]);else return this.removeValue(e);return this},removeValue:function(e){if(this.has(e)){var t=this.list[e];delete this.list[e],delete this.values[e],this.events.emit(dr.REMOVE_DATA,this.parent,e,t)}return this},pop:function(e){var t=void 0;return!this._frozen&&this.has(e)&&(t=this.list[e],delete this.list[e],delete this.values[e],this.events.emit(dr.REMOVE_DATA,this.parent,e,t)),t},has:function(e){return this.list.hasOwnProperty(e)},setFreeze:function(e){return this._frozen=e,this},reset:function(){for(var e in this.list)delete this.list[e],delete this.values[e];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(dr.CHANGE_DATA),this.events.off(dr.SET_DATA),this.events.off(dr.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(e){this._frozen=!!e}},count:{get:function(){var e=0;for(var t in this.list)this.list[t]!==void 0&&e++;return e}}});GA.exports=lde});var IA=l((a3e,DA)=>{DA.exports="addedtoscene"});var VA=l((o3e,BA)=>{BA.exports="destroy"});var kA=l((h3e,UA)=>{UA.exports="removedfromscene"});var XA=l((u3e,zA)=>{zA.exports="complete"});var WA=l((l3e,YA)=>{YA.exports="created"});var jA=l((f3e,HA)=>{HA.exports="error"});var ZA=l((d3e,KA)=>{KA.exports="loop"});var QA=l((v3e,JA)=>{JA.exports="play"});var eb=l((c3e,$A)=>{$A.exports="seeked"});var ib=l((p3e,tb)=>{tb.exports="seeking"});var sb=l((m3e,rb)=>{rb.exports="stop"});var ab=l((g3e,nb)=>{nb.exports="timeout"});var hb=l((x3e,ob)=>{ob.exports="unlocked"});var Xr=l((T3e,ub)=>{ub.exports={ADDED_TO_SCENE:IA(),DESTROY:VA(),REMOVED_FROM_SCENE:kA(),VIDEO_COMPLETE:XA(),VIDEO_CREATED:WA(),VIDEO_ERROR:jA(),VIDEO_LOOP:ZA(),VIDEO_PLAY:QA(),VIDEO_SEEKED:eb(),VIDEO_SEEKING:ib(),VIDEO_STOP:sb(),VIDEO_TIMEOUT:ab(),VIDEO_UNLOCKED:hb()}});var fb=l((E3e,lb)=>{lb.exports="addedtoscene"});var vb=l((y3e,db)=>{db.exports="boot"});var pb=l((S3e,cb)=>{cb.exports="create"});var gb=l((C3e,mb)=>{mb.exports="destroy"});var Tb=l((R3e,xb)=>{xb.exports="pause"});var yb=l((_3e,Eb)=>{Eb.exports="postupdate"});var Cb=l((w3e,Sb)=>{Sb.exports="prerender"});var _b=l((P3e,Rb)=>{Rb.exports="preupdate"});var Pb=l((A3e,wb)=>{wb.exports="ready"});var bb=l((b3e,Ab)=>{Ab.exports="removedfromscene"});var qb=l((M3e,Mb)=>{Mb.exports="render"});var Lb=l((q3e,Ob)=>{Ob.exports="resume"});var Nb=l((O3e,Fb)=>{Fb.exports="shutdown"});var Db=l((L3e,Gb)=>{Gb.exports="sleep"});var Bb=l((F3e,Ib)=>{Ib.exports="start"});var Ub=l((N3e,Vb)=>{Vb.exports="transitioncomplete"});var zb=l((G3e,kb)=>{kb.exports="transitioninit"});var Yb=l((D3e,Xb)=>{Xb.exports="transitionout"});var Hb=l((I3e,Wb)=>{Wb.exports="transitionstart"});var Kb=l((B3e,jb)=>{jb.exports="transitionwake"});var Jb=l((V3e,Zb)=>{Zb.exports="update"});var $b=l((U3e,Qb)=>{Qb.exports="wake"});var qe=l((k3e,eM)=>{eM.exports={ADDED_TO_SCENE:fb(),BOOT:vb(),CREATE:pb(),DESTROY:gb(),PAUSE:Tb(),POST_UPDATE:yb(),PRE_RENDER:Cb(),PRE_UPDATE:_b(),READY:Pb(),REMOVED_FROM_SCENE:bb(),RENDER:qb(),RESUME:Lb(),SHUTDOWN:Nb(),SLEEP:Db(),START:Bb(),TRANSITION_COMPLETE:Ub(),TRANSITION_INIT:zb(),TRANSITION_OUT:Yb(),TRANSITION_START:Hb(),TRANSITION_WAKE:Kb(),UPDATE:Jb(),WAKE:$b()}});var Ae=l((z3e,rM)=>{var fde=_(),dde=Nh(),Xa=Xs(),tM=se(),Ya=Xr(),iM=qe(),Zv=new fde({Extends:tM,initialize:function(t,i){tM.call(this),this.scene=t,this.displayList=null,this.type=i,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(Ya.ADDED_TO_SCENE,this.addedToScene,this),this.on(Ya.REMOVED_FROM_SCENE,this.removedFromScene,this),t.sys.queueDepthSort()},setActive:function(e){return this.active=e,this},setName:function(e){return this.name=e,this},setState:function(e){return this.state=e,this},setDataEnabled:function(){return this.data||(this.data=new Xa(this)),this},setData:function(e,t){return this.data||(this.data=new Xa(this)),this.data.set(e,t),this},incData:function(e,t){return this.data||(this.data=new Xa(this)),this.data.inc(e,t),this},toggleData:function(e){return this.data||(this.data=new Xa(this)),this.data.toggle(e),this},getData:function(e){return this.data||(this.data=new Xa(this)),this.data.get(e)},setInteractive:function(e,t,i){return this.scene.sys.input.enable(this,e,t,i),this},disableInteractive:function(){return this.input&&(this.input.enabled=!1),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return dde(this)},willRender:function(e){return!(Zv.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&e.id)},getIndexList:function(){for(var e=this,t=this.parentContainer,i=[];t&&(i.unshift(t.getIndex(e)),e=t,t.parentContainer);)t=t.parentContainer;return this.displayList?i.unshift(this.displayList.getIndex(e)):i.unshift(this.scene.sys.displayList.getIndex(e)),i},addToDisplayList:function(e){return e===void 0&&(e=this.scene.sys.displayList),this.displayList&&this.displayList!==e&&this.removeFromDisplayList(),e.exists(this)||(this.displayList=e,e.add(this,!0),e.queueDepthSort(),this.emit(Ya.ADDED_TO_SCENE,this,this.scene),e.events.emit(iM.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var e=this.displayList||this.scene.sys.displayList;return e.exists(this)&&(e.remove(this,!0),e.queueDepthSort(),this.displayList=null,this.emit(Ya.REMOVED_FROM_SCENE,this,this.scene),e.events.emit(iM.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function(e){!this.scene||this.ignoreDestroy||(e===void 0&&(e=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(Ya.DESTROY,this,e),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});Zv.RENDER_MASK=15;rM.exports=Zv});var Wa=l((X3e,nM)=>{var vde=mi(),cde=kr(),pde=Ur(),mde=_(),qn=de(),sM=Ae(),gde=ye(),xde=zr(),Tde=new mde({Extends:sM,Mixins:[qn.Depth,qn.GetBounds,qn.Origin,qn.Transform,qn.ScrollFactor,qn.Visible],initialize:function(t,i,r,s,n){s===void 0&&(s=1),n===void 0&&(n=s),sM.call(this,t,"Zone"),this.setPosition(i,r),this.width=s,this.height=n,this.blendMode=vde.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(e){this.scaleX=e/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(e){this.scaleY=e/this.height}},setSize:function(e,t,i){i===void 0&&(i=!0),this.width=e,this.height=t,this.updateDisplayOrigin();var r=this.input;return i&&r&&!r.customHitArea&&(r.hitArea.width=e,r.hitArea.height=t),this},setDisplaySize:function(e,t){return this.displayWidth=e,this.displayHeight=t,this},setCircleDropZone:function(e){return this.setDropZone(new cde(0,0,e),pde)},setRectangleDropZone:function(e,t){return this.setDropZone(new gde(0,0,e,t),xde)},setDropZone:function(e,t){return e===void 0?this.setRectangleDropZone(this.width,this.height):this.input||this.setInteractive(e,t,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(e,t,i){i.addToRenderList(t)},renderWebGL:function(e,t,i){i.addToRenderList(t)}});nM.exports=Tde});var hM=l((Y3e,oM)=>{var Ede=qv(),yde=Ua(),Ys=X(),aM=B(),Sde=Wa(),_i=new Sde({sys:{queueDepthSort:aM,events:{once:aM}}},0,0,1,1),Cde=function(e,t){t===void 0&&(t={});var i=t.hasOwnProperty("width"),r=t.hasOwnProperty("height"),s=Ys(t,"width",-1),n=Ys(t,"height",-1),a=Ys(t,"cellWidth",1),o=Ys(t,"cellHeight",a),h=Ys(t,"position",yde.TOP_LEFT),u=Ys(t,"x",0),f=Ys(t,"y",0),d=0,v=0,c=s*a,p=n*o;_i.setPosition(u,f),_i.setSize(a,o);for(var m=0;m<e.length;m++)if(Ede(e[m],_i,h),i&&s===-1)_i.x+=a;else if(r&&n===-1)_i.y+=o;else if(r&&!i){if(v+=o,_i.y+=o,v===p&&(v=0,d+=a,_i.y=f,_i.x+=a,d===c))break}else if(d+=a,_i.x+=a,d===c&&(d=0,v+=o,_i.x=u,_i.y+=o,v===p))break;return e};oM.exports=Cde});var lM=l((W3e,uM)=>{var Rde=Ci(),_de=function(e,t,i,r,s){return Rde(e,"alpha",t,i,r,s)};uM.exports=_de});var dM=l((H3e,fM)=>{var wde=Ci(),Pde=function(e,t,i,r,s){return wde(e,"x",t,i,r,s)};fM.exports=Pde});var pM=l((j3e,cM)=>{var vM=Ci(),Ade=function(e,t,i,r,s,n,a){return i==null&&(i=t),vM(e,"x",t,r,n,a),vM(e,"y",i,s,n,a)};cM.exports=Ade});var gM=l((K3e,mM)=>{var bde=Ci(),Mde=function(e,t,i,r,s){return bde(e,"y",t,i,r,s)};mM.exports=Mde});var TM=l((Z3e,xM)=>{var qde=function(e,t,i,r){i===void 0&&(i=0),r===void 0&&(r=6.28);for(var s=i,n=(r-i)/e.length,a=0;a<e.length;a++)e[a].x=t.x+t.radius*Math.cos(s),e[a].y=t.y+t.radius*Math.sin(s),s+=n;return e};xM.exports=qde});var yM=l((J3e,EM)=>{var Ode=function(e,t,i,r){i===void 0&&(i=0),r===void 0&&(r=6.28);for(var s=i,n=(r-i)/e.length,a=t.width/2,o=t.height/2,h=0;h<e.length;h++)e[h].x=t.x+a*Math.cos(s),e[h].y=t.y+o*Math.sin(s),s+=n;return e};EM.exports=Ode});var CM=l((Q3e,SM)=>{var Lde=Mh(),Fde=function(e,t){for(var i=Lde(t,e.length),r=0;r<e.length;r++){var s=e[r],n=i[r];s.x=n.x,s.y=n.y}return e};SM.exports=Fde});var Jv=l(($3e,_M)=>{var RM=ka(),Nde=j(),Gde=function(e,t,i,r){if(r===void 0&&(r=[]),!t&&!i)return r;t?i=Math.round(RM(e)/t):t=RM(e)/i;for(var s=e.x,n=e.y,a=0,o=0;o<i;o++)switch(r.push(new Nde(s,n)),a){case 0:s+=t,s>=e.right&&(a=1,n+=s-e.right,s=e.right);break;case 1:n+=t,n>=e.bottom&&(a=2,s-=n-e.bottom,n=e.bottom);break;case 2:s-=t,s<=e.left&&(a=3,n-=e.left-s,s=e.left);break;case 3:n-=t,n<=e.top&&(a=0,n=e.top);break}return r};_M.exports=Gde});var Gh=l((eWe,wM)=>{var Dde=function(e,t){t===void 0&&(t=1);for(var i=null,r=0;r<t;r++)i=e.shift(),e.push(i);return i};wM.exports=Dde});var Dh=l((tWe,PM)=>{var Ide=function(e,t){t===void 0&&(t=1);for(var i=null,r=0;r<t;r++)i=e.pop(),e.unshift(i);return i};PM.exports=Ide});var bM=l((iWe,AM)=>{var Bde=Jv(),Vde=Gh(),Ude=Dh(),kde=function(e,t,i){i===void 0&&(i=0);var r=Bde(t,!1,e.length);i>0?Vde(r,i):i<0&&Ude(r,Math.abs(i));for(var s=0;s<e.length;s++)e[s].x=r[s].x,e[s].y=r[s].y;return e};AM.exports=kde});var Qv=l((rWe,MM)=>{var zde=function(e,t,i){t===void 0&&(t=1),i===void 0&&(i=[]);var r=Math.round(e.x1),s=Math.round(e.y1),n=Math.round(e.x2),a=Math.round(e.y2),o=Math.abs(n-r),h=Math.abs(a-s),u=r<n?1:-1,f=s<a?1:-1,d=o-h;i.push({x:r,y:s});for(var v=1;!(r===n&&s===a);){var c=d<<1;c>-h&&(d-=h,r+=u),c<o&&(d+=o,s+=f),v%t==0&&i.push({x:r,y:s}),v++}return i};MM.exports=zde});var OM=l((sWe,qM)=>{var $v=Qv(),Xde=function(e,t,i){var r=$v({x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2},i),s=$v({x1:t.x2,y1:t.y2,x2:t.x3,y2:t.y3},i),n=$v({x1:t.x3,y1:t.y3,x2:t.x1,y2:t.y1},i);r.pop(),s.pop(),n.pop(),r=r.concat(s,n);for(var a=r.length/e.length,o=0,h=0;h<e.length;h++){var u=e[h],f=r[Math.floor(o)];u.x=f.x,u.y=f.y,o+=a}return e};qM.exports=Xde});var FM=l((nWe,LM)=>{var Yde=function(e,t,i){for(var r=0;r<e.length;r++){var s=e[r];s.anims&&s.anims.play(t,i)}return e};LM.exports=Yde});var it=l((aWe,NM)=>{var Wde=function(e,t,i,r,s,n){r===void 0&&(r=0),s===void 0&&(s=0),n===void 0&&(n=1);var a,o=0,h=e.length;if(n===1)for(a=s;a<h;a++)e[a][t]=i+o*r,o++;else for(a=s;a>=0;a--)e[a][t]=i+o*r,o++;return e};NM.exports=Wde});var DM=l((oWe,GM)=>{var Hde=Ah(),jde=function(e,t){for(var i=0;i<e.length;i++)Hde(t,e[i]);return e};GM.exports=jde});var Ih=l((hWe,IM)=>{var Kde=j(),Zde=function(e,t){t===void 0&&(t=new Kde);var i=Math.random()*Math.PI*2,r=Math.sqrt(Math.random());return t.x=e.x+r*Math.cos(i)*e.width/2,t.y=e.y+r*Math.sin(i)*e.height/2,t};IM.exports=Zde});var VM=l((uWe,BM)=>{var Jde=Ih(),Qde=function(e,t){for(var i=0;i<e.length;i++)Jde(t,e[i]);return e};BM.exports=Qde});var kM=l((lWe,UM)=>{var $de=qh(),eve=function(e,t){for(var i=0;i<e.length;i++)$de(t,e[i]);return e};UM.exports=eve});var XM=l((fWe,zM)=>{var tve=Oh(),ive=function(e,t){for(var i=0;i<e.length;i++)tve(t,e[i]);return e};zM.exports=ive});var Bh=l((dWe,YM)=>{var rve=j(),sve=function(e,t){t===void 0&&(t=new rve);var i=e.x2-e.x1,r=e.y2-e.y1,s=e.x3-e.x1,n=e.y3-e.y1,a=Math.random(),o=Math.random();return a+o>=1&&(a=1-a,o=1-o),t.x=e.x1+(i*a+s*o),t.y=e.y1+(r*a+n*o),t};YM.exports=sve});var HM=l((vWe,WM)=>{var nve=Bh(),ave=function(e,t){for(var i=0;i<e.length;i++)nve(t,e[i]);return e};WM.exports=ave});var KM=l((cWe,jM)=>{var ove=Ci(),hve=function(e,t,i,r,s){return ove(e,"rotation",t,i,r,s)};jM.exports=hve});var JM=l((pWe,ZM)=>{var uve=sh(),lve=Fr(),fve=function(e,t,i){for(var r=t.x,s=t.y,n=0;n<e.length;n++){var a=e[n];uve(a,r,s,i,Math.max(1,lve(a.x,a.y,r,s)))}return e};ZM.exports=fve});var $M=l((mWe,QM)=>{var dve=sh(),vve=function(e,t,i,r){var s=t.x,n=t.y;if(r===0)return e;for(var a=0;a<e.length;a++)dve(e[a],s,n,i,r);return e};QM.exports=vve});var tq=l((gWe,eq)=>{var cve=Ci(),pve=function(e,t,i,r,s){return cve(e,"scaleX",t,i,r,s)};eq.exports=pve});var sq=l((xWe,rq)=>{var iq=Ci(),mve=function(e,t,i,r,s,n,a){return i==null&&(i=t),iq(e,"scaleX",t,r,n,a),iq(e,"scaleY",i,s,n,a)};rq.exports=mve});var aq=l((TWe,nq)=>{var gve=Ci(),xve=function(e,t,i,r,s){return gve(e,"scaleY",t,i,r,s)};nq.exports=xve});var hq=l((EWe,oq)=>{var Tve=it(),Eve=function(e,t,i,r,s){return Tve(e,"alpha",t,i,r,s)};oq.exports=Eve});var lq=l((yWe,uq)=>{var yve=it(),Sve=function(e,t,i,r){return yve(e,"blendMode",t,0,i,r)};uq.exports=Sve});var dq=l((SWe,fq)=>{var Cve=it(),Rve=function(e,t,i,r,s){return Cve(e,"depth",t,i,r,s)};fq.exports=Rve});var cq=l((CWe,vq)=>{var _ve=function(e,t,i){for(var r=0;r<e.length;r++)e[r].setInteractive(t,i);return e};vq.exports=_ve});var gq=l((RWe,mq)=>{var pq=it(),wve=function(e,t,i,r,s,n,a){return i==null&&(i=t),pq(e,"originX",t,r,n,a),pq(e,"originY",i,s,n,a),e.forEach(function(o){o.updateDisplayOrigin()}),e};mq.exports=wve});var Tq=l((_We,xq)=>{var Pve=it(),Ave=function(e,t,i,r,s){return Pve(e,"rotation",t,i,r,s)};xq.exports=Ave});var Sq=l((wWe,yq)=>{var Eq=it(),bve=function(e,t,i,r,s,n,a){return i==null&&(i=t),Eq(e,"scaleX",t,r,n,a),Eq(e,"scaleY",i,s,n,a)};yq.exports=bve});var Rq=l((PWe,Cq)=>{var Mve=it(),qve=function(e,t,i,r,s){return Mve(e,"scaleX",t,i,r,s)};Cq.exports=qve});var wq=l((AWe,_q)=>{var Ove=it(),Lve=function(e,t,i,r,s){return Ove(e,"scaleY",t,i,r,s)};_q.exports=Lve});var bq=l((bWe,Aq)=>{var Pq=it(),Fve=function(e,t,i,r,s,n,a){return i==null&&(i=t),Pq(e,"scrollFactorX",t,r,n,a),Pq(e,"scrollFactorY",i,s,n,a)};Aq.exports=Fve});var qq=l((MWe,Mq)=>{var Nve=it(),Gve=function(e,t,i,r,s){return Nve(e,"scrollFactorX",t,i,r,s)};Mq.exports=Gve});var Lq=l((qWe,Oq)=>{var Dve=it(),Ive=function(e,t,i,r,s){return Dve(e,"scrollFactorY",t,i,r,s)};Oq.exports=Ive});var Nq=l((OWe,Fq)=>{var Bve=function(e,t,i,r,s){for(var n=0;n<e.length;n++)e[n].setTint(t,i,r,s);return e};Fq.exports=Bve});var Dq=l((LWe,Gq)=>{var Vve=it(),Uve=function(e,t,i,r){return Vve(e,"visible",t,0,i,r)};Gq.exports=Uve});var Bq=l((FWe,Iq)=>{var kve=it(),zve=function(e,t,i,r,s){return kve(e,"x",t,i,r,s)};Iq.exports=zve});var kq=l((NWe,Uq)=>{var Vq=it(),Xve=function(e,t,i,r,s,n,a){return i==null&&(i=t),Vq(e,"x",t,r,n,a),Vq(e,"y",i,s,n,a)};Uq.exports=Xve});var Xq=l((GWe,zq)=>{var Yve=it(),Wve=function(e,t,i,r,s){return Yve(e,"y",t,i,r,s)};zq.exports=Wve});var Wq=l((DWe,Yq)=>{var Hve=le(),jve=function(e,t,i,r,s){r===void 0&&(r=0),s===void 0&&(s=new Hve);var n,a;if(e.length>1){var o,h,u,f;if(r===0){var d=e.length-1;for(n=e[d].x,a=e[d].y,o=d-1;o>=0;o--)f=e[o],h=f.x,u=f.y,f.x=n,f.y=a,n=h,a=u;e[d].x=t,e[d].y=i}else{for(n=e[0].x,a=e[0].y,o=1;o<e.length;o++)f=e[o],h=f.x,u=f.y,f.x=n,f.y=a,n=h,a=u;e[0].x=t,e[0].y=i}}else n=e[0].x,a=e[0].y,e[0].x=t,e[0].y=i;return s.x=n,s.y=a,s};Yq.exports=jve});var Vh=l((IWe,Hq)=>{var Kve=function(e){for(var t=e.length-1;t>0;t--){var i=Math.floor(Math.random()*(t+1)),r=e[t];e[t]=e[i],e[i]=r}return e};Hq.exports=Kve});var Kq=l((BWe,jq)=>{var Zve=Vh(),Jve=function(e){return Zve(e)};jq.exports=Jve});var Qq=l((VWe,Jq)=>{var Zq=$o(),Qve=function(e,t,i,r,s){s===void 0&&(s=!1);var n=Math.abs(r-i)/e.length,a;if(s)for(a=0;a<e.length;a++)e[a][t]+=Zq(a*n,i,r);else for(a=0;a<e.length;a++)e[a][t]=Zq(a*n,i,r);return e};Jq.exports=Qve});var tO=l((UWe,eO)=>{var $q=Qo(),$ve=function(e,t,i,r,s){s===void 0&&(s=!1);var n=Math.abs(r-i)/e.length,a;if(s)for(a=0;a<e.length;a++)e[a][t]+=$q(a*n,i,r);else for(a=0;a<e.length;a++)e[a][t]=$q(a*n,i,r);return e};eO.exports=$ve});var rO=l((kWe,iO)=>{var ece=function(e,t,i,r,s){s===void 0&&(s=!1);var n=Math.abs(r-i)/e.length,a;if(s)for(a=0;a<e.length;a++)e[a][t]+=a*n+i;else for(a=0;a<e.length;a++)e[a][t]=a*n+i;return e};iO.exports=ece});var nO=l((zWe,sO)=>{var tce=function(e){for(var t=0;t<e.length;t++)e[t].visible=!e[t].visible;return e};sO.exports=tce});var hO=l((XWe,oO)=>{var aO=Lr(),ice=function(e,t,i){i===void 0&&(i=0);for(var r=0;r<e.length;r++){var s=e[r];s.x=aO(s.x,t.left-i,t.right+i),s.y=aO(s.y,t.top-i,t.bottom+i)}return e};oO.exports=ice});var ec=l((YWe,uO)=>{uO.exports={AlignTo:XP(),Angle:HP(),Call:KP(),GetFirst:JP(),GetLast:$P(),GridAlign:hM(),IncAlpha:lM(),IncX:dM(),IncXY:pM(),IncY:gM(),PlaceOnCircle:TM(),PlaceOnEllipse:yM(),PlaceOnLine:CM(),PlaceOnRectangle:bM(),PlaceOnTriangle:OM(),PlayAnimation:FM(),PropertyValueInc:Ci(),PropertyValueSet:it(),RandomCircle:DM(),RandomEllipse:VM(),RandomLine:kM(),RandomRectangle:XM(),RandomTriangle:HM(),Rotate:KM(),RotateAround:JM(),RotateAroundDistance:$M(),ScaleX:tq(),ScaleXY:sq(),ScaleY:aq(),SetAlpha:hq(),SetBlendMode:lq(),SetDepth:dq(),SetHitArea:cq(),SetOrigin:gq(),SetRotation:Tq(),SetScale:Sq(),SetScaleX:Rq(),SetScaleY:wq(),SetScrollFactor:bq(),SetScrollFactorX:qq(),SetScrollFactorY:Lq(),SetTint:Nq(),SetVisible:Dq(),SetX:Bq(),SetXY:kq(),SetY:Xq(),ShiftPosition:Wq(),Shuffle:Kq(),SmootherStep:Qq(),SmoothStep:tO(),Spread:rO(),ToggleVisible:nO(),WrapInRectangle:hO()}});var fO=l((WWe,lO)=>{lO.exports="add"});var vO=l((HWe,dO)=>{dO.exports="remove"});var tc=l((jWe,cO)=>{cO.exports={ADD:fO(),REMOVE:vO()}});var ic=l((KWe,mO)=>{var rce=_(),sce=yn(),nce=se(),pO=tc(),ace=new rce({initialize:function(){this.entries=new sce,this.events=new nce},add:function(e,t){return this.entries.set(e,t),this.events.emit(pO.ADD,this,e,t),this},has:function(e){return this.entries.has(e)},exists:function(e){return this.entries.has(e)},get:function(e){return this.entries.get(e)},remove:function(e){var t=this.get(e);return t&&(this.entries.delete(e),this.events.emit(pO.REMOVE,this,e,t.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});mO.exports=ace});var rc=l((ZWe,gO)=>{var Xt=ic(),oce=_(),hce=Ne(),uce=new oce({initialize:function(t){this.game=t,this.binary=new Xt,this.bitmapFont=new Xt,this.json=new Xt,this.physics=new Xt,this.shader=new Xt,this.audio=new Xt,this.video=new Xt,this.text=new Xt,this.html=new Xt,this.obj=new Xt,this.tilemap=new Xt,this.xml=new Xt,this.custom={},this.game.events.once(hce.DESTROY,this.destroy,this)},addCustom:function(e){return this.custom.hasOwnProperty(e)||(this.custom[e]=new Xt),this.custom[e]},destroy:function(){for(var e=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],t=0;t<e.length;t++)this[e[t]].destroy(),this[e[t]]=null;for(var i in this.custom)this.custom[i].destroy();this.custom=null,this.game=null}});gO.exports=uce});var TO=l((JWe,xO)=>{xO.exports={BaseCache:ic(),CacheManager:rc(),Events:tc()}});var yO=l((QWe,EO)=>{var lce=_(),Yt=ie(),fce=new lce({initialize:function(t){this.camera=Yt(t,"camera",null),this.left=Yt(t,"left",null),this.right=Yt(t,"right",null),this.up=Yt(t,"up",null),this.down=Yt(t,"down",null),this.zoomIn=Yt(t,"zoomIn",null),this.zoomOut=Yt(t,"zoomOut",null),this.zoomSpeed=Yt(t,"zoomSpeed",.01),this.minZoom=Yt(t,"minZoom",.001),this.maxZoom=Yt(t,"maxZoom",1e3),this.speedX=0,this.speedY=0;var i=Yt(t,"speed",null);typeof i=="number"?(this.speedX=i,this.speedY=i):(this.speedX=Yt(t,"speed.x",0),this.speedY=Yt(t,"speed.y",0)),this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(e){return this.camera=e,this},update:function(e){if(!!this.active){e===void 0&&(e=1);var t=this.camera;this.up&&this.up.isDown?t.scrollY-=this.speedY*e|0:this.down&&this.down.isDown&&(t.scrollY+=this.speedY*e|0),this.left&&this.left.isDown?t.scrollX-=this.speedX*e|0:this.right&&this.right.isDown&&(t.scrollX+=this.speedX*e|0),this.zoomIn&&this.zoomIn.isDown?(t.zoom-=this.zoomSpeed,t.zoom<this.minZoom&&(t.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(t.zoom+=this.zoomSpeed,t.zoom>this.maxZoom&&(t.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});EO.exports=fce});var CO=l(($We,SO)=>{var dce=_(),ze=ie(),vce=new dce({initialize:function(t){this.camera=ze(t,"camera",null),this.left=ze(t,"left",null),this.right=ze(t,"right",null),this.up=ze(t,"up",null),this.down=ze(t,"down",null),this.zoomIn=ze(t,"zoomIn",null),this.zoomOut=ze(t,"zoomOut",null),this.zoomSpeed=ze(t,"zoomSpeed",.01),this.minZoom=ze(t,"minZoom",.001),this.maxZoom=ze(t,"maxZoom",1e3),this.accelX=0,this.accelY=0;var i=ze(t,"acceleration",null);typeof i=="number"?(this.accelX=i,this.accelY=i):(this.accelX=ze(t,"acceleration.x",0),this.accelY=ze(t,"acceleration.y",0)),this.dragX=0,this.dragY=0;var r=ze(t,"drag",null);typeof r=="number"?(this.dragX=r,this.dragY=r):(this.dragX=ze(t,"drag.x",0),this.dragY=ze(t,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var s=ze(t,"maxSpeed",null);typeof s=="number"?(this.maxSpeedX=s,this.maxSpeedY=s):(this.maxSpeedX=ze(t,"maxSpeed.x",0),this.maxSpeedY=ze(t,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(e){return this.camera=e,this},update:function(e){if(!!this.active){e===void 0&&(e=1);var t=this.camera;this._speedX>0?(this._speedX-=this.dragX*e,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*e,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*e,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*e,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,this._speedX!==0&&(t.scrollX-=this._speedX*e|0),this._speedY!==0&&(t.scrollY-=this._speedY*e|0),this._zoom!==0&&(t.zoom+=this._zoom,t.zoom<this.minZoom?t.zoom=this.minZoom:t.zoom>this.maxZoom&&(t.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});SO.exports=vce});var _O=l((e5e,RO)=>{RO.exports={FixedKeyControl:yO(),SmoothedKeyControl:CO()}});var Ha=l((t5e,bO)=>{var cce=_(),wO=de(),pce=or(),PO=se(),mce=ai(),sc=ye(),gce=dt(),AO=fh(),nc=le(),xce=new cce({Extends:PO,Mixins:[wO.Alpha,wO.Visible],initialize:function(t,i,r,s){t===void 0&&(t=0),i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=0),PO.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new sc,this.dirty=!0,this._x=t,this._y=i,this._width=r,this._height=s,this._bounds=new sc,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new gce,this.transparent=!0,this.backgroundColor=AO("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new nc(r/2,s/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[]},addToRenderList:function(e){this.renderList.push(e)},setOrigin:function(e,t){return e===void 0&&(e=.5),t===void 0&&(t=e),this.originX=e,this.originY=t,this},getScroll:function(e,t,i){i===void 0&&(i=new nc);var r=this.width*.5,s=this.height*.5;return i.x=e-r,i.y=t-s,this.useBounds&&(i.x=this.clampX(i.x),i.y=this.clampY(i.y)),i},centerOnX:function(e){var t=this.width*.5;return this.midPoint.x=e,this.scrollX=e-t,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(e){var t=this.height*.5;return this.midPoint.y=e,this.scrollY=e-t,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(e,t){return this.centerOnX(e),this.centerOnY(t),this},centerToBounds:function(){if(this.useBounds){var e=this._bounds,t=this.width*.5,i=this.height*.5;this.midPoint.set(e.centerX,e.centerY),this.scrollX=e.centerX-t,this.scrollY=e.centerY-i}return this},centerToSize:function(){return this.scrollX=this.width*.5,this.scrollY=this.height*.5,this},cull:function(e){if(this.disableCull)return e;var t=this.matrix.matrix,i=t[0],r=t[1],s=t[2],n=t[3],a=i*n-r*s;if(!a)return e;var o=t[4],h=t[5],u=this.scrollX,f=this.scrollY,d=this.width,v=this.height,c=this.y,p=c+v,m=this.x,g=m+d,x=this.culledObjects,T=e.length;a=1/a,x.length=0;for(var E=0;E<T;++E){var R=e[E];if(!R.hasOwnProperty("width")||R.parentContainer){x.push(R);continue}var y=R.width,C=R.height,S=R.x-u*R.scrollFactorX-y*R.originX,w=R.y-f*R.scrollFactorY-C*R.originY,P=S*i+w*s+o,A=S*r+w*n+h,M=(S+y)*i+(w+C)*s+o,N=(S+y)*r+(w+C)*n+h;M>m&&P<g&&N>c&&A<p&&x.push(R)}return x},getWorldPoint:function(e,t,i){i===void 0&&(i=new nc);var r=this.matrix.matrix,s=r[0],n=r[1],a=r[2],o=r[3],h=r[4],u=r[5],f=s*o-n*a;if(!f)return i.x=e,i.y=t,i;f=1/f;var d=o*f,v=-n*f,c=-a*f,p=s*f,m=(a*u-o*h)*f,g=(n*h-s*u)*f,x=Math.cos(this.rotation),T=Math.sin(this.rotation),E=this.zoomX,R=this.zoomY,y=this.scrollX,C=this.scrollY,S=e+(y*x-C*T)*E,w=t+(y*T+C*x)*R;return i.x=S*d+w*c+m,i.y=S*v+w*p+g,i},ignore:function(e){var t=this.id;Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++){var r=e[i];Array.isArray(r)?this.ignore(r):r.isParent?this.ignore(r.getChildren()):r.cameraFilter|=t}return this},preRender:function(){this.renderList.length=0;var e=this.width,t=this.height,i=e*.5,r=t*.5,s=this.zoomX,n=this.zoomY,a=this.matrix,o=e*this.originX,h=t*this.originY,u=this.scrollX,f=this.scrollY;this.useBounds&&(u=this.clampX(u),f=this.clampY(f)),this.roundPixels&&(o=Math.round(o),h=Math.round(h)),this.scrollX=u,this.scrollY=f;var d=u+i,v=f+r;this.midPoint.set(d,v);var c=e/s,p=t/n;this.worldView.setTo(d-c/2,v-p/2,c,p),a.applyITRS(this.x+o,this.y+h,this.rotation,s,n),a.translate(-o,-h)},clampX:function(e){var t=this._bounds,i=this.displayWidth,r=t.x+(i-this.width)/2,s=Math.max(r,r+t.width-i);return e<r?e=r:e>s&&(e=s),e},clampY:function(e){var t=this._bounds,i=this.displayHeight,r=t.y+(i-this.height)/2,s=Math.max(r,r+t.height-i);return e<r?e=r:e>s&&(e=s),e},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(e){return e===void 0&&(e=0),this.rotation=pce(e),this},setBackgroundColor:function(e){return e===void 0&&(e="rgba(0,0,0,0)"),this.backgroundColor=AO(e),this.transparent=this.backgroundColor.alpha===0,this},setBounds:function(e,t,i,r,s){return s===void 0&&(s=!1),this._bounds.setTo(e,t,i,r),this.dirty=!0,this.useBounds=!0,s?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(e){e===void 0&&(e=new sc);var t=this._bounds;return e.setTo(t.x,t.y,t.width,t.height),e},setName:function(e){return e===void 0&&(e=""),this.name=e,this},setPosition:function(e,t){return t===void 0&&(t=e),this.x=e,this.y=t,this},setRotation:function(e){return e===void 0&&(e=0),this.rotation=e,this},setRoundPixels:function(e){return this.roundPixels=e,this},setScene:function(e){this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=e;var t=e.sys;return this.sceneManager=t.game.scene,this.scaleManager=t.scale,this.cameraManager=t.cameras,this.updateSystem(),this},setScroll:function(e,t){return t===void 0&&(t=e),this.scrollX=e,this.scrollY=t,this},setSize:function(e,t){return t===void 0&&(t=e),this.width=e,this.height=t,this},setViewport:function(e,t,i,r){return this.x=e,this.y=t,this.width=i,this.height=r,this},setZoom:function(e,t){return e===void 0&&(e=1),t===void 0&&(t=e),e===0&&(e=.001),t===0&&(t=.001),this.zoomX=e,this.zoomY=t,this},setMask:function(e,t){return t===void 0&&(t=!0),this.mask=e,this._maskCamera=t?this.cameraManager.default:this,this},clearMask:function(e){return e===void 0&&(e=!1),e&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var e={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(e.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),e},update:function(){},updateSystem:function(){if(!!this.scaleManager){var e=this._x!==0||this._y!==0||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,t=this.sceneManager;e&&!this._customViewport?t.customViewports++:!e&&this._customViewport&&t.customViewports--,this.dirty=!0,this._customViewport=e}},destroy:function(){this.emit(mce.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(e){this._x=e,this.updateSystem()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.updateSystem()}},width:{get:function(){return this._width},set:function(e){this._width=e,this.updateSystem()}},height:{get:function(){return this._height},set:function(e){this._height=e,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(e){this._scrollX=e,this.dirty=!0}},scrollY:{get:function(){return this._scrollY},set:function(e){this._scrollY=e,this.dirty=!0}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(e){this._zoomX=e,this._zoomY=e,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(e){this._zoomX=e,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(e){this._zoomY=e,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(e){this._rotation=e,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});bO.exports=xce});var Uh=l((i5e,MO)=>{var Tce=function(e,t,i){return e.x=t-e.width/2,e.y=i-e.height/2,e};MO.exports=Tce});var OO=l((r5e,qO)=>{var Ece=Pe(),yce=_(),kh=ai(),Sce=new yce({initialize:function(t){this.camera=t,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(e,t,i,r,s,n,a,o){if(e===void 0&&(e=!0),t===void 0&&(t=1e3),i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=0),n===void 0&&(n=!1),a===void 0&&(a=null),o===void 0&&(o=this.camera.scene),!n&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=t,this.direction=e,this.progress=0,this.red=i,this.green=r,this.blue=s,this.alpha=e?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=a,this._onUpdateScope=o;var h=e?kh.FADE_OUT_START:kh.FADE_IN_START;return this.camera.emit(h,this.camera,this,t,i,r,s),this.camera},update:function(e,t){!this.isRunning||(this._elapsed+=t,this.progress=Ece(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(e){if(!this.isRunning&&!this.isComplete)return!1;var t=this.camera;return e.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",e.fillRect(t.x,t.y,t.width,t.height),!0},postRenderWebGL:function(e,t){if(!this.isRunning&&!this.isComplete)return!1;var i=this.camera,r=this.red/255,s=this.green/255,n=this.blue/255;return e.drawFillRect(i.x,i.y,i.width,i.height,t(n,s,r,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var e=this.direction?kh.FADE_OUT_COMPLETE:kh.FADE_IN_COMPLETE;this.camera.emit(e,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});qO.exports=Sce});var NO=l((s5e,FO)=>{var Cce=Pe(),Rce=_(),LO=ai(),_ce=new Rce({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(e,t,i,r,s,n,a){return e===void 0&&(e=250),t===void 0&&(t=255),i===void 0&&(i=255),r===void 0&&(r=255),s===void 0&&(s=!1),n===void 0&&(n=null),a===void 0&&(a=this.camera.scene),!s&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=e,this.progress=0,this.red=t,this.green=i,this.blue=r,this.alpha=1,this._elapsed=0,this._onUpdate=n,this._onUpdateScope=a,this.camera.emit(LO.FLASH_START,this.camera,this,e,t,i,r),this.camera)},update:function(e,t){!this.isRunning||(this._elapsed+=t,this.progress=Cce(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=1-this.progress:this.effectComplete())},postRenderCanvas:function(e){if(!this.isRunning)return!1;var t=this.camera;return e.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",e.fillRect(t.x,t.y,t.width,t.height),!0},postRenderWebGL:function(e,t){if(!this.isRunning)return!1;var i=this.camera,r=this.red/255,s=this.green/255,n=this.blue/255;return e.drawFillRect(i.x,i.y,i.width,i.height,t(n,s,r,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(LO.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});FO.exports=_ce});var Qa=l((n5e,DO)=>{var zh=Df(),Xh=If(),Yh=Bf(),ja=Vf(),Wh=Uf(),Hh=kf(),GO=zf(),Ka=Xf(),Za=Yf(),Ja=Wf(),jh=Hf(),wce=jf();DO.exports={Power0:GO,Power1:Ka.Out,Power2:ja.Out,Power3:Za.Out,Power4:Ja.Out,Linear:GO,Quad:Ka.Out,Cubic:ja.Out,Quart:Za.Out,Quint:Ja.Out,Sine:jh.Out,Expo:Hh.Out,Circ:Yh.Out,Elastic:Wh.Out,Back:zh.Out,Bounce:Xh.Out,Stepped:wce,"Quad.easeIn":Ka.In,"Cubic.easeIn":ja.In,"Quart.easeIn":Za.In,"Quint.easeIn":Ja.In,"Sine.easeIn":jh.In,"Expo.easeIn":Hh.In,"Circ.easeIn":Yh.In,"Elastic.easeIn":Wh.In,"Back.easeIn":zh.In,"Bounce.easeIn":Xh.In,"Quad.easeOut":Ka.Out,"Cubic.easeOut":ja.Out,"Quart.easeOut":Za.Out,"Quint.easeOut":Ja.Out,"Sine.easeOut":jh.Out,"Expo.easeOut":Hh.Out,"Circ.easeOut":Yh.Out,"Elastic.easeOut":Wh.Out,"Back.easeOut":zh.Out,"Bounce.easeOut":Xh.Out,"Quad.easeInOut":Ka.InOut,"Cubic.easeInOut":ja.InOut,"Quart.easeInOut":Za.InOut,"Quint.easeInOut":Ja.InOut,"Sine.easeInOut":jh.InOut,"Expo.easeInOut":Hh.InOut,"Circ.easeInOut":Yh.InOut,"Elastic.easeInOut":Wh.InOut,"Back.easeInOut":zh.InOut,"Bounce.easeInOut":Xh.InOut}});var VO=l((a5e,BO)=>{var Pce=Pe(),Ace=_(),ac=Qa(),IO=ai(),oc=le(),bce=new Ace({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.source=new oc,this.current=new oc,this.destination=new oc,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(e,t,i,r,s,n,a){i===void 0&&(i=1e3),r===void 0&&(r=ac.Linear),s===void 0&&(s=!1),n===void 0&&(n=null),a===void 0&&(a=this.camera.scene);var o=this.camera;return!s&&this.isRunning||(this.isRunning=!0,this.duration=i,this.progress=0,this.source.set(o.scrollX,o.scrollY),this.destination.set(e,t),o.getScroll(e,t,this.current),typeof r=="string"&&ac.hasOwnProperty(r)?this.ease=ac[r]:typeof r=="function"&&(this.ease=r),this._elapsed=0,this._onUpdate=n,this._onUpdateScope=a,this.camera.emit(IO.PAN_START,this.camera,this,i,e,t)),o},update:function(e,t){if(!!this.isRunning){this._elapsed+=t;var i=Pce(this._elapsed/this.duration,0,1);this.progress=i;var r=this.camera;if(this._elapsed<this.duration){var s=this.ease(i);r.getScroll(this.destination.x,this.destination.y,this.current);var n=this.source.x+(this.current.x-this.source.x)*s,a=this.source.y+(this.current.y-this.source.y)*s;r.setScroll(n,a),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,r,i,n,a)}else r.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,r,i,r.scrollX,r.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(IO.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});BO.exports=bce});var zO=l((o5e,kO)=>{var Mce=Pe(),qce=_(),UO=ai(),Oce=le(),Lce=new qce({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.intensity=new Oce,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(e,t,i,r,s){return e===void 0&&(e=100),t===void 0&&(t=.05),i===void 0&&(i=!1),r===void 0&&(r=null),s===void 0&&(s=this.camera.scene),!i&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=e,this.progress=0,typeof t=="number"?this.intensity.set(t):this.intensity.set(t.x,t.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=r,this._onUpdateScope=s,this.camera.emit(UO.SHAKE_START,this.camera,this,e,t),this.camera)},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(e,t){if(!!this.isRunning)if(this._elapsed+=t,this.progress=Mce(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var i=this.intensity,r=this.camera.width,s=this.camera.height,n=this.camera.zoom;this._offsetX=(Math.random()*i.x*r*2-i.x*r)*n,this._offsetY=(Math.random()*i.y*s*2-i.y*s)*n,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(UO.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});kO.exports=Lce});var WO=l((h5e,YO)=>{var Fce=Pe(),Nce=_(),XO=ai(),hc=Qa(),Gce=new Nce({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(e,t,i,r,s,n,a){i===void 0&&(i=1e3),r===void 0&&(r=hc.Linear),s===void 0&&(s=!1),n===void 0&&(n=null),a===void 0&&(a=this.camera.scene),t===void 0&&(t=!1),this.shortestPath=t;var o=e;e<0?(o=-1*e,this.clockwise=!1):this.clockwise=!0;var h=360*Math.PI/180;o=o-Math.floor(o/h)*h;var u=this.camera;if(!s&&this.isRunning)return u;if(this.isRunning=!0,this.duration=i,this.progress=0,this.source=u.rotation,this.destination=o,typeof r=="string"&&hc.hasOwnProperty(r)?this.ease=hc[r]:typeof r=="function"&&(this.ease=r),this._elapsed=0,this._onUpdate=n,this._onUpdateScope=a,this.shortestPath){var f=0,d=0;this.destination>this.source?f=Math.abs(this.destination-this.source):f=Math.abs(this.destination+h)-this.source,this.source>this.destination?d=Math.abs(this.source-this.destination):d=Math.abs(this.source+h)-this.destination,f<d?this.clockwise=!0:f>d&&(this.clockwise=!1)}return this.camera.emit(XO.ROTATE_START,this.camera,this,i,o),u},update:function(e,t){if(!!this.isRunning){this._elapsed+=t;var i=Fce(this._elapsed/this.duration,0,1);this.progress=i;var r=this.camera;if(this._elapsed<this.duration){var s=this.ease(i);this.current=r.rotation;var n=0,a=360*Math.PI/180,o=this.destination,h=this.current;this.clockwise===!1&&(o=this.current,h=this.destination),o>=h?n=Math.abs(o-h):n=Math.abs(o+a)-h;var u=0;this.clockwise?u=r.rotation+n*s:u=r.rotation-n*s,r.rotation=u,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,r,i,u)}else r.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,r,i,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(XO.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});YO.exports=Gce});var KO=l((u5e,jO)=>{var Dce=Pe(),Ice=_(),uc=Qa(),HO=ai(),Bce=new Ice({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(e,t,i,r,s,n){t===void 0&&(t=1e3),i===void 0&&(i=uc.Linear),r===void 0&&(r=!1),s===void 0&&(s=null),n===void 0&&(n=this.camera.scene);var a=this.camera;return!r&&this.isRunning||(this.isRunning=!0,this.duration=t,this.progress=0,this.source=a.zoom,this.destination=e,typeof i=="string"&&uc.hasOwnProperty(i)?this.ease=uc[i]:typeof i=="function"&&(this.ease=i),this._elapsed=0,this._onUpdate=s,this._onUpdateScope=n,this.camera.emit(HO.ZOOM_START,this.camera,this,t,e)),a},update:function(e,t){!this.isRunning||(this._elapsed+=t,this.progress=Dce(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(HO.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});jO.exports=Bce});var lc=l((l5e,ZO)=>{ZO.exports={Fade:OO(),Flash:NO(),Pan:VO(),Shake:zO(),RotateTo:WO(),Zoom:KO()}});var vc=l((f5e,eL)=>{var fc=Ha(),JO=Uh(),QO=Pe(),Vce=_(),dc=de(),On=lc(),Uce=ai(),Ln=ba(),kce=ye(),$O=le(),zce=new Vce({Extends:fc,Mixins:[dc.Flip,dc.Tint,dc.Pipeline],initialize:function(t,i,r,s){fc.call(this,t,i,r,s),this.postPipelines=[],this.pipelineData={},this.inputEnabled=!0,this.fadeEffect=new On.Fade(this),this.flashEffect=new On.Flash(this),this.shakeEffect=new On.Shake(this),this.panEffect=new On.Pan(this),this.rotateToEffect=new On.RotateTo(this),this.zoomEffect=new On.Zoom(this),this.lerp=new $O(1,1),this.followOffset=new $O,this.deadzone=null,this._follow=null},setDeadzone:function(e,t){if(e===void 0)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=e,this.deadzone.height=t):this.deadzone=new kce(0,0,e,t),this._follow){var i=this.width/2,r=this.height/2,s=this._follow.x-this.followOffset.x,n=this._follow.y-this.followOffset.y;this.midPoint.set(s,n),this.scrollX=s-i,this.scrollY=n-r}JO(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(e,t,i,r,s,n){return this.fadeEffect.start(!1,e,t,i,r,!0,s,n)},fadeOut:function(e,t,i,r,s,n){return this.fadeEffect.start(!0,e,t,i,r,!0,s,n)},fadeFrom:function(e,t,i,r,s,n,a){return this.fadeEffect.start(!1,e,t,i,r,s,n,a)},fade:function(e,t,i,r,s,n,a){return this.fadeEffect.start(!0,e,t,i,r,s,n,a)},flash:function(e,t,i,r,s,n,a){return this.flashEffect.start(e,t,i,r,s,n,a)},shake:function(e,t,i,r,s){return this.shakeEffect.start(e,t,i,r,s)},pan:function(e,t,i,r,s,n,a){return this.panEffect.start(e,t,i,r,s,n,a)},rotateTo:function(e,t,i,r,s,n,a){return this.rotateToEffect.start(e,t,i,r,s,n,a)},zoomTo:function(e,t,i,r,s,n){return this.zoomEffect.start(e,t,i,r,s,n)},preRender:function(){this.renderList.length=0;var e=this.width,t=this.height,i=e*.5,r=t*.5,s=this.zoom,n=this.matrix,a=e*this.originX,o=t*this.originY,h=this._follow,u=this.deadzone,f=this.scrollX,d=this.scrollY;u&&JO(u,this.midPoint.x,this.midPoint.y);var v=!1;if(h&&!this.panEffect.isRunning){var c=h.x-this.followOffset.x,p=h.y-this.followOffset.y;u?(c<u.x?f=Ln(f,f-(u.x-c),this.lerp.x):c>u.right&&(f=Ln(f,f+(c-u.right),this.lerp.x)),p<u.y?d=Ln(d,d-(u.y-p),this.lerp.y):p>u.bottom&&(d=Ln(d,d+(p-u.bottom),this.lerp.y))):(f=Ln(f,c-a,this.lerp.x),d=Ln(d,p-o,this.lerp.y)),v=!0}this.useBounds&&(f=this.clampX(f),d=this.clampY(d)),this.roundPixels&&(a=Math.round(a),o=Math.round(o),f=Math.round(f),d=Math.round(d)),this.scrollX=f,this.scrollY=d;var m=f+i,g=d+r;this.midPoint.set(m,g);var x=e/s,T=t/s,E=m-x/2,R=g-T/2;this.roundPixels&&(E=Math.round(E),R=Math.round(R)),this.worldView.setTo(E,R,x,T),n.applyITRS(this.x+a,this.y+o,this.rotation,s,s),n.translate(-a,-o),this.shakeEffect.preRender(),v&&this.emit(Uce.FOLLOW_UPDATE,this,h)},setLerp:function(e,t){return e===void 0&&(e=1),t===void 0&&(t=e),this.lerp.set(e,t),this},setFollowOffset:function(e,t){return e===void 0&&(e=0),t===void 0&&(t=0),this.followOffset.set(e,t),this},startFollow:function(e,t,i,r,s,n){t===void 0&&(t=!1),i===void 0&&(i=1),r===void 0&&(r=i),s===void 0&&(s=0),n===void 0&&(n=s),this._follow=e,this.roundPixels=t,i=QO(i,0,1),r=QO(r,0,1),this.lerp.set(i,r),this.followOffset.set(s,n);var a=this.width/2,o=this.height/2,h=e.x-s,u=e.y-n;return this.midPoint.set(h,u),this.scrollX=h-a,this.scrollY=u-o,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(e,t){this.visible&&(this.rotateToEffect.update(e,t),this.panEffect.update(e,t),this.zoomEffect.update(e,t),this.shakeEffect.update(e,t),this.flashEffect.update(e,t),this.fadeEffect.update(e,t))},destroy:function(){this.resetFX(),fc.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});eL.exports=zce});var rt=l((d5e,tL)=>{var Yr={},zi={},hi={};hi.register=function(e,t,i,r){r===void 0&&(r=!1),Yr[e]={plugin:t,mapping:i,custom:r}};hi.registerCustom=function(e,t,i,r){zi[e]={plugin:t,mapping:i,data:r}};hi.hasCore=function(e){return Yr.hasOwnProperty(e)};hi.hasCustom=function(e){return zi.hasOwnProperty(e)};hi.getCore=function(e){return Yr[e]};hi.getCustom=function(e){return zi[e]};hi.getCustomClass=function(e){return zi.hasOwnProperty(e)?zi[e].plugin:null};hi.remove=function(e){Yr.hasOwnProperty(e)&&delete Yr[e]};hi.removeCustom=function(e){zi.hasOwnProperty(e)&&delete zi[e]};hi.destroyCorePlugins=function(){for(var e in Yr)Yr.hasOwnProperty(e)&&delete Yr[e]};hi.destroyCustomPlugins=function(){for(var e in zi)zi.hasOwnProperty(e)&&delete zi[e]};tL.exports=hi});var nL=l((v5e,sL)=>{var iL=vc(),Xce=_(),st=X(),Yce=rt(),Wce=zr(),Hce=Tn(),Wr=qe(),rL=new Xce({initialize:function(t){this.scene=t,this.systems=t.sys,this.roundPixels=t.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,t.sys.events.once(Wr.BOOT,this.boot,this),t.sys.events.on(Wr.START,this.start,this)},boot:function(){var e=this.systems;e.settings.cameras?this.fromJSON(e.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new iL(0,0,e.scale.width,e.scale.height).setScene(this.scene),e.game.scale.on(Hce.RESIZE,this.onResize,this),this.systems.events.once(Wr.DESTROY,this.destroy,this)},start:function(){if(!this.main){var e=this.systems;e.settings.cameras?this.fromJSON(e.settings.cameras):this.add(),this.main=this.cameras[0]}var t=this.systems.events;t.on(Wr.UPDATE,this.update,this),t.once(Wr.SHUTDOWN,this.shutdown,this)},add:function(e,t,i,r,s,n){e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=this.scene.sys.scale.width),r===void 0&&(r=this.scene.sys.scale.height),s===void 0&&(s=!1),n===void 0&&(n="");var a=new iL(e,t,i,r);return a.setName(n),a.setScene(this.scene),a.setRoundPixels(this.roundPixels),a.id=this.getNextID(),this.cameras.push(a),s&&(this.main=a),a},addExisting:function(e,t){t===void 0&&(t=!1);var i=this.cameras.indexOf(e);return i===-1?(e.id=this.getNextID(),e.setRoundPixels(this.roundPixels),this.cameras.push(e),t&&(this.main=e),e):null},getNextID:function(){for(var e=this.cameras,t=1,i=0;i<32;i++){for(var r=!1,s=0;s<e.length;s++){var n=e[s];if(n&&n.id===t){r=!0;continue}}if(r)t=t<<1;else return t}return 0},getTotal:function(e){e===void 0&&(e=!1);for(var t=0,i=this.cameras,r=0;r<i.length;r++){var s=i[r];(!e||e&&s.visible)&&t++}return t},fromJSON:function(e){Array.isArray(e)||(e=[e]);for(var t=this.scene.sys.scale.width,i=this.scene.sys.scale.height,r=0;r<e.length;r++){var s=e[r],n=st(s,"x",0),a=st(s,"y",0),o=st(s,"width",t),h=st(s,"height",i),u=this.add(n,a,o,h);u.name=st(s,"name",""),u.zoom=st(s,"zoom",1),u.rotation=st(s,"rotation",0),u.scrollX=st(s,"scrollX",0),u.scrollY=st(s,"scrollY",0),u.roundPixels=st(s,"roundPixels",!1),u.visible=st(s,"visible",!0);var f=st(s,"backgroundColor",!1);f&&u.setBackgroundColor(f);var d=st(s,"bounds",null);if(d){var v=st(d,"x",0),c=st(d,"y",0),p=st(d,"width",t),m=st(d,"height",i);u.setBounds(v,c,p,m)}}return this},getCamera:function(e){for(var t=this.cameras,i=0;i<t.length;i++)if(t[i].name===e)return t[i];return null},getCamerasBelowPointer:function(e){for(var t=this.cameras,i=e.x,r=e.y,s=[],n=0;n<t.length;n++){var a=t[n];a.visible&&a.inputEnabled&&Wce(a,i,r)&&s.unshift(a)}return s},remove:function(e,t){t===void 0&&(t=!0),Array.isArray(e)||(e=[e]);for(var i=0,r=this.cameras,s=0;s<e.length;s++){var n=r.indexOf(e[s]);n!==-1&&(t?r[n].destroy():r[n].renderList=[],r.splice(n,1),i++)}return!this.main&&r[0]&&(this.main=r[0]),i},render:function(e,t){for(var i=this.scene,r=this.cameras,s=0;s<this.cameras.length;s++){var n=r[s];if(n.visible&&n.alpha>0){n.preRender();var a=this.getVisibleChildren(t.getChildren(),n);e.render(i,a,n)}}},getVisibleChildren:function(e,t){for(var i=[],r=0;r<e.length;r++){var s=e[r];s.willRender(t)&&i.push(s)}return i},resetAll:function(){for(var e=0;e<this.cameras.length;e++)this.cameras[e].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(e,t){for(var i=0;i<this.cameras.length;i++)this.cameras[i].update(e,t)},onResize:function(e,t,i,r,s){for(var n=0;n<this.cameras.length;n++){var a=this.cameras[n];a._x===0&&a._y===0&&a._width===r&&a._height===s&&a.setSize(t.width,t.height)}},resize:function(e,t){for(var i=0;i<this.cameras.length;i++)this.cameras[i].setSize(e,t)},shutdown:function(){this.main=void 0;for(var e=0;e<this.cameras.length;e++)this.cameras[e].destroy();this.cameras=[];var t=this.systems.events;t.off(Wr.UPDATE,this.update,this),t.off(Wr.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.scene.sys.events.off(Wr.START,this.start,this),this.scene=null,this.systems=null}});Yce.register("CameraManager",rL,"cameras");sL.exports=rL});var oL=l((c5e,aL)=>{aL.exports={Camera:vc(),BaseCamera:Ha(),CameraManager:nL(),Effects:lc(),Events:ai()}});var uL=l((p5e,hL)=>{hL.exports={Controls:_O(),Scene2D:oL()}});var cc=l((m5e,lL)=>{lL.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}});var pc=l((g5e,fL)=>{var jce=cc(),Kce=Et(),vr=ie(),Zce=function(e){var t=vr(e,"data",[]),i=vr(e,"canvas",null),r=vr(e,"palette",jce),s=vr(e,"pixelWidth",1),n=vr(e,"pixelHeight",s),a=vr(e,"resizeCanvas",!0),o=vr(e,"clearCanvas",!0),h=vr(e,"preRender",null),u=vr(e,"postRender",null),f=Math.floor(Math.abs(t[0].length*s)),d=Math.floor(Math.abs(t.length*n));i||(i=Kce.create2D(this,f,d),a=!1,o=!1),a&&(i.width=f,i.height=d);var v=i.getContext("2d");o&&v.clearRect(0,0,f,d),h&&h(i,v);for(var c=0;c<t.length;c++)for(var p=t[c],m=0;m<p.length;m++){var g=p[m];g!=="."&&g!==" "&&(v.fillStyle=r[g],v.fillRect(m*s,c*n,s,n))}return u&&u(i,v),i};fL.exports=Zce});var vL=l((x5e,dL)=>{dL.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}});var pL=l((T5e,cL)=>{cL.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}});var gL=l((E5e,mL)=>{mL.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}});var TL=l((y5e,xL)=>{xL.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}});var yL=l((S5e,EL)=>{EL.exports={ARNE16:cc(),C64:vL(),CGA:pL(),JMP:gL(),MSX:TL()}});var CL=l((C5e,SL)=>{SL.exports={GenerateTexture:pc(),Palettes:yL()}});var wL=l((R5e,_L)=>{var Jce=_(),mc=Xs(),Qce=rt(),Fn=qe(),RL=new Jce({Extends:mc,initialize:function(t){mc.call(this,t,t.sys.events),this.scene=t,this.systems=t.sys,t.sys.events.once(Fn.BOOT,this.boot,this),t.sys.events.on(Fn.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(Fn.DESTROY,this.destroy,this)},start:function(){this.events.once(Fn.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(Fn.SHUTDOWN,this.shutdown,this)},destroy:function(){mc.prototype.destroy.call(this),this.events.off(Fn.START,this.start,this),this.scene=null,this.systems=null}});Qce.register("DataManagerPlugin",RL,"data");_L.exports=RL});var AL=l((_5e,PL)=>{PL.exports={DataManager:Xs(),DataManagerPlugin:wL(),Events:Kv()}});var ML=l((w5e,bL)=>{bL.exports={BottomCenter:yv(),BottomLeft:Sv(),BottomRight:Cv(),Center:_v(),LeftCenter:wv(),QuickSet:qv(),RightCenter:Pv(),TopCenter:Av(),TopLeft:bv(),TopRight:Mv()}});var OL=l((P5e,qL)=>{qL.exports={BottomCenter:hv(),BottomLeft:uv(),BottomRight:lv(),LeftBottom:fv(),LeftCenter:dv(),LeftTop:vv(),QuickSet:Ev(),RightBottom:cv(),RightCenter:pv(),RightTop:mv(),TopCenter:gv(),TopLeft:xv(),TopRight:Tv()}});var FL=l((A5e,LL)=>{var $ce=Ua(),epe=Fe(),gc={In:ML(),To:OL()};gc=epe(!1,gc,$ce);LL.exports=gc});var xc=l((b5e,NL)=>{var tpe=_(),ipe=new tpe({initialize:function(t,i,r,s){(!i||i==="")&&(i=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join(`
`)),(!r||r==="")&&(r=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join(`
`)),s===void 0&&(s=null),this.key=t,this.fragmentSrc=i,this.vertexSrc=r,this.uniforms=s}});NL.exports=ipe});var DL=l((M5e,GL)=>{var rpe=Ti(),spe=Ei(),npe=yi(),ape=Si(),ope=function(e,t){t===void 0&&(t={});var i=spe(e),r=ape(e);return t.x=i,t.y=r,t.width=npe(e)-i,t.height=rpe(e)-r,t};GL.exports=ope});var BL=l((q5e,IL)=>{var hpe=function(e){return e.width*e.originX};IL.exports=hpe});var UL=l((O5e,VL)=>{var upe=function(e){return e.height*e.originY};VL.exports=upe});var zL=l((L5e,kL)=>{kL.exports={CenterOn:Rv(),GetBottom:Ti(),GetBounds:DL(),GetCenterX:Vs(),GetCenterY:ks(),GetLeft:Ei(),GetOffsetX:BL(),GetOffsetY:UL(),GetRight:yi(),GetTop:Si(),SetBottom:Ui(),SetCenterX:Us(),SetCenterY:zs(),SetLeft:Bi(),SetRight:Vi(),SetTop:Ii()}});var YL=l((F5e,XL)=>{var lpe=function(e,t){return t===void 0&&(t="none"),e.style.msTouchAction=t,e.style["ms-touch-action"]=t,e.style["touch-action"]=t,e};XL.exports=lpe});var HL=l((N5e,WL)=>{var fpe=function(e,t){t===void 0&&(t="none");var i=["-webkit-","-khtml-","-moz-","-ms-",""];return i.forEach(function(r){e.style[r+"user-select"]=t}),e.style["-webkit-touch-callout"]=t,e.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",e};WL.exports=fpe});var KL=l((G5e,jL)=>{jL.exports={CanvasInterpolation:Ed(),CanvasPool:Et(),Smoothing:Wo(),TouchAction:YL(),UserSelect:HL()}});var JL=l((D5e,ZL)=>{var Kh=xn(),dpe=function(e){e===void 0&&(e=1024);var t=[],i=255,r,s=255,n=0,a=0;for(r=0;r<=i;r++)t.push({r:s,g:r,b:a,color:Kh(s,r,a)});for(n=255,r=i;r>=0;r--)t.push({r,g:n,b:a,color:Kh(r,n,a)});for(s=0,r=0;r<=i;r++,n--)t.push({r:s,g:n,b:r,color:Kh(s,n,r)});for(n=0,a=255,r=0;r<=i;r++,a--,s++)t.push({r:s,g:n,b:a,color:Kh(s,n,a)});if(e===1024)return t;var o=[],h=0,u=1024/e;for(r=0;r<e;r++)o.push(t[Math.floor(h)]),h+=u;return o};ZL.exports=dpe});var $L=l((I5e,QL)=>{var vpe=function(e){var t={r:e>>16&255,g:e>>8&255,b:e&255,a:255};return e>16777215&&(t.a=e>>>24),t};QL.exports=vpe});var Tc=l((B5e,eF)=>{var cpe=function(e){var t=e.toString(16);return t.length===1?"0"+t:t};eF.exports=cpe});var Ec=l((V5e,tF)=>{var ppe=function(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+(t-e)*6*i:i<1/2?t:i<2/3?e+(t-e)*(2/3-i)*6:e};tF.exports=ppe});var rF=l((U5e,iF)=>{var mpe=ni(),yc=Ec(),gpe=function(e,t,i){var r=i,s=i,n=i;if(t!==0){var a=i<.5?i*(1+t):i+t-i*t,o=2*i-a;r=yc(o,a,e+1/3),s=yc(o,a,e),n=yc(o,a,e-1/3)}var h=new mpe;return h.setGLTo(r,s,n,1)};iF.exports=gpe});var nF=l((k5e,sF)=>{var xpe=hh(),Tpe=function(e,t){e===void 0&&(e=1),t===void 0&&(t=1);for(var i=[],r=0;r<=359;r++)i.push(xpe(r/359,e,t));return i};sF.exports=Tpe});var oF=l((z5e,aF)=>{var Sc=ba(),Cc=function(e,t,i,r,s,n,a,o){a===void 0&&(a=100),o===void 0&&(o=0);var h=o/a;return{r:Sc(e,r,h),g:Sc(t,s,h),b:Sc(i,n,h)}},Epe=function(e,t,i,r){return i===void 0&&(i=100),r===void 0&&(r=0),Cc(e.r,e.g,e.b,t.r,t.g,t.b,i,r)},ype=function(e,t,i,r,s,n){return s===void 0&&(s=100),n===void 0&&(n=0),Cc(e.r,e.g,e.b,t,i,r,s,n)};aF.exports={RGBWithRGB:Cc,ColorWithRGB:ype,ColorWithColor:Epe}});var uF=l((X5e,hF)=>{var Rc=eh(),Spe=ni(),Cpe=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=255),new Spe(Rc(e,t),Rc(e,t),Rc(e,t))};hF.exports=Cpe});var fF=l((Y5e,lF)=>{var Zh=Tc(),Rpe=function(e,t,i,r,s){return r===void 0&&(r=255),s===void 0&&(s="#"),s==="#"?"#"+((1<<24)+(e<<16)+(t<<8)+i).toString(16).slice(1,7):"0x"+Zh(r)+Zh(e)+Zh(t)+Zh(i)};lF.exports=Rpe});var vF=l((W5e,dF)=>{var Ge=ni();Ge.ColorSpectrum=JL();Ge.ColorToRGBA=$L();Ge.ComponentToHex=Tc();Ge.GetColor=xn();Ge.GetColor32=fd();Ge.HexStringToColor=cd();Ge.HSLToColor=rF();Ge.HSVColorWheel=nF();Ge.HSVToRGB=hh();Ge.HueToComponent=Ec();Ge.IntegerToColor=lh();Ge.IntegerToRGB=pd();Ge.Interpolate=oF();Ge.ObjectToColor=md();Ge.RandomRGB=uF();Ge.RGBStringToColor=gd();Ge.RGBToHSV=vd();Ge.RGBToString=fF();Ge.ValueToColor=fh();dF.exports=Ge});var pF=l((H5e,cF)=>{cF.exports={BitmapMask:Vv(),GeometryMask:Uv()}});var Jh=l((j5e,mF)=>{var _pe=_(),wpe=B(),Ppe=new _pe({initialize:function(t,i,r){this._rgb=[0,0,0],this.onChangeCallback=wpe,this.dirty=!1,this.set(t,i,r)},set:function(e,t,i){return e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=0),this._rgb=[e,t,i],this.onChange(),this},equals:function(e,t,i){var r=this._rgb;return r.r===e&&r.g===t&&r.b===i},onChange:function(){this.dirty=!0;var e=this._rgb;this.onChangeCallback.call(this,e[0],e[1],e[2])},r:{get:function(){return this._rgb[0]},set:function(e){this._rgb[0]=e,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(e){this._rgb[1]=e,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(e){this._rgb[2]=e,this.onChange()}},destroy:function(){this.onChangeCallback=null}});mF.exports=Ppe});var xF=l((K5e,gF)=>{gF.exports={Align:FL(),BaseShader:xc(),Bounds:zL(),Canvas:KL(),Color:vF(),ColorMatrix:Eh(),Masks:pF(),RGB:Jh()}});var $a=l((Z5e,TF)=>{var Ape=function(e,t){var i;if(t)typeof t=="string"?i=document.getElementById(t):typeof t=="object"&&t.nodeType===1&&(i=t);else if(e.parentElement||t===null)return e;return i||(i=document.body),i.appendChild(e),e};TF.exports=Ape});var _c=l((J5e,EF)=>{var bpe=vn(),Mpe=function(e){if(document.readyState==="complete"||document.readyState==="interactive"){e();return}var t=function(){document.removeEventListener("deviceready",t,!0),document.removeEventListener("DOMContentLoaded",t,!0),window.removeEventListener("load",t,!0),e()};document.body?bpe.cordova?document.addEventListener("deviceready",t,!1):(document.addEventListener("DOMContentLoaded",t,!0),window.addEventListener("load",t,!0)):window.setTimeout(t,20)};EF.exports=Mpe});var wc=l((Q5e,yF)=>{var qpe=function(e){if(!e)return window.innerHeight;var t=Math.abs(window.orientation),i={w:0,h:0},r=document.createElement("div");return r.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(r),i.w=t===90?r.offsetHeight:window.innerWidth,i.h=t===90?window.innerWidth:r.offsetHeight,document.documentElement.removeChild(r),r=null,Math.abs(window.orientation)!==90?i.h:i.w};yF.exports=qpe});var Pc=l(($5e,SF)=>{SF.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}});var Ac=l((eHe,CF)=>{CF.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}});var bc=l((tHe,RF)=>{RF.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5}});var Mc=l((iHe,_F)=>{_F.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}});var Qh=l((rHe,wF)=>{var Ope={CENTER:Pc(),ORIENTATION:Ac(),SCALE_MODE:bc(),ZOOM:Mc()};wF.exports=Ope});var qc=l((sHe,PF)=>{var Nn=Qh(),Lpe=function(e,t){var i=window.screen,r=i?i.orientation||i.mozOrientation||i.msOrientation:!1;if(r&&typeof r.type=="string")return r.type;if(typeof r=="string")return r;if(typeof window.orientation=="number")return window.orientation===0||window.orientation===180?Nn.ORIENTATION.PORTRAIT:Nn.ORIENTATION.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return Nn.ORIENTATION.PORTRAIT;if(window.matchMedia("(orientation: landscape)").matches)return Nn.ORIENTATION.LANDSCAPE}else return t>e?Nn.ORIENTATION.PORTRAIT:Nn.ORIENTATION.LANDSCAPE};PF.exports=Lpe});var Oc=l((nHe,AF)=>{var Fpe=function(e){var t;return e!==""&&(typeof e=="string"?t=document.getElementById(e):e&&e.nodeType===1&&(t=e)),t||(t=document.body),t};AF.exports=Fpe});var Lc=l((aHe,bF)=>{var Npe=function(e){var t="";try{if(window.DOMParser){var i=new DOMParser;t=i.parseFromString(e,"text/xml")}else t=new ActiveXObject("Microsoft.XMLDOM"),t.loadXML(e)}catch(r){t=null}return!t||!t.documentElement||t.getElementsByTagName("parsererror").length?null:t};bF.exports=Npe});var $h=l((oHe,MF)=>{var Gpe=function(e){e.parentNode&&e.parentNode.removeChild(e)};MF.exports=Gpe});var OF=l((hHe,qF)=>{var Dpe={AddToDOM:$a(),DOMContentLoaded:_c(),GetInnerHeight:wc(),GetScreenOrientation:qc(),GetTarget:Oc(),ParseXML:Lc(),RemoveFromDOM:$h(),RequestAnimationFrame:nv()};qF.exports=Dpe});var GF=l((uHe,NF)=>{var Ipe=_(),LF=se(),Bpe=rt(),FF=new Ipe({Extends:LF,initialize:function(){LF.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});Bpe.register("EventEmitter",FF,"events");NF.exports=FF});var IF=l((lHe,DF)=>{DF.exports={EventEmitter:GF()}});var VF=l((fHe,BF)=>{BF.exports="add"});var kF=l((dHe,UF)=>{UF.exports="animationcomplete"});var XF=l((vHe,zF)=>{zF.exports="animationcomplete-"});var WF=l((cHe,YF)=>{YF.exports="animationrepeat"});var jF=l((pHe,HF)=>{HF.exports="animationrestart"});var ZF=l((mHe,KF)=>{KF.exports="animationstart"});var QF=l((gHe,JF)=>{JF.exports="animationstop"});var eN=l((xHe,$F)=>{$F.exports="animationupdate"});var iN=l((THe,tN)=>{tN.exports="pauseall"});var sN=l((EHe,rN)=>{rN.exports="remove"});var aN=l((yHe,nN)=>{nN.exports="resumeall"});var eu=l((SHe,oN)=>{oN.exports={ADD_ANIMATION:VF(),ANIMATION_COMPLETE:kF(),ANIMATION_COMPLETE_KEY:XF(),ANIMATION_REPEAT:WF(),ANIMATION_RESTART:jF(),ANIMATION_START:ZF(),ANIMATION_STOP:QF(),ANIMATION_UPDATE:eN(),PAUSE_ALL:iN(),REMOVE_ANIMATION:sN(),RESUME_ALL:aN()}});var Fc=l((CHe,hN)=>{var Vpe=function(e,t,i){if(t.length){if(t.length===1)return t[0]}else return NaN;var r=1,s,n;if(i){if(e<t[0][i])return t[0];for(;t[r][i]<e;)r++}else for(;t[r]<e;)r++;return r>t.length&&(r=t.length),i?(s=t[r-1][i],n=t[r][i],n-e<=e-s?t[r]:t[r-1]):(s=t[r-1],n=t[r],n-e<=e-s?n:s)};hN.exports=Vpe});var lN=l((RHe,uN)=>{var Upe=_(),kpe=new Upe({initialize:function(t,i,r,s,n){n===void 0&&(n=!1),this.textureKey=t,this.textureFrame=i,this.index=r,this.frame=s,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=n},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});uN.exports=kpe});var Nc=l((_He,fN)=>{var zpe=function(e){var t=/\D/g;return e.sort(function(i,r){return parseInt(i.replace(t,""),10)-parseInt(r.replace(t,""),10)}),e};fN.exports=zpe});var Gc=l((wHe,dN)=>{var Xpe=Pe(),Ype=_(),tu=eu(),Wpe=Fc(),Hpe=lN(),St=ie(),jpe=Nc(),Kpe=new Ype({initialize:function(t,i,r){this.manager=t,this.key=i,this.type="frame",this.frames=this.getFrames(t.textureManager,St(r,"frames",[]),St(r,"defaultTextureKey",null),St(r,"sortFrames",!0)),this.frameRate=St(r,"frameRate",null),this.duration=St(r,"duration",null),this.msPerFrame,this.skipMissedFrames=St(r,"skipMissedFrames",!0),this.delay=St(r,"delay",0),this.repeat=St(r,"repeat",0),this.repeatDelay=St(r,"repeatDelay",0),this.yoyo=St(r,"yoyo",!1),this.showOnStart=St(r,"showOnStart",!1),this.hideOnComplete=St(r,"hideOnComplete",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(tu.PAUSE_ALL,this.pause,this),this.manager.on(tu.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(e,t,i,r){i===null&&r===null?(e.frameRate=24,e.duration=24/t*1e3):i&&r===null?(e.duration=i,e.frameRate=t/(i/1e3)):(e.frameRate=r,e.duration=t/r*1e3),e.msPerFrame=1e3/e.frameRate},addFrame:function(e){return this.addFrameAt(this.frames.length,e)},addFrameAt:function(e,t){var i=this.getFrames(this.manager.textureManager,t);if(i.length>0){if(e===0)this.frames=i.concat(this.frames);else if(e===this.frames.length)this.frames=this.frames.concat(i);else{var r=this.frames.slice(0,e),s=this.frames.slice(e);this.frames=r.concat(i,s)}this.updateFrameSequence()}return this},checkFrame:function(e){return e>=0&&e<this.frames.length},getFirstTick:function(e){e.accumulator=0,e.nextTick=e.msPerFrame+e.currentFrame.duration},getFrameAt:function(e){return this.frames[e]},getFrames:function(e,t,i,r){r===void 0&&(r=!0);var s=[],n,a,o=1,h,u;if(typeof t=="string"){u=t;var f=e.get(u),d=f.getFrameNames();r&&jpe(d),t=[],d.forEach(function(x){t.push({key:u,frame:x})})}if(!Array.isArray(t)||t.length===0)return s;for(h=0;h<t.length;h++){var v=t[h],c=St(v,"key",i);if(!!c){var p=St(v,"frame",0),m=e.getFrame(c,p);a=new Hpe(c,p,o,m),a.duration=St(v,"duration",0),a.isFirst=!n,n&&(n.nextFrame=a,a.prevFrame=n),s.push(a),n=a,o++}}if(s.length>0){a.isLast=!0,a.nextFrame=s[0],s[0].prevFrame=a;var g=1/(s.length-1);for(h=0;h<s.length;h++)s[h].progress=h*g}return s},getNextTick:function(e){e.accumulator-=e.nextTick,e.nextTick=e.msPerFrame+e.currentFrame.duration},getFrameByProgress:function(e){return e=Xpe(e,0,1),Wpe(e,this.frames,"progress")},nextFrame:function(e){var t=e.currentFrame;t.isLast?e.yoyo?this.handleYoyoFrame(e,!1):e.repeatCounter>0?e.inReverse&&e.forward?e.forward=!1:this.repeatAnimation(e):e.complete():this.updateAndGetNextTick(e,t.nextFrame)},handleYoyoFrame:function(e,t){if(t||(t=!1),e.inReverse===!t&&e.repeatCounter>0){(e.repeatDelay===0||e.pendingRepeat)&&(e.forward=t),this.repeatAnimation(e);return}if(e.inReverse!==t&&e.repeatCounter===0){e.complete();return}e.forward=t;var i=t?e.currentFrame.nextFrame:e.currentFrame.prevFrame;this.updateAndGetNextTick(e,i)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(e){var t=e.currentFrame;t.isFirst?e.yoyo?this.handleYoyoFrame(e,!0):e.repeatCounter>0?e.inReverse&&!e.forward?this.repeatAnimation(e):(e.forward=!0,this.repeatAnimation(e)):e.complete():this.updateAndGetNextTick(e,t.prevFrame)},updateAndGetNextTick:function(e,t){e.setCurrentFrame(t),this.getNextTick(e)},removeFrame:function(e){var t=this.frames.indexOf(e);return t!==-1&&this.removeFrameAt(t),this},removeFrameAt:function(e){return this.frames.splice(e,1),this.updateFrameSequence(),this},repeatAnimation:function(e){if(e._pendingStop===2){if(e._pendingStopValue===0)return e.stop();e._pendingStopValue--}e.repeatDelay>0&&!e.pendingRepeat?(e.pendingRepeat=!0,e.accumulator-=e.nextTick,e.nextTick+=e.repeatDelay):(e.repeatCounter--,e.forward?e.setCurrentFrame(e.currentFrame.nextFrame):e.setCurrentFrame(e.currentFrame.prevFrame),e.isPlaying&&(this.getNextTick(e),e.handleRepeat()))},toJSON:function(){var e={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(t){e.frames.push(t.toJSON())}),e},updateFrameSequence:function(){for(var e=this.frames.length,t=1/(e-1),i,r=0;r<e;r++)i=this.frames[r],i.index=r+1,i.isFirst=!1,i.isLast=!1,i.progress=r*t,r===0?(i.isFirst=!0,e===1?(i.isLast=!0,i.nextFrame=i,i.prevFrame=i):(i.isLast=!1,i.prevFrame=this.frames[e-1],i.nextFrame=this.frames[r+1])):r===e-1&&e>1?(i.isLast=!0,i.prevFrame=this.frames[e-2],i.nextFrame=this.frames[0]):e>1&&(i.prevFrame=this.frames[r-1],i.nextFrame=this.frames[r+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(tu.PAUSE_ALL,this.pause,this),this.manager.off(tu.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var e=0;e<this.frames.length;e++)this.frames[e].destroy();this.frames=[],this.manager=null}});dN.exports=Kpe});var iu=l((PHe,vN)=>{var Zpe=function(e,t,i,r){t===void 0&&(t=0),i===void 0&&(i=" "),r===void 0&&(r=3),e=e.toString();var s=0;if(t+1>=e.length)switch(r){case 1:e=new Array(t+1-e.length).join(i)+e;break;case 3:var n=Math.ceil((s=t-e.length)/2),a=s-n;e=new Array(a+1).join(i)+e+new Array(n+1).join(i);break;default:e=e+new Array(t+1-e.length).join(i);break}return e};vN.exports=Zpe});var Dc=l((AHe,cN)=>{var Jpe=function(e,t,i,r){var s=[],n,a=!1;if((i||r)&&(a=!0,i||(i=""),r||(r="")),t<e)for(n=e;n>=t;n--)a?s.push(i+n.toString()+r):s.push(n);else for(n=e;n<=t;n++)a?s.push(i+n.toString()+r):s.push(n);return s};cN.exports=Jpe});var EN=l((bHe,TN)=>{var Qpe=Gc(),$pe=_(),pN=yn(),mN=se(),eo=eu(),gN=Ne(),to=X(),Ct=ie(),eme=iu(),xN=Dc(),tme=new $pe({Extends:mN,initialize:function(t){mN.call(this),this.game=t,this.textureManager=null,this.globalTimeScale=1,this.anims=new pN,this.mixes=new pN,this.paused=!1,this.name="AnimationManager",t.events.once(gN.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(gN.DESTROY,this.destroy,this)},addMix:function(e,t,i){var r=this.anims,s=this.mixes,n=typeof e=="string"?e:e.key,a=typeof t=="string"?t:t.key;if(r.has(n)&&r.has(a)){var o=s.get(n);o||(o={}),o[a]=i,s.set(n,o)}return this},removeMix:function(e,t){var i=this.mixes,r=typeof e=="string"?e:e.key,s=i.get(r);if(s)if(t){var n=typeof t=="string"?t:t.key;s.hasOwnProperty(n)&&delete s[n]}else t||i.delete(r);return this},getMix:function(e,t){var i=this.mixes,r=typeof e=="string"?e:e.key,s=typeof t=="string"?t:t.key,n=i.get(r);return n&&n.hasOwnProperty(s)?n[s]:0},add:function(e,t){return this.anims.has(e)?(console.warn("Animation key exists: "+e),this):(t.key=e,this.anims.set(e,t),this.emit(eo.ADD_ANIMATION,e,t),this)},exists:function(e){return this.anims.has(e)},createFromAseprite:function(e,t){var i=[],r=this.game.cache.json.get(e);if(!r)return i;var s=this,n=Ct(r,"meta",null),a=Ct(r,"frames",null);if(n&&a){var o=Ct(n,"frameTags",[]);o.forEach(function(h){var u=[],f=to(h,"name",null),d=to(h,"from",0),v=to(h,"to",0),c=to(h,"direction","forward");if(!!f&&(!t||t&&t.indexOf(f)>-1)){for(var p=[],m=Number.MAX_SAFE_INTEGER,g=d;g<=v;g++){var x=g.toString(),T=a[x];if(T){var E=to(T,"duration",Number.MAX_SAFE_INTEGER);E<m&&(m=E),p.push({frame:x,duration:E})}}p.forEach(function(S){u.push({key:e,frame:S.frame,duration:m-S.duration})});var R=m*u.length;c==="reverse"&&(u=u.reverse());var y={key:f,frames:u,duration:R,yoyo:c==="pingpong"},C=s.create(y);C&&i.push(C)}})}return i},create:function(e){var t=e.key,i=!1;return t&&(i=this.get(t),i||(i=new Qpe(this,t,e),this.anims.set(t,i),this.emit(eo.ADD_ANIMATION,t,i))),i},fromJSON:function(e,t){t===void 0&&(t=!1),t&&this.anims.clear(),typeof e=="string"&&(e=JSON.parse(e));var i=[];if(e.hasOwnProperty("anims")&&Array.isArray(e.anims)){for(var r=0;r<e.anims.length;r++)i.push(this.create(e.anims[r]));e.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=e.globalTimeScale)}else e.hasOwnProperty("key")&&e.type==="frame"&&i.push(this.create(e));return i},generateFrameNames:function(e,t){var i=Ct(t,"prefix",""),r=Ct(t,"start",0),s=Ct(t,"end",0),n=Ct(t,"suffix",""),a=Ct(t,"zeroPad",0),o=Ct(t,"outputArray",[]),h=Ct(t,"frames",!1),u=this.textureManager.get(e);if(!u)return o;var f;if(t)for(h||(h=xN(r,s)),f=0;f<h.length;f++){var d=i+eme(h[f],a,"0",1)+n;u.has(d)?o.push({key:e,frame:d}):console.warn("generateFrameNames: Frame missing: "+d+" from texture: "+e)}else for(h=u.getFrameNames(),f=0;f<h.length;f++)o.push({key:e,frame:h[f]});return o},generateFrameNumbers:function(e,t){var i=Ct(t,"start",0),r=Ct(t,"end",-1),s=Ct(t,"first",!1),n=Ct(t,"outputArray",[]),a=Ct(t,"frames",!1),o=this.textureManager.get(e);if(!o)return n;s&&o.has(s)&&n.push({key:e,frame:s}),a||(r===-1&&(r=o.frameTotal-2),a=xN(i,r));for(var h=0;h<a.length;h++)o.has(a[h])?n.push({key:e,frame:a[h]}):console.warn("generateFrameNumbers: Frame "+h+" missing from texture: "+e);return n},get:function(e){return this.anims.get(e)},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(eo.PAUSE_ALL)),this},play:function(e,t){Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++)t[i].anims.play(e);return this},staggerPlay:function(e,t,i,r){i===void 0&&(i=0),r===void 0&&(r=!0),Array.isArray(t)||(t=[t]);var s=t.length;r||s--;for(var n=0;n<t.length;n++){var a=i<0?Math.abs(i)*(s-n):i*n;t[n].anims.playAfterDelay(e,a)}return this},remove:function(e){var t=this.get(e);return t&&(this.emit(eo.REMOVE_ANIMATION,e,t),this.anims.delete(e),this.removeMix(e)),t},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(eo.RESUME_ALL)),this},toJSON:function(e){var t={anims:[],globalTimeScale:this.globalTimeScale};return e!==void 0&&e!==""?t.anims.push(this.anims.get(e).toJSON()):this.anims.each(function(i,r){t.anims.push(r.toJSON())}),t},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});TN.exports=tme});var SN=l((MHe,yN)=>{var ime=$a(),rme=function(e){var t=e.config;if(!(!t.parent||!t.domCreateContainer)){var i=document.createElement("div");i.style.cssText=["display: block;","width: "+e.scale.width+"px;","height: "+e.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+t.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),e.domContainer=i,ime(i,t.parent)}};yN.exports=rme});var ru=l((qHe,CN)=>{var sme={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8};CN.exports=sme});var _N=l((OHe,RN)=>{RN.exports="boot"});var PN=l((LHe,wN)=>{wN.exports="destroy"});var bN=l((FHe,AN)=>{AN.exports="dragend"});var qN=l((NHe,MN)=>{MN.exports="dragenter"});var LN=l((GHe,ON)=>{ON.exports="drag"});var NN=l((DHe,FN)=>{FN.exports="dragleave"});var DN=l((IHe,GN)=>{GN.exports="dragover"});var BN=l((BHe,IN)=>{IN.exports="dragstart"});var UN=l((VHe,VN)=>{VN.exports="drop"});var zN=l((UHe,kN)=>{kN.exports="gameout"});var YN=l((kHe,XN)=>{XN.exports="gameover"});var HN=l((zHe,WN)=>{WN.exports="gameobjectdown"});var KN=l((XHe,jN)=>{jN.exports="dragend"});var JN=l((YHe,ZN)=>{ZN.exports="dragenter"});var $N=l((WHe,QN)=>{QN.exports="drag"});var tG=l((HHe,eG)=>{eG.exports="dragleave"});var rG=l((jHe,iG)=>{iG.exports="dragover"});var nG=l((KHe,sG)=>{sG.exports="dragstart"});var oG=l((ZHe,aG)=>{aG.exports="drop"});var uG=l((JHe,hG)=>{hG.exports="gameobjectmove"});var fG=l((QHe,lG)=>{lG.exports="gameobjectout"});var vG=l(($He,dG)=>{dG.exports="gameobjectover"});var pG=l((e4e,cG)=>{cG.exports="pointerdown"});var gG=l((t4e,mG)=>{mG.exports="pointermove"});var TG=l((i4e,xG)=>{xG.exports="pointerout"});var yG=l((r4e,EG)=>{EG.exports="pointerover"});var CG=l((s4e,SG)=>{SG.exports="pointerup"});var _G=l((n4e,RG)=>{RG.exports="wheel"});var PG=l((a4e,wG)=>{wG.exports="gameobjectup"});var bG=l((o4e,AG)=>{AG.exports="gameobjectwheel"});var qG=l((h4e,MG)=>{MG.exports="boot"});var LG=l((u4e,OG)=>{OG.exports="process"});var NG=l((l4e,FG)=>{FG.exports="update"});var DG=l((f4e,GG)=>{GG.exports="pointerdown"});var BG=l((d4e,IG)=>{IG.exports="pointerdownoutside"});var UG=l((v4e,VG)=>{VG.exports="pointermove"});var zG=l((c4e,kG)=>{kG.exports="pointerout"});var YG=l((p4e,XG)=>{XG.exports="pointerover"});var HG=l((m4e,WG)=>{WG.exports="pointerup"});var KG=l((g4e,jG)=>{jG.exports="pointerupoutside"});var JG=l((x4e,ZG)=>{ZG.exports="wheel"});var $G=l((T4e,QG)=>{QG.exports="pointerlockchange"});var t2=l((E4e,e2)=>{e2.exports="preupdate"});var r2=l((y4e,i2)=>{i2.exports="shutdown"});var n2=l((S4e,s2)=>{s2.exports="start"});var o2=l((C4e,a2)=>{a2.exports="update"});var Xi=l((R4e,h2)=>{h2.exports={BOOT:_N(),DESTROY:PN(),DRAG_END:bN(),DRAG_ENTER:qN(),DRAG:LN(),DRAG_LEAVE:NN(),DRAG_OVER:DN(),DRAG_START:BN(),DROP:UN(),GAME_OUT:zN(),GAME_OVER:YN(),GAMEOBJECT_DOWN:HN(),GAMEOBJECT_DRAG_END:KN(),GAMEOBJECT_DRAG_ENTER:JN(),GAMEOBJECT_DRAG:$N(),GAMEOBJECT_DRAG_LEAVE:tG(),GAMEOBJECT_DRAG_OVER:rG(),GAMEOBJECT_DRAG_START:nG(),GAMEOBJECT_DROP:oG(),GAMEOBJECT_MOVE:uG(),GAMEOBJECT_OUT:fG(),GAMEOBJECT_OVER:vG(),GAMEOBJECT_POINTER_DOWN:pG(),GAMEOBJECT_POINTER_MOVE:gG(),GAMEOBJECT_POINTER_OUT:TG(),GAMEOBJECT_POINTER_OVER:yG(),GAMEOBJECT_POINTER_UP:CG(),GAMEOBJECT_POINTER_WHEEL:_G(),GAMEOBJECT_UP:PG(),GAMEOBJECT_WHEEL:bG(),MANAGER_BOOT:qG(),MANAGER_PROCESS:LG(),MANAGER_UPDATE:NG(),POINTER_DOWN:DG(),POINTER_DOWN_OUTSIDE:BG(),POINTER_MOVE:UG(),POINTER_OUT:zG(),POINTER_OVER:YG(),POINTER_UP:HG(),POINTER_UP_OUTSIDE:KG(),POINTER_WHEEL:JG(),POINTERLOCK_CHANGE:$G(),PRE_UPDATE:t2(),SHUTDOWN:r2(),START:n2(),UPDATE:o2()}});var io=l((_4e,u2)=>{var nme={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175};u2.exports=nme});var Bc=l((w4e,v2)=>{var ame=Ds(),ome=_(),l2=Ne(),Ic=Xi(),f2=io(),d2=B(),hme=new ome({initialize:function(t){this.manager=t,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=d2,this.onKeyUp=d2,t.events.once(Ic.MANAGER_BOOT,this.boot,this)},boot:function(){var e=this.manager.config;this.enabled=e.inputKeyboard,this.target=e.inputKeyboardEventTarget,this.addCapture(e.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(l2.POST_STEP,this.postUpdate,this)},startListeners:function(){var e=this;this.onKeyDown=function(i){if(!(i.defaultPrevented||!e.enabled||!e.manager)){e.queue.push(i),e.manager.events.emit(Ic.MANAGER_PROCESS);var r=i.altKey||i.ctrlKey||i.shiftKey||i.metaKey;e.preventDefault&&!r&&e.captures.indexOf(i.keyCode)>-1&&i.preventDefault()}},this.onKeyUp=function(i){if(!(i.defaultPrevented||!e.enabled||!e.manager)){e.queue.push(i),e.manager.events.emit(Ic.MANAGER_PROCESS);var r=i.altKey||i.ctrlKey||i.shiftKey||i.metaKey;e.preventDefault&&!r&&e.captures.indexOf(i.keyCode)>-1&&i.preventDefault()}};var t=this.target;t&&(t.addEventListener("keydown",this.onKeyDown,!1),t.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var e=this.target;e.removeEventListener("keydown",this.onKeyDown,!1),e.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(e){typeof e=="string"&&(e=e.split(",")),Array.isArray(e)||(e=[e]);for(var t=this.captures,i=0;i<e.length;i++){var r=e[i];typeof r=="string"&&(r=f2[r.trim().toUpperCase()]),t.indexOf(r)===-1&&t.push(r)}this.preventDefault=t.length>0},removeCapture:function(e){typeof e=="string"&&(e=e.split(",")),Array.isArray(e)||(e=[e]);for(var t=this.captures,i=0;i<e.length;i++){var r=e[i];typeof r=="string"&&(r=f2[r.toUpperCase()]),ame(t,r)}this.preventDefault=t.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(l2.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});v2.exports=hme});var Vc=l((P4e,c2)=>{var ume=_(),su=jo(),lme=Xi(),cr=B(),fme=new ume({initialize:function(t){this.manager=t,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=cr,this.onMouseDown=cr,this.onMouseUp=cr,this.onMouseDownWindow=cr,this.onMouseUpWindow=cr,this.onMouseOver=cr,this.onMouseOut=cr,this.onMouseWheel=cr,this.pointerLockChange=cr,this.isTop=!0,t.events.once(lme.MANAGER_BOOT,this.boot,this)},boot:function(){var e=this.manager.config;this.enabled=e.inputMouse,this.target=e.inputMouseEventTarget,this.passive=e.inputMousePassive,this.preventDefaultDown=e.inputMousePreventDefaultDown,this.preventDefaultUp=e.inputMousePreventDefaultUp,this.preventDefaultMove=e.inputMousePreventDefaultMove,this.preventDefaultWheel=e.inputMousePreventDefaultWheel,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,e.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(e){return e.preventDefault(),!1}),this},requestPointerLock:function(){if(su.pointerLock){var e=this.target;e.requestPointerLock=e.requestPointerLock||e.mozRequestPointerLock||e.webkitRequestPointerLock,e.requestPointerLock()}},releasePointerLock:function(){su.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var e=this.target;if(!!e){var t=this,i=this.manager,r=i.canvas,s=window&&window.focus&&i.game.config.autoFocus;this.onMouseMove=function(a){!a.defaultPrevented&&t.enabled&&i&&i.enabled&&(i.onMouseMove(a),t.preventDefaultMove&&a.preventDefault())},this.onMouseDown=function(a){s&&window.focus(),!a.defaultPrevented&&t.enabled&&i&&i.enabled&&(i.onMouseDown(a),t.preventDefaultDown&&a.target===r&&a.preventDefault())},this.onMouseDownWindow=function(a){!a.defaultPrevented&&t.enabled&&i&&i.enabled&&a.target!==r&&i.onMouseDown(a)},this.onMouseUp=function(a){!a.defaultPrevented&&t.enabled&&i&&i.enabled&&(i.onMouseUp(a),t.preventDefaultUp&&a.target===r&&a.preventDefault())},this.onMouseUpWindow=function(a){!a.defaultPrevented&&t.enabled&&i&&i.enabled&&a.target!==r&&i.onMouseUp(a)},this.onMouseOver=function(a){!a.defaultPrevented&&t.enabled&&i&&i.enabled&&i.setCanvasOver(a)},this.onMouseOut=function(a){!a.defaultPrevented&&t.enabled&&i&&i.enabled&&i.setCanvasOut(a)},this.onMouseWheel=function(a){!a.defaultPrevented&&t.enabled&&i&&i.enabled&&i.onMouseWheel(a),t.preventDefaultWheel&&a.target===r&&a.preventDefault()};var n={passive:!0};if(e.addEventListener("mousemove",this.onMouseMove),e.addEventListener("mousedown",this.onMouseDown),e.addEventListener("mouseup",this.onMouseUp),e.addEventListener("mouseover",this.onMouseOver,n),e.addEventListener("mouseout",this.onMouseOut,n),this.preventDefaultWheel?e.addEventListener("wheel",this.onMouseWheel,{passive:!1}):e.addEventListener("wheel",this.onMouseWheel,n),window&&i.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,n),window.top.addEventListener("mouseup",this.onMouseUpWindow,n)}catch(a){window.addEventListener("mousedown",this.onMouseDownWindow,n),window.addEventListener("mouseup",this.onMouseUpWindow,n),this.isTop=!1}su.pointerLock&&(this.pointerLockChange=function(a){var o=t.target;t.locked=document.pointerLockElement===o||document.mozPointerLockElement===o||document.webkitPointerLockElement===o,i.onPointerLockChange(a)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var e=this.target;e.removeEventListener("mousemove",this.onMouseMove),e.removeEventListener("mousedown",this.onMouseDown),e.removeEventListener("mouseup",this.onMouseUp),e.removeEventListener("mouseover",this.onMouseOver),e.removeEventListener("mouseout",this.onMouseOut),window&&(e=this.isTop?window.top:window,e.removeEventListener("mousedown",this.onMouseDownWindow),e.removeEventListener("mouseup",this.onMouseUpWindow)),su.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});c2.exports=fme});var kc=l((A4e,g2)=>{var Uc=qf(),dme=_(),p2=Fr(),m2=Zo(),nu=ed(),au=le(),vme=vn(),cme=new dme({initialize:function(t,i){this.manager=t,this.id=i,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new au,this.prevPosition=new au,this.midPoint=new au(-1,-1),this.velocity=new au,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=i===0,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(e){var t=e.getWorldPoint(this.x,this.y);return this.worldX=t.x,this.worldY=t.y,this},positionToCamera:function(e,t){return e.getWorldPoint(this.x,this.y,t)},updateMotion:function(){var e=this.position.x,t=this.position.y,i=this.midPoint.x,r=this.midPoint.y;if(!(e===i&&t===r)){var s=nu(this.motionFactor,i,e),n=nu(this.motionFactor,r,t);m2(s,e,.1)&&(s=e),m2(n,t,.1)&&(n=t),this.midPoint.set(s,n);var a=e-s,o=t-n;this.velocity.set(a,o),this.angle=Uc(s,n,e,t),this.distance=Math.sqrt(a*a+o*o)}},up:function(e){"buttons"in e&&(this.buttons=e.buttons),this.event=e,this.button=e.button,this.upElement=e.target,this.manager.transformPointer(this,e.pageX,e.pageY,!1),e.button===0&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),this.buttons===0&&(this.isDown=!1,this.upTime=e.timeStamp,this.wasTouch=!1)},down:function(e){"buttons"in e&&(this.buttons=e.buttons),this.event=e,this.button=e.button,this.downElement=e.target,this.manager.transformPointer(this,e.pageX,e.pageY,!1),e.button===0&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),vme.macOS&&e.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=e.timeStamp),this.wasTouch=!1},move:function(e){"buttons"in e&&(this.buttons=e.buttons),this.event=e,this.manager.transformPointer(this,e.pageX,e.pageY,!0),this.locked&&(this.movementX=e.movementX||e.mozMovementX||e.webkitMovementX||0,this.movementY=e.movementY||e.mozMovementY||e.webkitMovementY||0),this.moveTime=e.timeStamp,this.wasTouch=!1},wheel:function(e){"buttons"in e&&(this.buttons=e.buttons),this.event=e,this.manager.transformPointer(this,e.pageX,e.pageY,!1),this.deltaX=e.deltaX,this.deltaY=e.deltaY,this.deltaZ=e.deltaZ,this.wasTouch=!1},touchstart:function(e,t){e.pointerId&&(this.pointerId=e.pointerId),this.identifier=e.identifier,this.target=e.target,this.active=!0,this.buttons=1,this.event=t,this.downElement=e.target,this.manager.transformPointer(this,e.pageX,e.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=t.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(e,t){this.event=t,this.manager.transformPointer(this,e.pageX,e.pageY,!0),this.moveTime=t.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(e,t){this.buttons=0,this.event=t,this.upElement=e.target,this.manager.transformPointer(this,e.pageX,e.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=t.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(e,t){this.buttons=0,this.event=t,this.upElement=e.target,this.manager.transformPointer(this,e.pageX,e.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=t.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return this.buttons===0},leftButtonDown:function(){return!!(this.buttons&1)},rightButtonDown:function(){return!!(this.buttons&2)},middleButtonDown:function(){return!!(this.buttons&4)},backButtonDown:function(){return!!(this.buttons&8)},forwardButtonDown:function(){return!!(this.buttons&16)},leftButtonReleased:function(){return this.button===0&&!this.isDown},rightButtonReleased:function(){return this.button===2&&!this.isDown},middleButtonReleased:function(){return this.button===1&&!this.isDown},backButtonReleased:function(){return this.button===3&&!this.isDown},forwardButtonReleased:function(){return this.button===4&&!this.isDown},getDistance:function(){return this.isDown?p2(this.downX,this.downY,this.x,this.y):p2(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?Uc(this.downX,this.downY,this.x,this.y):Uc(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(e,t){e===void 0&&(e=10),t===void 0&&(t=[]);for(var i=this.prevPosition.x,r=this.prevPosition.y,s=this.position.x,n=this.position.y,a=0;a<e;a++){var o=1/e*a;t[a]={x:nu(o,i,s),y:nu(o,r,n)}}return t},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(e){this.position.x=e}},y:{get:function(){return this.position.y},set:function(e){this.position.y=e}},time:{get:function(){return this.event?this.event.timeStamp:0}}});g2.exports=cme});var zc=l((b4e,x2)=>{var pme=_(),mme=Xi(),pr=B(),gme=new pme({initialize:function(t){this.manager=t,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=pr,this.onTouchStartWindow=pr,this.onTouchMove=pr,this.onTouchEnd=pr,this.onTouchEndWindow=pr,this.onTouchCancel=pr,this.onTouchCancelWindow=pr,this.onTouchOver=pr,this.onTouchOut=pr,t.events.once(mme.MANAGER_BOOT,this.boot,this)},boot:function(){var e=this.manager.config;this.enabled=e.inputTouch,this.target=e.inputTouchEventTarget,this.capture=e.inputTouchCapture,this.target||(this.target=this.manager.game.canvas),e.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(e){return e.preventDefault(),!1}),this},startListeners:function(){var e=this,t=this.manager.canvas,i=window&&window.focus&&this.manager.game.config.autoFocus;this.onTouchStart=function(a){i&&window.focus(),!a.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&(e.manager.onTouchStart(a),e.capture&&a.cancelable&&a.target===t&&a.preventDefault())},this.onTouchStartWindow=function(a){!a.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&a.target!==t&&e.manager.onTouchStart(a)},this.onTouchMove=function(a){!a.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&(e.manager.onTouchMove(a),e.capture&&a.cancelable&&a.preventDefault())},this.onTouchEnd=function(a){!a.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&(e.manager.onTouchEnd(a),e.capture&&a.cancelable&&a.target===t&&a.preventDefault())},this.onTouchEndWindow=function(a){!a.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&a.target!==t&&e.manager.onTouchEnd(a)},this.onTouchCancel=function(a){!a.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&(e.manager.onTouchCancel(a),e.capture&&a.preventDefault())},this.onTouchCancelWindow=function(a){!a.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&e.manager.onTouchCancel(a)},this.onTouchOver=function(a){!a.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&e.manager.setCanvasOver(a)},this.onTouchOut=function(a){!a.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&e.manager.setCanvasOut(a)};var r=this.target;if(!!r){var s={passive:!0},n={passive:!1};r.addEventListener("touchstart",this.onTouchStart,this.capture?n:s),r.addEventListener("touchmove",this.onTouchMove,this.capture?n:s),r.addEventListener("touchend",this.onTouchEnd,this.capture?n:s),r.addEventListener("touchcancel",this.onTouchCancel,this.capture?n:s),r.addEventListener("touchover",this.onTouchOver,this.capture?n:s),r.addEventListener("touchout",this.onTouchOut,this.capture?n:s),window&&this.manager.game.config.inputWindowEvents&&(window.addEventListener("touchstart",this.onTouchStartWindow,n),window.addEventListener("touchend",this.onTouchEndWindow,n),window.addEventListener("touchcancel",this.onTouchCancelWindow,n)),this.enabled=!0}},stopListeners:function(){var e=this.target;e.removeEventListener("touchstart",this.onTouchStart),e.removeEventListener("touchmove",this.onTouchMove),e.removeEventListener("touchend",this.onTouchEnd),e.removeEventListener("touchcancel",this.onTouchCancel),e.removeEventListener("touchover",this.onTouchOver),e.removeEventListener("touchout",this.onTouchOut),window&&(window.removeEventListener("touchstart",this.onTouchStartWindow),window.removeEventListener("touchend",this.onTouchEndWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});x2.exports=gme});var Xc=l((M4e,y2)=>{var xme=_(),Hr=ru(),Tme=se(),ro=Xi(),ou=Ne(),Eme=Bc(),yme=Vc(),T2=kc(),Sme=zc(),E2=dt(),Cme=nh(),Rme=new xme({initialize:function(t,i){this.game=t,this.scaleManager,this.canvas,this.config=i,this.enabled=!0,this.events=new Tme,this.isOver=!0,this.defaultCursor="",this.keyboard=i.inputKeyboard?new Eme(this):null,this.mouse=i.inputMouse?new yme(this):null,this.touch=i.inputTouch?new Sme(this):null,this.pointers=[],this.pointersTotal=i.inputActivePointers,i.inputTouch&&this.pointersTotal===1&&(this.pointersTotal=2);for(var r=0;r<=this.pointersTotal;r++){var s=new T2(this,r);s.smoothFactor=i.inputSmoothFactor,this.pointers.push(s)}this.mousePointer=i.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new E2,this._tempMatrix2=new E2,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],t.events.once(ou.BOOT,this.boot,this)},boot:function(){this.canvas=this.game.canvas,this.scaleManager=this.game.scale,this.events.emit(ro.MANAGER_BOOT),this.game.events.on(ou.PRE_RENDER,this.preRender,this),this.game.events.once(ou.DESTROY,this.destroy,this)},setCanvasOver:function(e){this.isOver=!0,this.events.emit(ro.GAME_OVER,e)},setCanvasOut:function(e){this.isOver=!1,this.events.emit(ro.GAME_OUT,e)},preRender:function(){var e=this.game.loop.now,t=this.game.loop.delta,i=this.game.scene.getScenes(!0,!0);this.time=e,this.events.emit(ro.MANAGER_UPDATE);for(var r=0;r<i.length;r++){var s=i[r];if(s.sys.input&&s.sys.input.updatePoll(e,t)&&this.globalTopOnly)return}},setDefaultCursor:function(e){this.defaultCursor=e,this.canvas.style.cursor!==e&&(this.canvas.style.cursor=e)},setCursor:function(e){e.cursor&&(this.canvas.style.cursor=e.cursor)},resetCursor:function(e){e.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(e){e===void 0&&(e=1);var t=[];this.pointersTotal+e>10&&(e=10-this.pointersTotal);for(var i=0;i<e;i++){var r=this.pointers.length,s=new T2(this,r);s.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(s),this.pointersTotal++,t.push(s)}return t},updateInputPlugins:function(e,t){var i=this.game.scene.getScenes(!0,!0);this._tempSkip=!1;for(var r=0;r<i.length;r++){var s=i[r];if(s.sys.input){var n=s.sys.input.update(e,t);if(n&&this.globalTopOnly||this._tempSkip)return}}},onTouchStart:function(e){for(var t=this.pointers,i=[],r=0;r<e.changedTouches.length;r++)for(var s=e.changedTouches[r],n=1;n<this.pointersTotal;n++){var a=t[n];if(!a.active){a.touchstart(s,e),this.activePointer=a,i.push(a);break}}this.updateInputPlugins(Hr.TOUCH_START,i)},onTouchMove:function(e){for(var t=this.pointers,i=[],r=0;r<e.changedTouches.length;r++)for(var s=e.changedTouches[r],n=1;n<this.pointersTotal;n++){var a=t[n];if(a.active&&a.identifier===s.identifier){a.touchmove(s,e),this.activePointer=a,i.push(a);break}}this.updateInputPlugins(Hr.TOUCH_MOVE,i)},onTouchEnd:function(e){for(var t=this.pointers,i=[],r=0;r<e.changedTouches.length;r++)for(var s=e.changedTouches[r],n=1;n<this.pointersTotal;n++){var a=t[n];if(a.active&&a.identifier===s.identifier){a.touchend(s,e),i.push(a);break}}this.updateInputPlugins(Hr.TOUCH_END,i)},onTouchCancel:function(e){for(var t=this.pointers,i=[],r=0;r<e.changedTouches.length;r++)for(var s=e.changedTouches[r],n=1;n<this.pointersTotal;n++){var a=t[n];if(a.active&&a.identifier===s.identifier){a.touchcancel(s,e),i.push(a);break}}this.updateInputPlugins(Hr.TOUCH_CANCEL,i)},onMouseDown:function(e){var t=this.mousePointer;t.down(e),t.updateMotion(),this.activePointer=t,this.updateInputPlugins(Hr.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(e){var t=this.mousePointer;t.move(e),t.updateMotion(),this.activePointer=t,this.updateInputPlugins(Hr.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(e){var t=this.mousePointer;t.up(e),t.updateMotion(),this.activePointer=t,this.updateInputPlugins(Hr.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(e){var t=this.mousePointer;t.wheel(e),this.activePointer=t,this.updateInputPlugins(Hr.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(e){var t=this.mouse.locked;this.mousePointer.locked=t,this.events.emit(ro.POINTERLOCK_CHANGE,e,t)},inputCandidate:function(e,t){var i=e.input;if(!i||!i.enabled||!i.alwaysEnabled&&!e.willRender(t))return!1;var r=!0,s=e.parentContainer;if(s)do{if(!s.willRender(t)){r=!1;break}s=s.parentContainer}while(s);return r},hitTest:function(e,t,i,r){r===void 0&&(r=this._tempHitTest);var s=this._tempPoint,n=i.scrollX,a=i.scrollY;r.length=0;var o=e.x,h=e.y;i.getWorldPoint(o,h,s),e.worldX=s.x,e.worldY=s.y;for(var u={x:0,y:0},f=this._tempMatrix,d=this._tempMatrix2,v=0;v<t.length;v++){var c=t[v];if(!!this.inputCandidate(c,i)){var p=s.x+n*c.scrollFactorX-n,m=s.y+a*c.scrollFactorY-a;c.parentContainer?(c.getWorldTransformMatrix(f,d),f.applyInverse(p,m,u)):Cme(p,m,c.x,c.y,c.rotation,c.scaleX,c.scaleY,u),this.pointWithinHitArea(c,u.x,u.y)&&r.push(c)}}return r},pointWithinHitArea:function(e,t,i){t+=e.displayOriginX,i+=e.displayOriginY;var r=e.input;return r&&r.hitAreaCallback(r.hitArea,t,i,e)?(r.localX=t,r.localY=i,!0):!1},pointWithinInteractiveObject:function(e,t,i){return e.hitArea?(t+=e.gameObject.displayOriginX,i+=e.gameObject.displayOriginY,e.localX=t,e.localY=i,e.hitAreaCallback(e.hitArea,t,i,e)):!1},transformPointer:function(e,t,i,r){var s=e.position,n=e.prevPosition;n.x=s.x,n.y=s.y;var a=this.scaleManager.transformX(t),o=this.scaleManager.transformY(i),h=e.smoothFactor;!r||h===0?(s.x=a,s.y=o):(s.x=a*h+n.x*(1-h),s.y=o*h+n.y*(1-h))},destroy:function(){this.events.removeAllListeners(),this.game.events.off(ou.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var e=0;e<this.pointers.length;e++)this.pointers[e].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});y2.exports=Rme});var $=l((q4e,S2)=>{var hu={},_me={install:function(e){for(var t in hu)e[t]=hu[t]},register:function(e,t){hu[e]=t},destroy:function(){hu={}}};S2.exports=_me});var Ce=l((O4e,C2)=>{var wme=_(),Pme=rt(),Gn=qe(),jr=new wme({initialize:function(t){this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.displayList,this.updateList,this.events.once(Gn.BOOT,this.boot,this),this.events.on(Gn.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(Gn.DESTROY,this.destroy,this)},start:function(){this.events.once(Gn.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(Gn.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(Gn.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});jr.register=function(e,t){jr.prototype.hasOwnProperty(e)||(jr.prototype[e]=t)};jr.remove=function(e){jr.prototype.hasOwnProperty(e)&&delete jr.prototype[e]};Pme.register("GameObjectCreator",jr,"make");C2.exports=jr});var J=l((L4e,R2)=>{var Ame=_(),bme=rt(),Dn=qe(),Kr=new Ame({initialize:function(t){this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.displayList,this.updateList,this.events.once(Dn.BOOT,this.boot,this),this.events.on(Dn.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(Dn.DESTROY,this.destroy,this)},start:function(){this.events.once(Dn.SHUTDOWN,this.shutdown,this)},existing:function(e){return(e.renderCanvas||e.renderWebGL)&&this.displayList.add(e),e.preUpdate&&this.updateList.add(e),e},shutdown:function(){this.events.off(Dn.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(Dn.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});Kr.register=function(e,t){Kr.prototype.hasOwnProperty(e)||(Kr.prototype[e]=t)};Kr.remove=function(e){Kr.prototype.hasOwnProperty(e)&&delete Kr.prototype[e]};bme.register("GameObjectFactory",Kr,"add");R2.exports=Kr});var Yc=l((F4e,M2)=>{var Mme=_(),_2=Ne(),w2=se(),qme=$(),P2=Ce(),A2=J(),Zr=X(),Wt=rt(),b2=Ds(),Ome=new Mme({Extends:w2,initialize:function(t){w2.call(this),this.game=t,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],t.isBooted?this.boot():t.events.once(_2.BOOT,this.boot,this)},boot:function(){var e,t,i,r,s,n,a,o=this.game.config,h=o.installGlobalPlugins;for(h=h.concat(this._pendingGlobal),e=0;e<h.length;e++)t=h[e],i=Zr(t,"key",null),r=Zr(t,"plugin",null),s=Zr(t,"start",!1),n=Zr(t,"mapping",null),a=Zr(t,"data",null),i&&(r?this.install(i,r,s,n,a):console.warn("Missing `plugin` for key: "+i));for(h=o.installScenePlugins,h=h.concat(this._pendingScene),e=0;e<h.length;e++)t=h[e],i=Zr(t,"key",null),r=Zr(t,"plugin",null),n=Zr(t,"mapping",null),i&&(r?this.installScenePlugin(i,r,n):console.warn("Missing `plugin` for key: "+i));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(_2.DESTROY,this.destroy,this)},addToScene:function(e,t,i){var r,s,n,a=this.game,o=e.scene,h=e.settings.map,u=e.settings.isBooted;for(r=0;r<t.length;r++)s=t[r],a[s]?(e[s]=a[s],h.hasOwnProperty(s)&&(o[h[s]]=e[s])):s==="game"&&h.hasOwnProperty(s)&&(o[h[s]]=a);for(var f=0;f<i.length;f++)for(n=i[f],r=0;r<n.length;r++)if(s=n[r],!!Wt.hasCore(s)){var d=Wt.getCore(s),v=d.mapping,c=new d.plugin(o,this,v);e[v]=c,d.custom?o[v]=c:h.hasOwnProperty(v)&&(o[h[v]]=c),u&&c.boot()}for(n=this.plugins,r=0;r<n.length;r++){var p=n[r];p.mapping&&(o[p.mapping]=p.plugin)}},getDefaultScenePlugins:function(){var e=this.game.config.defaultPlugins;return e=e.concat(this.scenePlugins),e},installScenePlugin:function(e,t,i,r,s){if(s===void 0&&(s=!1),typeof t!="function"){console.warn("Invalid Scene Plugin: "+e);return}if(!Wt.hasCore(e))Wt.register(e,t,i,!0),this.scenePlugins.push(e);else if(!s&&Wt.hasCore(e)){console.warn("Scene Plugin key in use: "+e);return}if(r){var n=new t(r,this,e);r.sys[e]=n,i&&i!==""&&(r[i]=n),n.boot()}},install:function(e,t,i,r,s){if(i===void 0&&(i=!1),r===void 0&&(r=null),s===void 0&&(s=null),typeof t!="function")return console.warn("Invalid Plugin: "+e),null;if(Wt.hasCustom(e))return console.warn("Plugin key in use: "+e),null;if(r!==null&&(i=!0),!this.game.isBooted)this._pendingGlobal.push({key:e,plugin:t,start:i,mapping:r,data:s});else if(Wt.registerCustom(e,t,r,s),i)return this.start(e);return null},getIndex:function(e){for(var t=this.plugins,i=0;i<t.length;i++){var r=t[i];if(r.key===e)return i}return-1},getEntry:function(e){var t=this.getIndex(e);if(t!==-1)return this.plugins[t]},isActive:function(e){var t=this.getEntry(e);return t&&t.active},start:function(e,t){t===void 0&&(t=e);var i=this.getEntry(t);return i&&!i.active?(i.active=!0,i.plugin.start()):i||(i=this.createEntry(e,t)),i?i.plugin:null},createEntry:function(e,t){var i=Wt.getCustom(e);if(i){var r=new i.plugin(this);i={key:t,plugin:r,active:!0,mapping:i.mapping,data:i.data},this.plugins.push(i),r.init(i.data),r.start()}return i},stop:function(e){var t=this.getEntry(e);return t&&t.active&&(t.active=!1,t.plugin.stop()),this},get:function(e,t){t===void 0&&(t=!0);var i=this.getEntry(e);if(i)return i.plugin;var r=this.getClass(e);return r&&t?(i=this.createEntry(e,e),i?i.plugin:null):r||null},getClass:function(e){return Wt.getCustomClass(e)},removeGlobalPlugin:function(e){var t=this.getEntry(e);t&&b2(this.plugins,t),Wt.removeCustom(e)},removeScenePlugin:function(e){b2(this.scenePlugins,e),Wt.remove(e)},registerGameObject:function(e,t,i){return t&&A2.register(e,t),i&&P2.register(e,i),this},removeGameObject:function(e,t,i){return t===void 0&&(t=!0),i===void 0&&(i=!0),t&&A2.remove(e),i&&P2.remove(e),this},registerFileType:function(e,t,i){qme.register(e,t),i&&i.sys.load&&(i.sys.load[e]=t)},destroy:function(){for(var e=0;e<this.plugins.length;e++)this.plugins[e].plugin.destroy();Wt.destroyCustomPlugins(),this.game.noReturn&&Wt.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});M2.exports=Ome});var Wc=l((N4e,q2)=>{var In=Pe(),Lme=_(),Yi=qa(),Fme=le(),wi=new Lme({initialize:function(t,i,r,s){t===void 0&&(t=0),i===void 0&&(i=t),r===void 0&&(r=0),s===void 0&&(s=null),this._width=t,this._height=i,this._parent=s,this.aspectMode=r,this.aspectRatio=i===0?1:t/i,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new Fme},setAspectMode:function(e){return e===void 0&&(e=0),this.aspectMode=e,this.setSize(this._width,this._height)},setSnap:function(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),this.snapTo.set(e,t),this.setSize(this._width,this._height)},setParent:function(e){return this._parent=e,this.setSize(this._width,this._height)},setMin:function(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),this.minWidth=In(e,0,this.maxWidth),this.minHeight=In(t,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(e,t){return e===void 0&&(e=Number.MAX_VALUE),t===void 0&&(t=e),this.maxWidth=In(e,this.minWidth,Number.MAX_VALUE),this.maxHeight=In(t,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(e,t){switch(e===void 0&&(e=0),t===void 0&&(t=e),this.aspectMode){case wi.NONE:this._width=this.getNewWidth(Yi(e,this.snapTo.x)),this._height=this.getNewHeight(Yi(t,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height;break;case wi.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(Yi(e,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case wi.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(Yi(t,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case wi.FIT:this.constrain(e,t,!0);break;case wi.ENVELOP:this.constrain(e,t,!1);break}return this},setAspectRatio:function(e){return this.aspectRatio=e,this.setSize(this._width,this._height)},resize:function(e,t){return this._width=this.getNewWidth(Yi(e,this.snapTo.x)),this._height=this.getNewHeight(Yi(t,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height,this},getNewWidth:function(e,t){return t===void 0&&(t=!0),e=In(e,this.minWidth,this.maxWidth),t&&this._parent&&e>this._parent.width&&(e=Math.max(this.minWidth,this._parent.width)),e},getNewHeight:function(e,t){return t===void 0&&(t=!0),e=In(e,this.minHeight,this.maxHeight),t&&this._parent&&e>this._parent.height&&(e=Math.max(this.minHeight,this._parent.height)),e},constrain:function(e,t,i){e===void 0&&(e=0),t===void 0&&(t=e),i===void 0&&(i=!0),e=this.getNewWidth(e),t=this.getNewHeight(t);var r=this.snapTo,s=t===0?1:e/t;return i&&this.aspectRatio>s||!i&&this.aspectRatio<s?(e=Yi(e,r.x),t=e/this.aspectRatio,r.y>0&&(t=Yi(t,r.y),e=t*this.aspectRatio)):(i&&this.aspectRatio<s||!i&&this.aspectRatio>s)&&(t=Yi(t,r.y),e=t*this.aspectRatio,r.x>0&&(e=Yi(e,r.x),t=e*(1/this.aspectRatio))),this._width=e,this._height=t,this},fitTo:function(e,t){return this.constrain(e,t,!0)},envelop:function(e,t){return this.constrain(e,t,!1)},setWidth:function(e){return this.setSize(e,this._height)},setHeight:function(e){return this.setSize(this._width,e)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(e){e&&e.style&&(e.style.width=this._width+"px",e.style.height=this._height+"px")},copy:function(e){return e.setAspectMode(this.aspectMode),e.aspectRatio=this.aspectRatio,e.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(e){this.setSize(e,this._height)}},height:{get:function(){return this._height},set:function(e){this.setSize(this._width,e)}}});wi.NONE=0;wi.WIDTH_CONTROLS_HEIGHT=1;wi.HEIGHT_CONTROLS_WIDTH=2;wi.FIT=3;wi.ENVELOP=4;q2.exports=wi});var Hc=l((G4e,G2)=>{var qt=Qh(),Nme=_(),O2=se(),Ws=Tn(),uu=Ne(),Gme=wc(),L2=Oc(),F2=qc(),lu=B(),Dme=ye(),fu=Wc(),N2=qa(),Ime=le(),Bme=new Nme({Extends:O2,initialize:function(t){O2.call(this),this.game=t,this.canvas,this.canvasBounds=new Dme,this.parent=null,this.parentIsWindow=!1,this.parentSize=new fu,this.gameSize=new fu,this.baseSize=new fu,this.displaySize=new fu,this.scaleMode=qt.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new Ime(1,1),this.autoRound=!1,this.autoCenter=qt.CENTER.NO_CENTER,this.orientation=qt.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.listeners={orientationChange:lu,windowResize:lu,fullScreenChange:lu,fullScreenError:lu}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(uu.BOOT,this.boot,this)},boot:function(){var e=this.game;this.canvas=e.canvas,this.fullscreen=e.device.fullscreen,this.scaleMode!==qt.SCALE_MODE.RESIZE&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===qt.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),e.events.on(uu.PRE_STEP,this.step,this),e.events.once(uu.READY,this.refresh,this),e.events.once(uu.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(e){this.getParent(e),this.getParentBounds();var t=e.width,i=e.height,r=e.scaleMode,s=e.zoom,n=e.autoRound;if(typeof t=="string"){var a=this.parentSize.width;a===0&&(a=window.innerWidth);var o=parseInt(t,10)/100;t=Math.floor(a*o)}if(typeof i=="string"){var h=this.parentSize.height;h===0&&(h=window.innerHeight);var u=parseInt(i,10)/100;i=Math.floor(h*u)}this.scaleMode=r,this.autoRound=n,this.autoCenter=e.autoCenter,this.resizeInterval=e.resizeInterval,n&&(t=Math.floor(t),i=Math.floor(i)),this.gameSize.setSize(t,i),s===qt.ZOOM.MAX_ZOOM&&(s=this.getMaxZoom()),this.zoom=s,s!==1&&(this._resetZoom=!0),this.baseSize.setSize(t,i),n&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),e.minWidth>0&&this.displaySize.setMin(e.minWidth*s,e.minHeight*s),e.maxWidth>0&&this.displaySize.setMax(e.maxWidth*s,e.maxHeight*s),this.displaySize.setSize(t,i),this.orientation=F2(t,i)},getParent:function(e){var t=e.parent;if(t!==null){if(this.parent=L2(t),this.parentIsWindow=this.parent===document.body,e.expandParent&&e.scaleMode!==qt.SCALE_MODE.NONE){var i=this.parent.getBoundingClientRect();(this.parentIsWindow||i.height===0)&&(document.documentElement.style.height="100%",document.body.style.height="100%",i=this.parent.getBoundingClientRect(),!this.parentIsWindow&&i.height===0&&(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}e.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=L2(e.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var e=this.parentSize,t=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(t.height=Gme(!0));var i=t.width,r=t.height;return e.width!==i||e.height!==r?(e.setSize(i,r),!0):!1},lockOrientation:function(e){var t=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return t?t.call(screen,e):!1},setParentSize:function(e,t){return this.parentSize.setSize(e,t),this.refresh()},setGameSize:function(e,t){var i=this.autoRound;i&&(e=Math.floor(e),t=Math.floor(t));var r=this.width,s=this.height;return this.gameSize.resize(e,t),this.baseSize.resize(e,t),i&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(e/t),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(r,s)},resize:function(e,t){var i=this.zoom,r=this.autoRound;r&&(e=Math.floor(e),t=Math.floor(t));var s=this.width,n=this.height;this.gameSize.resize(e,t),this.baseSize.resize(e,t),r&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(e*i,t*i),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var a=this.canvas.style,o=e*i,h=t*i;return r&&(o=Math.floor(o),h=Math.floor(h)),(o!==e||h!==t)&&(a.width=o+"px",a.height=h+"px"),this.refresh(s,n)},setZoom:function(e){return this.zoom=e,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},refresh:function(e,t){e===void 0&&(e=this.width),t===void 0&&(t=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var i=this.game.domContainer;if(i){this.baseSize.setCSS(i);var r=this.canvas.style,s=i.style;s.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",s.marginLeft=r.marginLeft,s.marginTop=r.marginTop}return this.emit(Ws.RESIZE,this.gameSize,this.baseSize,this.displaySize,e,t),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var e=F2(this.width,this.height);e!==this.orientation&&(this.orientation=e,this.emit(Ws.ORIENTATION_CHANGE,e))}},updateScale:function(){var e=this.canvas.style,t=this.gameSize.width,i=this.gameSize.height,r,s,n=this.zoom,a=this.autoRound;this.scaleMode===qt.SCALE_MODE.NONE?(this.displaySize.setSize(t*n,i*n),r=this.displaySize.width,s=this.displaySize.height,a&&(r=Math.floor(r),s=Math.floor(s)),this._resetZoom&&(e.width=r+"px",e.height=s+"px",this._resetZoom=!1)):this.scaleMode===qt.SCALE_MODE.RESIZE?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),r=this.displaySize.width,s=this.displaySize.height,a&&(r=Math.floor(r),s=Math.floor(s)),this.canvas.width=r,this.canvas.height=s):(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),r=this.displaySize.width,s=this.displaySize.height,a&&(r=Math.floor(r),s=Math.floor(s)),e.width=r+"px",e.height=s+"px"),this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var e=N2(this.parentSize.width,this.gameSize.width,0,!0),t=N2(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(e,t),1)},updateCenter:function(){var e=this.autoCenter;if(e!==qt.CENTER.NO_CENTER){var t=this.canvas,i=t.style,r=t.getBoundingClientRect(),s=r.width,n=r.height,a=Math.floor((this.parentSize.width-s)/2),o=Math.floor((this.parentSize.height-n)/2);e===qt.CENTER.CENTER_HORIZONTALLY?o=0:e===qt.CENTER.CENTER_VERTICALLY&&(a=0),i.marginLeft=a+"px",i.marginTop=o+"px"}},updateBounds:function(){var e=this.canvasBounds,t=this.canvas.getBoundingClientRect();e.x=t.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),e.y=t.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),e.width=t.width,e.height=t.height},transformX:function(e){return(e-this.canvasBounds.left)*this.displayScale.x},transformY:function(e){return(e-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(e){e===void 0&&(e={navigationUI:"hide"});var t=this.fullscreen;if(!t.available){this.emit(Ws.FULLSCREEN_UNSUPPORTED);return}if(!t.active){var i=this.getFullscreenTarget();t.keyboard?i[t.request](Element.ALLOW_KEYBOARD_INPUT):i[t.request](e)}},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(Ws.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(e){this.removeFullscreenTarget(),this.emit(Ws.FULLSCREEN_FAILED,e)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var e=document.createElement("div");e.style.margin="0",e.style.padding="0",e.style.width="100%",e.style.height="100%",this.fullscreenTarget=e,this._createdFullscreenTarget=!0}if(this._createdFullscreenTarget){var t=this.canvas.parentNode;t.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)}return this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var e=this.fullscreenTarget;if(e&&e.parentNode){var t=e.parentNode;t.insertBefore(this.canvas,e),t.removeChild(e)}}},stopFullscreen:function(){var e=this.fullscreen;if(!e.available)return this.emit(Ws.FULLSCREEN_UNSUPPORTED),!1;e.active&&document[e.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(Ws.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(e){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(e)},startListeners:function(){var e=this,t=this.listeners;if(t.orientationChange=function(){e.updateBounds(),e._checkOrientation=!0,e.dirty=!0},t.windowResize=function(){e.updateBounds(),e.dirty=!0},window.addEventListener("orientationchange",t.orientationChange,!1),window.addEventListener("resize",t.windowResize,!1),this.fullscreen.available){t.fullScreenChange=function(r){return e.onFullScreenChange(r)},t.fullScreenError=function(r){return e.onFullScreenError(r)};var i=["webkit","moz",""];i.forEach(function(r){document.addEventListener(r+"fullscreenchange",t.fullScreenChange,!1),document.addEventListener(r+"fullscreenerror",t.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",t.fullScreenChange,!1),document.addEventListener("MSFullscreenError",t.fullScreenError,!1)}},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function(){this.removeFullscreenTarget()},step:function(e,t){!this.parent||(this._lastCheck+=t,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var e=this.listeners;window.removeEventListener("orientationchange",e.orientationChange,!1),window.removeEventListener("resize",e.windowResize,!1);var t=["webkit","moz",""];t.forEach(function(i){document.removeEventListener(i+"fullscreenchange",e.fullScreenChange,!1),document.removeEventListener(i+"fullscreenerror",e.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",e.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",e.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===qt.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===qt.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});G2.exports=Bme});var so=l((D4e,D2)=>{var Vme={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9};D2.exports=Vme});var B2=l((I4e,I2)=>{I2.exports="addfile"});var U2=l((B4e,V2)=>{V2.exports="complete"});var z2=l((V4e,k2)=>{k2.exports="filecomplete"});var Y2=l((U4e,X2)=>{X2.exports="filecomplete-"});var H2=l((k4e,W2)=>{W2.exports="loaderror"});var K2=l((z4e,j2)=>{j2.exports="load"});var J2=l((X4e,Z2)=>{Z2.exports="fileprogress"});var $2=l((Y4e,Q2)=>{Q2.exports="postprocess"});var tD=l((W4e,eD)=>{eD.exports="progress"});var rD=l((H4e,iD)=>{iD.exports="start"});var Hs=l((j4e,sD)=>{sD.exports={ADD:B2(),COMPLETE:U2(),FILE_COMPLETE:z2(),FILE_KEY_COMPLETE:Y2(),FILE_LOAD_ERROR:H2(),FILE_LOAD:K2(),FILE_PROGRESS:J2(),POST_PROCESS:$2(),PROGRESS:tD(),START:rD()}});var du=l((K4e,nD)=>{var Ume=function(e){return e&&e[0].toUpperCase()+e.slice(1)};nD.exports=Ume});var jc=l((Z4e,oD)=>{var kme=X(),aD=du(),zme=function(e){var t=e.game.config.defaultPhysicsSystem,i=kme(e.settings,"physics",!1);if(!(!t&&!i)){var r=[];if(t&&r.push(aD(t+"Physics")),i)for(var s in i)s=aD(s.concat("Physics")),r.indexOf(s)===-1&&r.push(s);return r}};oD.exports=zme});var Kc=l((J4e,hD)=>{var Xme=X(),Yme=function(e){var t=e.plugins.getDefaultScenePlugins(),i=Xme(e.settings,"plugins",!1);return Array.isArray(i)?i:t||[]};hD.exports=Yme});var Jr=l((Q4e,uD)=>{var Wme=function(e){var t={};for(var i in e)Array.isArray(e[i])?t[i]=e[i].slice(0):t[i]=e[i];return t};uD.exports=Wme});var Zc=l(($4e,lD)=>{var Hme=Jr(),jme=function(e,t){var i=Hme(e);for(var r in t)i.hasOwnProperty(r)||(i[r]=t[r]);return i};lD.exports=jme});var dD=l((e9e,fD)=>{var Jc={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"};Jc.cameras3d="cameras3d";Jc.facebook="facebook";fD.exports=Jc});var Qc=l((t9e,vD)=>{var Kme=so(),Pi=ie(),Zme=Zc(),Jme=dD(),Qme={create:function(e){return typeof e=="string"?e={key:e}:e===void 0&&(e={}),{status:Kme.PENDING,key:Pi(e,"key",""),active:Pi(e,"active",!1),visible:Pi(e,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:Pi(e,"pack",!1),cameras:Pi(e,"cameras",null),map:Pi(e,"map",Zme(Jme,Pi(e,"mapAdd",{}))),physics:Pi(e,"physics",{}),loader:Pi(e,"loader",{}),plugins:Pi(e,"plugins",!1),input:Pi(e,"input",{})}}};vD.exports=Qme});var vu=l((i9e,mD)=>{var $me=_(),Ai=so(),cD=oh(),Xe=qe(),ege=jc(),tge=Kc(),ige=Ut(),pD=B(),rge=Qc(),sge=new $me({initialize:function(t,i){this.scene=t,this.game,this.renderer,this.facebook,this.config=i,this.settings=rge.create(i),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=pD},init:function(e){this.settings.status=Ai.INIT,this.sceneUpdate=pD,this.game=e,this.renderer=e.renderer,this.canvas=e.canvas,this.context=e.context;var t=e.plugins;this.plugins=t,t.addToScene(this,cD.Global,[cD.CoreScene,tge(this),ege(this)]),this.events.emit(Xe.BOOT,this),this.settings.isBooted=!0},step:function(e,t){var i=this.events;i.emit(Xe.PRE_UPDATE,e,t),i.emit(Xe.UPDATE,e,t),this.sceneUpdate.call(this.scene,e,t),i.emit(Xe.POST_UPDATE,e,t)},render:function(e){var t=this.displayList;t.depthSort(),this.events.emit(Xe.PRE_RENDER,e),this.cameras.render(e,t),this.events.emit(Xe.RENDER,e)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(e){var t=this.events,i=this.settings;return this.settings.active&&(i.status=Ai.PAUSED,i.active=!1,t.emit(Xe.PAUSE,this,e)),this},resume:function(e){var t=this.events,i=this.settings;return this.settings.active||(i.status=Ai.RUNNING,i.active=!0,t.emit(Xe.RESUME,this,e)),this},sleep:function(e){var t=this.events,i=this.settings;return i.status=Ai.SLEEPING,i.active=!1,i.visible=!1,t.emit(Xe.SLEEP,this,e),this},wake:function(e){var t=this.events,i=this.settings;return i.status=Ai.RUNNING,i.active=!0,i.visible=!0,t.emit(Xe.WAKE,this,e),i.isTransition&&t.emit(Xe.TRANSITION_WAKE,i.transitionFrom,i.transitionDuration),this},getData:function(){return this.settings.data},isSleeping:function(){return this.settings.status===Ai.SLEEPING},isActive:function(){return this.settings.status===Ai.RUNNING},isPaused:function(){return this.settings.status===Ai.PAUSED},isTransitioning:function(){return this.settings.isTransition||this.scenePlugin._target!==null},isTransitionOut:function(){return this.scenePlugin._target!==null&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(e){return this.settings.visible=e,this},setActive:function(e,t){return e?this.resume(t):this.pause(t)},start:function(e){var t=this.events,i=this.settings;e&&(i.data=e),i.status=Ai.START,i.active=!0,i.visible=!0,t.emit(Xe.START,this),t.emit(Xe.READY,this,e)},shutdown:function(e){var t=this.events,i=this.settings;t.off(Xe.TRANSITION_INIT),t.off(Xe.TRANSITION_START),t.off(Xe.TRANSITION_COMPLETE),t.off(Xe.TRANSITION_OUT),i.status=Ai.SHUTDOWN,i.active=!1,i.visible=!1,this.renderer===ige.WEBGL&&this.renderer.resetTextures(!0),t.emit(Xe.SHUTDOWN,this,e)},destroy:function(){var e=this.events,t=this.settings;t.status=Ai.DESTROYED,t.active=!1,t.visible=!1,e.emit(Xe.DESTROY,this),e.removeAllListeners();for(var i=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],r=0;r<i.length;r++)this[i[r]]=null}});mD.exports=sge});var $c=l((r9e,gD)=>{var nge=_(),age=vu(),oge=new nge({initialize:function(t){this.sys=new age(this,t),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.facebook,this.scale,this.plugins,this.renderer},update:function(){}});gD.exports=oge});var tp=l((s9e,TD)=>{var hge=_(),ui=so(),ep=qe(),uge=Ne(),lge=ie(),xD=Hs(),cu=B(),no=$c(),fge=vu(),dge=new hge({initialize:function(t,i){if(this.game=t,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,i){Array.isArray(i)||(i=[i]);for(var r=0;r<i.length;r++)this._pending.push({key:"default",scene:i[r],autoStart:r===0,data:{}})}t.events.once(uge.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){var e,t,i,r;for(e=0;e<this._pending.length;e++){t=this._pending[e],i=t.key,r=t.scene;var s;r instanceof no?s=this.createSceneFromInstance(i,r):typeof r=="object"?s=this.createSceneFromObject(i,r):typeof r=="function"&&(s=this.createSceneFromFunction(i,r)),i=s.sys.settings.key,this.keys[i]=s,this.scenes.push(s),this._data[i]&&(s.sys.settings.data=this._data[i].data,this._data[i].autoStart&&(t.autoStart=!0)),(t.autoStart||s.sys.settings.active)&&this._start.push(i)}for(this._pending.length=0,this._data={},this.isBooted=!0,e=0;e<this._start.length;e++)t=this._start[e],this.start(t);this._start.length=0}},processQueue:function(){var e=this._pending.length,t=this._queue.length;if(!(e===0&&t===0)){var i,r;if(e){for(i=0;i<e;i++)r=this._pending[i],this.add(r.key,r.scene,r.autoStart,r.data);for(i=0;i<this._start.length;i++)r=this._start[i],this.start(r);this._start.length=0,this._pending.length=0;return}for(i=0;i<this._queue.length;i++)r=this._queue[i],this[r.op](r.keyA,r.keyB);this._queue.length=0}},add:function(e,t,i,r){if(i===void 0&&(i=!1),r===void 0&&(r={}),this.isProcessing||!this.isBooted)return this._pending.push({key:e,scene:t,autoStart:i,data:r}),this.isBooted||(this._data[e]={data:r}),null;e=this.getKey(e,t);var s;return t instanceof no?s=this.createSceneFromInstance(e,t):typeof t=="object"?(t.key=e,s=this.createSceneFromObject(e,t)):typeof t=="function"&&(s=this.createSceneFromFunction(e,t)),s.sys.settings.data=r,e=s.sys.settings.key,this.keys[e]=s,this.scenes.push(s),(i||s.sys.settings.active)&&(this._pending.length?this._start.push(e):this.start(e)),s},remove:function(e){if(this.isProcessing)this._queue.push({op:"remove",keyA:e,keyB:null});else{var t=this.getScene(e);if(!t||t.sys.isTransitioning())return this;var i=this.scenes.indexOf(t),r=t.sys.settings.key;i>-1&&(delete this.keys[r],this.scenes.splice(i,1),this._start.indexOf(r)>-1&&(i=this._start.indexOf(r),this._start.splice(i,1)),t.sys.destroy())}return this},bootScene:function(e){var t=e.sys,i=t.settings;t.sceneUpdate=cu,e.init&&(e.init.call(e,i.data),i.status=ui.INIT,i.isTransition&&t.events.emit(ep.TRANSITION_INIT,i.transitionFrom,i.transitionDuration));var r;t.load&&(r=t.load,r.reset()),r&&e.preload?(e.preload.call(e),r.list.size===0?this.create(e):(i.status=ui.LOADING,r.once(xD.COMPLETE,this.loadComplete,this),r.start())):this.create(e)},loadComplete:function(e){this.create(e.scene)},payloadComplete:function(e){this.bootScene(e.scene)},update:function(e,t){this.processQueue(),this.isProcessing=!0;for(var i=this.scenes.length-1;i>=0;i--){var r=this.scenes[i].sys;r.settings.status>ui.START&&r.settings.status<=ui.RUNNING&&r.step(e,t)}},render:function(e){for(var t=0;t<this.scenes.length;t++){var i=this.scenes[t].sys;i.settings.visible&&i.settings.status>=ui.LOADING&&i.settings.status<ui.SLEEPING&&i.render(e)}this.isProcessing=!1},create:function(e){var t=e.sys,i=t.settings;e.create&&(i.status=ui.CREATING,e.create.call(e,i.data),i.status===ui.DESTROYED)||(i.isTransition&&t.events.emit(ep.TRANSITION_START,i.transitionFrom,i.transitionDuration),e.update&&(t.sceneUpdate=e.update),i.status=ui.RUNNING,t.events.emit(ep.CREATE,e))},createSceneFromFunction:function(e,t){var i=new t;if(i instanceof no){var r=i.sys.settings.key;if(r!==""&&(e=r),this.keys.hasOwnProperty(e))throw new Error("Cannot add a Scene with duplicate key: "+e);return this.createSceneFromInstance(e,i)}else return i.sys=new fge(i),i.sys.settings.key=e,i.sys.init(this.game),i},createSceneFromInstance:function(e,t){var i=t.sys.settings.key;return i===""&&(t.sys.settings.key=e),t.sys.init(this.game),t},createSceneFromObject:function(e,t){var i=new no(t),r=i.sys.settings.key;r!==""?e=r:i.sys.settings.key=e,i.sys.init(this.game);for(var s=["init","preload","create","update","render"],n=0;n<s.length;n++){var a=lge(t,s[n],null);a&&(i[s[n]]=a)}if(t.hasOwnProperty("extend")){for(var o in t.extend)if(!!t.extend.hasOwnProperty(o)){var h=t.extend[o];o==="data"&&i.hasOwnProperty("data")&&typeof h=="object"?i.data.merge(h):o!=="sys"&&(i[o]=h)}}return i},getKey:function(e,t){if(e||(e="default"),typeof t=="function")return e;if(t instanceof no?e=t.sys.settings.key:typeof t=="object"&&t.hasOwnProperty("key")&&(e=t.key),this.keys.hasOwnProperty(e))throw new Error("Cannot add a Scene with duplicate key: "+e);return e},getScenes:function(e,t){e===void 0&&(e=!0),t===void 0&&(t=!1);for(var i=[],r=this.scenes,s=0;s<r.length;s++){var n=r[s];n&&(!e||e&&n.sys.isActive())&&i.push(n)}return t?i.reverse():i},getScene:function(e){if(typeof e=="string"){if(this.keys[e])return this.keys[e]}else for(var t=0;t<this.scenes.length;t++)if(e===this.scenes[t])return e;return null},isActive:function(e){var t=this.getScene(e);return t?t.sys.isActive():null},isPaused:function(e){var t=this.getScene(e);return t?t.sys.isPaused():null},isVisible:function(e){var t=this.getScene(e);return t?t.sys.isVisible():null},isSleeping:function(e){var t=this.getScene(e);return t?t.sys.isSleeping():null},pause:function(e,t){var i=this.getScene(e);return i&&i.sys.pause(t),this},resume:function(e,t){var i=this.getScene(e);return i&&i.sys.resume(t),this},sleep:function(e,t){var i=this.getScene(e);return i&&!i.sys.isTransitioning()&&i.sys.sleep(t),this},wake:function(e,t){var i=this.getScene(e);return i&&i.sys.wake(t),this},run:function(e,t){var i=this.getScene(e);if(!i){for(var r=0;r<this._pending.length;r++)if(this._pending[r].key===e){this.queueOp("start",e,t);break}return this}i.sys.isSleeping()?i.sys.wake(t):i.sys.isPaused()?i.sys.resume(t):this.start(e,t)},start:function(e,t){if(!this.isBooted)return this._data[e]={autoStart:!0,data:t},this;var i=this.getScene(e);if(i){var r=i.sys;if(r.isActive()||r.isPaused())r.shutdown(),r.sceneUpdate=cu,r.start(t);else{r.sceneUpdate=cu,r.start(t);var s;if(r.load&&(s=r.load),s&&r.settings.hasOwnProperty("pack")&&(s.reset(),s.addPack({payload:r.settings.pack})))return r.settings.status=ui.LOADING,s.once(xD.COMPLETE,this.payloadComplete,this),s.start(),this}this.bootScene(i)}return this},stop:function(e,t){var i=this.getScene(e);return i&&!i.sys.isTransitioning()&&i.sys.shutdown(t),this},switch:function(e,t){var i=this.getScene(e),r=this.getScene(t);return i&&r&&i!==r&&(this.sleep(e),this.isSleeping(t)?this.wake(t):this.start(t)),this},getAt:function(e){return this.scenes[e]},getIndex:function(e){var t=this.getScene(e);return this.scenes.indexOf(t)},bringToTop:function(e){if(this.isProcessing)this._queue.push({op:"bringToTop",keyA:e,keyB:null});else{var t=this.getIndex(e);if(t!==-1&&t<this.scenes.length){var i=this.getScene(e);this.scenes.splice(t,1),this.scenes.push(i)}}return this},sendToBack:function(e){if(this.isProcessing)this._queue.push({op:"sendToBack",keyA:e,keyB:null});else{var t=this.getIndex(e);if(t!==-1&&t>0){var i=this.getScene(e);this.scenes.splice(t,1),this.scenes.unshift(i)}}return this},moveDown:function(e){if(this.isProcessing)this._queue.push({op:"moveDown",keyA:e,keyB:null});else{var t=this.getIndex(e);if(t>0){var i=t-1,r=this.getScene(e),s=this.getAt(i);this.scenes[t]=s,this.scenes[i]=r}}return this},moveUp:function(e){if(this.isProcessing)this._queue.push({op:"moveUp",keyA:e,keyB:null});else{var t=this.getIndex(e);if(t<this.scenes.length-1){var i=t+1,r=this.getScene(e),s=this.getAt(i);this.scenes[t]=s,this.scenes[i]=r}}return this},moveAbove:function(e,t){if(e===t)return this;if(this.isProcessing)this._queue.push({op:"moveAbove",keyA:e,keyB:t});else{var i=this.getIndex(e),r=this.getIndex(t);if(i!==-1&&r!==-1){var s=this.getAt(r);this.scenes.splice(r,1),this.scenes.splice(i+1,0,s)}}return this},moveBelow:function(e,t){if(e===t)return this;if(this.isProcessing)this._queue.push({op:"moveBelow",keyA:e,keyB:t});else{var i=this.getIndex(e),r=this.getIndex(t);if(i!==-1&&r!==-1){var s=this.getAt(r);this.scenes.splice(r,1),i===0?this.scenes.unshift(s):this.scenes.splice(i,0,s)}}return this},queueOp:function(e,t,i){return this._queue.push({op:e,keyA:t,keyB:i}),this},swapPosition:function(e,t){if(e===t)return this;if(this.isProcessing)this._queue.push({op:"swapPosition",keyA:e,keyB:t});else{var i=this.getIndex(e),r=this.getIndex(t);if(i!==r&&i!==-1&&r!==-1){var s=this.getAt(i);this.scenes[i]=this.scenes[r],this.scenes[r]=s}}return this},dump:function(){for(var e=[],t=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],i=0;i<this.scenes.length;i++){var r=this.scenes[i].sys,s=r.settings.visible&&(r.settings.status===ui.RUNNING||r.settings.status===ui.PAUSED)?"[*] ":"[-] ";s+=r.settings.key+" ("+t[r.settings.status]+")",e.push(s)}console.log(e.join(`
`))},destroy:function(){for(var e=0;e<this.scenes.length;e++){var t=this.scenes[e].sys;t.destroy()}this.update=cu,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null}});TD.exports=dge});var Vn=l((n9e,yD)=>{var vge=_(),Bn=Pe(),cge=Fe(),ED=new vge({initialize:function(t,i,r,s,n,a,o){this.texture=t,this.name=i,this.source=t.source[r],this.sourceIndex=r,this.glTexture=this.source.glTexture,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0}},this.setSize(a,o,s,n)},setSize:function(e,t,i,r){i===void 0&&(i=0),r===void 0&&(r=0),this.cutX=i,this.cutY=r,this.cutWidth=e,this.cutHeight=t,this.width=e,this.height=t,this.halfWidth=Math.floor(e*.5),this.halfHeight=Math.floor(t*.5),this.centerX=Math.floor(e/2),this.centerY=Math.floor(t/2);var s=this.data,n=s.cut;n.x=i,n.y=r,n.w=e,n.h=t,n.r=i+e,n.b=r+t,s.sourceSize.w=e,s.sourceSize.h=t,s.spriteSourceSize.w=e,s.spriteSourceSize.h=t,s.radius=.5*Math.sqrt(e*e+t*t);var a=s.drawImage;return a.x=i,a.y=r,a.width=e,a.height=t,this.updateUVs()},setTrim:function(e,t,i,r,s,n){var a=this.data,o=a.spriteSourceSize;return a.trim=!0,a.sourceSize.w=e,a.sourceSize.h=t,o.x=i,o.y=r,o.w=s,o.h=n,o.r=i+s,o.b=r+n,this.x=i,this.y=r,this.width=s,this.height=n,this.halfWidth=s*.5,this.halfHeight=n*.5,this.centerX=Math.floor(s/2),this.centerY=Math.floor(n/2),this.updateUVs()},setCropUVs:function(e,t,i,r,s,n,a){var o=this.cutX,h=this.cutY,u=this.cutWidth,f=this.cutHeight,d=this.realWidth,v=this.realHeight;t=Bn(t,0,d),i=Bn(i,0,v),r=Bn(r,0,d-t),s=Bn(s,0,v-i);var c=o+t,p=h+i,m=r,g=s,x=this.data;if(x.trim){var T=x.spriteSourceSize;r=Bn(r,0,u-t),s=Bn(s,0,f-i);var E=t+r,R=i+s,y=!(T.r<t||T.b<i||T.x>E||T.y>R);if(y){var C=Math.max(T.x,t),S=Math.max(T.y,i),w=Math.min(T.r,E)-C,P=Math.min(T.b,R)-S;m=w,g=P,n?c=o+(u-(C-T.x)-w):c=o+(C-T.x),a?p=h+(f-(S-T.y)-P):p=h+(S-T.y),t=C,i=S,r=w,s=P}else c=0,p=0,m=0,g=0}else n&&(c=o+(u-t-r)),a&&(p=h+(f-i-s));var A=this.source.width,M=this.source.height;return e.u0=Math.max(0,c/A),e.v0=Math.max(0,p/M),e.u1=Math.min(1,(c+m)/A),e.v1=Math.min(1,(p+g)/M),e.x=t,e.y=i,e.cx=c,e.cy=p,e.cw=m,e.ch=g,e.width=r,e.height=s,e.flipX=n,e.flipY=a,e},updateCropUVs:function(e,t,i){return this.setCropUVs(e,e.x,e.y,e.width,e.height,t,i)},setUVs:function(e,t,i,r,s,n){var a=this.data.drawImage;return a.width=e,a.height=t,this.u0=i,this.v0=r,this.u1=s,this.v1=n,this},updateUVs:function(){var e=this.cutX,t=this.cutY,i=this.cutWidth,r=this.cutHeight,s=this.data.drawImage;s.width=i,s.height=r;var n=this.source.width,a=this.source.height;return this.u0=e/n,this.v0=t/a,this.u1=(e+i)/n,this.v1=(t+r)/a,this},updateUVsInverted:function(){var e=this.source.width,t=this.source.height;return this.u0=(this.cutX+this.cutHeight)/e,this.v0=this.cutY/t,this.u1=this.cutX/e,this.v1=(this.cutY+this.cutWidth)/t,this},clone:function(){var e=new ED(this.texture,this.name,this.sourceIndex);return e.cutX=this.cutX,e.cutY=this.cutY,e.cutWidth=this.cutWidth,e.cutHeight=this.cutHeight,e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e.halfWidth=this.halfWidth,e.halfHeight=this.halfHeight,e.centerX=this.centerX,e.centerY=this.centerY,e.rotated=this.rotated,e.data=cge(!0,e.data,this.data),e.updateUVs(),e},destroy:function(){this.source=null,this.texture=null,this.glTexture=null,this.customData=null,this.data=null},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},canvasData:{get:function(){return this.data.drawImage}}});yD.exports=ED});var ip=l((a9e,SD)=>{var pge=Et(),mge=_(),gge=Ma(),xge=Cf(),Tge=new mge({initialize:function(t,i,r,s,n){n===void 0&&(n=!1);var a=t.manager.game;this.renderer=a.renderer,this.texture=t,this.source=i,this.image=i,this.compressionAlgorithm=null,this.resolution=1,this.width=r||i.naturalWidth||i.videoWidth||i.width||0,this.height=s||i.naturalHeight||i.videoHeight||i.height||0,this.scaleMode=xge.DEFAULT,this.isCanvas=i instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&i instanceof HTMLVideoElement,this.isRenderTexture=i.type==="RenderTexture",this.isGLTexture=window.hasOwnProperty("WebGLTexture")&&i instanceof WebGLTexture,this.isPowerOf2=gge(this.width,this.height),this.glTexture=null,this.glIndex=0,this.glIndexCounter=-1,this.flipY=n,this.init(a)},init:function(e){var t=this.renderer;t&&(t.gl?this.isCanvas?this.glTexture=t.createCanvasTexture(this.image,!1,this.flipY):this.isVideo?this.glTexture=t.createVideoTexture(this.image,!1,this.flipY):this.isRenderTexture?(this.image=this.source.canvas,this.glTexture=t.createTextureFromSource(null,this.width,this.height,this.scaleMode)):this.isGLTexture?this.glTexture=this.source:this.glTexture=t.createTextureFromSource(this.image,this.width,this.height,this.scaleMode):this.isRenderTexture&&(this.image=this.source.canvas)),e.config.antialias||this.setFilter(1)},setFilter:function(e){this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,e),this.scaleMode=e},setFlipY:function(e){return e===void 0&&(e=!0),this.flipY=e,this},update:function(){var e=this.renderer.gl;e&&this.isCanvas?this.glTexture=this.renderer.updateCanvasTexture(this.image,this.glTexture,this.flipY):e&&this.isVideo&&(this.glTexture=this.renderer.updateVideoTexture(this.image,this.glTexture,this.flipY))},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture,!0),this.isCanvas&&pge.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});SD.exports=Tge});var pu=l((o9e,RD)=>{var Ege=Ut(),yge=_(),Sge=Vn(),CD=ip(),rp="Texture.frame missing: ",Cge=new yge({initialize:function(t,i,r,s,n){Array.isArray(r)||(r=[r]),this.manager=t,this.key=i,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var a=0;a<r.length;a++)this.source.push(new CD(this,r[a],s,n))},add:function(e,t,i,r,s,n){if(this.has(e))return null;var a=new Sge(this,e,t,i,r,s,n);return this.frames[e]=a,this.firstFrame==="__BASE"&&(this.firstFrame=e),this.frameTotal++,a},remove:function(e){if(this.has(e)){var t=this.get(e);return t.destroy(),delete this.frames[e],!0}return!1},has:function(e){return this.frames[e]},get:function(e){e||(e=this.firstFrame);var t=this.frames[e];return t||(console.warn(rp+e),t=this.frames[this.firstFrame]),t},getTextureSourceIndex:function(e){for(var t=0;t<this.source.length;t++)if(this.source[t]===e)return t;return-1},getFramesFromTextureSource:function(e,t){t===void 0&&(t=!1);var i=[];for(var r in this.frames)if(!(r==="__BASE"&&!t)){var s=this.frames[r];s.sourceIndex===e&&i.push(s)}return i},getFrameNames:function(e){e===void 0&&(e=!1);var t=Object.keys(this.frames);if(!e){var i=t.indexOf("__BASE");i!==-1&&t.splice(i,1)}return t},getSourceImage:function(e){(e==null||this.frameTotal===1)&&(e="__BASE");var t=this.frames[e];return t?t.source.image:(console.warn(rp+e),this.frames.__BASE.source.image)},getDataSourceImage:function(e){(e==null||this.frameTotal===1)&&(e="__BASE");var t=this.frames[e],i;return t?i=t.sourceIndex:(console.warn(rp+e),i=this.frames.__BASE.sourceIndex),this.dataSource[i].image},setDataSource:function(e){Array.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++){var i=this.source[t];this.dataSource.push(new CD(this,e[t],i.width,i.height))}},setFilter:function(e){var t;for(t=0;t<this.source.length;t++)this.source[t].setFilter(e);for(t=0;t<this.dataSource.length;t++)this.dataSource[t].setFilter(e)},destroy:function(){var e;for(e=0;e<this.source.length;e++)this.source[e].destroy();for(e=0;e<this.dataSource.length;e++)this.dataSource[e].destroy();for(var t in this.frames){var i=this.frames[t];i.destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key);var r=this.manager.game.renderer;r&&r.type===Ege.WEBGL&&r.resetTextures(!0),this.manager=null}});RD.exports=Cge});var np=l((h9e,wD)=>{var Rge=_(),Qr=Pe(),_D=ni(),_ge=Ut(),wge=Ma(),sp=pu(),Pge=new Rge({Extends:sp,initialize:function(t,i,r,s,n){sp.call(this,t,i,r,s,n),this.add("__BASE",0,0,0,s,n),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d"),this.width=s,this.height=n,this.imageData=this.context.getImageData(0,0,s,n),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===_ge.WEBGL&&this.refresh(),this},draw:function(e,t,i){return this.context.drawImage(i,e,t),this.update()},drawFrame:function(e,t,i,r){i===void 0&&(i=0),r===void 0&&(r=0);var s=this.manager.getFrame(e,t);if(s){var n=s.canvasData,a=s.cutWidth,o=s.cutHeight,h=s.source.resolution;return this.context.drawImage(s.source.image,n.x,n.y,a,o,i,r,a/h,o/h),this.update()}else return this},setPixel:function(e,t,i,r,s,n){n===void 0&&(n=255),e=Math.abs(Math.floor(e)),t=Math.abs(Math.floor(t));var a=this.getIndex(e,t);if(a>-1){var o=this.context.getImageData(e,t,1,1);o.data[0]=i,o.data[1]=r,o.data[2]=s,o.data[3]=n,this.context.putImageData(o,e,t)}return this},putData:function(e,t,i,r,s,n,a){return r===void 0&&(r=0),s===void 0&&(s=0),n===void 0&&(n=e.width),a===void 0&&(a=e.height),this.context.putImageData(e,t,i,r,s,n,a),this},getData:function(e,t,i,r){e=Qr(Math.floor(e),0,this.width-1),t=Qr(Math.floor(t),0,this.height-1),i=Qr(i,1,this.width-e),r=Qr(r,1,this.height-t);var s=this.context.getImageData(e,t,i,r);return s},getPixel:function(e,t,i){i||(i=new _D);var r=this.getIndex(e,t);if(r>-1){var s=this.data,n=s[r+0],a=s[r+1],o=s[r+2],h=s[r+3];i.setTo(n,a,o,h)}return i},getPixels:function(e,t,i,r){e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=this.width),r===void 0&&(r=i),e=Math.abs(Math.round(e)),t=Math.abs(Math.round(t));for(var s=Qr(e,0,this.width),n=Qr(e+i,0,this.width),a=Qr(t,0,this.height),o=Qr(t+r,0,this.height),h=new _D,u=[],f=a;f<o;f++){for(var d=[],v=s;v<n;v++)h=this.getPixel(v,f,h),d.push({x:v,y:f,color:h.color,alpha:h.alphaGL});u.push(d)}return u},getIndex:function(e,t){return e=Math.abs(Math.round(e)),t=Math.abs(Math.round(t)),e<this.width&&t<this.height?(e+t*this.width)*4:-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(e,t,i,r){return e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=this.width),r===void 0&&(r=this.height),this.context.clearRect(e,t,i,r),this.update()},setSize:function(e,t){return t===void 0&&(t=e),(e!==this.width||t!==this.height)&&(this.canvas.width=e,this.canvas.height=t,this._source.width=e,this._source.height=t,this._source.isPowerOf2=wge(e,t),this.frames.__BASE.setSize(e,t,0,0),this.width=e,this.height=t,this.refresh()),this},destroy:function(){sp.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});wD.exports=Pge});var AD=l((u9e,PD)=>{var Age=function(e,t,i){if(!i.getElementsByTagName("TextureAtlas")){console.warn("Invalid Texture Atlas XML given");return}var r=e.source[t];e.add("__BASE",t,0,0,r.width,r.height);for(var s=i.getElementsByTagName("SubTexture"),n,a=0;a<s.length;a++){var o=s[a].attributes,h=o.name.value,u=parseInt(o.x.value,10),f=parseInt(o.y.value,10),d=parseInt(o.width.value,10),v=parseInt(o.height.value,10);if(n=e.add(h,t,u,f,d,v),o.frameX){var c=Math.abs(parseInt(o.frameX.value,10)),p=Math.abs(parseInt(o.frameY.value,10)),m=parseInt(o.frameWidth.value,10),g=parseInt(o.frameHeight.value,10);n.setTrim(d,v,c,p,m,g)}}return e};PD.exports=Age});var MD=l((l9e,bD)=>{var bge=function(e,t){var i=e.source[t];return e.add("__BASE",t,0,0,i.width,i.height),e};bD.exports=bge});var OD=l((f9e,qD)=>{var Mge=function(e,t){var i=e.source[t];return e.add("__BASE",t,0,0,i.width,i.height),e};qD.exports=Mge});var FD=l((d9e,LD)=>{var qge=Jr(),Oge=function(e,t,i){if(!i.frames&&!i.textures){console.warn("Invalid Texture Atlas JSON Array");return}var r=e.source[t];e.add("__BASE",t,0,0,r.width,r.height);for(var s=Array.isArray(i.textures)?i.textures[t].frames:i.frames,n,a=0;a<s.length;a++){var o=s[a];n=e.add(o.filename,t,o.frame.x,o.frame.y,o.frame.w,o.frame.h),o.trimmed&&n.setTrim(o.sourceSize.w,o.sourceSize.h,o.spriteSourceSize.x,o.spriteSourceSize.y,o.spriteSourceSize.w,o.spriteSourceSize.h),o.rotated&&(n.rotated=!0,n.updateUVsInverted());var h=o.anchor||o.pivot;h&&(n.customPivot=!0,n.pivotX=h.x,n.pivotY=h.y),n.customData=qge(o)}for(var u in i)u!=="frames"&&(Array.isArray(i[u])?e.customData[u]=i[u].slice(0):e.customData[u]=i[u]);return e};LD.exports=Oge});var GD=l((v9e,ND)=>{var Lge=Jr(),Fge=function(e,t,i){if(!i.frames){console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object");return}var r=e.source[t];e.add("__BASE",t,0,0,r.width,r.height);var s=i.frames,n;for(var a in s)if(!!s.hasOwnProperty(a)){var o=s[a];n=e.add(a,t,o.frame.x,o.frame.y,o.frame.w,o.frame.h),o.trimmed&&n.setTrim(o.sourceSize.w,o.sourceSize.h,o.spriteSourceSize.x,o.spriteSourceSize.y,o.spriteSourceSize.w,o.spriteSourceSize.h),o.rotated&&(n.rotated=!0,n.updateUVsInverted());var h=o.anchor||o.pivot;h&&(n.customPivot=!0,n.pivotX=h.x,n.pivotY=h.y),n.customData=Lge(o)}for(var u in i)u!=="frames"&&(Array.isArray(i[u])?e.customData[u]=i[u].slice(0):e.customData[u]=i[u]);return e};ND.exports=Fge});var ID=l((c9e,DD)=>{var Un=X(),Nge=function(e,t,i,r,s,n,a){var o=Un(a,"frameWidth",null),h=Un(a,"frameHeight",o);if(o===null)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var u=e.source[t];e.add("__BASE",t,0,0,u.width,u.height);var f=Un(a,"startFrame",0),d=Un(a,"endFrame",-1),v=Un(a,"margin",0),c=Un(a,"spacing",0),p=Math.floor((s-v+c)/(o+c)),m=Math.floor((n-v+c)/(h+c)),g=p*m;g===0&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",e.key),(f>g||f<-g)&&(f=0),f<0&&(f=g+f),d!==-1&&(g=f+(d+1));for(var x=v,T=v,E=0,R=0,y=0;y<g;y++){E=0,R=0;var C=x+o,S=T+h;C>s&&(E=C-s),S>n&&(R=S-n),e.add(y,t,i+x,r+T,o-E,h-R),x+=o+c,x+o>s&&(x=v,T+=h+c)}return e};DD.exports=Nge});var VD=l((p9e,BD)=>{var kn=X(),Gge=function(e,t,i){var r=kn(i,"frameWidth",null),s=kn(i,"frameHeight",r);if(!r)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var n=e.source[0];e.add("__BASE",0,0,0,n.width,n.height);var a=kn(i,"startFrame",0),o=kn(i,"endFrame",-1),h=kn(i,"margin",0),u=kn(i,"spacing",0),f=t.cutX,d=t.cutY,v=t.cutWidth,c=t.cutHeight,p=t.realWidth,m=t.realHeight,g=Math.floor((p-h+u)/(r+u)),x=Math.floor((m-h+u)/(s+u)),T=g*x,E=t.x,R=r-E,y=r-(p-v-E),C=t.y,S=s-C,w=s-(m-c-C);(a>T||a<-T)&&(a=0),a<0&&(a=T+a),o!==-1&&(T=a+(o+1));for(var P,A=h,M=h,N=0,O=t.sourceIndex,D=0;D<x;D++){for(var b=D===0,q=D===x-1,G=0;G<g;G++){var L=G===0,F=G===g-1;if(P=e.add(N,O,f+A,d+M,r,s),L||b||F||q){var V=L?E:0,Y=b?C:0,z=0,Z=0;L&&(z+=r-R),F&&(z+=r-y),b&&(Z+=s-S),q&&(Z+=s-w);var U=r-z,H=s-Z;P.cutWidth=U,P.cutHeight=H,P.setTrim(r,s,V,Y,U,H)}A+=u,L?A+=R:F?A+=y:A+=r,N++}A=h,M+=u,b?M+=S:q?M+=w:M+=s}return e};BD.exports=Gge});var XD=l((m9e,zD)=>{var UD=0,kD=function(e,t,i,r){var s=UD-r.y-r.height;e.add(i,t,r.x,s,r.width,r.height)},Dge=function(e,t,i){var r=e.source[t];e.add("__BASE",t,0,0,r.width,r.height),UD=r.height;for(var s=i.split(`
`),n=/^[ ]*(- )*(\w+)+[: ]+(.*)/,a="",o="",h={x:0,y:0,width:0,height:0},u=0;u<s.length;u++){var f=s[u].match(n);if(!!f){var d=f[1]==="- ",v=f[2],c=f[3];if(d&&(o!==a&&(kD(e,t,o,h),a=o),h={x:0,y:0,width:0,height:0}),v==="name"){o=c;continue}switch(v){case"x":case"y":case"width":case"height":h[v]=parseInt(c,10);break}}}return o!==a&&kD(e,t,o,h),e};zD.exports=Dge});var ap=l((g9e,YD)=>{YD.exports={AtlasXML:AD(),Canvas:MD(),Image:OD(),JSONArray:FD(),JSONHash:GD(),SpriteSheet:ID(),SpriteSheetFromAtlas:VD(),UnityYAML:XD()}});var op=l((x9e,JD)=>{var zn=Et(),WD=np(),Ige=_(),Bge=ni(),Vge=Ut(),HD=se(),Ye=En(),jD=Ne(),Uge=pc(),KD=ie(),bi=ap(),ZD=pu(),kge=new Ige({Extends:HD,initialize:function(t){HD.call(this),this.game=t,this.name="TextureManager",this.list={},this._tempCanvas=zn.create2D(this,1,1),this._tempContext=this._tempCanvas.getContext("2d"),this._pending=0,t.events.once(jD.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(Ye.LOAD,this.updatePending,this),this.on(Ye.ERROR,this.updatePending,this);var e=this.game.config;this.addBase64("__DEFAULT",e.defaultImage),this.addBase64("__MISSING",e.missingImage),this.addBase64("__WHITE",e.whiteImage),this.game.events.once(jD.DESTROY,this.destroy,this)},updatePending:function(){this._pending--,this._pending===0&&(this.off(Ye.LOAD),this.off(Ye.ERROR),this.emit(Ye.READY))},checkKey:function(e){return this.exists(e)?(console.error("Texture key already in use: "+e),!1):!0},remove:function(e){if(typeof e=="string")if(this.exists(e))e=this.get(e);else return console.warn("No texture found matching key: "+e),this;return this.list.hasOwnProperty(e.key)&&(e.destroy(),this.emit(Ye.REMOVE,e.key)),this},removeKey:function(e){return this.list.hasOwnProperty(e)&&delete this.list[e],this},addBase64:function(e,t){if(this.checkKey(e)){var i=this,r=new Image;r.onerror=function(){i.emit(Ye.ERROR,e)},r.onload=function(){var s=i.create(e,r);bi.Image(s,0),i.emit(Ye.ADD,e,s),i.emit(Ye.LOAD,e,s)},r.src=t}return this},getBase64:function(e,t,i,r){i===void 0&&(i="image/png"),r===void 0&&(r=.92);var s="",n=this.getFrame(e,t);if(n&&(n.source.isRenderTexture||n.source.isGLTexture))console.warn("Cannot getBase64 from WebGL Texture");else if(n){var a=n.canvasData,o=zn.create2D(this,a.width,a.height),h=o.getContext("2d");h.drawImage(n.source.image,a.x,a.y,a.width,a.height,0,0,a.width,a.height),s=o.toDataURL(i,r),zn.remove(o)}return s},addImage:function(e,t,i){var r=null;return this.checkKey(e)&&(r=this.create(e,t),bi.Image(r,0),i&&r.setDataSource(i),this.emit(Ye.ADD,e,r)),r},addGLTexture:function(e,t,i,r){var s=null;return this.checkKey(e)&&(i===void 0&&(i=t.width),r===void 0&&(r=t.height),s=this.create(e,t,i,r),s.add("__BASE",0,0,0,i,r),this.emit(Ye.ADD,e,s)),s},addRenderTexture:function(e,t){var i=null;return this.checkKey(e)&&(i=this.create(e,t),i.add("__BASE",0,0,0,t.width,t.height),this.emit(Ye.ADD,e,i)),i},generate:function(e,t){if(this.checkKey(e)){var i=zn.create(this,1,1);return t.canvas=i,Uge(t),this.addCanvas(e,i)}else return null},createCanvas:function(e,t,i){if(t===void 0&&(t=256),i===void 0&&(i=256),this.checkKey(e)){var r=zn.create(this,t,i,Vge.CANVAS,!0);return this.addCanvas(e,r)}return null},addCanvas:function(e,t,i){i===void 0&&(i=!1);var r=null;return i?r=new WD(this,e,t,t.width,t.height):this.checkKey(e)&&(r=new WD(this,e,t,t.width,t.height),this.list[e]=r,this.emit(Ye.ADD,e,r)),r},addAtlas:function(e,t,i,r){return Array.isArray(i.textures)||Array.isArray(i.frames)?this.addAtlasJSONArray(e,t,i,r):this.addAtlasJSONHash(e,t,i,r)},addAtlasJSONArray:function(e,t,i,r){var s=null;if(this.checkKey(e)){if(s=this.create(e,t),Array.isArray(i))for(var n=i.length===1,a=0;a<s.source.length;a++){var o=n?i[0]:i[a];bi.JSONArray(s,a,o)}else bi.JSONArray(s,0,i);r&&s.setDataSource(r),this.emit(Ye.ADD,e,s)}return s},addAtlasJSONHash:function(e,t,i,r){var s=null;if(this.checkKey(e)){if(s=this.create(e,t),Array.isArray(i))for(var n=0;n<i.length;n++)bi.JSONHash(s,n,i[n]);else bi.JSONHash(s,0,i);r&&s.setDataSource(r),this.emit(Ye.ADD,e,s)}return s},addAtlasXML:function(e,t,i,r){var s=null;return this.checkKey(e)&&(s=this.create(e,t),bi.AtlasXML(s,0,i),r&&s.setDataSource(r),this.emit(Ye.ADD,e,s)),s},addUnityAtlas:function(e,t,i,r){var s=null;return this.checkKey(e)&&(s=this.create(e,t),bi.UnityYAML(s,0,i),r&&s.setDataSource(r),this.emit(Ye.ADD,e,s)),s},addSpriteSheet:function(e,t,i){var r=null;if(this.checkKey(e)){r=this.create(e,t);var s=r.source[0].width,n=r.source[0].height;bi.SpriteSheet(r,0,0,0,s,n,i),this.emit(Ye.ADD,e,r)}return r},addSpriteSheetFromAtlas:function(e,t){if(!this.checkKey(e))return null;var i=KD(t,"atlas",null),r=KD(t,"frame",null);if(!(!i||!r)){var s=this.get(i),n=s.get(r);if(n){var a=this.create(e,n.source.image);return n.trimmed?bi.SpriteSheetFromAtlas(a,n,t):bi.SpriteSheet(a,0,n.cutX,n.cutY,n.cutWidth,n.cutHeight,t),this.emit(Ye.ADD,e,a),a}}},create:function(e,t,i,r){var s=null;return this.checkKey(e)&&(s=new ZD(this,e,t,i,r),this.list[e]=s),s},exists:function(e){return this.list.hasOwnProperty(e)},get:function(e){return e===void 0&&(e="__DEFAULT"),this.list[e]?this.list[e]:e instanceof ZD?e:this.list.__MISSING},cloneFrame:function(e,t){if(this.list[e])return this.list[e].get(t).clone()},getFrame:function(e,t){if(this.list[e])return this.list[e].get(t)},getTextureKeys:function(){var e=[];for(var t in this.list)t!=="__DEFAULT"&&t!=="__MISSING"&&e.push(t);return e},getPixel:function(e,t,i,r){var s=this.getFrame(i,r);if(s){e-=s.x,t-=s.y;var n=s.data.cut;if(e+=n.x,t+=n.y,e>=n.x&&e<n.r&&t>=n.y&&t<n.b){var a=this._tempContext;a.clearRect(0,0,1,1),a.drawImage(s.source.image,e,t,1,1,0,0,1,1);var o=a.getImageData(0,0,1,1);return new Bge(o.data[0],o.data[1],o.data[2],o.data[3])}}return null},getPixelAlpha:function(e,t,i,r){var s=this.getFrame(i,r);if(s){e-=s.x,t-=s.y;var n=s.data.cut;if(e+=n.x,t+=n.y,e>=n.x&&e<n.r&&t>=n.y&&t<n.b){var a=this._tempContext;a.clearRect(0,0,1,1),a.drawImage(s.source.image,e,t,1,1,0,0,1,1);var o=a.getImageData(0,0,1,1);return o.data[3]}}return null},setTexture:function(e,t,i){return this.list[t]&&(e.texture=this.list[t],e.frame=e.texture.get(i)),e},renameTexture:function(e,t){var i=this.get(e);return i&&e!==t?(i.key=t,this.list[t]=i,delete this.list[e],!0):!1},each:function(e,t){for(var i=[null],r=1;r<arguments.length;r++)i.push(arguments[r]);for(var s in this.list)i[0]=this.list[s],e.apply(t,i)},destroy:function(){for(var e in this.list)this.list[e].destroy();this.list={},this.game=null,zn.remove(this._tempCanvas)}});JD.exports=kge});var $D=l((T9e,QD)=>{QD.exports="complete"});var tI=l((E9e,eI)=>{eI.exports="decoded"});var rI=l((y9e,iI)=>{iI.exports="decodedall"});var nI=l((S9e,sI)=>{sI.exports="destroy"});var oI=l((C9e,aI)=>{aI.exports="detune"});var uI=l((R9e,hI)=>{hI.exports="detune"});var fI=l((_9e,lI)=>{lI.exports="mute"});var vI=l((w9e,dI)=>{dI.exports="rate"});var pI=l((P9e,cI)=>{cI.exports="volume"});var gI=l((A9e,mI)=>{mI.exports="loop"});var TI=l((b9e,xI)=>{xI.exports="looped"});var yI=l((M9e,EI)=>{EI.exports="mute"});var CI=l((q9e,SI)=>{SI.exports="pan"});var _I=l((O9e,RI)=>{RI.exports="pauseall"});var PI=l((L9e,wI)=>{wI.exports="pause"});var bI=l((F9e,AI)=>{AI.exports="play"});var qI=l((N9e,MI)=>{MI.exports="rate"});var LI=l((G9e,OI)=>{OI.exports="resumeall"});var NI=l((D9e,FI)=>{FI.exports="resume"});var DI=l((I9e,GI)=>{GI.exports="seek"});var BI=l((B9e,II)=>{II.exports="stopall"});var UI=l((V9e,VI)=>{VI.exports="stop"});var zI=l((U9e,kI)=>{kI.exports="unlocked"});var YI=l((k9e,XI)=>{XI.exports="volume"});var $r=l((z9e,WI)=>{WI.exports={COMPLETE:$D(),DECODED:tI(),DECODED_ALL:rI(),DESTROY:nI(),DETUNE:oI(),GLOBAL_DETUNE:uI(),GLOBAL_MUTE:fI(),GLOBAL_RATE:vI(),GLOBAL_VOLUME:pI(),LOOP:gI(),LOOPED:TI(),MUTE:yI(),PAN:CI(),PAUSE_ALL:_I(),PAUSE:PI(),PLAY:bI(),RATE:qI(),RESUME_ALL:LI(),RESUME:NI(),SEEK:DI(),STOP_ALL:BI(),STOP:UI(),UNLOCKED:zI(),VOLUME:YI()}});var es=l((X9e,HI)=>{var zge=function(e,t,i,r){var s=e.length;if(t<0||t>s||t>=i||i>s||t+i>s){if(r)throw new Error("Range Error: Values outside acceptable range");return!1}else return!0};HI.exports=zge});var mu=l((Y9e,jI)=>{var Xge=es(),Yge=function(e,t,i,r,s){r===void 0&&(r=0),s===void 0&&(s=e.length);var n=[];if(Xge(e,r,s))for(var a=r;a<s;a++){var o=e[a];(!t||t&&i===void 0&&o.hasOwnProperty(t)||t&&i!==void 0&&o[t]===i)&&n.push(o)}return n};jI.exports=Yge});var hp=l((W9e,KI)=>{var Wge=es(),Hge=function(e,t,i,r,s){if(r===void 0&&(r=0),s===void 0&&(s=e.length),Wge(e,r,s))for(var n=r;n<s;n++){var a=e[n];if(!t||t&&i===void 0&&a.hasOwnProperty(t)||t&&i!==void 0&&a[t]===i)return a}return null};KI.exports=Hge});var xu=l((H9e,JI)=>{var jge=_(),Kge=Jr(),ZI=se(),ts=$r(),js=Ne(),gu=B(),Zge=mu(),Jge=hp(),Qge=new jge({Extends:ZI,initialize:function(t){ZI.call(this),this.game=t,this.jsonCache=t.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,t.events.on(js.BLUR,this.onGameBlur,this),t.events.on(js.FOCUS,this.onGameFocus,this),t.events.on(js.PRE_STEP,this.update,this),t.events.once(js.DESTROY,this.destroy,this)},add:gu,addAudioSprite:function(e,t){t===void 0&&(t={});var i=this.add(e,t);i.spritemap=this.jsonCache.get(e).spritemap;for(var r in i.spritemap)if(!!i.spritemap.hasOwnProperty(r)){var s=Kge(t),n=i.spritemap[r];s.loop=n.hasOwnProperty("loop")?n.loop:!1,i.addMarker({name:r,start:n.start,duration:n.end-n.start,config:s})}return i},get:function(e){return Jge(this.sounds,"key",e)},getAll:function(e){return Zge(this.sounds,"key",e)},play:function(e,t){var i=this.add(e);return i.once(ts.COMPLETE,i.destroy,i),t?t.name?(i.addMarker(t),i.play(t.name)):i.play(t):i.play()},playAudioSprite:function(e,t,i){var r=this.addAudioSprite(e);return r.once(ts.COMPLETE,r.destroy,r),r.play(t,i)},remove:function(e){var t=this.sounds.indexOf(e);return t!==-1?(e.destroy(),this.sounds.splice(t,1),!0):!1},removeAll:function(){this.sounds.forEach(function(e){e.destroy()}),this.sounds.length=0},removeByKey:function(e){for(var t=0,i=this.sounds.length-1;i>=0;i--){var r=this.sounds[i];r.key===e&&(r.destroy(),this.sounds.splice(i,1),t++)}return t},pauseAll:function(){this.forEachActiveSound(function(e){e.pause()}),this.emit(ts.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(e){e.resume()}),this.emit(ts.RESUME_ALL,this)},stopAll:function(){this.forEachActiveSound(function(e){e.stop()}),this.emit(ts.STOP_ALL,this)},stopByKey:function(e){var t=0;return this.getAll(e).forEach(function(i){i.stop()&&t++}),t},unlock:gu,onBlur:gu,onFocus:gu,onGameBlur:function(){this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.pauseOnBlur&&this.onFocus()},update:function(e,t){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(ts.UNLOCKED,this));for(var i=this.sounds.length-1;i>=0;i--)this.sounds[i].pendingRemove&&this.sounds.splice(i,1);this.sounds.forEach(function(r){r.update(e,t)})},destroy:function(){this.game.events.off(js.BLUR,this.onGameBlur,this),this.game.events.off(js.FOCUS,this.onGameFocus,this),this.game.events.off(js.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.game=null},forEachActiveSound:function(e,t){var i=this;this.sounds.forEach(function(r,s){r&&!r.pendingRemove&&e.call(t||i,r,s,i.sounds)})},setRate:function(e){return this.rate=e,this},rate:{get:function(){return this._rate},set:function(e){this._rate=e,this.forEachActiveSound(function(t){t.calculateRate()}),this.emit(ts.GLOBAL_RATE,this,e)}},setDetune:function(e){return this.detune=e,this},detune:{get:function(){return this._detune},set:function(e){this._detune=e,this.forEachActiveSound(function(t){t.calculateRate()}),this.emit(ts.GLOBAL_DETUNE,this,e)}}});JI.exports=Qge});var Eu=l((j9e,$I)=>{var $ge=_(),QI=se(),e0e=$r(),Tu=Fe(),t0e=B(),i0e=new $ge({Extends:QI,initialize:function(t,i,r){QI.call(this),this.manager=t,this.key=i,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=Tu(this.config,r),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(e){return!e||!e.name||typeof e.name!="string"?!1:this.markers[e.name]?(console.error("addMarker "+e.name+" already exists in Sound"),!1):(e=Tu(!0,{name:"",start:0,duration:this.totalDuration-(e.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},e),this.markers[e.name]=e,!0)},updateMarker:function(e){return!e||!e.name||typeof e.name!="string"?!1:this.markers[e.name]?(this.markers[e.name]=Tu(!0,this.markers[e.name],e),!0):(console.warn("Audio Marker: "+e.name+" missing in Sound: "+this.key),!1)},removeMarker:function(e){var t=this.markers[e];return t?(this.markers[e]=null,t):null},play:function(e,t){if(e===void 0&&(e=""),typeof e=="object"&&(t=e,e=""),typeof e!="string")return!1;if(!e)this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;else{if(!this.markers[e])return console.warn("Marker: "+e+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[e],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}return this.resetConfig(),this.currentConfig=Tu(this.currentConfig,t),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return this.isPaused||!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!0,!0)},resume:function(){return!this.isPaused||this.isPlaying?!1:(this.isPlaying=!0,this.isPaused=!1,!0)},stop:function(){return!this.isPaused&&!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:t0e,calculateRate:function(){var e=1.0005777895065548,t=this.currentConfig.detune+this.manager.detune,i=Math.pow(e,t);this.totalRate=this.currentConfig.rate*this.manager.rate*i},destroy:function(){this.pendingRemove||(this.emit(e0e.DESTROY,this),this.pendingRemove=!0,this.manager=null,this.key="",this.removeAllListeners(),this.isPlaying=!1,this.isPaused=!1,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});$I.exports=i0e});var tB=l((K9e,eB)=>{var mr=Eu(),r0e=_(),Rt=$r(),s0e=Pe(),n0e=new r0e({Extends:mr,initialize:function(t,i,r){if(r===void 0&&(r={}),this.tags=t.game.cache.audio.get(i),!this.tags)throw new Error('There is no audio asset with key "'+i+'" in the audio cache');this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,mr.call(this,t,i,r)},play:function(e,t){return this.manager.isLocked(this,"play",[e,t])||!mr.prototype.play.call(this,e,t)||!this.pickAndPlayAudioTag()?!1:(this.emit(Rt.PLAY,this),!0)},pause:function(){return this.manager.isLocked(this,"pause")||this.startTime>0||!mr.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(Rt.PAUSE,this),!0)},resume:function(){return this.manager.isLocked(this,"resume")||this.startTime>0||!mr.prototype.resume.call(this)||!this.pickAndPlayAudioTag()?!1:(this.emit(Rt.RESUME,this),!0)},stop:function(){return this.manager.isLocked(this,"stop")||!mr.prototype.stop.call(this)?!1:(this.stopAndReleaseAudioTag(),this.emit(Rt.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var e=this.currentConfig.seek,t=this.currentConfig.delay,i=(this.currentMarker?this.currentMarker.start:0)+e;return this.previousTime=i,this.audio.currentTime=i,this.applyConfig(),t===0?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+t*1e3,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var e=0;e<this.tags.length;e++){var t=this.tags[e];if(t.dataset.used==="false")return t.dataset.used="true",this.audio=t,!0}if(!this.manager.override)return!1;var i=[];this.manager.forEachActiveSound(function(s){s.key===this.key&&s.audio&&i.push(s)},this),i.sort(function(s,n){return s.loop===n.loop?n.seek/n.duration-s.seek/s.duration:s.loop?1:-1});var r=i[0];return this.audio=r.audio,r.reset(),r.audio=null,r.startTime=0,r.previousTime=0,!0},playCatchPromise:function(){var e=this.audio.play();e&&e.catch(function(t){console.warn(t)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){mr.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(e){if(!!this.isPlaying){if(this.startTime>0){this.startTime<e-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,e-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());return}var t=this.currentMarker?this.currentMarker.start:0,i=t+this.duration,r=this.audio.currentTime;if(this.currentConfig.loop)r>=i-this.manager.loopEndOffset?(this.audio.currentTime=t+Math.max(0,r-i),r=this.audio.currentTime):r<t&&(this.audio.currentTime+=t,r=this.audio.currentTime),r<this.previousTime&&this.emit(Rt.LOOPED,this);else if(r>=i){this.reset(),this.stopAndReleaseAudioTag(),this.emit(Rt.COMPLETE,this);return}this.previousTime=r}},destroy:function(){mr.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=s0e(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){mr.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(e){this.currentConfig.mute=e,!this.manager.isLocked(this,"mute",e)&&(this.updateMute(),this.emit(Rt.MUTE,this,e))}},setMute:function(e){return this.mute=e,this},volume:{get:function(){return this.currentConfig.volume},set:function(e){this.currentConfig.volume=e,!this.manager.isLocked(this,"volume",e)&&(this.updateVolume(),this.emit(Rt.VOLUME,this,e))}},setVolume:function(e){return this.volume=e,this},rate:{get:function(){return this.currentConfig.rate},set:function(e){this.currentConfig.rate=e,!this.manager.isLocked(this,Rt.RATE,e)&&(this.calculateRate(),this.emit(Rt.RATE,this,e))}},setRate:function(e){return this.rate=e,this},detune:{get:function(){return this.currentConfig.detune},set:function(e){this.currentConfig.detune=e,!this.manager.isLocked(this,Rt.DETUNE,e)&&(this.calculateRate(),this.emit(Rt.DETUNE,this,e))}},setDetune:function(e){return this.detune=e,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(e){this.manager.isLocked(this,"seek",e)||this.startTime>0||(this.isPlaying||this.isPaused)&&(e=Math.min(Math.max(0,e),this.duration),this.isPlaying?(this.previousTime=e,this.audio.currentTime=e):this.isPaused&&(this.currentConfig.seek=e),this.emit(Rt.SEEK,this,e))}},setSeek:function(e){return this.seek=e,this},loop:{get:function(){return this.currentConfig.loop},set:function(e){this.currentConfig.loop=e,!this.manager.isLocked(this,"loop",e)&&(this.audio&&(this.audio.loop=e),this.emit(Rt.LOOP,this,e))}},setLoop:function(e){return this.loop=e,this},pan:{get:function(){return this.currentConfig.pan},set:function(e){this.currentConfig.pan=e,this.emit(Rt.PAN,this,e)}},setPan:function(e){return this.pan=e,this}});eB.exports=n0e});var rB=l((Z9e,iB)=>{var up=xu(),a0e=_(),lp=$r(),o0e=tB(),h0e=new a0e({Extends:up,initialize:function(t){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,up.call(this,t)},add:function(e,t){var i=new o0e(this,e,t);return this.sounds.push(i),i},unlock:function(){this.locked=!1;var e=this;if(this.game.cache.audio.entries.each(function(s,n){for(var a=0;a<n.length;a++)if(n[a].dataset.locked==="true")return e.locked=!0,!1;return!0}),!!this.locked){var t=!1,i=function(){t=!0},r=function(){if(t){t=!1;return}document.body.removeEventListener("touchmove",i),document.body.removeEventListener("touchend",r);var s=[];if(e.game.cache.audio.entries.each(function(a,o){for(var h=0;h<o.length;h++){var u=o[h];u.dataset.locked==="true"&&s.push(u)}return!0}),s.length!==0){var n=s[s.length-1];n.oncanplaythrough=function(){n.oncanplaythrough=null,s.forEach(function(a){a.dataset.locked="false"}),e.unlocked=!0},s.forEach(function(a){a.load()})}};this.once(lp.UNLOCKED,function(){for(this.forEachActiveSound(function(n){n.currentMarker===null&&n.duration===0&&(n.duration=n.tags[0].duration),n.totalDuration=n.tags[0].duration});this.lockedActionsQueue.length;){var s=this.lockedActionsQueue.shift();s.sound[s.prop].apply?s.sound[s.prop].apply(s.sound,s.value||[]):s.sound[s.prop]=s.value}},this),document.body.addEventListener("touchmove",i,!1),document.body.addEventListener("touchend",r,!1)}},onBlur:function(){this.forEachActiveSound(function(e){e.isPlaying&&(this.onBlurPausedSounds.push(e),e.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(e){e.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){up.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(e,t,i){return e.tags[0].dataset.locked==="true"?(this.lockedActionsQueue.push({sound:e,prop:t,value:i}),!0):!1},setMute:function(e){return this.mute=e,this},mute:{get:function(){return this._mute},set:function(e){this._mute=e,this.forEachActiveSound(function(t){t.updateMute()}),this.emit(lp.GLOBAL_MUTE,this,e)}},setVolume:function(e){return this.volume=e,this},volume:{get:function(){return this._volume},set:function(e){this._volume=e,this.forEachActiveSound(function(t){t.updateVolume()}),this.emit(lp.GLOBAL_VOLUME,this,e)}}});iB.exports=h0e});var aB=l((J9e,nB)=>{var u0e=Eu(),l0e=_(),sB=se(),f0e=Fe(),Xn=function(){return!1},d0e=function(){return null},Ks=function(){return this},v0e=new l0e({Extends:sB,initialize:function(t,i,r){r===void 0&&(r={}),sB.call(this),this.manager=t,this.key=i,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=f0e({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},r),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:Xn,updateMarker:Xn,removeMarker:d0e,play:Xn,pause:Xn,resume:Xn,stop:Xn,destroy:function(){u0e.prototype.destroy.call(this)},setMute:Ks,setVolume:Ks,setRate:Ks,setDetune:Ks,setSeek:Ks,setLoop:Ks,setPan:Ks});nB.exports=v0e});var uB=l((Q9e,hB)=>{var yu=xu(),c0e=_(),oB=se(),p0e=aB(),is=B(),m0e=new c0e({Extends:oB,initialize:function(t){oB.call(this),this.game=t,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(e,t){var i=new p0e(this,e,t);return this.sounds.push(i),i},addAudioSprite:function(e,t){var i=this.add(e,t);return i.spritemap={},i},play:function(e,t){return!1},playAudioSprite:function(e,t,i){return!1},remove:function(e){return yu.prototype.remove.call(this,e)},removeByKey:function(e){return yu.prototype.removeByKey.call(this,e)},pauseAll:is,resumeAll:is,stopAll:is,update:is,setRate:is,setDetune:is,setMute:is,setVolume:is,forEachActiveSound:function(e,t){yu.prototype.forEachActiveSound.call(this,e,t)},destroy:function(){yu.prototype.destroy.call(this)}});hB.exports=m0e});var fp=l(($9e,fB)=>{var lB="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ao=new Uint8Array(256);for(oo=0;oo<lB.length;oo++)ao[lB.charCodeAt(oo)]=oo;var oo,g0e=function(e){e=e.substr(e.indexOf(",")+1);var t=e.length,i=t*.75,r=0,s,n,a,o;e[t-1]==="="&&(i--,e[t-2]==="="&&i--);for(var h=new ArrayBuffer(i),u=new Uint8Array(h),f=0;f<t;f+=4)s=ao[e.charCodeAt(f)],n=ao[e.charCodeAt(f+1)],a=ao[e.charCodeAt(f+2)],o=ao[e.charCodeAt(f+3)],u[r++]=s<<2|n>>4,u[r++]=(n&15)<<4|a>>2,u[r++]=(a&3)<<6|o&63;return h};fB.exports=g0e});var vB=l((e6e,dB)=>{var Wi=Eu(),x0e=_(),Ht=$r(),T0e=new x0e({Extends:Wi,initialize:function(t,i,r){if(r===void 0&&(r={}),this.audioBuffer=t.game.cache.audio.get(i),!this.audioBuffer)throw new Error('Audio key "'+i+'" missing from cache');this.source=null,this.loopSource=null,this.muteNode=t.context.createGain(),this.volumeNode=t.context.createGain(),this.pannerNode=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),t.context.createStereoPanner?(this.pannerNode=t.context.createStereoPanner(),this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(t.destination)):this.volumeNode.connect(t.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,Wi.call(this,t,i,r)},play:function(e,t){return Wi.prototype.play.call(this,e,t)?(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(Ht.PLAY,this),!0):!1},pause:function(){return this.manager.context.currentTime<this.startTime||!Wi.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(Ht.PAUSE,this),!0)},resume:function(){return this.manager.context.currentTime<this.startTime||!Wi.prototype.resume.call(this)?!1:(this.createAndStartBufferSource(),this.emit(Ht.RESUME,this),!0)},stop:function(){return Wi.prototype.stop.call(this)?(this.stopAndRemoveBufferSource(),this.emit(Ht.STOP,this),!0):!1},createAndStartBufferSource:function(){var e=this.currentConfig.seek,t=this.currentConfig.delay,i=this.manager.context.currentTime+t,r=(this.currentMarker?this.currentMarker.start:0)+e,s=this.duration-e;this.playTime=i-e,this.startTime=i,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,i),Math.max(0,r),Math.max(0,s)),this.resetConfig()},createAndStartLoopBufferSource:function(){var e=this.getLoopTime(),t=this.currentMarker?this.currentMarker.start:0,i=this.duration;this.loopTime=e,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,e),Math.max(0,t),Math.max(0,i))},createBufferSource:function(){var e=this,t=this.manager.context.createBufferSource();return t.buffer=this.audioBuffer,t.connect(this.muteNode),t.onended=function(i){i.target===e.source&&(e.currentConfig.loop?e.hasLooped=!0:e.hasEnded=!0)},t},stopAndRemoveBufferSource:function(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=null),this.playTime=0,this.startTime=0,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1}),Wi.prototype.applyConfig.call(this)},update:function(){this.hasEnded?(this.hasEnded=!1,Wi.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(Ht.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(Ht.LOOPED,this))},destroy:function(){Wi.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.rateUpdates.length=0,this.rateUpdates=null},calculateRate:function(){Wi.prototype.calculateRate.call(this);var e=this.manager.context.currentTime;this.source&&typeof this.totalRate=="number"&&this.source.playbackRate.setValueAtTime(this.totalRate,e),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,e)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var e=0,t=0;t<this.rateUpdates.length;t++){var i=0;t<this.rateUpdates.length-1?i=this.rateUpdates[t+1].time:i=this.manager.context.currentTime-this.playTime,e+=(i-this.rateUpdates[t].time)*this.rateUpdates[t].rate}return e},getLoopTime:function(){for(var e=0,t=0;t<this.rateUpdates.length-1;t++)e+=(this.rateUpdates[t+1].time-this.rateUpdates[t].time)*this.rateUpdates[t].rate;var i=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+i.time+(this.duration-e)/i.rate},rate:{get:function(){return this.currentConfig.rate},set:function(e){this.currentConfig.rate=e,this.calculateRate(),this.emit(Ht.RATE,this,e)}},setRate:function(e){return this.rate=e,this},detune:{get:function(){return this.currentConfig.detune},set:function(e){this.currentConfig.detune=e,this.calculateRate(),this.emit(Ht.DETUNE,this,e)}},setDetune:function(e){return this.detune=e,this},mute:{get:function(){return this.muteNode.gain.value===0},set:function(e){this.currentConfig.mute=e,this.muteNode.gain.setValueAtTime(e?0:1,0),this.emit(Ht.MUTE,this,e)}},setMute:function(e){return this.mute=e,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(e){this.currentConfig.volume=e,this.volumeNode.gain.setValueAtTime(e,0),this.emit(Ht.VOLUME,this,e)}},setVolume:function(e){return this.volume=e,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(e){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(e=Math.min(Math.max(0,e),this.duration),this.currentConfig.seek=e,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(Ht.SEEK,this,e))}},setSeek:function(e){return this.seek=e,this},loop:{get:function(){return this.currentConfig.loop},set:function(e){this.currentConfig.loop=e,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),e&&this.createAndStartLoopBufferSource()),this.emit(Ht.LOOP,this,e)}},setLoop:function(e){return this.loop=e,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(e){this.currentConfig.pan=e,this.pannerNode&&this.pannerNode.pan.setValueAtTime(e,this.manager.context.currentTime),this.emit(Ht.PAN,this,e)}},setPan:function(e){return this.pan=e,this}});dB.exports=T0e});var pB=l((t6e,cB)=>{var E0e=fp(),Su=xu(),y0e=_(),ho=$r(),S0e=Ne(),C0e=vB(),R0e=new y0e({Extends:Su,initialize:function(t){this.context=this.createAudioContext(t),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked=this.context.state==="suspended"&&("ontouchstart"in window||"onclick"in window),Su.call(this,t),this.locked&&t.isBooted?this.unlock():t.events.once(S0e.BOOT,this.unlock,this)},createAudioContext:function(e){var t=e.config.audio;if(t.context)return t.context.resume(),t.context;if(window.hasOwnProperty("AudioContext"))return new AudioContext;if(window.hasOwnProperty("webkitAudioContext"))return new window.webkitAudioContext},setAudioContext:function(e){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=e,this.masterMuteNode=e.createGain(),this.masterVolumeNode=e.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(e.destination),this.destination=this.masterMuteNode,this},add:function(e,t){var i=new C0e(this,e,t);return this.sounds.push(i),i},decodeAudio:function(e,t){var i;Array.isArray(e)?i=e:i=[{key:e,data:t}];for(var r=this.game.cache.audio,s=i.length,n=0;n<i.length;n++){var a=i[n],o=a.key,h=a.data;typeof h=="string"&&(h=E0e(h));var u=function(d,v){r.add(d,v),this.emit(ho.DECODED,d),s--,s===0&&this.emit(ho.DECODED_ALL)}.bind(this,o),f=function(d,v){console.error("Error decoding audio: "+d+" - ",v?v.message:""),s--,s===0&&this.emit(ho.DECODED_ALL)}.bind(this,o);this.context.decodeAudioData(h,u,f)}},unlock:function(){var e=this,t=document.body,i=function r(){if(e.context&&t){var s=t.removeEventListener;e.context.resume().then(function(){s("touchstart",r),s("touchend",r),s("click",r),s("keydown",r),e.unlocked=!0},function(){s("touchstart",r),s("touchend",r),s("click",r),s("keydown",r)})}};t&&(t.addEventListener("touchstart",i,!1),t.addEventListener("touchend",i,!1),t.addEventListener("click",i,!1),t.addEventListener("keydown",i,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var e=this.context;(e.state==="suspended"||e.state==="interrupted")&&!this.locked&&e.resume()},update:function(e,t){Su.prototype.update.call(this,e,t);var i=this.context;i&&i.state==="interrupted"&&i.resume()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var e=this;this.context.close().then(function(){e.context=null})}Su.prototype.destroy.call(this)},setMute:function(e){return this.mute=e,this},mute:{get:function(){return this.masterMuteNode.gain.value===0},set:function(e){this.masterMuteNode.gain.setValueAtTime(e?0:1,0),this.emit(ho.GLOBAL_MUTE,this,e)}},setVolume:function(e){return this.volume=e,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(e){this.masterVolumeNode.gain.setValueAtTime(e,0),this.emit(ho.GLOBAL_VOLUME,this,e)}}});cB.exports=R0e});var gB=l((i6e,mB)=>{var _0e=rB(),w0e=uB(),P0e=pB(),A0e={create:function(e){var t=e.config.audio,i=e.device.audio;return t.noAudio||!i.webAudio&&!i.audioData?new w0e(e):i.webAudio&&!t.disableWebAudio?new P0e(e):new _0e(e)}};mB.exports=A0e});var TB=l((r6e,xB)=>{var b0e=function(e,t,i){return{instance:t,placementID:e,shown:!1,video:i}};xB.exports=b0e});var yB=l((s6e,EB)=>{var M0e=function(e){return{score:e.getScore(),scoreFormatted:e.getFormattedScore(),timestamp:e.getTimestamp(),rank:e.getRank(),data:e.getExtraData(),playerName:e.getPlayer().getName(),playerPhotoURL:e.getPlayer().getPhoto(),playerID:e.getPlayer().getID()}};EB.exports=M0e});var RB=l((n6e,CB)=>{var q0e=_(),SB=se(),Cu=yB(),O0e=new q0e({Extends:SB,initialize:function(t,i){SB.call(this),this.plugin=t,this.ref=i,this.name=i.getName(),this.contextID=i.getContextID(),this.entryCount=0,this.playerScore=null,this.scores=[],this.getEntryCount()},getEntryCount:function(){var e=this;return this.ref.getEntryCountAsync().then(function(t){e.entryCount=t,e.emit("getentrycount",t,e.name)}).catch(function(t){console.warn(t)}),this},setScore:function(e,t){t===void 0&&(t=""),typeof t=="object"&&(t=JSON.stringify(t));var i=this;return this.ref.setScoreAsync(e,t).then(function(r){if(r){var s=Cu(r);i.playerScore=s,i.emit("setscore",s,i.name)}else i.emit("setscore",null,i.name)}).catch(function(r){console.warn(r)}),this},getPlayerScore:function(){var e=this;return this.ref.getPlayerEntryAsync().then(function(t){if(t){var i=Cu(t);e.playerScore=i,e.emit("getplayerscore",i,e.name)}else e.emit("getplayerscore",null,e.name)}).catch(function(t){console.warn(t)}),this},getScores:function(e,t){e===void 0&&(e=10),t===void 0&&(t=0);var i=this;return this.ref.getEntriesAsync(e,t).then(function(r){i.scores=[],r.forEach(function(s){i.scores.push(Cu(s))}),i.emit("getscores",i.scores,i.name)}).catch(function(r){console.warn(r)}),this},getConnectedScores:function(){var e=this;return this.ref.getConnectedPlayerEntriesAsync().then(function(t){e.scores=[],t.forEach(function(i){e.scores.push(Cu(i))}),e.emit("getconnectedscores",e.scores,e.name)}).catch(function(t){console.warn(t)}),this}});CB.exports=O0e});var wB=l((a6e,_B)=>{var Yn=X(),L0e=function(e){return{title:Yn(e,"title",""),productID:Yn(e,"productID",""),description:Yn(e,"description",""),imageURI:Yn(e,"imageURI",""),price:Yn(e,"price",""),priceCurrencyCode:Yn(e,"priceCurrencyCode","")}};_B.exports=L0e});var AB=l((o6e,PB)=>{var Wn=X(),F0e=function(e){return{developerPayload:Wn(e,"developerPayload",""),paymentID:Wn(e,"paymentID",""),productID:Wn(e,"productID",""),purchaseTime:Wn(e,"purchaseTime",""),purchaseToken:Wn(e,"purchaseToken",""),signedRequest:Wn(e,"signedRequest","")}};PB.exports=F0e});var LB=l((h6e,OB)=>{var bB=TB(),N0e=_(),G0e=Xs(),MB=se(),D0e=RB(),I0e=wB(),qB=AB(),B0e=new N0e({Extends:MB,initialize:function(t){MB.call(this),this.game=t,this.data=new G0e(this),this.on("setdata",this.setDataHandler,this),this.on("changedata",this.changeDataHandler,this),this.hasLoaded=!1,this.dataLocked=!1,this.supportedAPIs=[],this.entryPoint="",this.entryPointData=null,this.contextID=null,this.contextType=null,this.locale=null,this.platform=null,this.version=null,this.playerID=null,this.playerName=null,this.playerPhotoURL=null,this.playerCanSubscribeBot=!1,this.paymentsReady=!1,this.catalog=[],this.purchases=[],this.leaderboards={},this.ads=[]},setDataHandler:function(e,t,i){if(!this.dataLocked){var r={};r[t]=i;var s=this;FBInstant.player.setDataAsync(r).then(function(){s.emit("savedata",r)})}},changeDataHandler:function(e,t,i){if(!this.dataLocked){var r={};r[t]=i;var s=this;FBInstant.player.setDataAsync(r).then(function(){s.emit("savedata",r)})}},showLoadProgress:function(e){return e.load.on("progress",function(t){this.hasLoaded||FBInstant.setLoadingProgress(t*100)},this),e.load.on("complete",function(){this.hasLoaded||(this.hasLoaded=!0,FBInstant.startGameAsync().then(this.gameStartedHandler.bind(this)))},this),this},gameStarted:function(){this.hasLoaded?this.gameStartedHandler():(this.hasLoaded=!0,FBInstant.startGameAsync().then(this.gameStartedHandler.bind(this)))},gameStartedHandler:function(){var e=FBInstant.getSupportedAPIs(),t={},i=function(s){return s[1].toUpperCase()};e.forEach(function(s){s=s.replace(/\../g,i),t[s]=!0}),this.supportedAPIs=t,this.getID(),this.getType(),this.getLocale(),this.getPlatform(),this.getSDKVersion(),this.getPlayerID(),this.getPlayerName(),this.getPlayerPhotoURL();var r=this;FBInstant.onPause(function(){r.emit("pause")}),FBInstant.getEntryPointAsync().then(function(s){r.entryPoint=s,r.entryPointData=FBInstant.getEntryPointData(),r.emit("startgame")}).catch(function(s){console.warn(s)}),this.supportedAPIs.paymentsPurchaseAsync&&FBInstant.payments.onReady(function(){r.paymentsReady=!0}).catch(function(s){console.warn(s)})},checkAPI:function(e){return!!this.supportedAPIs[e]},getID:function(){return!this.contextID&&this.supportedAPIs.contextGetID&&(this.contextID=FBInstant.context.getID()),this.contextID},getType:function(){return!this.contextType&&this.supportedAPIs.contextGetType&&(this.contextType=FBInstant.context.getType()),this.contextType},getLocale:function(){return!this.locale&&this.supportedAPIs.getLocale&&(this.locale=FBInstant.getLocale()),this.locale},getPlatform:function(){return!this.platform&&this.supportedAPIs.getPlatform&&(this.platform=FBInstant.getPlatform()),this.platform},getSDKVersion:function(){return!this.version&&this.supportedAPIs.getSDKVersion&&(this.version=FBInstant.getSDKVersion()),this.version},getPlayerID:function(){return!this.playerID&&this.supportedAPIs.playerGetID&&(this.playerID=FBInstant.player.getID()),this.playerID},getPlayerName:function(){return!this.playerName&&this.supportedAPIs.playerGetName&&(this.playerName=FBInstant.player.getName()),this.playerName},getPlayerPhotoURL:function(){return!this.playerPhotoURL&&this.supportedAPIs.playerGetPhoto&&(this.playerPhotoURL=FBInstant.player.getPhoto()),this.playerPhotoURL},loadPlayerPhoto:function(e,t){return this.playerPhotoURL&&(e.load.setCORS("anonymous"),e.load.image(t,this.playerPhotoURL),e.load.once("filecomplete-image-"+t,function(){this.emit("photocomplete",t)},this),e.load.start()),this},canSubscribeBot:function(){if(this.supportedAPIs.playerCanSubscribeBotAsync){var e=this;FBInstant.player.canSubscribeBotAsync().then(function(){e.playerCanSubscribeBot=!0,e.emit("cansubscribebot")}).catch(function(t){e.emit("cansubscribebotfail",t)})}else this.emit("cansubscribebotfail");return this},subscribeBot:function(){if(this.playerCanSubscribeBot){var e=this;FBInstant.player.subscribeBotAsync().then(function(){e.emit("subscribebot")}).catch(function(t){e.emit("subscribebotfail",t)})}else this.emit("subscribebotfail");return this},getData:function(e){if(!this.checkAPI("playerGetDataAsync"))return this;Array.isArray(e)||(e=[e]);var t=this;return FBInstant.player.getDataAsync(e).then(function(i){t.dataLocked=!0;for(var r in i)t.data.set(r,i[r]);t.dataLocked=!1,t.emit("getdata",i)}),this},saveData:function(e){if(!this.checkAPI("playerSetDataAsync"))return this;var t=this;return FBInstant.player.setDataAsync(e).then(function(){t.emit("savedata",e)}).catch(function(i){t.emit("savedatafail",i)}),this},flushData:function(){if(!this.checkAPI("playerFlushDataAsync"))return this;var e=this;return FBInstant.player.flushDataAsync().then(function(){e.emit("flushdata")}).catch(function(t){e.emit("flushdatafail",t)}),this},getStats:function(e){if(!this.checkAPI("playerGetStatsAsync"))return this;var t=this;return FBInstant.player.getStatsAsync(e).then(function(i){t.emit("getstats",i)}).catch(function(i){t.emit("getstatsfail",i)}),this},saveStats:function(e){if(!this.checkAPI("playerSetStatsAsync"))return this;var t={};for(var i in e)typeof e[i]=="number"&&(t[i]=e[i]);var r=this;return FBInstant.player.setStatsAsync(t).then(function(){r.emit("savestats",t)}).catch(function(s){r.emit("savestatsfail",s)}),this},incStats:function(e){if(!this.checkAPI("playerIncrementStatsAsync"))return this;var t={};for(var i in e)typeof e[i]=="number"&&(t[i]=e[i]);var r=this;return FBInstant.player.incrementStatsAsync(t).then(function(s){r.emit("incstats",s)}).catch(function(s){r.emit("incstatsfail",s)}),this},saveSession:function(e){if(!this.checkAPI("setSessionData"))return this;var t=JSON.stringify(e);return t.length<=1e3?FBInstant.setSessionData(e):console.warn("Session data too long. Max 1000 chars."),this},openShare:function(e,t,i,r){return this._share("SHARE",e,t,i,r)},openInvite:function(e,t,i,r){return this._share("INVITE",e,t,i,r)},openRequest:function(e,t,i,r){return this._share("REQUEST",e,t,i,r)},openChallenge:function(e,t,i,r){return this._share("CHALLENGE",e,t,i,r)},_share:function(e,t,i,r,s){if(!this.checkAPI("shareAsync"))return this;if(s===void 0&&(s={}),i)var n=this.game.textures.getBase64(i,r);var a={intent:e,image:n,text:t,data:s},o=this;return FBInstant.shareAsync(a).then(function(){o.emit("resume")}),this},isSizeBetween:function(e,t){return this.checkAPI("contextIsSizeBetween")?FBInstant.context.isSizeBetween(e,t):this},switchContext:function(e){if(!this.checkAPI("contextSwitchAsync"))return this;if(e!==this.contextID){var t=this;FBInstant.context.switchAsync(e).then(function(){t.contextID=FBInstant.context.getID(),t.emit("switch",t.contextID)}).catch(function(i){t.emit("switchfail",i)})}return this},chooseContext:function(e){if(!this.checkAPI("contextChooseAsync"))return this;var t=this;return FBInstant.context.chooseAsync(e).then(function(){t.contextID=FBInstant.context.getID(),t.emit("choose",t.contextID)}).catch(function(i){t.emit("choosefail",i)}),this},createContext:function(e){if(!this.checkAPI("contextCreateAsync"))return this;var t=this;return FBInstant.context.createAsync(e).then(function(){t.contextID=FBInstant.context.getID(),t.emit("create",t.contextID)}).catch(function(i){t.emit("createfail",i)}),this},getPlayers:function(){if(!this.checkAPI("playerGetConnectedPlayersAsync"))return this;var e=this;return FBInstant.player.getConnectedPlayersAsync().then(function(t){e.emit("players",t)}).catch(function(t){e.emit("playersfail",t)}),this},getCatalog:function(){if(!this.paymentsReady)return this;var e=this,t=this.catalog;return FBInstant.payments.getCatalogAsync().then(function(i){t=[],i.forEach(function(r){t.push(I0e(r))}),e.emit("getcatalog",t)}).catch(function(i){e.emit("getcatalogfail",i)}),this},getProduct:function(e){for(var t=0;t<this.catalog.length;t++)if(this.catalog[t].productID===e)return this.catalog[t];return null},purchase:function(e,t){if(!this.paymentsReady)return this;var i={productID:e};t&&(i.developerPayload=t);var r=this;return FBInstant.payments.purchaseAsync(i).then(function(s){var n=qB(s);r.emit("purchase",n)}).catch(function(s){r.emit("purchasefail",s)}),this},getPurchases:function(){if(!this.paymentsReady)return this;var e=this,t=this.purchases;return FBInstant.payments.getPurchasesAsync().then(function(i){t=[],i.forEach(function(r){t.push(qB(r))}),e.emit("getpurchases",t)}).catch(function(i){e.emit("getpurchasesfail",i)}),this},consumePurchase:function(e){if(!this.paymentsReady)return this;var t=this;return FBInstant.payments.consumePurchaseAsync(e).then(function(){t.emit("consumepurchase",e)}).catch(function(i){t.emit("consumepurchasefail",i)}),this},update:function(e,t,i,r,s,n){return this._update("CUSTOM",e,t,i,r,s,n)},updateLeaderboard:function(e,t,i,r,s,n){return this._update("LEADERBOARD",e,t,i,r,s,n)},_update:function(e,t,i,r,s,n,a){if(!this.checkAPI("shareAsync"))return this;if(t===void 0&&(t=""),typeof i=="string"&&(i={default:i}),a===void 0&&(a={}),r)var o=this.game.textures.getBase64(r,s);var h={action:e,cta:t,image:o,text:i,template:n,data:a,strategy:"IMMEDIATE",notification:"NO_PUSH"},u=this;return FBInstant.updateAsync(h).then(function(){u.emit("update")}).catch(function(f){u.emit("updatefail",f)}),this},switchGame:function(e,t){if(!this.checkAPI("switchGameAsync"))return this;if(t){var i=JSON.stringify(t);if(i.length>1e3)return console.warn("Switch Game data too long. Max 1000 chars."),this}var r=this;return FBInstant.switchGameAsync(e,t).then(function(){r.emit("switchgame",e)}).catch(function(s){r.emit("switchgamefail",s)}),this},createShortcut:function(){var e=this;return FBInstant.canCreateShortcutAsync().then(function(t){t&&FBInstant.createShortcutAsync().then(function(){e.emit("shortcutcreated")}).catch(function(i){e.emit("shortcutfailed",i)})}),this},quit:function(){FBInstant.quit()},log:function(e,t,i){return this.checkAPI("logEvent")?(i===void 0&&(i={}),e.length>=2&&e.length<=40&&FBInstant.logEvent(e,parseFloat(t),i),this):this},preloadAds:function(e){if(!this.checkAPI("getInterstitialAdAsync"))return this;Array.isArray(e)||(e=[e]);var t,i=this,r=0;for(t=0;t<this.ads.length;t++)this.ads[t].shown||r++;if(r+e.length>=3)return console.warn("Too many AdInstances. Show an ad before loading more"),this;for(t=0;t<e.length;t++){var s=e[t],n;FBInstant.getInterstitialAdAsync(s).then(function(a){return n=a,a.loadAsync()}).then(function(){var a=bB(s,n,!1);i.ads.push(a),i.emit("adloaded",a)}).catch(function(a){a.code==="ADS_NO_FILL"?i.emit("adsnofill",s):a.code==="ADS_FREQUENT_LOAD"?i.emit("adsfrequentload",s):console.warn(a)})}return this},preloadVideoAds:function(e){if(!this.checkAPI("getRewardedVideoAsync"))return this;Array.isArray(e)||(e=[e]);var t,i=this,r=0;for(t=0;t<this.ads.length;t++)this.ads[t].shown||r++;if(r+e.length>=3)return console.warn("Too many AdInstances. Show an ad before loading more"),this;for(t=0;t<e.length;t++){var s=e[t],n;FBInstant.getRewardedVideoAsync(s).then(function(a){return n=a,a.loadAsync()}).then(function(){var a=bB(s,n,!0);i.ads.push(a),i.emit("adloaded",a)}).catch(function(a){a.code==="ADS_NO_FILL"?i.emit("adsnofill",s):a.code==="ADS_FREQUENT_LOAD"?i.emit("adsfrequentload",s):console.warn(a)})}return this},showAd:function(e){for(var t=this,i=0;i<this.ads.length;i++){var r=this.ads[i];if(r.placementID===e&&!r.shown){r.instance.showAsync().then(function(){r.shown=!0,t.emit("adfinished",r)}).catch(function(s){s.code==="ADS_NOT_LOADED"?t.emit("adsnotloaded",r):s.code==="RATE_LIMITED"&&t.emit("adratelimited",r),t.emit("adshowerror",s,r)});break}}return this},showVideo:function(e){for(var t=this,i=0;i<this.ads.length;i++){var r=this.ads[i];if(r.placementID===e&&r.video&&!r.shown){r.instance.showAsync().then(function(){r.shown=!0,t.emit("adfinished",r)}).catch(function(s){s.code==="ADS_NOT_LOADED"?t.emit("adsnotloaded",r):s.code==="RATE_LIMITED"&&t.emit("adratelimited",r),t.emit("adshowerror",s,r)});break}}return this},matchPlayer:function(e,t){if(e===void 0&&(e=null),t===void 0&&(t=!1),!this.checkAPI("matchPlayerAsync"))return this;var i=this;return FBInstant.matchPlayerAsync(e,t).then(function(){i.getID(),i.getType(),i.emit("matchplayer",i.contextID,i.contextType)}),this},getLeaderboard:function(e){if(!this.checkAPI("getLeaderboardAsync"))return this;var t=this;return FBInstant.getLeaderboardAsync(e).then(function(i){var r=new D0e(t,i);t.leaderboards[e]=r,t.emit("getleaderboard",r)}).catch(function(i){console.warn(i)}),this},destroy:function(){FBInstant.quit(),this.data.destroy(),this.removeAllListeners(),this.catalog=[],this.purchases=[],this.leaderboards=[],this.ads=[],this.game=null}});OB.exports=B0e});var DB=l((u6e,GB)=>{var V0e=$a(),U0e=EN(),k0e=rc(),z0e=Et(),X0e=_(),Y0e=Td(),W0e=SN(),H0e=rv(),j0e=Xs(),K0e=sv(),Z0e=Mf(),J0e=_c(),Q0e=se(),We=Ne(),$0e=Xc(),exe=rt(),txe=Yc(),ixe=Hc(),rxe=tp(),sxe=En(),nxe=op(),axe=av(),oxe=ov();FB=gB();var FB;NB=LB();var NB,hxe=new X0e({initialize:function(t){this.config=new Y0e(t),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new Q0e,this.anims=new U0e(this),this.textures=new nxe(this),this.cache=new k0e(this),this.registry=new j0e(this),this.input=new $0e(this,this.config),this.scene=new rxe(this,this.config.sceneConfig),this.device=Z0e,this.scale=new ixe(this,this.config),this.sound=null,this.sound=FB.create(this),this.loop=new axe(this,this.config.fps),this.plugins=new txe(this,this.config),this.facebook=new NB(this),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,J0e(this.boot.bind(this))},boot:function(){if(!exe.hasCore("EventEmitter")){console.warn("Aborting. Core Plugins missing.");return}this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),H0e(this),W0e(this),K0e(this),V0e(this.canvas,this.config.parent),this.textures.once(sxe.READY,this.texturesReady,this),this.events.emit(We.BOOT)},texturesReady:function(){this.events.emit(We.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),oxe(this);var e=this.events;e.on(We.HIDDEN,this.onHidden,this),e.on(We.VISIBLE,this.onVisible,this),e.on(We.BLUR,this.onBlur,this),e.on(We.FOCUS,this.onFocus,this)},step:function(e,t){if(this.pendingDestroy)return this.runDestroy();var i=this.events;i.emit(We.PRE_STEP,e,t),i.emit(We.STEP,e,t),this.scene.update(e,t),i.emit(We.POST_STEP,e,t);var r=this.renderer;r.preRender(),i.emit(We.PRE_RENDER,r,e,t),this.scene.render(r),r.postRender(),i.emit(We.POST_RENDER,r,e,t)},headlessStep:function(e,t){if(this.pendingDestroy)return this.runDestroy();var i=this.events;i.emit(We.PRE_STEP,e,t),i.emit(We.STEP,e,t),this.scene.update(e,t),i.emit(We.POST_STEP,e,t),i.emit(We.PRE_RENDER),i.emit(We.POST_RENDER)},onHidden:function(){this.loop.pause(),this.events.emit(We.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(We.RESUME)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(e,t){t===void 0&&(t=!1),this.pendingDestroy=!0,this.removeCanvas=e,this.noReturn=t},runDestroy:function(){this.scene.destroy(),this.events.emit(We.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(z0e.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});GB.exports=hxe});var Ru=l((l6e,IB)=>{var uxe=function(e){if(!Array.isArray(e)||e.length<2||!Array.isArray(e[0]))return!1;for(var t=e[0].length,i=1;i<e.length;i++)if(e[i].length!==t)return!1;return!0};IB.exports=uxe});var VB=l((f6e,BB)=>{var lxe=iu(),fxe=Ru(),dxe=function(e){var t="";if(!fxe(e))return t;for(var i=0;i<e.length;i++){for(var r=0;r<e[i].length;r++){var s=e[i][r].toString();s!=="undefined"?t+=lxe(s,2):t+="?",r<e[i].length-1&&(t+=" |")}if(i<e.length-1){t+=`
`;for(var n=0;n<e[i].length;n++)t+="---",n<e[i].length-1&&(t+="+");t+=`
`}}return t};BB.exports=dxe});var kB=l((d6e,UB)=>{var vxe=function(e){return e.reverse()};UB.exports=vxe});var XB=l((v6e,zB)=>{var cxe=function(e){for(var t=0;t<e.length;t++)e[t].reverse();return e};zB.exports=cxe});var dp=l((c6e,YB)=>{var pxe=function(e){for(var t=e.length,i=e[0].length,r=new Array(i),s=0;s<i;s++){r[s]=new Array(t);for(var n=t-1;n>-1;n--)r[s][n]=e[n][s]}return r};YB.exports=pxe});var uo=l((p6e,HB)=>{var mxe=Ru(),WB=dp(),gxe=function(e,t){if(t===void 0&&(t=90),!mxe(e))return null;if(typeof t!="string"&&(t=(t%360+360)%360),t===90||t===-270||t==="rotateLeft")e=WB(e),e.reverse();else if(t===-90||t===270||t==="rotateRight")e.reverse(),e=WB(e);else if(Math.abs(t)===180||t==="rotate180"){for(var i=0;i<e.length;i++)e[i].reverse();e.reverse()}return e};HB.exports=gxe});var KB=l((m6e,jB)=>{var xxe=uo(),Txe=function(e){return xxe(e,180)};jB.exports=Txe});var JB=l((g6e,ZB)=>{var Exe=uo(),yxe=function(e){return Exe(e,90)};ZB.exports=yxe});var $B=l((x6e,QB)=>{var Sxe=uo(),Cxe=function(e){return Sxe(e,-90)};QB.exports=Cxe});var rV=l((T6e,iV)=>{var eV=Gh(),tV=Dh(),Rxe=function(e,t,i){if(t===void 0&&(t=0),i===void 0&&(i=0),i!==0&&(i<0?eV(e,Math.abs(i)):tV(e,i)),t!==0)for(var r=0;r<e.length;r++){var s=e[r];t<0?eV(s,Math.abs(t)):tV(s,t)}return e};iV.exports=Rxe});var nV=l((E6e,sV)=>{sV.exports={CheckMatrix:Ru(),MatrixToString:VB(),ReverseColumns:kB(),ReverseRows:XB(),Rotate180:KB(),RotateLeft:JB(),RotateMatrix:uo(),RotateRight:$B(),Translate:rV(),TransposeMatrix:dp()}});var oV=l((y6e,aV)=>{var _xe=function(e,t,i,r,s){if(s===void 0&&(s=e),i>0){var n=i-e.length;if(n<=0)return null}if(!Array.isArray(t))return e.indexOf(t)===-1?(e.push(t),r&&r.call(s,t),t):null;for(var a=t.length-1;a>=0;)e.indexOf(t[a])!==-1&&t.splice(a,1),a--;if(a=t.length,a===0)return null;i>0&&a>n&&(t.splice(n),a=n);for(var o=0;o<a;o++){var h=t[o];e.push(h),r&&r.call(s,h)}return t};aV.exports=_xe});var uV=l((S6e,hV)=>{var wxe=function(e,t,i,r,s,n){if(i===void 0&&(i=0),n===void 0&&(n=e),r>0){var a=r-e.length;if(a<=0)return null}if(!Array.isArray(t))return e.indexOf(t)===-1?(e.splice(i,0,t),s&&s.call(n,t),t):null;for(var o=t.length-1;o>=0;)e.indexOf(t[o])!==-1&&t.pop(),o--;if(o=t.length,o===0)return null;r>0&&o>a&&(t.splice(a),o=a);for(var h=o-1;h>=0;h--){var u=t[h];e.splice(i,0,u),s&&s.call(n,u)}return t};hV.exports=wxe});var fV=l((C6e,lV)=>{var Pxe=function(e,t){var i=e.indexOf(t);return i!==-1&&i<e.length&&(e.splice(i,1),e.push(t)),t};lV.exports=Pxe});var vV=l((R6e,dV)=>{var Axe=es(),bxe=function(e,t,i,r,s){r===void 0&&(r=0),s===void 0&&(s=e.length);var n=0;if(Axe(e,r,s))for(var a=r;a<s;a++){var o=e[a];o[t]===i&&n++}return n};dV.exports=bxe});var pV=l((_6e,cV)=>{var Mxe=function(e,t,i){var r,s=[null];for(r=3;r<arguments.length;r++)s.push(arguments[r]);for(r=0;r<e.length;r++)s[0]=e[r],t.apply(i,s);return e};cV.exports=Mxe});var gV=l((w6e,mV)=>{var qxe=es(),Oxe=function(e,t,i,r,s){if(r===void 0&&(r=0),s===void 0&&(s=e.length),qxe(e,r,s)){var n,a=[null];for(n=5;n<arguments.length;n++)a.push(arguments[n]);for(n=r;n<s;n++)a[0]=e[n],t.apply(i,a)}return e};mV.exports=Oxe});var vp=l((P6e,xV)=>{var Lxe=function(e,t,i){t===void 0&&(t=0),i===void 0&&(i=e.length);var r=t+Math.floor(Math.random()*i);return e[r]===void 0?null:e[r]};xV.exports=Lxe});var EV=l((A6e,TV)=>{var Fxe=function(e,t){var i=e.indexOf(t);if(i>0){var r=e[i-1],s=e.indexOf(r);e[i]=r,e[s]=t}return e};TV.exports=Fxe});var SV=l((b6e,yV)=>{var Nxe=function(e,t,i){var r=e.indexOf(t);if(r===-1||i<0||i>=e.length)throw new Error("Supplied index out of bounds");return r!==i&&(e.splice(r,1),e.splice(i,0,t)),t};yV.exports=Nxe});var RV=l((M6e,CV)=>{var Gxe=function(e,t){var i=e.indexOf(t);if(i!==-1&&i<e.length-1){var r=e[i+1],s=e.indexOf(r);e[i]=r,e[s]=t}return e};CV.exports=Gxe});var wV=l((q6e,_V)=>{var Dxe=function(e,t,i){if(t===i)return e;var r=e.indexOf(t),s=e.indexOf(i);if(r<0||s<0)throw new Error("Supplied items must be elements of the same array");return r>s||(e.splice(r,1),s===e.length-1?e.push(t):e.splice(s,0,t)),e};_V.exports=Dxe});var AV=l((O6e,PV)=>{var Ixe=function(e,t,i){if(t===i)return e;var r=e.indexOf(t),s=e.indexOf(i);if(r<0||s<0)throw new Error("Supplied items must be elements of the same array");return r<s||(e.splice(r,1),s===0?e.unshift(t):e.splice(s,0,t)),e};PV.exports=Ixe});var MV=l((L6e,bV)=>{var Bxe=nd(),Vxe=function(e,t,i){e===void 0&&(e=0),t===void 0&&(t=null),i===void 0&&(i=1),t===null&&(t=e,e=0);for(var r=[],s=Math.max(Bxe((t-e)/(i||1)),0),n=0;n<s;n++)r.push(e),e+=i;return r};bV.exports=Vxe});var cp=l((F6e,OV)=>{function lo(e,t,i){var r=e[t];e[t]=e[i],e[i]=r}function Uxe(e,t){return e<t?-1:e>t?1:0}var qV=function(e,t,i,r,s){for(i===void 0&&(i=0),r===void 0&&(r=e.length-1),s===void 0&&(s=Uxe);r>i;){if(r-i>600){var n=r-i+1,a=t-i+1,o=Math.log(n),h=.5*Math.exp(2*o/3),u=.5*Math.sqrt(o*h*(n-h)/n)*(a-n/2<0?-1:1),f=Math.max(i,Math.floor(t-a*h/n+u)),d=Math.min(r,Math.floor(t+(n-a)*h/n+u));qV(e,t,f,d,s)}var v=e[t],c=i,p=r;for(lo(e,i,t),s(e[r],v)>0&&lo(e,i,r);c<p;){for(lo(e,c,p),c++,p--;s(e[c],v)<0;)c++;for(;s(e[p],v)>0;)p--}s(e[i],v)===0?lo(e,i,p):(p++,lo(e,p,r)),p<=t&&(i=p+1),t<=p&&(r=p-1)}};OV.exports=qV});var pp=l((N6e,FV)=>{var Hn=ie(),LV=Vh(),kxe=function(e,t,i){for(var r=[],s=0;s<e.length;s++)for(var n=0;n<t.length;n++)for(var a=0;a<i;a++)r.push({a:e[s],b:t[n]});return r},zxe=function(e,t,i){var r=Hn(i,"max",0),s=Hn(i,"qty",1),n=Hn(i,"random",!1),a=Hn(i,"randomB",!1),o=Hn(i,"repeat",0),h=Hn(i,"yoyo",!1),u=[];if(a&&LV(t),o===-1)if(r===0)o=0;else{var f=e.length*t.length*s;h&&(f*=2),o=Math.ceil(r/f)}for(var d=0;d<=o;d++){var v=kxe(e,t,s);n&&LV(v),u=u.concat(v),h&&(v.reverse(),u=u.concat(v))}return r&&u.splice(r),u};FV.exports=zxe});var GV=l((G6e,NV)=>{var Xxe=Gs(),Yxe=function(e,t,i,r){if(r===void 0&&(r=e),t<0||t>e.length-1)throw new Error("Index out of bounds");var s=Xxe(e,t);return i&&i.call(r,s),s};NV.exports=Yxe});var IV=l((D6e,DV)=>{var Wxe=es(),Hxe=function(e,t,i,r,s){if(t===void 0&&(t=0),i===void 0&&(i=e.length),s===void 0&&(s=e),Wxe(e,t,i)){var n=i-t,a=e.splice(t,n);if(r)for(var o=0;o<a.length;o++){var h=a[o];r.call(s,h)}return a}else return[]};DV.exports=Hxe});var VV=l((I6e,BV)=>{var jxe=Gs(),Kxe=function(e,t,i){t===void 0&&(t=0),i===void 0&&(i=e.length);var r=t+Math.floor(Math.random()*i);return jxe(e,r)};BV.exports=Kxe});var kV=l((B6e,UV)=>{var Zxe=function(e,t,i){var r=e.indexOf(t),s=e.indexOf(i);return r!==-1&&s===-1?(e[r]=i,!0):!1};UV.exports=Zxe});var XV=l((V6e,zV)=>{var Jxe=function(e,t){var i=e.indexOf(t);return i!==-1&&i>0&&(e.splice(i,1),e.unshift(t)),t};zV.exports=Jxe});var WV=l((U6e,YV)=>{var Qxe=es(),$xe=function(e,t,i,r,s){if(r===void 0&&(r=0),s===void 0&&(s=e.length),Qxe(e,r,s))for(var n=r;n<s;n++){var a=e[n];a.hasOwnProperty(t)&&(a[t]=i)}return e};YV.exports=$xe});var rs=l((k6e,jV)=>{function eTe(e,t){return String(e).localeCompare(t)}function tTe(e,t){var i=e.length;if(i<=1)return e;for(var r=new Array(i),s=1;s<i;s*=2){HV(e,t,s,r);var n=e;e=r,r=n}return e}function HV(e,t,i,r){var s=e.length,n=0,a=i*2,o,h,u,f,d;for(o=0;o<s;o+=a)for(h=o+i,u=h+i,h>s&&(h=s),u>s&&(u=s),f=o,d=h;;)if(f<h&&d<u)t(e[f],e[d])<=0?r[n++]=e[f++]:r[n++]=e[d++];else if(f<h)r[n++]=e[f++];else if(d<u)r[n++]=e[d++];else break}var iTe=function(e,t){t===void 0&&(t=eTe);var i=tTe(e,t);return i!==e&&HV(i,null,e.length,e),e};jV.exports=iTe});var ZV=l((z6e,KV)=>{var rTe=function(e,t,i){if(t===i)return e;var r=e.indexOf(t),s=e.indexOf(i);if(r<0||s<0)throw new Error("Supplied items must be elements of the same array");return e[r]=i,e[s]=t,e};KV.exports=rTe});var _u=l((X6e,JV)=>{JV.exports={Matrix:nV(),Add:oV(),AddAt:uV(),BringToTop:fV(),CountAllMatching:vV(),Each:pV(),EachInRange:gV(),FindClosestInSorted:Fc(),GetAll:mu(),GetFirst:hp(),GetRandom:vp(),MoveDown:EV(),MoveTo:SV(),MoveUp:RV(),MoveAbove:wV(),MoveBelow:AV(),NumberArray:Dc(),NumberArrayStep:MV(),QuickSelect:cp(),Range:pp(),Remove:Ds(),RemoveAt:GV(),RemoveBetween:IV(),RemoveRandomElement:VV(),Replace:kV(),RotateLeft:Gh(),RotateRight:Dh(),SafeRange:es(),SendToBack:XV(),SetAll:WV(),Shuffle:Vh(),SortByDigits:Nc(),SpliceOne:Gs(),StableSort:rs(),Swap:ZV()}});var jn=l((Y6e,$V)=>{var ve=_u(),sTe=_(),QV=B(),nTe=rs(),aTe=new sTe({initialize:function(t){this.parent=t,this.list=[],this.position=0,this.addCallback=QV,this.removeCallback=QV,this._sortKey=""},add:function(e,t){return t?ve.Add(this.list,e):ve.Add(this.list,e,0,this.addCallback,this)},addAt:function(e,t,i){return i?ve.AddAt(this.list,e,t):ve.AddAt(this.list,e,t,0,this.addCallback,this)},getAt:function(e){return this.list[e]},getIndex:function(e){return this.list.indexOf(e)},sort:function(e,t){return e?(t===void 0&&(t=function(i,r){return i[e]-r[e]}),nTe(this.list,t),this):this},getByName:function(e){return ve.GetFirst(this.list,"name",e)},getRandom:function(e,t){return ve.GetRandom(this.list,e,t)},getFirst:function(e,t,i,r){return ve.GetFirst(this.list,e,t,i,r)},getAll:function(e,t,i,r){return ve.GetAll(this.list,e,t,i,r)},count:function(e,t){return ve.CountAllMatching(this.list,e,t)},swap:function(e,t){ve.Swap(this.list,e,t)},moveTo:function(e,t){return ve.MoveTo(this.list,e,t)},moveAbove:function(e,t){return ve.MoveAbove(this.list,e,t)},moveBelow:function(e,t){return ve.MoveBelow(this.list,e,t)},remove:function(e,t){return t?ve.Remove(this.list,e):ve.Remove(this.list,e,this.removeCallback,this)},removeAt:function(e,t){return t?ve.RemoveAt(this.list,e):ve.RemoveAt(this.list,e,this.removeCallback,this)},removeBetween:function(e,t,i){return i?ve.RemoveBetween(this.list,e,t):ve.RemoveBetween(this.list,e,t,this.removeCallback,this)},removeAll:function(e){for(var t=this.list.length;t--;)this.remove(this.list[t],e);return this},bringToTop:function(e){return ve.BringToTop(this.list,e)},sendToBack:function(e){return ve.SendToBack(this.list,e)},moveUp:function(e){return ve.MoveUp(this.list,e),e},moveDown:function(e){return ve.MoveDown(this.list,e),e},reverse:function(){return this.list.reverse(),this},shuffle:function(){return ve.Shuffle(this.list),this},replace:function(e,t){return ve.Replace(this.list,e,t)},exists:function(e){return this.list.indexOf(e)>-1},setAll:function(e,t,i,r){return ve.SetAll(this.list,e,t,i,r),this},each:function(e,t){for(var i=[null],r=2;r<arguments.length;r++)i.push(arguments[r]);for(r=0;r<this.list.length;r++)i[0]=this.list[r],e.apply(t,i)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});$V.exports=aTe});var sU=l((W6e,rU)=>{var oTe=_(),eU=jn(),hTe=rt(),tU=Xr(),ss=qe(),uTe=rs(),iU=new oTe({Extends:eU,initialize:function(t){eU.call(this,t),this.sortChildrenFlag=!1,this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(ss.BOOT,this.boot,this),this.events.on(ss.START,this.start,this)},boot:function(){this.events.once(ss.DESTROY,this.destroy,this)},addChildCallback:function(e){e.displayList&&e.displayList!==this&&e.removeFromDisplayList(),e.displayList||(this.queueDepthSort(),e.displayList=this,e.emit(tU.ADDED_TO_SCENE,e,this.scene),this.events.emit(ss.ADDED_TO_SCENE,e,this.scene))},removeChildCallback:function(e){this.queueDepthSort(),e.displayList=null,e.emit(tU.REMOVED_FROM_SCENE,e,this.scene),this.events.emit(ss.REMOVED_FROM_SCENE,e,this.scene)},start:function(){this.events.once(ss.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(uTe(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(e,t){return e._depth-t._depth},getChildren:function(){return this.list},shutdown:function(){for(var e=this.list,t=e.length;t--;)e[t].destroy(!0);e.length=0,this.events.off(ss.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(ss.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});hTe.register("DisplayList",iU,"displayList");rU.exports=iU});var aU=l((H6e,nU)=>{nU.exports="add"});var hU=l((j6e,oU)=>{oU.exports="remove"});var mp=l((K6e,uU)=>{uU.exports={PROCESS_QUEUE_ADD:aU(),PROCESS_QUEUE_REMOVE:hU()}});var gp=l((Z6e,dU)=>{var lTe=_(),lU=se(),fU=mp(),fTe=new lTe({Extends:lU,initialize:function(){lU.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},add:function(e){return this._pending.push(e),this._toProcess++,e},remove:function(e){return this._destroy.push(e),this._toProcess++,e},removeAll:function(){for(var e=this._active,t=this._destroy,i=e.length;i--;)t.push(e[i]),this._toProcess++;return this},update:function(){if(this._toProcess===0)return this._active;var e=this._destroy,t=this._active,i,r;for(i=0;i<e.length;i++){r=e[i];var s=t.indexOf(r);s!==-1&&(t.splice(s,1),this.emit(fU.PROCESS_QUEUE_REMOVE,r))}for(e.length=0,e=this._pending,i=0;i<e.length;i++)r=e[i],(!this.checkQueue||this.checkQueue&&t.indexOf(r)===-1)&&(t.push(r),this.emit(fU.PROCESS_QUEUE_ADD,r));return e.length=0,this._toProcess=0,t},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});dU.exports=fTe});var mU=l((J6e,pU)=>{var dTe=_(),vU=gp(),vTe=rt(),Hi=qe(),cU=new dTe({Extends:vU,initialize:function(t){vU.call(this),this.checkQueue=!0,this.scene=t,this.systems=t.sys,t.sys.events.once(Hi.BOOT,this.boot,this),t.sys.events.on(Hi.START,this.start,this)},boot:function(){this.systems.events.once(Hi.DESTROY,this.destroy,this)},start:function(){var e=this.systems.events;e.on(Hi.PRE_UPDATE,this.update,this),e.on(Hi.UPDATE,this.sceneUpdate,this),e.once(Hi.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(e,t){for(var i=this._active,r=i.length,s=0;s<r;s++){var n=i[s];n.active&&n.preUpdate.call(n,e,t)}},shutdown:function(){for(var e=this._active.length;e--;)this._active[e].destroy(!0);for(e=this._pending.length;e--;)this._pending[e].destroy(!0);for(e=this._destroy.length;e--;)this._destroy[e].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var t=this.systems.events;t.off(Hi.PRE_UPDATE,this.update,this),t.off(Hi.UPDATE,this.sceneUpdate,this),t.off(Hi.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(Hi.START,this.start,this),this.scene=null,this.systems=null}});vTe.register("UpdateList",cU,"updateList");pU.exports=cU});var Re=l((Q6e,EU)=>{var xp=dt(),gU=new xp,xU=new xp,TU=new xp,cTe={camera:gU,sprite:xU,calc:TU},pTe=function(e,t,i){var r=gU,s=xU,n=TU;return s.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),r.copyFrom(t.matrix),i?(r.multiplyWithOffset(i,-t.scrollX*e.scrollFactorX,-t.scrollY*e.scrollFactorY),s.e=e.x,s.f=e.y):(s.e-=t.scrollX*e.scrollFactorX,s.f-=t.scrollY*e.scrollFactorY),r.multiply(s,n),cTe};EU.exports=pTe});var pe=l(($6e,yU)=>{var Tp=ah(),mTe=ie(),gTe=function(e,t,i){var r=mTe(e,t,null);if(r===null)return i;if(Array.isArray(r))return Tp.RND.pick(r);if(typeof r=="object"){if(r.hasOwnProperty("randInt"))return Tp.RND.integerInRange(r.randInt[0],r.randInt[1]);if(r.hasOwnProperty("randFloat"))return Tp.RND.realInRange(r.randFloat[0],r.randFloat[1])}else if(typeof r=="function")return r(t);return r};yU.exports=gTe});var nt=l((eje,SU)=>{var xTe=mi(),De=pe(),TTe=function(e,t,i){t.x=De(i,"x",0),t.y=De(i,"y",0),t.depth=De(i,"depth",0),t.flipX=De(i,"flipX",!1),t.flipY=De(i,"flipY",!1);var r=De(i,"scale",null);typeof r=="number"?t.setScale(r):r!==null&&(t.scaleX=De(r,"x",1),t.scaleY=De(r,"y",1));var s=De(i,"scrollFactor",null);typeof s=="number"?t.setScrollFactor(s):s!==null&&(t.scrollFactorX=De(s,"x",1),t.scrollFactorY=De(s,"y",1)),t.rotation=De(i,"rotation",0);var n=De(i,"angle",null);n!==null&&(t.angle=n),t.alpha=De(i,"alpha",1);var a=De(i,"origin",null);if(typeof a=="number")t.setOrigin(a);else if(a!==null){var o=De(a,"x",.5),h=De(a,"y",.5);t.setOrigin(o,h)}t.blendMode=De(i,"blendMode",xTe.NORMAL),t.visible=De(i,"visible",!0);var u=De(i,"add",!0);return u&&e.sys.displayList.add(t),t.preUpdate&&e.sys.updateList.add(t),t};SU.exports=TTe});var Ep=l((tje,CU)=>{var gr=pe(),ETe=function(e,t){var i=gr(t,"anims",null);if(i===null)return e;if(typeof i=="string")e.anims.play(i);else if(typeof i=="object"){var r=e.anims,s=gr(i,"key",void 0);if(s){var n=gr(i,"startFrame",void 0),a=gr(i,"delay",0),o=gr(i,"repeat",0),h=gr(i,"repeatDelay",0),u=gr(i,"yoyo",!1),f=gr(i,"play",!1),d=gr(i,"delayedPlay",0),v={key:s,delay:a,repeat:o,repeatDelay:h,yoyo:u,startFrame:n};f?r.play(v):d>0?r.playAfterDelay(v,d):r.load(v)}}return e};CU.exports=ETe});var _U=l((ije,RU)=>{var yTe=function(e,t,i,r){if(i===void 0&&(i=!1),r===void 0)return r={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0},r;var s=e.text,n=s.length,a=e.maxWidth,o=e.wordWrapCharCode,h=Number.MAX_VALUE,u=Number.MAX_VALUE,f=0,d=0,v=e.fontData.chars,c=e.fontData.lineHeight,p=e.letterSpacing,m=0,g=0,x=0,T=null,E=e._align,R=0,y=0,C=e.fontSize/e.fontData.size,S=C*e.scaleX,w=C*e.scaleY,P=null,A=0,M=[],N=Number.MAX_VALUE,O=0,D=0,b=0,q,G=[],L=[],F=null;if(a>0){for(q=0;q<n;q++){if(x=s.charCodeAt(q),x===10){F!==null&&(G.push({word:F.word,i:F.i,x:F.x*S,y:F.y*w,w:F.w*S,h:F.h*w,cr:!0}),F=null),m=0,g+=c,P=null;continue}if(T=v[x],!!T){if(P!==null)var V=T.kerning[A];x===o?F!==null&&(G.push({word:F.word,i:F.i,x:F.x*S,y:F.y*w,w:F.w*S,h:F.h*w,cr:!1}),F=null):(F===null&&(F={word:"",i:q,x:m,y:g,w:0,h:c,cr:!1}),F.word=F.word.concat(s[q]),F.w+=T.xOffset+T.xAdvance+(V!==void 0?V:0)),m+=T.xAdvance+p,P=T,A=x}}F!==null&&G.push({word:F.word,i:F.i,x:F.x*S,y:F.y*w,w:F.w*S,h:F.h*w,cr:!1}),m=0,g=0,P=null,A=0;var Y,z=0,Z=[];for(q=0;q<G.length;q++){var U=G[q],H=U.x,at=U.x+U.w;if(Y){var Te=H-(Y.x+Y.w);z=H-(Te+Y.w),Y=null}var Bt=H-z,Ue=at-z;Bt>a||Ue>a?(Z.push(U.i-1),U.cr?(Z.push(U.i+U.word.length),z=0,Y=null):Y=U):U.cr&&(Z.push(U.i+U.word.length),z=0,Y=null)}var ot=function(fn,dn,Ra){return fn.substr(0,dn)+Ra+fn.substr(dn+1)};for(q=Z.length-1;q>=0;q--)s=ot(s,Z[q],`
`);r.wrappedText=s,n=s.length,G=[],F=null}var xt=0;for(q=0;q<n;q++){if(x=s.charCodeAt(q),x===10){F!==null&&(G.push({word:F.word,i:F.i,x:F.x*S,y:F.y*w,w:F.w*S,h:F.h*w}),F=null),m=0,g+=c,P=null,M[D]=b,b>O&&(O=b),b<N&&(N=b),D++,b=0;continue}if(T=v[x],!!T){if(R=m,y=g,P!==null){var re=T.kerning[A];R+=re!==void 0?re:0}h>R&&(h=R),u>y&&(u=y);var ht=R+T.xAdvance,_e=y+c;f<ht&&(f=ht),d<_e&&(d=_e);var ti=T.xOffset+T.xAdvance+(re!==void 0?re:0);x===o?F!==null&&(G.push({word:F.word,i:F.i,x:F.x*S,y:F.y*w,w:F.w*S,h:F.h*w}),F=null):(F===null&&(F={word:"",i:xt,x:m,y:g,w:0,h:c}),F.word=F.word.concat(s[q]),F.w+=ti),L.push({i:xt,char:s[q],code:x,x:(T.xOffset+m)*C,y:(T.yOffset+g)*C,w:T.width*C,h:T.height*C,t:g*C,r:ht*C,b:c*C,line:D,glyph:T}),m+=T.xAdvance+p,P=T,A=x,b=ht*C,xt++}}if(F!==null&&G.push({word:F.word,i:F.i,x:F.x*S,y:F.y*w,w:F.w*S,h:F.h*w}),M[D]=b,b>O&&(O=b),b<N&&(N=b),E>0)for(var bt=0;bt<L.length;bt++){var $e=L[bt];if(E===1){var Vt=(O-M[$e.line])/2;$e.x+=Vt,$e.r+=Vt}else if(E===2){var ii=O-M[$e.line];$e.x+=ii,$e.r+=ii}}var Ee=r.local,oe=r.global,Tt=r.lines;return Ee.x=h*C,Ee.y=u*C,Ee.width=f*C,Ee.height=d*C,oe.x=e.x-e._displayOriginX+h*S,oe.y=e.y-e._displayOriginY+u*w,oe.width=f*S,oe.height=d*w,Tt.shortest=N,Tt.longest=O,Tt.lengths=M,t&&(Ee.x=Math.ceil(Ee.x),Ee.y=Math.ceil(Ee.y),Ee.width=Math.ceil(Ee.width),Ee.height=Math.ceil(Ee.height),oe.x=Math.ceil(oe.x),oe.y=Math.ceil(oe.y),oe.width=Math.ceil(oe.width),oe.height=Math.ceil(oe.height),Tt.shortest=Math.ceil(N),Tt.longest=Math.ceil(O)),i&&(e._displayOriginX=e.originX*Ee.width,e._displayOriginY=e.originY*Ee.height,oe.x=e.x-e._displayOriginX*e.scaleX,oe.y=e.y-e._displayOriginY*e.scaleY,t&&(oe.x=Math.ceil(oe.x),oe.y=Math.ceil(oe.y))),r.words=G,r.characters=L,r.lines.height=c,r.scale=C,r.scaleX=e.scaleX,r.scaleY=e.scaleY,r};RU.exports=yTe});var wu=l((rje,wU)=>{function jt(e,t){return parseInt(e.getAttribute(t),10)}var STe=function(e,t,i,r,s){i===void 0&&(i=0),r===void 0&&(r=0);var n=t.cutX,a=t.cutY,o=t.source.width,h=t.source.height,u=t.sourceIndex,f={},d=e.getElementsByTagName("info")[0],v=e.getElementsByTagName("common")[0];f.font=d.getAttribute("face"),f.size=jt(d,"size"),f.lineHeight=jt(v,"lineHeight")+r,f.chars={};var c=e.getElementsByTagName("char"),p=t!==void 0&&t.trimmed;if(p)var m=t.height,g=t.width;for(var x=0;x<c.length;x++){var T=c[x],E=jt(T,"id"),R=String.fromCharCode(E),y=jt(T,"x"),C=jt(T,"y"),S=jt(T,"width"),w=jt(T,"height");p&&(y<g&&(g=y),C<m&&(m=C)),p&&m!==0&&g!==0&&(y-=t.x,C-=t.y);var P=(n+y)/o,A=(a+C)/h,M=(n+y+S)/o,N=(a+C+w)/h;if(f.chars[E]={x:y,y:C,width:S,height:w,centerX:Math.floor(S/2),centerY:Math.floor(w/2),xOffset:jt(T,"xoffset"),yOffset:jt(T,"yoffset"),xAdvance:jt(T,"xadvance")+i,data:{},kerning:{},u0:P,v0:A,u1:M,v1:N},s&&S!==0&&w!==0){var O=s.add(R,u,y,C,S,w);O&&O.setUVs(S,w,P,A,M,N)}}var D=e.getElementsByTagName("kerning");for(x=0;x<D.length;x++){var b=D[x],q=jt(b,"first"),G=jt(b,"second"),L=jt(b,"amount");f.chars[G].kerning[q]=L}return f};wU.exports=STe});var AU=l((sje,PU)=>{var CTe=wu(),RTe=function(e,t,i,r,s,n,a){var o=e.sys.textures.get(i),h=o.get(r),u=e.sys.cache.xml.get(s);if(h&&u){var f=CTe(u,h,n,a,o);return e.sys.cache.bitmapFont.add(t,{data:f,texture:i,frame:r,fromAtlas:!0}),!0}else return!1};PU.exports=RTe});var MU=l((nje,bU)=>{var _Te=function(e,t,i,r,s,n,a,o,h,u,f,d,v,c,p){var m=i.x-t.displayOriginX+s,g=i.y-t.displayOriginY+n,x=m+i.w,T=g+i.h,E=a.getXRound(m,g,o),R=a.getYRound(m,g,o),y=a.getXRound(m,T,o),C=a.getYRound(m,T,o),S=a.getXRound(x,T,o),w=a.getYRound(x,T,o),P=a.getXRound(x,g,o),A=a.getYRound(x,g,o);e.batchQuad(t,E,R,y,C,S,w,P,A,r.u0,r.v0,r.u1,r.v1,h,u,f,d,v,c,p)};bU.exports=_Te});var OU=l((aje,qU)=>{var yp=MU(),wTe=Re(),PTe=fe(),ATe=function(e,t,i,r){var s=t._text,n=s.length;if(n!==0){i.addToRenderList(t);var a=e.pipelines.set(t.pipeline,t),o=wTe(t,i,r).calc,h=i.roundPixels,u=i.alpha,f=t.charColors,d=t.tintFill,v=PTe.getTintAppendFloatAlpha,c=v(t.tintTopLeft,u*t._alphaTL),p=v(t.tintTopRight,u*t._alphaTR),m=v(t.tintBottomLeft,u*t._alphaBL),g=v(t.tintBottomRight,u*t._alphaBR),x=t.frame.glTexture,T=a.setGameObject(t),E=t.getTextBounds(!1),R,y,C,S=E.characters,w=t.dropShadowX,P=t.dropShadowY,A=w!==0||P!==0;if(e.pipelines.preBatch(t),A){var M=t.dropShadowColor,N=t.dropShadowAlpha,O=v(M,u*N*t._alphaTL),D=v(M,u*N*t._alphaTR),b=v(M,u*N*t._alphaBL),q=v(M,u*N*t._alphaBR);for(R=0;R<S.length;R++)y=S[R],C=y.glyph,!(y.code===32||C.width===0||C.height===0)&&yp(a,t,y,C,w,P,o,h,O,D,b,q,1,x,T)}for(R=0;R<S.length;R++)if(y=S[R],C=y.glyph,!(y.code===32||C.width===0||C.height===0))if(f[y.i]){var G=f[y.i],L=G.tintEffect,F=v(G.tintTL,u*t._alphaTL),V=v(G.tintTR,u*t._alphaTR),Y=v(G.tintBL,u*t._alphaBL),z=v(G.tintBR,u*t._alphaBR);yp(a,t,y,C,0,0,o,h,F,V,Y,z,L,x,T)}else yp(a,t,y,C,0,0,o,h,c,p,m,g,d,x,T);e.pipelines.postBatch(t)}};qU.exports=ATe});var vt=l((oje,LU)=>{var bTe=Re(),MTe=function(e,t,i,r,s){var n=r.alpha*i.alpha;if(n<=0)return!1;var a=bTe(i,r,s).calc;return t.globalCompositeOperation=e.blendModes[i.blendMode],t.globalAlpha=n,t.save(),a.setToContext(t),t.imageSmoothingEnabled=!(!e.antialias||i.frame&&i.frame.source.scaleMode),!0};LU.exports=MTe});var NU=l((hje,FU)=>{var qTe=vt(),OTe=function(e,t,i,r){var s=t._text,n=s.length,a=e.currentContext;if(!(n===0||!qTe(e,a,t,i,r))){i.addToRenderList(t);var o=t.fromAtlas?t.frame:t.texture.frames.__BASE,h=t.fontData.chars,u=t.fontData.lineHeight,f=t._letterSpacing,d=0,v=0,c=0,p=null,m=0,g=0,x=0,T=0,E=0,R=0,y=null,C=0,S=o.source.image,w=o.cutX,P=o.cutY,A=t._fontSize/t.fontData.size,M=t._align,N=0,O=0,D=t.getTextBounds(!1);t.maxWidth>0&&(s=D.wrappedText,n=s.length);var b=t._bounds.lines;M===1?O=(b.longest-b.lengths[0])/2:M===2&&(O=b.longest-b.lengths[0]),a.translate(-t.displayOriginX,-t.displayOriginY);for(var q=i.roundPixels,G=0;G<n;G++){if(c=s.charCodeAt(G),c===10){N++,M===1?O=(b.longest-b.lengths[N])/2:M===2&&(O=b.longest-b.lengths[N]),d=0,v+=u,y=null;continue}if(p=h[c],!!p){if(m=w+p.x,g=P+p.y,x=p.width,T=p.height,E=p.xOffset+d,R=p.yOffset+v,y!==null){var L=p.kerning[C];E+=L!==void 0?L:0}E*=A,R*=A,E+=O,d+=p.xAdvance+f,y=p,C=c,!(x===0||T===0||c===32)&&(q&&(E=Math.round(E),R=Math.round(R)),a.save(),a.translate(E,R),a.scale(A,A),a.drawImage(S,m,g,x,T,0,0,x,T),a.restore())}}a.restore()}};FU.exports=OTe});var BU=l((uje,IU)=>{var GU=B(),DU=B();GU=OU();DU=NU();IU.exports={renderWebGL:GU,renderCanvas:DU}});var fo=l((lje,kU)=>{var LTe=_(),VU=Pe(),li=de(),UU=Ae(),Sp=_U(),FTe=AU(),NTe=wu(),GTe=ye(),DTe=BU(),xr=new LTe({Extends:UU,Mixins:[li.Alpha,li.BlendMode,li.Depth,li.Mask,li.Origin,li.Pipeline,li.ScrollFactor,li.Texture,li.Tint,li.Transform,li.Visible,DTe],initialize:function(t,i,r,s,n,a,o){n===void 0&&(n=""),o===void 0&&(o=0),UU.call(this,t,"BitmapText"),this.font=s;var h=this.scene.sys.cache.bitmapFont.get(s);h||console.warn("Invalid BitmapText key: "+s),this.fontData=h.data,this._text="",this._fontSize=a||this.fontData.size,this._letterSpacing=0,this._align=o,this._bounds=Sp(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=h.fromAtlas,this.setTexture(h.texture,h.frame),this.setPosition(i,r),this.setOrigin(0,0),this.initPipeline(),this.setText(n)},setLeftAlign:function(){return this._align=xr.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=xr.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=xr.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(e){return this._fontSize=e,this._dirty=!0,this},setLetterSpacing:function(e){return e===void 0&&(e=0),this._letterSpacing=e,this._dirty=!0,this},setText:function(e){return!e&&e!==0&&(e=""),Array.isArray(e)&&(e=e.join(`
`)),e!==this.text&&(this._text=e.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(e,t,i,r){return e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=0),r===void 0&&(r=.5),this.dropShadowX=e,this.dropShadowY=t,this.dropShadowColor=i,this.dropShadowAlpha=r,this},setCharacterTint:function(e,t,i,r,s,n,a){e===void 0&&(e=0),t===void 0&&(t=1),i===void 0&&(i=!1),r===void 0&&(r=-1),s===void 0&&(s=r,n=r,a=r);var o=this.text.length;t===-1&&(t=o),e<0&&(e=o+e),e=VU(e,0,o-1);for(var h=VU(e+t,e,o),u=this.charColors,f=e;f<h;f++){var d=u[f];if(r===-1)u[f]=null;else{var v=i?1:0;d?(d.tintEffect=v,d.tintTL=r,d.tintTR=s,d.tintBL=n,d.tintBR=a):u[f]={tintEffect:v,tintTL:r,tintTR:s,tintBL:n,tintBR:a}}}return this},setWordTint:function(e,t,i,r,s,n,a){t===void 0&&(t=1);for(var o=this.getTextBounds(),h=o.words,u=typeof e=="number",f=0,d=0;d<h.length;d++){var v=h[d];if((u&&d===e||!u&&v.word===e)&&(this.setCharacterTint(v.i,v.word.length,i,r,s,n,a),f++,f===t))return this}return this},getTextBounds:function(e){var t=this._bounds;return(this._dirty||e||this.scaleX!==t.scaleX||this.scaleY!==t.scaleY)&&(Sp(this,e,!0,t),this._dirty=!1),t},getCharacterAt:function(e,t,i){for(var r=this.getLocalPoint(e,t,null,i),s=this.getTextBounds(),n=s.characters,a=new GTe,o=0;o<n.length;o++){var h=n[o];if(a.setTo(h.x,h.t,h.r-h.x,h.b),a.contains(r.x,r.y))return h}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(e,t,i){if(t===void 0&&(t=this._fontSize),i===void 0&&(i=this._align),e!==this.font){var r=this.scene.sys.cache.bitmapFont.get(e);r&&(this.font=e,this.fontData=r.data,this._fontSize=t,this._align=i,this.fromAtlas=r.fromAtlas===!0,this.setTexture(r.texture,r.frame),Sp(this,!1,!0,this._bounds))}return this},setMaxWidth:function(e,t){return this._maxWidth=e,this._dirty=!0,t!==void 0&&(this.wordWrapCharCode=t),this},align:{set:function(e){this._align=e,this._dirty=!0},get:function(){return this._align}},text:{set:function(e){this.setText(e)},get:function(){return this._text}},fontSize:{set:function(e){this._fontSize=e,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(e){this._letterSpacing=e,this._dirty=!0},get:function(){return this._letterSpacing}},maxWidth:{set:function(e){this._maxWidth=e,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},toJSON:function(){var e=li.ToJSON(this),t={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,align:this.align};return e.data=t,e},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});xr.ALIGN_LEFT=0;xr.ALIGN_CENTER=1;xr.ALIGN_RIGHT=2;xr.ParseFromAtlas=FTe;xr.ParseXMLBitmapFont=NTe;kU.exports=xr});var XU=l((fje,zU)=>{var ITe=dt(),BTe=fe(),VTe=new ITe,UTe=function(e,t,i,r){var s=t.getRenderList();if(s.length!==0){var n=i.alpha*t.alpha;if(n!==0){i.addToRenderList(t);var a=e.pipelines.set(this.pipeline,t),o=i.scrollX*t.scrollFactorX,h=i.scrollY*t.scrollFactorY,u=VTe.copyFrom(i.matrix);r&&(u.multiplyWithOffset(r,-o,-h),o=0,h=0);var f=t.x-o,d=t.y-h,v=-1,c=!1,p=i.roundPixels;e.pipelines.preBatch(t);for(var m=0;m<s.length;m++){var g=s[m],x=g.frame,T=g.alpha*n;if(T!==0){var E=x.width,R=x.height,y=f+g.x+x.x,C=d+g.y+x.y;g.flipX&&(E*=-1,y+=x.width),g.flipY&&(R*=-1,C+=x.height);var S=y+E,w=C+R,P=u.getX(y,C),A=u.getY(y,C),M=u.getX(S,w),N=u.getY(S,w),O=BTe.getTintAppendFloatAlpha(g.tint,T);if(x.sourceIndex!==v){var D=a.setGameObject(t,x);v=x.sourceIndex}p&&(P=Math.round(P),A=Math.round(A),M=Math.round(M),N=Math.round(N)),a.batchQuad(t,P,A,P,N,M,N,M,A,x.u0,x.v0,x.u1,x.v1,O,O,O,O,c,x.glTexture,D)&&(v=-1)}}e.pipelines.postBatch(t)}}};zU.exports=UTe});var WU=l((dje,YU)=>{var kTe=function(e,t,i,r){var s=t.getRenderList();if(s.length!==0){var n=e.currentContext,a=i.alpha*t.alpha;if(a!==0){i.addToRenderList(t),n.globalCompositeOperation=e.blendModes[t.blendMode],n.imageSmoothingEnabled=!(!e.antialias||t.frame.source.scaleMode);var o=t.x-i.scrollX*t.scrollFactorX,h=t.y-i.scrollY*t.scrollFactorY;n.save(),r&&r.copyToContext(n);for(var u=i.roundPixels,f=0;f<s.length;f++){var d=s[f],v=d.flipX||d.flipY,c=d.frame,p=c.canvasData,m=c.x,g=c.y,x=1,T=1,E=d.alpha*a;E!==0&&(n.globalAlpha=E,v?(d.flipX&&(x=-1,m-=p.width),d.flipY&&(T=-1,g-=p.height),n.save(),n.translate(d.x+o,d.y+h),n.scale(x,T),n.drawImage(c.source.image,p.x,p.y,p.width,p.height,m,g,p.width,p.height),n.restore()):(u&&(m=Math.round(m),g=Math.round(g)),n.drawImage(c.source.image,p.x,p.y,p.width,p.height,m+d.x+o,g+d.y+h,p.width,p.height)))}n.restore()}}};YU.exports=kTe});var ZU=l((vje,KU)=>{var HU=B(),jU=B();HU=XU();jU=WU();KU.exports={renderWebGL:HU,renderCanvas:jU}});var Cp=l((cje,JU)=>{var zTe=_(),XTe=Vn(),YTe=new zTe({initialize:function(t,i,r,s,n){this.parent=t,this.x=i,this.y=r,this.frame=s,this.data={},this.tint=16777215,this._visible=n,this._alpha=1,this.flipX=!1,this.flipY=!1},setFrame:function(e){return e===void 0?this.frame=this.parent.frame:e instanceof XTe&&e.texture===this.parent.texture?this.frame=e:this.frame=this.parent.texture.get(e),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(e,t,i){return this.x=e,this.y=t,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,i&&this.setFrame(i),this},setPosition:function(e,t){return this.x=e,this.y=t,this},setFlipX:function(e){return this.flipX=e,this},setFlipY:function(e){return this.flipY=e,this},setFlip:function(e,t){return this.flipX=e,this.flipY=t,this},setVisible:function(e){return this.visible=e,this},setAlpha:function(e){return this.alpha=e,this},setTint:function(e){return this.tint=e,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(e){this.parent.dirty|=this._visible!==e,this._visible=e}},alpha:{get:function(){return this._alpha},set:function(e){this.parent.dirty|=this._alpha>0!=e>0,this._alpha=e}}});JU.exports=YTe});var Pu=l((pje,$U)=>{var WTe=ZU(),HTe=Cp(),jTe=_(),ji=de(),KTe=Vn(),QU=Ae(),ZTe=jn(),JTe=new jTe({Extends:QU,Mixins:[ji.Alpha,ji.BlendMode,ji.Depth,ji.Mask,ji.Pipeline,ji.ScrollFactor,ji.Size,ji.Texture,ji.Transform,ji.Visible,WTe],initialize:function(t,i,r,s,n){QU.call(this,t,"Blitter"),this.setTexture(s,n),this.setPosition(i,r),this.initPipeline(),this.children=new ZTe,this.renderList=[],this.dirty=!1},create:function(e,t,i,r,s){r===void 0&&(r=!0),s===void 0&&(s=this.children.length),i===void 0?i=this.frame:i instanceof KTe||(i=this.texture.get(i));var n=new HTe(this,e,t,i,r);return this.children.addAt(n,s,!1),this.dirty=!0,n},createFromCallback:function(e,t,i,r){for(var s=this.createMultiple(t,i,r),n=0;n<s.length;n++){var a=s[n];e.call(this,a,n)}return s},createMultiple:function(e,t,i){t===void 0&&(t=this.frame.name),i===void 0&&(i=!0),Array.isArray(t)||(t=[t]);var r=[],s=this;return t.forEach(function(n){for(var a=0;a<e;a++)r.push(s.create(0,0,n,i))}),r},childCanRender:function(e){return e.visible&&e.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});$U.exports=JTe});var tk=l((mje,ek)=>{var QTe=function(e,t,i,r){i.addToRenderList(t);var s=t.list,n=s.length;if(n!==0){var a=t.localTransform;r?(a.loadIdentity(),a.multiply(r),a.translate(t.x,t.y),a.rotate(t.rotation),a.scale(t.scaleX,t.scaleY)):a.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY),e.pipelines.preBatch(t);var o=t.blendMode!==-1;o||e.setBlendMode(0);for(var h=t.alpha,u=t.scrollFactorX,f=t.scrollFactorY,d=0;d<n;d++){var v=s[d];if(!!v.willRender(i)){var c,p,m,g;if(v.alphaTopLeft!==void 0)c=v.alphaTopLeft,p=v.alphaTopRight,m=v.alphaBottomLeft,g=v.alphaBottomRight;else{var x=v.alpha;c=x,p=x,m=x,g=x}var T=v.scrollFactorX,E=v.scrollFactorY;!o&&v.blendMode!==e.currentBlendMode&&e.setBlendMode(v.blendMode);var R=v.mask;R&&R.preRenderWebGL(e,v,i);var y=v.type;y!==e.currentType&&(e.newType=!0,e.currentType=y),e.nextTypeMatch=d<n-1?s[d+1].type===e.currentType:!1,v.setScrollFactor(T*u,E*f),v.setAlpha(c*h,p*h,m*h,g*h),v.renderWebGL(e,v,i,a),v.setAlpha(c,p,m,g),v.setScrollFactor(T,E),R&&R.postRenderWebGL(e,i),e.newType=!1}}e.pipelines.postBatch(t)}};ek.exports=QTe});var rk=l((gje,ik)=>{var $Te=function(e,t,i,r){i.addToRenderList(t);var s=t.list;if(s.length!==0){var n=t.localTransform;r?(n.loadIdentity(),n.multiply(r),n.translate(t.x,t.y),n.rotate(t.rotation),n.scale(t.scaleX,t.scaleY)):n.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);var a=t.blendMode!==-1;a||e.setBlendMode(0);var o=t._alpha,h=t.scrollFactorX,u=t.scrollFactorY;t.mask&&t.mask.preRenderCanvas(e,null,i);for(var f=0;f<s.length;f++){var d=s[f];if(!!d.willRender(i)){var v=d.alpha,c=d.scrollFactorX,p=d.scrollFactorY;!a&&d.blendMode!==e.currentBlendMode&&e.setBlendMode(d.blendMode),d.setScrollFactor(c*h,p*u),d.setAlpha(v*o),d.renderCanvas(e,d,i,n),d.setAlpha(v),d.setScrollFactor(c,p)}}t.mask&&t.mask.postRenderCanvas(e)}};ik.exports=$Te});var ok=l((xje,ak)=>{var sk=B(),nk=B();sk=tk();nk=rk();ak.exports={renderWebGL:sk,renderCanvas:nk}});var Rp=l((Tje,hk)=>{var eEe=ye(),tEe=function(e,t,i){i===void 0&&(i=new eEe);var r=Math.min(e.x,t.x),s=Math.min(e.y,t.y),n=Math.max(e.right,t.right)-r,a=Math.max(e.bottom,t.bottom)-s;return i.setTo(r,s,n,a)};hk.exports=tEe});var Au=l((Eje,vk)=>{var me=_u(),iEe=mi(),rEe=_(),Ki=de(),uk=Xr(),lk=Ae(),fk=ye(),sEe=ok(),nEe=Rp(),dk=le(),aEe=new rEe({Extends:lk,Mixins:[Ki.AlphaSingle,Ki.BlendMode,Ki.ComputedSize,Ki.Depth,Ki.Mask,Ki.Pipeline,Ki.Transform,Ki.Visible,sEe],initialize:function(t,i,r,s){lk.call(this,t,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new Ki.TransformMatrix,this.tempTransformMatrix=new Ki.TransformMatrix,this._sortKey="",this._sysEvents=t.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPipeline(),this.setPosition(i,r),this.clearAlpha(),this.setBlendMode(iEe.SKIP_CHECK),s&&this.add(s)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this.width*.5}},displayOriginY:{get:function(){return this.height*.5}},setExclusive:function(e){return e===void 0&&(e=!0),this.exclusive=e,this},getBounds:function(e){if(e===void 0&&(e=new fk),e.setTo(this.x,this.y,0,0),this.parentContainer){var t=this.parentContainer.getBoundsTransformMatrix(),i=t.transformPoint(this.x,this.y);e.setTo(i.x,i.y,0,0)}if(this.list.length>0){var r=this.list,s=new fk,n=!1;e.setEmpty();for(var a=0;a<r.length;a++){var o=r[a];o.getBounds&&(o.getBounds(s),n?nEe(s,e,e):(e.setTo(s.x,s.y,s.width,s.height),n=!0))}}return e},addHandler:function(e){e.once(uk.DESTROY,this.remove,this),this.exclusive&&(e.parentContainer&&e.parentContainer.remove(e),e.removeFromDisplayList(),e.parentContainer=this)},removeHandler:function(e){e.off(uk.DESTROY,this.remove),this.exclusive&&(e.parentContainer=null,e.addToDisplayList())},pointToContainer:function(e,t){t===void 0&&(t=new dk),this.parentContainer?this.parentContainer.pointToContainer(e,t):t=new dk(e.x,e.y);var i=this.tempTransformMatrix;return i.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),i.invert(),i.transformPoint(e.x,e.y,t),t},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(e){return me.Add(this.list,e,this.maxSize,this.addHandler,this),this},addAt:function(e,t){return me.AddAt(this.list,e,t,this.maxSize,this.addHandler,this),this},getAt:function(e){return this.list[e]},getIndex:function(e){return this.list.indexOf(e)},sort:function(e,t){return e?(t===void 0&&(t=function(i,r){return i[e]-r[e]}),me.StableSort(this.list,t),this):this},getByName:function(e){return me.GetFirst(this.list,"name",e)},getRandom:function(e,t){return me.GetRandom(this.list,e,t)},getFirst:function(e,t,i,r){return me.GetFirst(this.list,e,t,i,r)},getAll:function(e,t,i,r){return me.GetAll(this.list,e,t,i,r)},count:function(e,t,i,r){return me.CountAllMatching(this.list,e,t,i,r)},swap:function(e,t){return me.Swap(this.list,e,t),this},moveTo:function(e,t){return me.MoveTo(this.list,e,t),this},moveAbove:function(e,t){return me.MoveAbove(this.list,e,t),this},moveBelow:function(e,t){return me.MoveBelow(this.list,e,t),this},remove:function(e,t){var i=me.Remove(this.list,e,this.removeHandler,this);if(t&&i){Array.isArray(i)||(i=[i]);for(var r=0;r<i.length;r++)i[r].destroy()}return this},removeAt:function(e,t){var i=me.RemoveAt(this.list,e,this.removeHandler,this);return t&&i&&i.destroy(),this},removeBetween:function(e,t,i){var r=me.RemoveBetween(this.list,e,t,this.removeHandler,this);if(i)for(var s=0;s<r.length;s++)r[s].destroy();return this},removeAll:function(e){var t=me.RemoveBetween(this.list,0,this.list.length,this.removeHandler,this);if(e)for(var i=0;i<t.length;i++)t[i].destroy();return this},bringToTop:function(e){return me.BringToTop(this.list,e),this},sendToBack:function(e){return me.SendToBack(this.list,e),this},moveUp:function(e){return me.MoveUp(this.list,e),this},moveDown:function(e){return me.MoveDown(this.list,e),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return me.Shuffle(this.list),this},replace:function(e,t,i){var r=me.Replace(this.list,e,t);return r&&(this.addHandler(t),this.removeHandler(e),i&&e.destroy()),this},exists:function(e){return this.list.indexOf(e)>-1},setAll:function(e,t,i,r){return me.SetAll(this.list,e,t,i,r),this},each:function(e,t){var i=[null],r,s=this.list.slice(),n=s.length;for(r=2;r<arguments.length;r++)i.push(arguments[r]);for(r=0;r<n;r++)i[0]=s[r],e.apply(t,i);return this},iterate:function(e,t){var i=[null],r;for(r=2;r<arguments.length;r++)i.push(arguments[r]);for(r=0;r<this.list.length;r++)i[0]=this.list[r],e.apply(t,i);return this},setScrollFactor:function(e,t,i){return t===void 0&&(t=e),i===void 0&&(i=!1),this.scrollFactorX=e,this.scrollFactorY=t,i&&(me.SetAll(this.list,"scrollFactorX",e),me.SetAll(this.list,"scrollFactorY",t)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});vk.exports=aEe});var pk=l((yje,ck)=>{ck.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]});var wp=l((Sje,mk)=>{var oEe=pk(),hEe=Ae(),_p=dt(),uEe=new _p,lEe=new _p,fEe=new _p,dEe=function(e,t,i,r){if(!!t.node){var s=t.node.style,n=t.scene.sys.settings;if(!s||!n.visible||hEe.RENDER_MASK!==t.renderFlags||t.cameraFilter!==0&&t.cameraFilter&i.id||t.parentContainer&&!t.parentContainer.willRender()){s.display="none";return}var a=t.parentContainer,o=i.alpha*t.alpha;a&&(o*=a.alpha);var h=uEe,u=lEe,f=fEe,d=0,v=0,c="0%",p="0%";r?(d=t.width*t.scaleX*t.originX,v=t.height*t.scaleY*t.originY,u.applyITRS(t.x-d,t.y-v,t.rotation,t.scaleX,t.scaleY),h.copyFrom(i.matrix),h.multiplyWithOffset(r,-i.scrollX*t.scrollFactorX,-i.scrollY*t.scrollFactorY),u.e=t.x-d,u.f=t.y-v,h.multiply(u,f)):(d=t.width*t.originX,v=t.height*t.originY,u.applyITRS(t.x-d,t.y-v,t.rotation,t.scaleX,t.scaleY),h.copyFrom(i.matrix),c=100*t.originX+"%",p=100*t.originY+"%",u.e-=i.scrollX*t.scrollFactorX,u.f-=i.scrollY*t.scrollFactorY,h.multiply(u,f)),t.transformOnly||(s.display="block",s.opacity=o,s.zIndex=t._depth,s.pointerEvents=t.pointerEvents,s.mixBlendMode=oEe[t._blendMode]),s.transform=f.getCSSMatrix()+" skew("+t.skewX+"rad, "+t.skewY+"rad) rotate3d("+t.rotate3d.x+","+t.rotate3d.y+","+t.rotate3d.z+","+t.rotate3d.w+t.rotate3dAngle+")",s.transformOrigin=c+" "+p}};mk.exports=dEe});var Ek=l((Cje,Tk)=>{var gk=B(),xk=B();gk=wp();xk=wp();Tk.exports={renderWebGL:gk,renderCanvas:xk}});var Pp=l((Rje,Sk)=>{var vEe=_(),Zs=de(),cEe=Ek(),yk=Ae(),pEe=te(),mEe=$h(),bu=qe(),gEe=La(),xEe=new vEe({Extends:yk,Mixins:[Zs.AlphaSingle,Zs.BlendMode,Zs.Depth,Zs.Origin,Zs.ScrollFactor,Zs.Transform,Zs.Visible,cEe],initialize:function(t,i,r,s,n,a){yk.call(this,t,"DOMElement"),this.parent=t.sys.game.domContainer,this.cache=t.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new gEe,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(i,r),typeof s=="string"?s[0]==="#"?this.setElement(s.substr(1),n,a):this.createElement(s,n,a):s&&this.setElement(s,n,a),t.sys.events.on(bu.SLEEP,this.handleSceneEvent,this),t.sys.events.on(bu.WAKE,this.handleSceneEvent,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},handleSceneEvent:function(e){var t=this.node,i=t.style;t&&(i.display=e.settings.visible?"block":"none")},setSkew:function(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),this.skewX=e,this.skewY=t,this},setPerspective:function(e){return this.parent.style.perspective=e+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(e){this.parent.style.perspective=e+"px"}},addListener:function(e){if(this.node){e=e.split(" ");for(var t=0;t<e.length;t++)this.node.addEventListener(e[t],this.handler,!1)}return this},removeListener:function(e){if(this.node){e=e.split(" ");for(var t=0;t<e.length;t++)this.node.removeEventListener(e[t],this.handler)}return this},dispatchNativeEvent:function(e){this.emit(e.type,e)},createElement:function(e,t,i){return this.setElement(document.createElement(e),t,i)},setElement:function(e,t,i){this.removeElement();var r;if(typeof e=="string"?(e[0]==="#"&&(e=e.substr(1)),r=document.getElementById(e)):typeof e=="object"&&e.nodeType===1&&(r=e),!r)return this;if(this.node=r,t&&pEe(t))for(var s in t)r.style[s]=t[s];else typeof t=="string"&&(r.style=t);return r.style.zIndex="0",r.style.display="inline",r.style.position="absolute",r.phaser=this,this.parent&&this.parent.appendChild(r),i&&(r.innerText=i),this.updateSize()},createFromCache:function(e,t){var i=this.cache.get(e);return i&&this.createFromHTML(i,t),this},createFromHTML:function(e,t){t===void 0&&(t="div"),this.removeElement();var i=document.createElement(t);return this.node=i,i.style.zIndex="0",i.style.display="inline",i.style.position="absolute",i.phaser=this,this.parent&&this.parent.appendChild(i),i.innerHTML=e,this.updateSize()},removeElement:function(){return this.node&&(mEe(this.node),this.node=null),this},updateSize:function(){var e=this.node,t=e.getBoundingClientRect();return this.width=e.clientWidth,this.height=e.clientHeight,this.displayWidth=t.width||0,this.displayHeight=t.height||0,this},getChildByProperty:function(e,t){if(this.node){for(var i=this.node.querySelectorAll("*"),r=0;r<i.length;r++)if(i[r][e]===t)return i[r]}return null},getChildByID:function(e){return this.getChildByProperty("id",e)},getChildByName:function(e){return this.getChildByProperty("name",e)},setClassName:function(e){return this.node&&(this.node.className=e,this.updateSize()),this},setText:function(e){return this.node&&(this.node.innerText=e,this.updateSize()),this},setHTML:function(e){return this.node&&(this.node.innerHTML=e,this.updateSize()),this},preUpdate:function(){var e=this.parentContainer,t=this.node;t&&e&&!e.willRender()&&(t.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(bu.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(bu.WAKE,this.handleSceneEvent,this)}});Sk.exports=xEe});var Rk=l((_je,Ck)=>{var TEe=Re(),EEe=dt(),ns=fe(),yEe=new EEe,SEe=function(e,t,i,r){var s=t.text,n=s.length;if(n!==0){i.addToRenderList(t);var a=e.pipelines.set(t.pipeline,t),o=TEe(t,i,r),h=o.sprite,u=o.calc,f=yEe,d=t.cropWidth>0||t.cropHeight>0;d&&(a.flush(),e.pushScissor(u.tx,u.ty,t.cropWidth*u.scaleX,t.cropHeight*u.scaleY));var v=t.frame,c=v.glTexture,p=t.tintFill,m=ns.getTintAppendFloatAlpha(t.tintTopLeft,i.alpha*t._alphaTL),g=ns.getTintAppendFloatAlpha(t.tintTopRight,i.alpha*t._alphaTR),x=ns.getTintAppendFloatAlpha(t.tintBottomLeft,i.alpha*t._alphaBL),T=ns.getTintAppendFloatAlpha(t.tintBottomRight,i.alpha*t._alphaBR),E=a.setGameObject(t),R=0,y=0,C=0,S=0,w=t.letterSpacing,P,A=0,M=0,N,O=t.scrollX,D=t.scrollY,b=t.fontData,q=b.chars,G=b.lineHeight,L=t.fontSize/b.size,F=0,V=t._align,Y=0,z=0,Z=t.getTextBounds(!1);t.maxWidth>0&&(s=Z.wrappedText,n=s.length);var U=t._bounds.lines;V===1?z=(U.longest-U.lengths[0])/2:V===2&&(z=U.longest-U.lengths[0]);var H=i.roundPixels,at=t.displayCallback,Te=t.callbackData;e.pipelines.preBatch(t);for(var Bt=0;Bt<n;Bt++){if(C=s.charCodeAt(Bt),C===10){Y++,V===1?z=(U.longest-U.lengths[Y])/2:V===2&&(z=U.longest-U.lengths[Y]),R=0,y+=G,N=null;continue}if(P=q[C],!!P){A=P.width,M=P.height;var Ue=P.xOffset+R-O,ot=P.yOffset+y-D;if(N!==null){var xt=P.kerning[S];Ue+=xt!==void 0?xt:0}if(R+=P.xAdvance+w,N=P,S=C,!(A===0||M===0||C===32)){if(L=t.fontSize/t.fontData.size,F=0,at){Te.color=0,Te.tint.topLeft=m,Te.tint.topRight=g,Te.tint.bottomLeft=x,Te.tint.bottomRight=T,Te.index=Bt,Te.charCode=C,Te.x=Ue,Te.y=ot,Te.scale=L,Te.rotation=F,Te.data=P.data;var re=at(Te);Ue=re.x,ot=re.y,L=re.scale,F=re.rotation,re.color?(m=re.color,g=re.color,x=re.color,T=re.color):(m=re.tint.topLeft,g=re.tint.topRight,x=re.tint.bottomLeft,T=re.tint.bottomRight),m=ns.getTintAppendFloatAlpha(m,i.alpha*t._alphaTL),g=ns.getTintAppendFloatAlpha(g,i.alpha*t._alphaTR),x=ns.getTintAppendFloatAlpha(x,i.alpha*t._alphaBL),T=ns.getTintAppendFloatAlpha(T,i.alpha*t._alphaBR)}Ue*=L,ot*=L,Ue-=t.displayOriginX,ot-=t.displayOriginY,Ue+=z,f.applyITRS(Ue,ot,F,L,L),u.multiply(f,h);var ht=P.u0,_e=P.v0,ti=P.u1,bt=P.v1,$e=A,Vt=M,ii=h.e,Ee=h.f,oe=Vt*h.c+h.e,Tt=Vt*h.d+h.f,fn=$e*h.a+Vt*h.c+h.e,dn=$e*h.b+Vt*h.d+h.f,Ra=$e*h.a+h.e,yf=$e*h.b+h.f;H&&(ii=Math.round(ii),Ee=Math.round(Ee),oe=Math.round(oe),Tt=Math.round(Tt),fn=Math.round(fn),dn=Math.round(dn),Ra=Math.round(Ra),yf=Math.round(yf)),a.batchQuad(t,ii,Ee,oe,Tt,fn,dn,Ra,yf,ht,_e,ti,bt,m,g,x,T,p,c,E)}}}d&&(a.flush(),e.popScissor()),e.pipelines.postBatch(t)}};Ck.exports=SEe});var wk=l((wje,_k)=>{var CEe=vt(),REe=function(e,t,i,r){var s=t._text,n=s.length,a=e.currentContext;if(!(n===0||!CEe(e,a,t,i,r))){i.addToRenderList(t);var o=t.fromAtlas?t.frame:t.texture.frames.__BASE,h=t.displayCallback,u=t.callbackData,f=t.fontData.chars,d=t.fontData.lineHeight,v=t._letterSpacing,c=0,p=0,m=0,g=null,x=0,T=0,E=0,R=0,y=0,C=0,S=null,w=0,P=t.frame.source.image,A=o.cutX,M=o.cutY,N=0,O=0,D=t._fontSize/t.fontData.size,b=t._align,q=0,G=0;t.getTextBounds(!1);var L=t._bounds.lines;b===1?G=(L.longest-L.lengths[0])/2:b===2&&(G=L.longest-L.lengths[0]),a.translate(-t.displayOriginX,-t.displayOriginY);var F=i.roundPixels;t.cropWidth>0&&t.cropHeight>0&&(a.beginPath(),a.rect(0,0,t.cropWidth,t.cropHeight),a.clip());for(var V=0;V<n;V++){if(O=D,N=0,m=s.charCodeAt(V),m===10){q++,b===1?G=(L.longest-L.lengths[q])/2:b===2&&(G=L.longest-L.lengths[q]),c=0,p+=d,S=null;continue}if(g=f[m],!!g){if(x=A+g.x,T=M+g.y,E=g.width,R=g.height,y=g.xOffset+c-t.scrollX,C=g.yOffset+p-t.scrollY,S!==null){var Y=g.kerning[w];y+=Y!==void 0?Y:0}if(h){u.index=V,u.charCode=m,u.x=y,u.y=C,u.scale=O,u.rotation=N,u.data=g.data;var z=h(u);y=z.x,C=z.y,O=z.scale,N=z.rotation}y*=O,C*=O,y+=G,c+=g.xAdvance+v,S=g,w=m,!(E===0||R===0||m===32)&&(F&&(y=Math.round(y),C=Math.round(C)),a.save(),a.translate(y,C),a.rotate(N),a.scale(O,O),a.drawImage(P,x,T,E,R,0,0,E,R),a.restore())}}a.restore()}};_k.exports=REe});var Mk=l((Pje,bk)=>{var Pk=B(),Ak=B();Pk=Rk();Ak=wk();bk.exports={renderWebGL:Pk,renderCanvas:Ak}});var Mu=l((Aje,Ok)=>{var qk=fo(),_Ee=_(),wEe=Mk(),PEe=new _Ee({Extends:qk,Mixins:[wEe],initialize:function(t,i,r,s,n,a,o){qk.call(this,t,i,r,s,n,a,o),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(e,t){return this.cropWidth=e,this.cropHeight=t,this},setDisplayCallback:function(e){return this.displayCallback=e,this},setScrollX:function(e){return this.scrollX=e,this},setScrollY:function(e){return this.scrollY=e,this}});Ok.exports=PEe});var Fk=l((bje,Lk)=>{var AEe=Re(),bEe=function(e,t,i,r){e.pipelines.clear();var s=AEe(t,i,r).calc;t.render.call(t,e,i,s),e.pipelines.rebind()};Lk.exports=bEe});var Nk=l(()=>{});var Bk=l((Oje,Ik)=>{var Gk=B(),Dk=B();Gk=Fk();Dk=Nk();Ik.exports={renderWebGL:Gk,renderCanvas:Dk}});var Ap=l((Lje,Uk)=>{var MEe=_(),Mi=de(),Vk=Ae(),qEe=Bk(),OEe=new MEe({Extends:Vk,Mixins:[Mi.Alpha,Mi.BlendMode,Mi.Depth,Mi.Flip,Mi.Origin,Mi.ScrollFactor,Mi.Size,Mi.Texture,Mi.Tint,Mi.Transform,Mi.Visible,qEe],initialize:function(t){Vk.call(this,t,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});Uk.exports=OEe});var qu=l((Fje,kk)=>{kk.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}});var Kn=l((Nje,zk)=>{var LEe=function(e,t,i){if(e.width<=0||e.height<=0)return!1;var r=(t-e.x)/e.width,s=(i-e.y)/e.height;return r*=r,s*=s,r+s<.25};zk.exports=LEe});var Ou=l((Gje,Xk)=>{var FEe=j(),NEe=function(e,t,i){i===void 0&&(i=new FEe);var r=e.width/2,s=e.height/2;return i.x=e.x+r*Math.cos(t),i.y=e.y+s*Math.sin(t),i};Xk.exports=NEe});var bp=l((Dje,Yk)=>{var GEe=Ou(),DEe=mn(),IEe=we(),BEe=j(),VEe=function(e,t,i){i===void 0&&(i=new BEe);var r=DEe(t,0,IEe.PI2);return GEe(e,r,i)};Yk.exports=VEe});var Mp=l((Ije,Wk)=>{var UEe=function(e){var t=e.width/2,i=e.height/2,r=Math.pow(t-i,2)/Math.pow(t+i,2);return Math.PI*(t+i)*(1+3*r/(10+Math.sqrt(4-3*r)))};Wk.exports=UEe});var qp=l((Bje,Hk)=>{var kEe=Mp(),zEe=Ou(),XEe=mn(),YEe=we(),WEe=function(e,t,i,r){r===void 0&&(r=[]),!t&&i>0&&(t=kEe(e)/i);for(var s=0;s<t;s++){var n=XEe(s/t,0,YEe.PI2);r.push(zEe(e,n))}return r};Hk.exports=WEe});var Zn=l((Vje,jk)=>{var HEe=_(),jEe=Kn(),KEe=bp(),ZEe=qp(),JEe=ki(),QEe=Ih(),$Ee=new HEe({initialize:function(t,i,r,s){t===void 0&&(t=0),i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=0),this.type=JEe.ELLIPSE,this.x=t,this.y=i,this.width=r,this.height=s},contains:function(e,t){return jEe(this,e,t)},getPoint:function(e,t){return KEe(this,e,t)},getPoints:function(e,t,i){return ZEe(this,e,t,i)},getRandomPoint:function(e){return QEe(this,e)},setTo:function(e,t,i,r){return this.x=e,this.y=t,this.width=i,this.height=r,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(e,t){return t===void 0&&(t=e),this.x=e,this.y=t,this},setSize:function(e,t){return t===void 0&&(t=e),this.width=e,this.height=t,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(e){this.x=e+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(e){this.x=e-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(e){this.y=e+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(e){this.y=e-this.height/2}}});jk.exports=$Ee});var Jk=l((Uje,Zk)=>{var He=qu(),eye=Re(),tye=dt(),iye=fe(),Lu=function(e,t,i){this.x=e,this.y=t,this.width=i},Op=function(e,t,i){this.points=[],this.pointsLength=1,this.points[0]=new Lu(e,t,i)},Kk=[],rye=new tye,sye=function(e,t,i,r){if(t.commandBuffer.length!==0){i.addToRenderList(t);var s=e.pipelines.set(t.pipeline,t);e.pipelines.preBatch(t);for(var n=eye(t,i,r).calc,a=rye.loadIdentity(),o=t.commandBuffer,h=i.alpha*t.alpha,u=1,f=s.fillTint,d=s.strokeTint,v=0,c=0,p=0,m=.01,g=Math.PI*2,x,T=[],E=0,R=!0,y=null,C=iye.getTintAppendFloatAlpha,S=0;S<o.length;S++)switch(x=o[S],x){case He.BEGIN_PATH:{T.length=0,y=null,R=!0;break}case He.CLOSE_PATH:{R=!1,y&&y.points.length&&y.points.push(y.points[0]);break}case He.FILL_PATH:{for(E=0;E<T.length;E++)s.batchFillPath(T[E].points,a,n);break}case He.STROKE_PATH:{for(E=0;E<T.length;E++)s.batchStrokePath(T[E].points,u,R,a,n);break}case He.LINE_STYLE:{u=o[++S];var w=o[++S],P=o[++S]*h,A=C(w,P);d.TL=A,d.TR=A,d.BL=A,d.BR=A;break}case He.FILL_STYLE:{var M=o[++S],N=o[++S]*h,O=C(M,N);f.TL=O,f.TR=O,f.BL=O,f.BR=O;break}case He.GRADIENT_FILL_STYLE:{var D=o[++S]*h,b=o[++S]*h,q=o[++S]*h,G=o[++S]*h;f.TL=C(o[++S],D),f.TR=C(o[++S],b),f.BL=C(o[++S],q),f.BR=C(o[++S],G);break}case He.GRADIENT_LINE_STYLE:{u=o[++S];var L=o[++S]*h;d.TL=C(o[++S],L),d.TR=C(o[++S],L),d.BL=C(o[++S],L),d.BR=C(o[++S],L);break}case He.ARC:{var F=0,V=o[++S],Y=o[++S],z=o[++S],Z=o[++S],U=o[++S],H=o[++S],at=o[++S];for(U-=Z,H?U<-g?U=-g:U>0&&(U=-g+U%g):U>g?U=g:U<0&&(U=g+U%g),y===null&&(y=new Op(V+Math.cos(Z)*z,Y+Math.sin(Z)*z,u),T.push(y),F+=m);F<1+at;)p=U*F+Z,v=V+Math.cos(p)*z,c=Y+Math.sin(p)*z,y.points.push(new Lu(v,c,u)),F+=m;p=U+Z,v=V+Math.cos(p)*z,c=Y+Math.sin(p)*z,y.points.push(new Lu(v,c,u));break}case He.FILL_RECT:{s.batchFillRect(o[++S],o[++S],o[++S],o[++S],a,n);break}case He.FILL_TRIANGLE:{s.batchFillTriangle(o[++S],o[++S],o[++S],o[++S],o[++S],o[++S],a,n);break}case He.STROKE_TRIANGLE:{s.batchStrokeTriangle(o[++S],o[++S],o[++S],o[++S],o[++S],o[++S],u,a,n);break}case He.LINE_TO:{y!==null?y.points.push(new Lu(o[++S],o[++S],u)):(y=new Op(o[++S],o[++S],u),T.push(y));break}case He.MOVE_TO:{y=new Op(o[++S],o[++S],u),T.push(y);break}case He.SAVE:{Kk.push(a.copyToArray());break}case He.RESTORE:{a.copyFromArray(Kk.pop());break}case He.TRANSLATE:{V=o[++S],Y=o[++S],a.translate(V,Y);break}case He.SCALE:{V=o[++S],Y=o[++S],a.scale(V,Y);break}case He.ROTATE:{a.rotate(o[++S]);break}}e.pipelines.postBatch(t)}};Zk.exports=sye});var Lp=l((kje,Qk)=>{var Oe=qu(),nye=vt(),aye=function(e,t,i,r,s,n){var a=t.commandBuffer,o=a.length,h=s||e.currentContext;if(!(o===0||!nye(e,h,t,i,r))){i.addToRenderList(t);var u=1,f=1,d=0,v=0,c=1,p=0,m=0,g=0;h.beginPath();for(var x=0;x<o;++x){var T=a[x];switch(T){case Oe.ARC:h.arc(a[x+1],a[x+2],a[x+3],a[x+4],a[x+5],a[x+6]),x+=7;break;case Oe.LINE_STYLE:c=a[x+1],d=a[x+2],u=a[x+3],p=(d&16711680)>>>16,m=(d&65280)>>>8,g=d&255,h.strokeStyle="rgba("+p+","+m+","+g+","+u+")",h.lineWidth=c,x+=3;break;case Oe.FILL_STYLE:v=a[x+1],f=a[x+2],p=(v&16711680)>>>16,m=(v&65280)>>>8,g=v&255,h.fillStyle="rgba("+p+","+m+","+g+","+f+")",x+=2;break;case Oe.BEGIN_PATH:h.beginPath();break;case Oe.CLOSE_PATH:h.closePath();break;case Oe.FILL_PATH:n||h.fill();break;case Oe.STROKE_PATH:n||h.stroke();break;case Oe.FILL_RECT:n?h.rect(a[x+1],a[x+2],a[x+3],a[x+4]):h.fillRect(a[x+1],a[x+2],a[x+3],a[x+4]),x+=4;break;case Oe.FILL_TRIANGLE:h.beginPath(),h.moveTo(a[x+1],a[x+2]),h.lineTo(a[x+3],a[x+4]),h.lineTo(a[x+5],a[x+6]),h.closePath(),n||h.fill(),x+=6;break;case Oe.STROKE_TRIANGLE:h.beginPath(),h.moveTo(a[x+1],a[x+2]),h.lineTo(a[x+3],a[x+4]),h.lineTo(a[x+5],a[x+6]),h.closePath(),n||h.stroke(),x+=6;break;case Oe.LINE_TO:h.lineTo(a[x+1],a[x+2]),x+=2;break;case Oe.MOVE_TO:h.moveTo(a[x+1],a[x+2]),x+=2;break;case Oe.LINE_FX_TO:h.lineTo(a[x+1],a[x+2]),x+=5;break;case Oe.MOVE_FX_TO:h.moveTo(a[x+1],a[x+2]),x+=5;break;case Oe.SAVE:h.save();break;case Oe.RESTORE:h.restore();break;case Oe.TRANSLATE:h.translate(a[x+1],a[x+2]),x+=2;break;case Oe.SCALE:h.scale(a[x+1],a[x+2]),x+=2;break;case Oe.ROTATE:h.rotate(a[x+1]),x+=1;break;case Oe.GRADIENT_FILL_STYLE:x+=5;break;case Oe.GRADIENT_LINE_STYLE:x+=6;break}}h.restore()}};Qk.exports=aye});var tz=l((zje,ez)=>{var $k=B(),Fp=B();$k=Jk(),Fp=Lp();Fp=Lp();ez.exports={renderWebGL:$k,renderCanvas:Fp}});var Fu=l((Xje,sz)=>{var oye=Ha(),hye=_(),ce=qu(),uye=Nv(),lye=Gv(),fye=Dv(),dye=kv(),vye=Xv(),cye=Yv(),pye=Hv(),mye=jv(),iz=Zn(),rz=Ae(),as=X(),Tr=ie(),Zi=we(),gye=tz(),Js=new hye({Extends:rz,Mixins:[uye,lye,fye,dye,vye,pye,mye,cye,gye],initialize:function(t,i){var r=Tr(i,"x",0),s=Tr(i,"y",0);rz.call(this,t,"Graphics"),this.setPosition(r,s),this.initPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.setDefaultStyles(i)},setDefaultStyles:function(e){return Tr(e,"lineStyle",null)&&(this.defaultStrokeWidth=Tr(e,"lineStyle.width",1),this.defaultStrokeColor=Tr(e,"lineStyle.color",16777215),this.defaultStrokeAlpha=Tr(e,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),Tr(e,"fillStyle",null)&&(this.defaultFillColor=Tr(e,"fillStyle.color",16777215),this.defaultFillAlpha=Tr(e,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(e,t,i){return i===void 0&&(i=1),this.commandBuffer.push(ce.LINE_STYLE,e,t,i),this._lineWidth=e,this},fillStyle:function(e,t){return t===void 0&&(t=1),this.commandBuffer.push(ce.FILL_STYLE,e,t),this},fillGradientStyle:function(e,t,i,r,s,n,a,o){return s===void 0&&(s=1),n===void 0&&(n=s),a===void 0&&(a=s),o===void 0&&(o=s),this.commandBuffer.push(ce.GRADIENT_FILL_STYLE,s,n,a,o,e,t,i,r),this},lineGradientStyle:function(e,t,i,r,s,n){return n===void 0&&(n=1),this.commandBuffer.push(ce.GRADIENT_LINE_STYLE,e,n,t,i,r,s),this},beginPath:function(){return this.commandBuffer.push(ce.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(ce.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(ce.FILL_PATH),this},fill:function(){return this.commandBuffer.push(ce.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(ce.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(ce.STROKE_PATH),this},fillCircleShape:function(e){return this.fillCircle(e.x,e.y,e.radius)},strokeCircleShape:function(e){return this.strokeCircle(e.x,e.y,e.radius)},fillCircle:function(e,t,i){return this.beginPath(),this.arc(e,t,i,0,Zi.PI2),this.fillPath(),this},strokeCircle:function(e,t,i){return this.beginPath(),this.arc(e,t,i,0,Zi.PI2),this.strokePath(),this},fillRectShape:function(e){return this.fillRect(e.x,e.y,e.width,e.height)},strokeRectShape:function(e){return this.strokeRect(e.x,e.y,e.width,e.height)},fillRect:function(e,t,i,r){return this.commandBuffer.push(ce.FILL_RECT,e,t,i,r),this},strokeRect:function(e,t,i,r){var s=this._lineWidth/2,n=e-s,a=e+s;return this.beginPath(),this.moveTo(e,t),this.lineTo(e,t+r),this.strokePath(),this.beginPath(),this.moveTo(e+i,t),this.lineTo(e+i,t+r),this.strokePath(),this.beginPath(),this.moveTo(n,t),this.lineTo(a+i,t),this.strokePath(),this.beginPath(),this.moveTo(n,t+r),this.lineTo(a+i,t+r),this.strokePath(),this},fillRoundedRect:function(e,t,i,r,s){s===void 0&&(s=20);var n=s,a=s,o=s,h=s;return typeof s!="number"&&(n=as(s,"tl",20),a=as(s,"tr",20),o=as(s,"bl",20),h=as(s,"br",20)),this.beginPath(),this.moveTo(e+n,t),this.lineTo(e+i-a,t),this.arc(e+i-a,t+a,a,-Zi.TAU,0),this.lineTo(e+i,t+r-h),this.arc(e+i-h,t+r-h,h,0,Zi.TAU),this.lineTo(e+o,t+r),this.arc(e+o,t+r-o,o,Zi.TAU,Math.PI),this.lineTo(e,t+n),this.arc(e+n,t+n,n,-Math.PI,-Zi.TAU),this.fillPath(),this},strokeRoundedRect:function(e,t,i,r,s){s===void 0&&(s=20);var n=s,a=s,o=s,h=s;return typeof s!="number"&&(n=as(s,"tl",20),a=as(s,"tr",20),o=as(s,"bl",20),h=as(s,"br",20)),this.beginPath(),this.moveTo(e+n,t),this.lineTo(e+i-a,t),this.moveTo(e+i-a,t),this.arc(e+i-a,t+a,a,-Zi.TAU,0),this.lineTo(e+i,t+r-h),this.moveTo(e+i,t+r-h),this.arc(e+i-h,t+r-h,h,0,Zi.TAU),this.lineTo(e+o,t+r),this.moveTo(e+o,t+r),this.arc(e+o,t+r-o,o,Zi.TAU,Math.PI),this.lineTo(e,t+n),this.moveTo(e,t+n),this.arc(e+n,t+n,n,-Math.PI,-Zi.TAU),this.strokePath(),this},fillPointShape:function(e,t){return this.fillPoint(e.x,e.y,t)},fillPoint:function(e,t,i){return!i||i<1?i=1:(e-=i/2,t-=i/2),this.commandBuffer.push(ce.FILL_RECT,e,t,i,i),this},fillTriangleShape:function(e){return this.fillTriangle(e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)},strokeTriangleShape:function(e){return this.strokeTriangle(e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)},fillTriangle:function(e,t,i,r,s,n){return this.commandBuffer.push(ce.FILL_TRIANGLE,e,t,i,r,s,n),this},strokeTriangle:function(e,t,i,r,s,n){return this.commandBuffer.push(ce.STROKE_TRIANGLE,e,t,i,r,s,n),this},strokeLineShape:function(e){return this.lineBetween(e.x1,e.y1,e.x2,e.y2)},lineBetween:function(e,t,i,r){return this.beginPath(),this.moveTo(e,t),this.lineTo(i,r),this.strokePath(),this},lineTo:function(e,t){return this.commandBuffer.push(ce.LINE_TO,e,t),this},moveTo:function(e,t){return this.commandBuffer.push(ce.MOVE_TO,e,t),this},strokePoints:function(e,t,i,r){t===void 0&&(t=!1),i===void 0&&(i=!1),r===void 0&&(r=e.length),this.beginPath(),this.moveTo(e[0].x,e[0].y);for(var s=1;s<r;s++)this.lineTo(e[s].x,e[s].y);return t&&this.lineTo(e[0].x,e[0].y),i&&this.closePath(),this.strokePath(),this},fillPoints:function(e,t,i,r){t===void 0&&(t=!1),i===void 0&&(i=!1),r===void 0&&(r=e.length),this.beginPath(),this.moveTo(e[0].x,e[0].y);for(var s=1;s<r;s++)this.lineTo(e[s].x,e[s].y);return t&&this.lineTo(e[0].x,e[0].y),i&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(e,t){t===void 0&&(t=32);var i=e.getPoints(t);return this.strokePoints(i,!0)},strokeEllipse:function(e,t,i,r,s){s===void 0&&(s=32);var n=new iz(e,t,i,r),a=n.getPoints(s);return this.strokePoints(a,!0)},fillEllipseShape:function(e,t){t===void 0&&(t=32);var i=e.getPoints(t);return this.fillPoints(i,!0)},fillEllipse:function(e,t,i,r,s){s===void 0&&(s=32);var n=new iz(e,t,i,r),a=n.getPoints(s);return this.fillPoints(a,!0)},arc:function(e,t,i,r,s,n,a){return n===void 0&&(n=!1),a===void 0&&(a=0),this.commandBuffer.push(ce.ARC,e,t,i,r,s,n,a),this},slice:function(e,t,i,r,s,n,a){return n===void 0&&(n=!1),a===void 0&&(a=0),this.commandBuffer.push(ce.BEGIN_PATH),this.commandBuffer.push(ce.MOVE_TO,e,t),this.commandBuffer.push(ce.ARC,e,t,i,r,s,n,a),this.commandBuffer.push(ce.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(ce.SAVE),this},restore:function(){return this.commandBuffer.push(ce.RESTORE),this},translateCanvas:function(e,t){return this.commandBuffer.push(ce.TRANSLATE,e,t),this},scaleCanvas:function(e,t){return this.commandBuffer.push(ce.SCALE,e,t),this},rotateCanvas:function(e){return this.commandBuffer.push(ce.ROTATE,e),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(e,t,i){var r=this.scene.sys,s=r.game.renderer;t===void 0&&(t=r.scale.width),i===void 0&&(i=r.scale.height),Js.TargetCamera.setScene(this.scene),Js.TargetCamera.setViewport(0,0,t,i),Js.TargetCamera.scrollX=this.x,Js.TargetCamera.scrollY=this.y;var n,a;if(typeof e=="string")if(r.textures.exists(e)){n=r.textures.get(e);var o=n.getSourceImage();o instanceof HTMLCanvasElement&&(a=o.getContext("2d"))}else n=r.textures.createCanvas(e,t,i),a=n.getSourceImage().getContext("2d");else e instanceof HTMLCanvasElement&&(a=e.getContext("2d"));return a&&(this.renderCanvas(s,this,Js.TargetCamera,null,a,!1),n&&n.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});Js.TargetCamera=new oye;sz.exports=Js});var Gu=l((Yje,nz)=>{var xye=_(),Nu=new xye({initialize:function(t){if(this.entries=[],Array.isArray(t))for(var i=0;i<t.length;i++)this.set(t[i])},set:function(e){return this.entries.indexOf(e)===-1&&this.entries.push(e),this},get:function(e,t){for(var i=0;i<this.entries.length;i++){var r=this.entries[i];if(r[e]===t)return r}},getArray:function(){return this.entries.slice(0)},delete:function(e){var t=this.entries.indexOf(e);return t>-1&&this.entries.splice(t,1),this},dump:function(){console.group("Set");for(var e=0;e<this.entries.length;e++){var t=this.entries[e];console.log(t)}console.groupEnd()},each:function(e,t){var i,r=this.entries.slice(),s=r.length;if(t)for(i=0;i<s&&e.call(t,r[i],i)!==!1;i++);else for(i=0;i<s&&e(r[i],i)!==!1;i++);return this},iterate:function(e,t){var i,r=this.entries.length;if(t)for(i=0;i<r&&e.call(t,this.entries[i],i)!==!1;i++);else for(i=0;i<r&&e(this.entries[i],i)!==!1;i++);return this},iterateLocal:function(e){var t,i=[];for(t=1;t<arguments.length;t++)i.push(arguments[t]);var r=this.entries.length;for(t=0;t<r;t++){var s=this.entries[t];s[e].apply(s,i)}return this},clear:function(){return this.entries.length=0,this},contains:function(e){return this.entries.indexOf(e)>-1},union:function(e){var t=new Nu;return e.entries.forEach(function(i){t.set(i)}),this.entries.forEach(function(i){t.set(i)}),t},intersect:function(e){var t=new Nu;return this.entries.forEach(function(i){e.contains(i)&&t.set(i)}),t},difference:function(e){var t=new Nu;return this.entries.forEach(function(i){e.contains(i)||t.set(i)}),t},size:{get:function(){return this.entries.length},set:function(e){return e<this.entries.length?this.entries.length=e:this.entries.length}}});nz.exports=Nu});var Np=l((Wje,az)=>{var Tye=_(),Eye=yn(),fi=X(),Er=eu(),yye=Gc(),Sye=new Tye({initialize:function(t){this.parent=t,this.animationManager=t.scene.sys.anims,this.animationManager.on(Er.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(e){var t=this.parent;if(e===void 0)return this.nextAnimsQueue.length=0,this.nextAnim=null,t;Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++){var r=e[i];this.nextAnim===null?this.nextAnim=r:this.nextAnimsQueue.push(r)}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(e){this.isPlaying&&this.stop();var t=this.animationManager,i=typeof e=="string"?e:fi(e,"key",null),r=this.exists(i)?this.get(i):t.get(i);if(!r)console.warn("Missing animation: "+i);else{this.currentAnim=r;var s=r.getTotalFrames(),n=fi(e,"frameRate",r.frameRate),a=fi(e,"duration",r.duration);r.calculateDuration(this,s,a,n),this.delay=fi(e,"delay",r.delay),this.repeat=fi(e,"repeat",r.repeat),this.repeatDelay=fi(e,"repeatDelay",r.repeatDelay),this.yoyo=fi(e,"yoyo",r.yoyo),this.showOnStart=fi(e,"showOnStart",r.showOnStart),this.hideOnComplete=fi(e,"hideOnComplete",r.hideOnComplete),this.skipMissedFrames=fi(e,"skipMissedFrames",r.skipMissedFrames),this.timeScale=fi(e,"timeScale",this.timeScale);var o=fi(e,"startFrame",0);o>r.getTotalFrames()&&(o=0);var h=r.frames[o];o===0&&!this.forward&&(h=r.getLastFrame()),this.currentFrame=h}return this.parent},pause:function(e){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),e!==void 0&&this.setCurrentFrame(e),this.parent},resume:function(e){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),e!==void 0&&this.setCurrentFrame(e),this.parent},playAfterDelay:function(e,t){if(!this.isPlaying)this.delayCounter=t,this.play(e,!0);else{var i=this.nextAnim,r=this.nextAnimsQueue;i&&r.unshift(i),this.nextAnim=e,this._pendingStop=1,this._pendingStopValue=t}return this.parent},playAfterRepeat:function(e,t){if(t===void 0&&(t=1),!this.isPlaying)this.play(e);else{var i=this.nextAnim,r=this.nextAnimsQueue;i&&r.unshift(i),this.repeatCounter!==-1&&t>this.repeatCounter&&(t=this.repeatCounter),this.nextAnim=e,this._pendingStop=2,this._pendingStopValue=t}return this.parent},play:function(e,t){t===void 0&&(t=!1);var i=this.currentAnim,r=this.parent,s=typeof e=="string"?e:e.key;if(t&&this.isPlaying&&i.key===s)return r;if(i&&this.isPlaying){var n=this.animationManager.getMix(i.key,e);if(n>0)return this.playAfterDelay(e,n)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(e)},playReverse:function(e,t){t===void 0&&(t=!1);var i=typeof e=="string"?e:e.key;return t&&this.isPlaying&&this.currentAnim.key===i?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(e))},startAnimation:function(e){this.load(e);var t=this.currentAnim,i=this.parent;return t&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat,t.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,this.delayCounter===0&&this.handleStart()),i},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(Er.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(Er.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(Er.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(Er.ANIMATION_COMPLETE,Er.ANIMATION_COMPLETE_KEY)},emitEvents:function(e,t){var i=this.currentAnim,r=this.currentFrame,s=this.parent,n=r.textureFrame;s.emit(e,i,r,s,n),t&&s.emit(t+i.key,i,r,s,n)},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var e=this.currentFrame;if(!e)return 0;var t=e.progress;return this.inReverse&&(t*=-1),t},setProgress:function(e){return this.forward||(e=1-e),this.setCurrentFrame(this.currentAnim.getFrameByProgress(e)),this.parent},setRepeat:function(e){return this.repeatCounter=e===-1?Number.MAX_VALUE:e,this.parent},globalRemove:function(e,t){t===void 0&&(t=this.currentAnim),this.isPlaying&&t.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var i=this.currentAnim,r=this.parent;return i?(t&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat),i.getFirstTick(this),this.emitEvents(Er.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!e,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(i.frames[0]),this.parent):r},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var e=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(e)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleStop(),this.nextAnim){var e=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(e)}return this.parent},stopAfterDelay:function(e){return this._pendingStop=1,this._pendingStopValue=e,this.parent},stopAfterRepeat:function(e){return e===void 0&&(e=1),this.repeatCounter!==-1&&e>this.repeatCounter&&(e=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=e,this.parent},stopOnFrame:function(e){return this._pendingStop=3,this._pendingStopValue=e,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(e,t){var i=this.currentAnim;if(!(!this.isPlaying||!i||i.paused)){if(this.accumulator+=t*this.timeScale,this._pendingStop===1&&(this._pendingStopValue-=t,this._pendingStopValue<=0))return this.stop();if(!this.hasStarted)this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart());else if(this.accumulator>=this.nextTick&&(this.forward?i.nextFrame(this):i.previousFrame(this),this.isPlaying&&this._pendingStop===0&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var r=0;do this.forward?i.nextFrame(this):i.previousFrame(this),r++;while(this.isPlaying&&this.accumulator>this.nextTick&&r<60)}}},setCurrentFrame:function(e){var t=this.parent;return this.currentFrame=e,t.texture=e.frame.texture,t.frame=e.frame,t.isCropped&&t.frame.updateCropUVs(t._crop,t.flipX,t.flipY),e.setAlpha&&(t.alpha=e.alpha),t.setSizeToFrame(),t._originComponent&&(e.frame.customPivot?t.setOrigin(e.frame.pivotX,e.frame.pivotY):t.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(Er.ANIMATION_UPDATE),this._pendingStop===3&&this._pendingStopValue===e&&this.stop()),t},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(e){return this.anims?this.anims.get(e):null},exists:function(e){return this.anims?this.anims.has(e):!1},create:function(e){var t=e.key,i=!1;return t&&(i=this.get(t),i||(i=new yye(this,t,e),this.anims||(this.anims=new Eye),this.anims.set(t,i))),i},generateFrameNames:function(e,t){return this.animationManager.generateFrameNames(e,t)},generateFrameNumbers:function(e,t){return this.animationManager.generateFrameNumbers(e,t)},remove:function(e){var t=this.get(e);return t&&(this.currentAnim===t&&this.stop(),this.anims.delete(e)),t},destroy:function(){this.animationManager.off(Er.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});az.exports=Sye});var hz=l((Hje,oz)=>{var Cye=function(e,t,i,r){i.addToRenderList(t),t.pipeline.batchSprite(t,i,r)};oz.exports=Cye});var lz=l((jje,uz)=>{var Rye=function(e,t,i,r){i.addToRenderList(t),e.batchSprite(t,t.frame,i,r)};uz.exports=Rye});var cz=l((Kje,vz)=>{var fz=B(),dz=B();fz=hz();dz=lz();vz.exports={renderWebGL:fz,renderCanvas:dz}});var Jn=l((Zje,mz)=>{var _ye=Np(),wye=_(),_t=de(),pz=Ae(),Pye=cz(),Aye=new wye({Extends:pz,Mixins:[_t.Alpha,_t.BlendMode,_t.Depth,_t.Flip,_t.GetBounds,_t.Mask,_t.Origin,_t.Pipeline,_t.ScrollFactor,_t.Size,_t.TextureCrop,_t.Tint,_t.Transform,_t.Visible,Pye],initialize:function(t,i,r,s,n){pz.call(this,t,"Sprite"),this._crop=this.resetCropObject(),this.anims=new _ye(this),this.setTexture(s,n),this.setPosition(i,r),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(e,t){this.anims.update(e,t)},play:function(e,t){return this.anims.play(e,t)},playReverse:function(e,t){return this.anims.playReverse(e,t)},playAfterDelay:function(e,t){return this.anims.playAfterDelay(e,t)},playAfterRepeat:function(e,t){return this.anims.playAfterRepeat(e,t)},chain:function(e){return this.anims.chain(e)},stop:function(){return this.anims.stop()},stopAfterDelay:function(e){return this.anims.stopAfterDelay(e)},stopAfterRepeat:function(e){return this.anims.stopAfterRepeat(e)},stopOnFrame:function(e){return this.anims.stopOnFrame(e)},toJSON:function(){return _t.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});mz.exports=Aye});var Du=l((Jje,Tz)=>{var ee=ec(),bye=_(),Qn=Xr(),gz=se(),Mye=mu(),ue=X(),be=ie(),xz=te(),qye=pp(),Oye=Gu(),Lye=Jn(),Fye=new bye({Extends:gz,initialize:function(t,i,r){gz.call(this),r?i&&!Array.isArray(i)&&(i=[i]):Array.isArray(i)?xz(i[0])&&(r=i,i=null):xz(i)&&(r=i,i=null),this.scene=t,this.children=new Oye,this.isParent=!0,this.type="Group",this.classType=ue(r,"classType",Lye),this.name=ue(r,"name",""),this.active=ue(r,"active",!0),this.maxSize=ue(r,"maxSize",-1),this.defaultKey=ue(r,"defaultKey",null),this.defaultFrame=ue(r,"defaultFrame",null),this.runChildUpdate=ue(r,"runChildUpdate",!1),this.createCallback=ue(r,"createCallback",null),this.removeCallback=ue(r,"removeCallback",null),this.createMultipleCallback=ue(r,"createMultipleCallback",null),this.internalCreateCallback=ue(r,"internalCreateCallback",null),this.internalRemoveCallback=ue(r,"internalRemoveCallback",null),i&&this.addMultiple(i),r&&this.createMultiple(r),this.on(Qn.ADDED_TO_SCENE,this.addedToScene,this),this.on(Qn.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(e,t,i,r,s,n){if(e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=this.defaultKey),r===void 0&&(r=this.defaultFrame),s===void 0&&(s=!0),n===void 0&&(n=!0),this.isFull())return null;var a=new this.classType(this.scene,e,t,i,r);return a.addToDisplayList(this.scene.sys.displayList),a.addToUpdateList(),a.visible=s,a.setActive(n),this.add(a),a},createMultiple:function(e){if(this.isFull())return[];Array.isArray(e)||(e=[e]);var t=[];if(e[0].key)for(var i=0;i<e.length;i++){var r=this.createFromConfig(e[i]);t=t.concat(r)}return t},createFromConfig:function(e){if(this.isFull())return[];this.classType=ue(e,"classType",this.classType);var t=ue(e,"key",void 0),i=ue(e,"frame",null),r=ue(e,"visible",!0),s=ue(e,"active",!0),n=[];if(t===void 0)return n;Array.isArray(t)||(t=[t]),Array.isArray(i)||(i=[i]);var a=ue(e,"repeat",0),o=ue(e,"randomKey",!1),h=ue(e,"randomFrame",!1),u=ue(e,"yoyo",!1),f=ue(e,"quantity",!1),d=ue(e,"frameQuantity",1),v=ue(e,"max",0),c=qye(t,i,{max:v,qty:f||d,random:o,randomB:h,repeat:a,yoyo:u});e.createCallback&&(this.createCallback=e.createCallback),e.removeCallback&&(this.removeCallback=e.removeCallback);for(var p=0;p<c.length;p++){var m=this.create(0,0,c[p].a,c[p].b,r,s);if(!m)break;n.push(m)}var g=be(e,"setXY.x",0),x=be(e,"setXY.y",0),T=be(e,"setXY.stepX",0),E=be(e,"setXY.stepY",0);ee.SetXY(n,g,x,T,E);var R=be(e,"setRotation.value",0),y=be(e,"setRotation.step",0);ee.SetRotation(n,R,y);var C=be(e,"setScale.x",1),S=be(e,"setScale.y",C),w=be(e,"setScale.stepX",0),P=be(e,"setScale.stepY",0);ee.SetScale(n,C,S,w,P);var A=be(e,"setOrigin.x",.5),M=be(e,"setOrigin.y",A),N=be(e,"setOrigin.stepX",0),O=be(e,"setOrigin.stepY",0);ee.SetOrigin(n,A,M,N,O);var D=be(e,"setAlpha.value",1),b=be(e,"setAlpha.step",0);ee.SetAlpha(n,D,b);var q=be(e,"setDepth.value",0),G=be(e,"setDepth.step",0);ee.SetDepth(n,q,G);var L=be(e,"setScrollFactor.x",1),F=be(e,"setScrollFactor.y",L),V=be(e,"setScrollFactor.stepX",0),Y=be(e,"setScrollFactor.stepY",0);ee.SetScrollFactor(n,L,F,V,Y);var z=ue(e,"hitArea",null),Z=ue(e,"hitAreaCallback",null);z&&ee.SetHitArea(n,z,Z);var U=ue(e,"gridAlign",!1);return U&&ee.GridAlign(n,U),this.createMultipleCallback&&this.createMultipleCallback.call(this,n),n},preUpdate:function(e,t){if(!(!this.runChildUpdate||this.children.size===0))for(var i=this.children.entries.slice(),r=0;r<i.length;r++){var s=i[r];s.active&&s.update(e,t)}},add:function(e,t){return t===void 0&&(t=!1),this.isFull()?this:(this.children.set(e),this.internalCreateCallback&&this.internalCreateCallback.call(this,e),this.createCallback&&this.createCallback.call(this,e),t&&(e.addToDisplayList(this.scene.sys.displayList),e.addToUpdateList()),e.on(Qn.DESTROY,this.remove,this),this)},addMultiple:function(e,t){if(t===void 0&&(t=!1),Array.isArray(e))for(var i=0;i<e.length;i++)this.add(e[i],t);return this},remove:function(e,t,i){return t===void 0&&(t=!1),i===void 0&&(i=!1),this.children.contains(e)?(this.children.delete(e),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,e),this.removeCallback&&this.removeCallback.call(this,e),e.off(Qn.DESTROY,this.remove,this),i?e.destroy():t&&(e.removeFromDisplayList(),e.removeFromUpdateList()),this):this},clear:function(e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);for(var i=this.children,r=0;r<i.size;r++){var s=i.entries[r];s.off(Qn.DESTROY,this.remove,this),t?s.destroy():e&&(s.removeFromDisplayList(),s.removeFromUpdateList())}return this.children.clear(),this},contains:function(e){return this.children.contains(e)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(e,t,i,r){return Mye(this.children.entries,e,t,i,r)},getFirst:function(e,t,i,r,s,n,a){return this.getHandler(!0,1,e,t,i,r,s,n,a)},getFirstNth:function(e,t,i,r,s,n,a,o){return this.getHandler(!0,e,t,i,r,s,n,a,o)},getLast:function(e,t,i,r,s,n,a){return this.getHandler(!1,1,e,t,i,r,s,n,a)},getLastNth:function(e,t,i,r,s,n,a,o){return this.getHandler(!1,e,t,i,r,s,n,a,o)},getHandler:function(e,t,i,r,s,n,a,o,h){i===void 0&&(i=!1),r===void 0&&(r=!1);var u,f,d=0,v=this.children.entries;if(e)for(f=0;f<v.length;f++)if(u=v[f],u.active===i){if(d++,d===t)break}else u=null;else for(f=v.length-1;f>=0;f--)if(u=v[f],u.active===i){if(d++,d===t)break}else u=null;return u?(typeof s=="number"&&(u.x=s),typeof n=="number"&&(u.y=n),u):r?this.create(s,n,a,o,h):null},get:function(e,t,i,r,s){return this.getFirst(!1,!0,e,t,i,r,s)},getFirstAlive:function(e,t,i,r,s,n){return this.getFirst(!0,e,t,i,r,s,n)},getFirstDead:function(e,t,i,r,s,n){return this.getFirst(!1,e,t,i,r,s,n)},playAnimation:function(e,t){return ee.PlayAnimation(this.children.entries,e,t),this},isFull:function(){return this.maxSize===-1?!1:this.children.size>=this.maxSize},countActive:function(e){e===void 0&&(e=!0);for(var t=0,i=0;i<this.children.size;i++)this.children.entries[i].active===e&&t++;return t},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var e=this.getTotalUsed(),t=this.maxSize===-1?999999999999:this.maxSize;return t-e},setActive:function(e){return this.active=e,this},setName:function(e){return this.name=e,this},propertyValueSet:function(e,t,i,r,s){return ee.PropertyValueSet(this.children.entries,e,t,i,r,s),this},propertyValueInc:function(e,t,i,r,s){return ee.PropertyValueInc(this.children.entries,e,t,i,r,s),this},setX:function(e,t){return ee.SetX(this.children.entries,e,t),this},setY:function(e,t){return ee.SetY(this.children.entries,e,t),this},setXY:function(e,t,i,r){return ee.SetXY(this.children.entries,e,t,i,r),this},incX:function(e,t){return ee.IncX(this.children.entries,e,t),this},incY:function(e,t){return ee.IncY(this.children.entries,e,t),this},incXY:function(e,t,i,r){return ee.IncXY(this.children.entries,e,t,i,r),this},shiftPosition:function(e,t,i){return ee.ShiftPosition(this.children.entries,e,t,i),this},angle:function(e,t){return ee.Angle(this.children.entries,e,t),this},rotate:function(e,t){return ee.Rotate(this.children.entries,e,t),this},rotateAround:function(e,t){return ee.RotateAround(this.children.entries,e,t),this},rotateAroundDistance:function(e,t,i){return ee.RotateAroundDistance(this.children.entries,e,t,i),this},setAlpha:function(e,t){return ee.SetAlpha(this.children.entries,e,t),this},setTint:function(e,t,i,r){return ee.SetTint(this.children.entries,e,t,i,r),this},setOrigin:function(e,t,i,r){return ee.SetOrigin(this.children.entries,e,t,i,r),this},scaleX:function(e,t){return ee.ScaleX(this.children.entries,e,t),this},scaleY:function(e,t){return ee.ScaleY(this.children.entries,e,t),this},scaleXY:function(e,t,i,r){return ee.ScaleXY(this.children.entries,e,t,i,r),this},setDepth:function(e,t){return ee.SetDepth(this.children.entries,e,t),this},setBlendMode:function(e){return ee.SetBlendMode(this.children.entries,e),this},setHitArea:function(e,t){return ee.SetHitArea(this.children.entries,e,t),this},shuffle:function(){return ee.Shuffle(this.children.entries),this},kill:function(e){this.children.contains(e)&&e.setActive(!1)},killAndHide:function(e){this.children.contains(e)&&(e.setActive(!1),e.setVisible(!1))},setVisible:function(e,t,i){return ee.SetVisible(this.children.entries,e,t,i),this},toggleVisible:function(){return ee.ToggleVisible(this.children.entries),this},destroy:function(e,t){e===void 0&&(e=!1),t===void 0&&(t=!1),!(!this.scene||this.ignoreDestroy)&&(this.emit(Qn.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(t,e),this.scene=void 0,this.children=void 0)}});Tz.exports=Fye});var yz=l((Qje,Ez)=>{var Nye=function(e,t,i,r){i.addToRenderList(t),this.pipeline.batchSprite(t,i,r)};Ez.exports=Nye});var Cz=l(($je,Sz)=>{var Gye=function(e,t,i,r){i.addToRenderList(t),e.batchSprite(t,t.frame,i,r)};Sz.exports=Gye});var Pz=l((e8e,wz)=>{var Rz=B(),_z=B();Rz=yz();_z=Cz();wz.exports={renderWebGL:Rz,renderCanvas:_z}});var Iu=l((t8e,bz)=>{var Dye=_(),Ot=de(),Az=Ae(),Iye=Pz(),Bye=new Dye({Extends:Az,Mixins:[Ot.Alpha,Ot.BlendMode,Ot.Depth,Ot.Flip,Ot.GetBounds,Ot.Mask,Ot.Origin,Ot.Pipeline,Ot.ScrollFactor,Ot.Size,Ot.TextureCrop,Ot.Tint,Ot.Transform,Ot.Visible,Iye],initialize:function(t,i,r,s,n){Az.call(this,t,"Image"),this._crop=this.resetCropObject(),this.setTexture(s,n),this.setPosition(i,r),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()}});bz.exports=Bye});var qz=l((i8e,Mz)=>{var Vye=function(e,t,i){var r=t.list,s=r.length;if(s!==0){t.depthSort(),e.pipelines.preBatch(t);var n=t.blendMode!==-1;n||e.setBlendMode(0);for(var a=t.alpha,o=0;o<s;o++){var h=r[o];if(!!h.willRender(i)){var u,f,d,v;if(h.alphaTopLeft!==void 0)u=h.alphaTopLeft,f=h.alphaTopRight,d=h.alphaBottomLeft,v=h.alphaBottomRight;else{var c=h.alpha;u=c,f=c,d=c,v=c}!n&&h.blendMode!==e.currentBlendMode&&e.setBlendMode(h.blendMode);var p=h.mask;p&&p.preRenderWebGL(e,h,i);var m=h.type;m!==e.currentType&&(e.newType=!0,e.currentType=m),e.nextTypeMatch=o<s-1?r[o+1].type===e.currentType:!1,h.setAlpha(u*a,f*a,d*a,v*a),h.renderWebGL(e,h,i),h.setAlpha(u,f,d,v),p&&p.postRenderWebGL(e,i),e.newType=!1}}e.pipelines.postBatch(t)}};Mz.exports=Vye});var Lz=l((r8e,Oz)=>{var Uye=function(e,t,i){var r=t.list;if(r.length!==0){t.depthSort();var s=t.blendMode!==-1;s||e.setBlendMode(0);var n=t._alpha;t.mask&&t.mask.preRenderCanvas(e,null,i);for(var a=0;a<r.length;a++){var o=r[a];if(!!o.willRender(i)){var h=o.alpha;!s&&o.blendMode!==e.currentBlendMode&&e.setBlendMode(o.blendMode),o.setAlpha(h*n),o.renderCanvas(e,o,i),o.setAlpha(h)}}t.mask&&t.mask.postRenderCanvas(e)}};Oz.exports=Uye});var Dz=l((s8e,Gz)=>{var Fz=B(),Nz=B();Fz=qz();Nz=Lz();Gz.exports={renderWebGL:Fz,renderCanvas:Nz}});var Bu=l((n8e,Uz)=>{var kye=mi(),zye=_(),$n=de(),Xye=Nh(),vo=Xs(),Iz=se(),Gp=Xr(),Bz=jn(),Yye=Dz(),Vz=qe(),Wye=rs(),Hye=new zye({Extends:Bz,Mixins:[$n.AlphaSingle,$n.BlendMode,$n.Depth,$n.Mask,$n.Pipeline,$n.Visible,Iz,Yye],initialize:function(t,i){Bz.call(this,t),Iz.call(this),this.scene=t,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=t.sys,this.events=t.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPipeline(),this.clearAlpha(),this.setBlendMode(kye.SKIP_CHECK),i&&this.add(i),t.sys.queueDepthSort()},setActive:function(e){return this.active=e,this},setName:function(e){return this.name=e,this},setState:function(e){return this.state=e,this},setDataEnabled:function(){return this.data||(this.data=new vo(this)),this},setData:function(e,t){return this.data||(this.data=new vo(this)),this.data.set(e,t),this},incData:function(e,t){return this.data||(this.data=new vo(this)),this.data.inc(e,t),this},toggleData:function(e){return this.data||(this.data=new vo(this)),this.data.toggle(e),this},getData:function(e){return this.data||(this.data=new vo(this)),this.data.get(e)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return Xye(this)},willRender:function(e){return!(this.renderFlags!==15||this.list.length===0||this.cameraFilter!==0&&this.cameraFilter&e.id)},getIndexList:function(){for(var e=this,t=this.parentContainer,i=[];t&&(i.unshift(t.getIndex(e)),e=t,t.parentContainer);)t=t.parentContainer;return i.unshift(this.displayList.getIndex(e)),i},addChildCallback:function(e){e.displayList&&e.displayList!==this&&e.removeFromDisplayList(),e.displayList||(this.queueDepthSort(),e.displayList=this,e.emit(Gp.ADDED_TO_SCENE,e,this.scene),this.events.emit(Vz.ADDED_TO_SCENE,e,this.scene))},removeChildCallback:function(e){this.queueDepthSort(),e.displayList=null,e.emit(Gp.REMOVED_FROM_SCENE,e,this.scene),this.events.emit(Vz.REMOVED_FROM_SCENE,e,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(Wye(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(e,t){return e._depth-t._depth},getChildren:function(){return this.list},destroy:function(){if(!(!this.scene||this.ignoreDestroy)){this.emit(Gp.DESTROY,this);for(var e=this.list.length;e--;)this.list[e].destroy();this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});Uz.exports=Hye});var os=l((a8e,kz)=>{var co=Qa(),jye=du(),Kye=function(e,t){var i=co.Power0;if(typeof e=="string")if(co.hasOwnProperty(e))i=co[e];else{var r="";e.indexOf(".")&&(r=e.substr(e.indexOf(".")+1),r.toLowerCase()==="in"?r="easeIn":r.toLowerCase()==="out"?r="easeOut":r.toLowerCase()==="inout"&&(r="easeInOut")),e=jye(e.substr(0,e.indexOf(".")+1)+r),co.hasOwnProperty(e)&&(i=co[e])}else typeof e=="function"?i=e:Array.isArray(e)&&e.length===4;if(!t)return i;var s=t.slice(0);return s.unshift(0),function(n){return s[0]=n,i.apply(this,s)}};kz.exports=Kye});var Dp=l((o8e,zz)=>{var Zye=_(),Jye=Aa(),Qye=os(),$ye=X(),eSe=Lr(),tSe=new Zye({initialize:function(t,i,r,s){s===void 0&&(s=!1),this.propertyKey=i,this.propertyValue=r,this.defaultValue=r,this.steps=0,this.counter=0,this.start=0,this.end=0,this.ease,this.emitOnly=s,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.loadConfig(t)},loadConfig:function(e,t){e===void 0&&(e={}),t&&(this.propertyKey=t),this.propertyValue=$ye(e,this.propertyKey,this.defaultValue),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return this.propertyValue},onChange:function(e){return this.propertyValue=e,this.setMethods()},setMethods:function(){var e=this.propertyValue,t=typeof e;if(this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,t==="number")this.onEmit=this.staticValueEmit,this.onUpdate=this.staticValueUpdate;else if(Array.isArray(e))this.onEmit=this.randomStaticValueEmit;else if(t==="function")this.emitOnly?this.onEmit=e:this.onUpdate=e;else if(t==="object"&&this.hasBoth(e,"start","end")){this.start=e.start,this.end=e.end;var i=this.has(e,"random");if(i&&(this.onEmit=this.randomRangedValueEmit),this.has(e,"steps"))this.steps=e.steps,this.counter=this.start,this.onEmit=this.steppedEmit;else{var r=this.has(e,"ease")?e.ease:"Linear";this.ease=Qye(r,e.easeParams),i||(this.onEmit=this.easedValueEmit),this.onUpdate=this.easeValueUpdate}}else if(t==="object"&&this.hasBoth(e,"min","max"))this.start=e.min,this.end=e.max,this.onEmit=this.randomRangedValueEmit;else if(t==="object"&&this.has(e,"random")){var s=e.random;Array.isArray(s)&&(this.start=s[0],this.end=s[1]),this.onEmit=this.randomRangedValueEmit}else t==="object"&&this.hasEither(e,"onEmit","onUpdate")&&(this.has(e,"onEmit")&&(this.onEmit=e.onEmit),this.has(e,"onUpdate")&&(this.onUpdate=e.onUpdate));return this},has:function(e,t){return e.hasOwnProperty(t)},hasBoth:function(e,t,i){return e.hasOwnProperty(t)&&e.hasOwnProperty(i)},hasEither:function(e,t,i){return e.hasOwnProperty(t)||e.hasOwnProperty(i)},defaultEmit:function(e,t,i){return i},defaultUpdate:function(e,t,i,r){return r},staticValueEmit:function(){return this.propertyValue},staticValueUpdate:function(){return this.propertyValue},randomStaticValueEmit:function(){var e=Math.floor(Math.random()*this.propertyValue.length);return this.propertyValue[e]},randomRangedValueEmit:function(e,t){var i=Jye(this.start,this.end);return e&&e.data[t]&&(e.data[t].min=i),i},steppedEmit:function(){var e=this.counter,t=this.counter+(this.end-this.start)/this.steps;return this.counter=eSe(t,this.start,this.end),e},easedValueEmit:function(e,t){if(e&&e.data[t]){var i=e.data[t];i.min=this.start,i.max=this.end}return this.start},easeValueUpdate:function(e,t,i){var r=e.data[t];return(r.max-r.min)*this.ease(i)+r.min}});zz.exports=tSe});var Ip=l((h8e,Xz)=>{var iSe=_(),po=X(),rSe=new iSe({initialize:function(t,i,r,s,n){if(typeof t=="object"){var a=t;t=po(a,"x",0),i=po(a,"y",0),r=po(a,"power",0),s=po(a,"epsilon",100),n=po(a,"gravity",50)}else t===void 0&&(t=0),i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=100),n===void 0&&(n=50);this.x=t,this.y=i,this.active=!0,this._gravity=n,this._power=0,this._epsilon=0,this.power=r,this.epsilon=s},update:function(e,t){var i=this.x-e.x,r=this.y-e.y,s=i*i+r*r;if(s!==0){var n=Math.sqrt(s);s<this._epsilon&&(s=this._epsilon);var a=this._power*t/(s*n)*100;e.velocityX+=i*a,e.velocityY+=r*a}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(e){this._epsilon=e*e}},power:{get:function(){return this._power/this._gravity},set:function(e){this._power=e*this._gravity}},gravity:{get:function(){return this._gravity},set:function(e){var t=this.power;this._gravity=e,this.power=t}}});Xz.exports=rSe});var Vp=l((u8e,Yz)=>{var sSe=_(),Bp=or(),nSe=Fr(),aSe=new sSe({initialize:function(t){this.emitter=t,this.frame=null,this.x=0,this.y=0,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215,current:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1}}},isAlive:function(){return this.lifeCurrent>0},resetPosition:function(){this.x=0,this.y=0},fire:function(e,t){var i=this.emitter;this.frame=i.getFrame(),i.emitZone&&i.emitZone.getPoint(this),e===void 0?this.x+=i.x.onEmit(this,"x"):this.x+=e,t===void 0?this.y+=i.y.onEmit(this,"y"):this.y+=t,this.life=i.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0;var r=i.speedX.onEmit(this,"speedX"),s=i.speedY?i.speedY.onEmit(this,"speedY"):r;if(i.radial){var n=Bp(i.angle.onEmit(this,"angle"));this.velocityX=Math.cos(n)*Math.abs(r),this.velocityY=Math.sin(n)*Math.abs(s)}else if(i.moveTo){var a=i.moveToX.onEmit(this,"moveToX"),o=i.moveToY?i.moveToY.onEmit(this,"moveToY"):a,h=Math.atan2(o-this.y,a-this.x),u=nSe(this.x,this.y,a,o)/(this.life/1e3);this.velocityX=Math.cos(h)*u,this.velocityY=Math.sin(h)*u}else this.velocityX=r,this.velocityY=s;i.acceleration&&(this.accelerationX=i.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=i.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=i.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=i.maxVelocityY.onEmit(this,"maxVelocityY"),this.delayCurrent=i.delay.onEmit(this,"delay"),this.scaleX=i.scaleX.onEmit(this,"scaleX"),this.scaleY=i.scaleY?i.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=i.rotate.onEmit(this,"rotate"),this.rotation=Bp(this.angle),this.bounce=i.bounce.onEmit(this,"bounce"),this.alpha=i.alpha.onEmit(this,"alpha"),this.tint=i.tint.onEmit(this,"tint")},computeVelocity:function(e,t,i,r){var s=this.velocityX,n=this.velocityY,a=this.accelerationX,o=this.accelerationY,h=this.maxVelocityX,u=this.maxVelocityY;s+=e.gravityX*i,n+=e.gravityY*i,a&&(s+=a*i),o&&(n+=o*i),s>h?s=h:s<-h&&(s=-h),n>u?n=u:n<-u&&(n=-u),this.velocityX=s,this.velocityY=n;for(var f=0;f<r.length;f++)r[f].update(this,t,i)},checkBounds:function(e){var t=e.bounds,i=-this.bounce;this.x<t.x&&e.collideLeft?(this.x=t.x,this.velocityX*=i):this.x>t.right&&e.collideRight&&(this.x=t.right,this.velocityX*=i),this.y<t.y&&e.collideTop?(this.y=t.y,this.velocityY*=i):this.y>t.bottom&&e.collideBottom&&(this.y=t.bottom,this.velocityY*=i)},update:function(e,t,i){if(this.delayCurrent>0)return this.delayCurrent-=e,!1;var r=this.emitter,s=1-this.lifeCurrent/this.life;return this.lifeT=s,this.computeVelocity(r,e,t,i),this.x+=this.velocityX*t,this.y+=this.velocityY*t,r.bounds&&this.checkBounds(r),r.deathZone&&r.deathZone.willKill(this)?(this.lifeCurrent=0,!0):(this.scaleX=r.scaleX.onUpdate(this,"scaleX",s,this.scaleX),r.scaleY?this.scaleY=r.scaleY.onUpdate(this,"scaleY",s,this.scaleY):this.scaleY=this.scaleX,this.angle=r.rotate.onUpdate(this,"rotate",s,this.angle),this.rotation=Bp(this.angle),this.alpha=r.alpha.onUpdate(this,"alpha",s,this.alpha),this.tint=r.tint.onUpdate(this,"tint",s,this.tint),this.lifeCurrent-=e,this.lifeCurrent<=0)}});Yz.exports=aSe});var Up=l((l8e,Wz)=>{var oSe=_(),hSe=new oSe({initialize:function(t,i){this.source=t,this.killOnEnter=i},willKill:function(e){var t=this.source.contains(e.x,e.y);return t&&this.killOnEnter||!t&&!this.killOnEnter}});Wz.exports=hSe});var kp=l((f8e,Hz)=>{var uSe=_(),lSe=new uSe({initialize:function(t,i,r,s,n){s===void 0&&(s=!1),n===void 0&&(n=!0),this.source=t,this.points=[],this.quantity=i,this.stepRate=r,this.yoyo=s,this.counter=-1,this.seamless=n,this._length=0,this._direction=0,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var e=this.points[0],t=this.points[this.points.length-1];e.x===t.x&&e.y===t.y&&this.points.pop()}var i=this._length;return this._length=this.points.length,this._length<i&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(e){return this.source=e,this.updateSource()},getPoint:function(e){this._direction===0?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,this.counter===-1&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var t=this.points[this.counter];t&&(e.x=t.x,e.y=t.y)}});Hz.exports=lSe});var zp=l((d8e,jz)=>{var fSe=function(e,t){for(var i=0;i<t.length;i++)if(e.hasOwnProperty(t[i]))return!0;return!1};jz.exports=fSe});var Vu=l((v8e,Kz)=>{var dSe=function(e,t){return e.hasOwnProperty(t)};Kz.exports=dSe});var Xp=l((c8e,Zz)=>{var vSe=_(),cSe=le(),pSe=new vSe({initialize:function(t){this.source=t,this._tempVec=new cSe},getPoint:function(e){var t=this._tempVec;this.source.getRandomPoint(t),e.x=t.x,e.y=t.y}});Zz.exports=pSe});var Yp=l((p8e,Jz)=>{var mSe=mi(),gSe=_(),Uu=de(),xSe=Up(),TSe=kp(),Ie=Dp(),Lt=X(),ESe=vp(),ySe=zp(),Kt=Vu(),SSe=Vp(),CSe=Xp(),RSe=ye(),_Se=rs(),wSe=le(),PSe=Lr(),ASe=new gSe({Mixins:[Uu.BlendMode,Uu.Mask,Uu.ScrollFactor,Uu.Visible],initialize:function(t,i){this.manager=t,this.texture=t.texture,this.frames=[t.defaultFrame],this.defaultFrame=t.defaultFrame,this.configFastMap=["active","blendMode","collideBottom","collideLeft","collideRight","collideTop","deathCallback","deathCallbackScope","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxParticles","name","on","particleBringToTop","particleClass","radial","timeScale","trackVisible","visible"],this.configOpMap=["accelerationX","accelerationY","angle","alpha","bounce","delay","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],this.name="",this.particleClass=SSe,this.x=new Ie(i,"x",0,!0),this.y=new Ie(i,"y",0,!0),this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.accelerationX=new Ie(i,"accelerationX",0,!0),this.accelerationY=new Ie(i,"accelerationY",0,!0),this.maxVelocityX=new Ie(i,"maxVelocityX",1e4,!0),this.maxVelocityY=new Ie(i,"maxVelocityY",1e4,!0),this.speedX=new Ie(i,"speedX",0,!0),this.speedY=new Ie(i,"speedY",0,!0),this.moveTo=!1,this.moveToX=new Ie(i,"moveToX",0,!0),this.moveToY=new Ie(i,"moveToY",0,!0),this.bounce=new Ie(i,"bounce",0,!0),this.scaleX=new Ie(i,"scaleX",1),this.scaleY=new Ie(i,"scaleY",1),this.tint=new Ie(i,"tint",16777215),this.alpha=new Ie(i,"alpha",1),this.lifespan=new Ie(i,"lifespan",1e3,!0),this.angle=new Ie(i,"angle",{min:0,max:360},!0),this.rotate=new Ie(i,"rotate",0),this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.quantity=new Ie(i,"quantity",1,!0),this.delay=new Ie(i,"delay",0,!0),this.frequency=0,this.on=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZone=null,this.deathZone=null,this.bounds=null,this.collideLeft=!0,this.collideRight=!0,this.collideTop=!0,this.collideBottom=!0,this.active=!0,this.visible=!0,this.blendMode=mSe.NORMAL,this.follow=null,this.followOffset=new wSe,this.trackVisible=!1,this.currentFrame=0,this.randomFrame=!0,this.frameQuantity=1,this.dead=[],this.alive=[],this._counter=0,this._frameCounter=0,i&&this.fromJSON(i)},fromJSON:function(e){if(!e)return this;var t=0,i="";for(t=0;t<this.configFastMap.length;t++)i=this.configFastMap[t],Kt(e,i)&&(this[i]=Lt(e,i));for(t=0;t<this.configOpMap.length;t++)i=this.configOpMap[t],Kt(e,i)&&this[i].loadConfig(e);if(this.acceleration=this.accelerationX.propertyValue!==0||this.accelerationY.propertyValue!==0,this.moveTo=this.moveToX.propertyValue!==0||this.moveToY.propertyValue!==0,Kt(e,"speed")&&(this.speedX.loadConfig(e,"speed"),this.speedY=null),(ySe(e,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),Kt(e,"scale")&&(this.scaleX.loadConfig(e,"scale"),this.scaleY=null),Kt(e,"callbackScope")){var r=Lt(e,"callbackScope",null);this.emitCallbackScope=r,this.deathCallbackScope=r}return Kt(e,"emitZone")&&this.setEmitZone(e.emitZone),Kt(e,"deathZone")&&this.setDeathZone(e.deathZone),Kt(e,"bounds")&&this.setBounds(e.bounds),Kt(e,"followOffset")&&this.followOffset.setFromObject(Lt(e,"followOffset",0)),Kt(e,"frame")&&this.setFrame(e.frame),Kt(e,"reserve")&&this.reserve(e.reserve),this},toJSON:function(e){e===void 0&&(e={});var t=0,i="";for(t=0;t<this.configFastMap.length;t++)i=this.configFastMap[t],e[i]=this[i];for(t=0;t<this.configOpMap.length;t++)i=this.configOpMap[t],this[i]&&(e[i]=this[i].toJSON());return this.speedY||(delete e.speedX,e.speed=this.speedX.toJSON()),this.scaleY||(delete e.scaleX,e.scale=this.scaleX.toJSON()),e},startFollow:function(e,t,i,r){return t===void 0&&(t=0),i===void 0&&(i=0),r===void 0&&(r=!1),this.follow=e,this.followOffset.set(t,i),this.trackVisible=r,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){if(this.frames.length===1)return this.defaultFrame;if(this.randomFrame)return ESe(this.frames);var e=this.frames[this.currentFrame];return this._frameCounter++,this._frameCounter===this.frameQuantity&&(this._frameCounter=0,this.currentFrame=PSe(this.currentFrame+1,0,this._frameLength)),e},setFrame:function(e,t,i){t===void 0&&(t=!0),i===void 0&&(i=1),this.randomFrame=t,this.frameQuantity=i,this.currentFrame=0,this._frameCounter=0;var r=typeof e;if(Array.isArray(e)||r==="string"||r==="number")this.manager.setEmitterFrames(e,this);else if(r==="object"){var s=e;e=Lt(s,"frames",null),e&&this.manager.setEmitterFrames(e,this);var n=Lt(s,"cycle",!1);this.randomFrame=!n,this.frameQuantity=Lt(s,"quantity",i)}return this._frameLength=this.frames.length,this._frameLength===1&&(this.frameQuantity=1,this.randomFrame=!1),this},setRadial:function(e){return e===void 0&&(e=!0),this.radial=e,this},setPosition:function(e,t){return this.x.onChange(e),this.y.onChange(t),this},setBounds:function(e,t,i,r){if(typeof e=="object"){var s=e;e=s.x,t=s.y,i=Kt(s,"w")?s.w:s.width,r=Kt(s,"h")?s.h:s.height}return this.bounds?this.bounds.setTo(e,t,i,r):this.bounds=new RSe(e,t,i,r),this},setSpeedX:function(e){return this.speedX.onChange(e),this.radial=!1,this},setSpeedY:function(e){return this.speedY&&(this.speedY.onChange(e),this.radial=!1),this},setSpeed:function(e){return this.speedX.onChange(e),this.speedY=null,this.radial=!0,this},setScaleX:function(e){return this.scaleX.onChange(e),this},setScaleY:function(e){return this.scaleY.onChange(e),this},setScale:function(e){return this.scaleX.onChange(e),this.scaleY=null,this},setGravityX:function(e){return this.gravityX=e,this},setGravityY:function(e){return this.gravityY=e,this},setGravity:function(e,t){return this.gravityX=e,this.gravityY=t,this},setAlpha:function(e){return this.alpha.onChange(e),this},setTint:function(e){return this.tint.onChange(e),this},setEmitterAngle:function(e){return this.angle.onChange(e),this},setAngle:function(e){return this.angle.onChange(e),this},setLifespan:function(e){return this.lifespan.onChange(e),this},setQuantity:function(e){return this.quantity.onChange(e),this},setFrequency:function(e,t){return this.frequency=e,this._counter=0,t&&this.quantity.onChange(t),this},setEmitZone:function(e){if(e===void 0)this.emitZone=null;else{var t=Lt(e,"type","random"),i=Lt(e,"source",null);switch(t){case"random":this.emitZone=new CSe(i);break;case"edge":var r=Lt(e,"quantity",1),s=Lt(e,"stepRate",0),n=Lt(e,"yoyo",!1),a=Lt(e,"seamless",!0);this.emitZone=new TSe(i,r,s,n,a);break}}return this},setDeathZone:function(e){if(e===void 0)this.deathZone=null;else{var t=Lt(e,"type","onEnter"),i=Lt(e,"source",null);if(i&&typeof i.contains=="function"){var r=t==="onEnter";this.deathZone=new xSe(i,r)}}return this},reserve:function(e){for(var t=this.dead,i=0;i<e;i++)t.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()===this.maxParticles},onParticleEmit:function(e,t){return e===void 0?(this.emitCallback=null,this.emitCallbackScope=null):typeof e=="function"&&(this.emitCallback=e,t&&(this.emitCallbackScope=t)),this},onParticleDeath:function(e,t){return e===void 0?(this.deathCallback=null,this.deathCallbackScope=null):typeof e=="function"&&(this.deathCallback=e,t&&(this.deathCallbackScope=t)),this},killAll:function(){for(var e=this.dead,t=this.alive;t.length>0;)e.push(t.pop());return this},forEachAlive:function(e,t){for(var i=this.alive,r=i.length,s=0;s<r;++s)e.call(t,i[s],this);return this},forEachDead:function(e,t){for(var i=this.dead,r=i.length,s=0;s<r;++s)e.call(t,i[s],this);return this},start:function(){return this.on=!0,this._counter=0,this},stop:function(){return this.on=!1,this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},remove:function(){return this.manager.removeEmitter(this),this},depthSort:function(){return _Se(this.alive,this.depthSortCallback),this},flow:function(e,t){return t===void 0&&(t=1),this.frequency=e,this.quantity.onChange(t),this.start()},explode:function(e,t,i){return this.frequency=-1,this.emitParticle(e,t,i)},emitParticleAt:function(e,t,i){return this.emitParticle(i,e,t)},emitParticle:function(e,t,i){if(!this.atLimit()){e===void 0&&(e=this.quantity.onEmit());for(var r=this.dead,s=this.follow?this.follow.x+this.followOffset.x:t,n=this.follow?this.follow.y+this.followOffset.y:i,a=0;a<e;a++){var o=r.pop();if(o||(o=new this.particleClass(this)),o.fire(s,n),this.particleBringToTop?this.alive.push(o):this.alive.unshift(o),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,o,this),this.atLimit())break}return o}},preUpdate:function(e,t){t*=this.timeScale;var i=t/1e3;this.trackVisible&&(this.visible=this.follow.visible);var r=this.manager.getProcessors(),s=this.alive,n=this.dead,a=0,o=[],h=s.length;for(a=0;a<h;a++){var u=s[a];u.update(t,i,r)&&o.push({index:a,particle:u})}if(h=o.length,h>0){var f=this.deathCallback,d=this.deathCallbackScope;for(a=h-1;a>=0;a--){var v=o[a];s.splice(v.index,1),n.push(v.particle),f&&f.call(d,v.particle),v.particle.resetPosition()}}!this.on||(this.frequency===0?this.emitParticle():this.frequency>0&&(this._counter-=t,this._counter<=0&&(this.emitParticle(),this._counter=this.frequency-Math.abs(this._counter))))},depthSortCallback:function(e,t){return e.y-t.y}});Jz.exports=ASe});var $z=l((m8e,Qz)=>{var ku=dt(),bSe=fe(),MSe=new ku,qSe=new ku,OSe=new ku,LSe=new ku,FSe=function(e,t,i,r){var s=t.emitters.list,n=s.length;if(n!==0){var a=e.pipelines.set(t.pipeline),o=MSe,h=qSe,u=OSe,f=LSe;r?(f.loadIdentity(),f.multiply(r),f.translate(t.x,t.y),f.rotate(t.rotation),f.scale(t.scaleX,t.scaleY)):f.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);var d=i.roundPixels,v=t.defaultFrame.glTexture,c=bSe.getTintAppendFloatAlpha,p=a.setGameObject(t,t.defaultFrame);e.pipelines.preBatch(t);for(var m=0;m<n;m++){var g=s[m],x=g.alive,T=x.length;if(!(!g.visible||T===0)){i.addToRenderList(g);var E=g.scrollFactorX,R=g.scrollFactorY;e.setBlendMode(g.blendMode),g.mask&&(g.mask.preRenderWebGL(e,g,i),e.pipelines.set(t.pipeline));for(var y=0,C=0;C<T;C++){var S=x[C],w=S.alpha*i.alpha;if(!(w<=0)){u.applyITRS(S.x,S.y,S.rotation,S.scaleX,S.scaleY),o.copyFrom(i.matrix),o.multiplyWithOffset(f,-i.scrollX*E,-i.scrollY*R),u.e=S.x,u.f=S.y,o.multiply(u,h);var P=S.frame,A=-P.halfWidth,M=-P.halfHeight,N=A+P.width,O=M+P.height,D=h.getXRound(A,M,d),b=h.getYRound(A,M,d),q=h.getXRound(A,O,d),G=h.getYRound(A,O,d),L=h.getXRound(N,O,d),F=h.getYRound(N,O,d),V=h.getXRound(N,M,d),Y=h.getYRound(N,M,d),z=c(S.tint,w);a.batchQuad(g,D,b,q,G,L,F,V,Y,P.u0,P.v0,P.u1,P.v1,z,z,z,z,y,v,p)}}g.mask&&g.mask.postRenderWebGL(e,i)}}e.pipelines.postBatch(t)}};Qz.exports=FSe});var tX=l((g8e,eX)=>{var zu=dt(),NSe=new zu,GSe=new zu,DSe=new zu,ISe=new zu,BSe=function(e,t,i,r){var s=t.emitters.list,n=s.length;if(n!==0){var a=NSe.copyFrom(i.matrix),o=GSe,h=DSe,u=ISe;r?(u.loadIdentity(),u.multiply(r),u.translate(t.x,t.y),u.rotate(t.rotation),u.scale(t.scaleX,t.scaleY)):u.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);for(var f=e.currentContext,d=i.roundPixels,v=0;v<n;v++){var c=s[v],p=c.alive,m=p.length;if(!(!c.visible||m===0)){i.addToRenderList(c);var g=c.scrollFactorX,x=c.scrollFactorY;f.save(),f.globalCompositeOperation=e.blendModes[c.blendMode];for(var T=0;T<m;T++){var E=p[T],R=E.alpha*i.alpha;if(!(R<=0)){h.applyITRS(E.x,E.y,E.rotation,E.scaleX,E.scaleY),a.copyFrom(i.matrix),a.multiplyWithOffset(u,-i.scrollX*g,-i.scrollY*x),h.e=E.x,h.f=E.y,a.multiply(h,o);var y=E.frame,C=y.canvasData,S=-y.halfWidth,w=-y.halfHeight;f.globalAlpha=R,f.save(),o.setToContext(f),d&&(S=Math.round(S),w=Math.round(w)),f.imageSmoothingEnabled=!(!e.antialias||y.source.scaleMode),f.drawImage(y.source.image,C.x,C.y,C.width,C.height,S,w,C.width,C.height),f.restore()}}f.restore()}}}};eX.exports=BSe});var nX=l((x8e,sX)=>{var iX=B(),rX=B();iX=$z();rX=tX();sX.exports={renderWebGL:iX,renderCanvas:rX}});var Xu=l((T8e,hX)=>{var VSe=_(),mo=de(),aX=Ae(),USe=Ip(),oX=jn(),kSe=Yp(),zSe=nX(),XSe=new VSe({Extends:aX,Mixins:[mo.Depth,mo.Mask,mo.Pipeline,mo.Transform,mo.Visible,zSe],initialize:function(t,i,r,s){if(aX.call(this,t,"ParticleEmitterManager"),this.blendMode=-1,this.timeScale=1,this.texture=null,this.frame=null,this.frameNames=[],r!==null&&(typeof r=="object"||Array.isArray(r))&&(s=r,r=null),this.setTexture(i,r),this.initPipeline(),this.emitters=new oX(this),this.wells=new oX(this),s){Array.isArray(s)||(s=[s]);for(var n=0;n<s.length;n++)this.createEmitter(s[n])}},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setTexture:function(e,t){return this.texture=this.scene.sys.textures.get(e),this.setFrame(t)},setFrame:function(e){this.frame=this.texture.get(e);var t=this.texture.getFramesFromTextureSource(this.frame.sourceIndex),i=[];return t.forEach(function(r){i.push(r.name)}),this.frameNames=i,this.defaultFrame=this.frame,this},setEmitterFrames:function(e,t){Array.isArray(e)||(e=[e]);var i=t.frames;i.length=0;for(var r=0;r<e.length;r++){var s=e[r];this.frameNames.indexOf(s)!==-1&&i.push(this.texture.get(s))}return i.length>0?t.defaultFrame=i[0]:t.defaultFrame=this.defaultFrame,this},addEmitter:function(e){return this.emitters.add(e)},createEmitter:function(e){return this.addEmitter(new kSe(this,e))},removeEmitter:function(e){return this.emitters.remove(e,!0)},addGravityWell:function(e){return this.wells.add(e)},createGravityWell:function(e){return this.addGravityWell(new USe(e))},emitParticle:function(e,t,i){for(var r=this.emitters.list,s=0;s<r.length;s++){var n=r[s];n.active&&n.emitParticle(e,t,i)}return this},emitParticleAt:function(e,t,i){return this.emitParticle(i,e,t)},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},getProcessors:function(){return this.wells.getAll("active",!0)},preUpdate:function(e,t){t*=this.timeScale;for(var i=this.emitters.list,r=0;r<i.length;r++){var s=i[r];s.active&&s.preUpdate(e,t)}},setAlpha:function(){},setScrollFactor:function(){},setBlendMode:function(){}});hX.exports=XSe});var lX=l((E8e,uX)=>{uX.exports={DeathZone:Up(),EdgeZone:kp(),RandomZone:Xp()}});var dX=l((y8e,fX)=>{fX.exports={EmitterOp:Dp(),GravityWell:Ip(),Particle:Vp(),ParticleEmitter:Yp(),ParticleEmitterManager:Xu(),Zones:lX()}});var Wp=l((S8e,cX)=>{var YSe=_(),WSe=de(),vX=Jn(),HSe=new YSe({Extends:vX,Mixins:[WSe.PathFollower],initialize:function(t,i,r,s,n,a){vX.call(this,t,r,s,n,a),this.path=i},preUpdate:function(e,t){this.anims.update(e,t),this.pathUpdate(e)}});cX.exports=HSe});var mX=l((C8e,pX)=>{var jSe=fe(),KSe=function(e,t,i,r){i.addToRenderList(t);var s=i.alpha,n=t.renderTarget,a=n.width,o=n.height,h=jSe.getTintAppendFloatAlpha,u=e.pipelines.set(t.pipeline),f=u.setTexture2D(n.texture);e.pipelines.preBatch(t),u.batchTexture(t,n.texture,a,o,t.x,t.y,a,o,t.scaleX,t.scaleY,t.rotation,t.flipX,!t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,a,o,h(t.tintTopLeft,s*t._alphaTL),h(t.tintTopRight,s*t._alphaTR),h(t.tintBottomLeft,s*t._alphaBL),h(t.tintBottomRight,s*t._alphaBR),t.tintFill,0,0,i,r,!0,f),e.resetTextures(),e.pipelines.postBatch(t)};pX.exports=KSe});var xX=l((R8e,gX)=>{var ZSe=function(e,t,i,r){i.addToRenderList(t),e.batchSprite(t,t.frame,i,r)};gX.exports=ZSe});var SX=l((_8e,yX)=>{var TX=B(),EX=B();TX=mX();EX=xX();yX.exports={renderWebGL:TX,renderCanvas:EX}});var Yu=l((w8e,CX)=>{var JSe=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,i=e==="x"?t:t&3|8;return i.toString(16)})};CX.exports=JSe});var Wu=l((P8e,PX)=>{var QSe=mi(),$Se=Ha(),RX=Et(),eCe=_(),Ft=de(),_X=Ut(),tCe=Vn(),wX=Ae(),iCe=B(),rCe=Is(),sCe=SX(),nCe=Na(),aCe=fe(),oCe=Yu(),hCe=new eCe({Extends:wX,Mixins:[Ft.Alpha,Ft.BlendMode,Ft.ComputedSize,Ft.Crop,Ft.Depth,Ft.Flip,Ft.GetBounds,Ft.Mask,Ft.Origin,Ft.Pipeline,Ft.ScrollFactor,Ft.Tint,Ft.Transform,Ft.Visible,sCe],initialize:function(t,i,r,s,n,a,o){i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=32),n===void 0&&(n=32),wX.call(this,t,"RenderTexture"),this.renderer=t.sys.renderer,this.textureManager=t.sys.textures,this.globalTint=16777215,this.globalAlpha=1,this.canvas=null,this.dirty=!1,this._crop=this.resetCropObject(),this.texture=null,this.frame=null,this._saved=!1,a===void 0?(this.canvas=RX.create2D(this,s,n),this.texture=t.sys.textures.addCanvas(oCe(),this.canvas),this.frame=this.texture.get()):(this.texture=t.sys.textures.get(a),this.frame=this.texture.get(o),this.canvas=this.frame.source.image,this._saved=!0,this.dirty=!0,this.width=this.frame.cutWidth,this.height=this.frame.cutHeight),this.context=this.canvas.getContext("2d"),this._eraseMode=!1,this.camera=new $Se(0,0,s,n),this.renderTarget=null;var h=this.renderer;h?h.type===_X.WEBGL?(this.drawGameObject=this.batchGameObjectWebGL,this.renderTarget=new nCe(h,s,n,1,0,!1)):h.type===_X.CANVAS&&(this.drawGameObject=this.batchGameObjectCanvas):this.drawGameObject=iCe,this.camera.setScene(t),this.setPosition(i,r),a===void 0&&this.setSize(s,n),this.setOrigin(0,0),this.initPipeline(rCe.SINGLE_PIPELINE)},setSize:function(e,t){return this.resize(e,t)},resize:function(e,t){t===void 0&&(t=e);var i=this.frame;if(e!==this.width||t!==this.height){if(i.name==="__BASE"){this.canvas.width=e,this.canvas.height=t,this.texture.width=e,this.texture.height=t;var r=this.renderTarget;r&&(r.resize(e,t),i.glTexture=r.texture,i.source.isRenderTexture=!0,i.source.isGLTexture=!0,i.source.glTexture=r.texture),this.camera.setSize(e,t),i.source.width=e,i.source.height=t,i.setSize(e,t),this.width=e,this.height=t}}else{var s=this.texture.getSourceImage();i.cutX+e>s.width&&(e=s.width-i.cutX),i.cutY+t>s.height&&(t=s.height-i.cutY),i.setSize(e,t,i.cutX,i.cutY)}this.updateDisplayOrigin();var n=this.input;return n&&!n.customHitArea&&(n.hitArea.width=e,n.hitArea.height=t),this},setGlobalTint:function(e){return this.globalTint=e,this},setGlobalAlpha:function(e){return this.globalAlpha=e,this},saveTexture:function(e){return this.textureManager.renameTexture(this.texture.key,e),this._saved=!0,this.texture},fill:function(e,t,i,r,s,n){var a=this.frame,o=this.camera,h=this.renderer;t===void 0&&(t=1),i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=a.cutWidth),n===void 0&&(n=a.cutHeight);var u=(e>>16&255)/255,f=(e>>8&255)/255,d=(e&255)/255,v=this.renderTarget;if(o.preRender(),v){v.bind(!0);var c=this.pipeline;c.manager.set(c);var p=v.width,m=v.height,g=h.width,x=h.height,T=g/p,E=x/m;c.drawFillRect(i*T,r*E,s*T,n*E,aCe.getTintFromFloats(d,f,u,1),t),v.unbind(!0)}else{var R=this.context;h.setContext(R),R.fillStyle="rgba("+u+","+f+","+d+","+t+")",R.fillRect(i+a.cutX,r+a.cutY,s,n),h.setContext()}return this.dirty=!0,this},clear:function(){if(this.dirty){var e=this.renderTarget;if(e)e.clear();else{var t=this.context;t.save(),t.setTransform(1,0,0,1,0,0),t.clearRect(this.frame.cutX,this.frame.cutY,this.frame.cutWidth,this.frame.cutHeight),t.restore()}this.dirty=!1}return this},erase:function(e,t,i){return this._eraseMode=!0,this.draw(e,t,i,1,16777215),this._eraseMode=!1,this},draw:function(e,t,i,r,s){return this.beginDraw(),this.batchDraw(e,t,i,r,s),this.endDraw(),this},drawFrame:function(e,t,i,r,s,n){return this.beginDraw(),this.batchDrawFrame(e,t,i,r,s,n),this.endDraw(),this},beginDraw:function(){var e=this.camera,t=this.renderer,i=this.renderTarget;return e.preRender(),i?t.beginCapture(i.width,i.height):t.setContext(this.context),this},batchDraw:function(e,t,i,r,s){return r===void 0&&(r=this.globalAlpha),s===void 0?s=(this.globalTint>>16)+(this.globalTint&65280)+((this.globalTint&255)<<16):s=(s>>16)+(s&65280)+((s&255)<<16),Array.isArray(e)||(e=[e]),this.batchList(e,t,i,r,s),this},batchDrawFrame:function(e,t,i,r,s,n){i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=this.globalAlpha),n===void 0?n=(this.globalTint>>16)+(this.globalTint&65280)+((this.globalTint&255)<<16):n=(n>>16)+(n&65280)+((n&255)<<16);var a=this.textureManager.getFrame(e,t);return a&&(this.renderTarget?this.pipeline.batchTextureFrame(a,i,r,n,s,this.camera.matrix,null):this.batchTextureFrame(a,i+this.frame.cutX,r+this.frame.cutY,s,n)),this},endDraw:function(e){e===void 0&&(e=this._eraseMode);var t=this.renderer,i=this.renderTarget;if(i){var r=t.endCapture(),s=t.pipelines.setUtility();s.blitFrame(r,i,1,!1,!1,e),t.resetScissor(),t.resetViewport()}else t.setContext();return this.dirty=!0,this},batchList:function(e,t,i,r,s){for(var n=0;n<e.length;n++){var a=e[n];!a||a===this||(a.renderWebGL||a.renderCanvas?this.drawGameObject(a,t,i):a.isParent||a.list?this.batchGroup(a.getChildren(),t,i):typeof a=="string"?this.batchTextureFrameKey(a,null,t,i,r,s):a instanceof tCe?this.batchTextureFrame(a,t,i,r,s):Array.isArray(a)&&this.batchList(a,t,i,r,s))}},batchGroup:function(e,t,i){t===void 0&&(t=0),i===void 0&&(i=0),t+=this.frame.cutX,i+=this.frame.cutY;for(var r=0;r<e.length;r++){var s=e[r];if(s.willRender(this.camera)){var n=s.x+t,a=s.y+i;this.drawGameObject(s,n,a)}}},batchGameObjectWebGL:function(e,t,i){t===void 0&&(t=e.x),i===void 0&&(i=e.y);var r=e.x,s=e.y;e.setPosition(t+this.frame.cutX,i+this.frame.cutY),e.renderDirect?e.renderDirect(this.renderer,e,this.camera):e.renderWebGL(this.renderer,e,this.camera),e.setPosition(r,s)},batchGameObjectCanvas:function(e,t,i){t===void 0&&(t=e.x),i===void 0&&(i=e.y);var r=e.x,s=e.y;if(this._eraseMode){var n=e.blendMode;e.blendMode=QSe.ERASE}e.setPosition(t+this.frame.cutX,i+this.frame.cutY),e.renderCanvas(this.renderer,e,this.camera,null),e.setPosition(r,s),this._eraseMode&&(e.blendMode=n)},batchTextureFrameKey:function(e,t,i,r,s,n){var a=this.textureManager.getFrame(e,t);a&&this.batchTextureFrame(a,i,r,s,n)},batchTextureFrame:function(e,t,i,r,s){t===void 0&&(t=0),i===void 0&&(i=0),t+=this.frame.cutX,i+=this.frame.cutY;var n=this.renderTarget;if(n)this.pipeline.batchTextureFrame(e,t,i,s,r,this.camera.matrix,null);else{var a=this.context,o=e.canvasData,h=e.source.image,u=this.camera.matrix;a.save(),a.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",a.globalAlpha=r,u.setToContext(a),a.drawImage(h,o.x,o.y,o.width,o.height,t,i,o.width,o.height),a.restore()}},snapshotArea:function(e,t,i,r,s,n,a){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,s,!1,e,t,i,r,n,a):this.renderer.snapshotCanvas(this.canvas,s,!1,e,t,i,r,n,a),this},snapshot:function(e,t,i){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,e,!1,0,0,this.width,this.height,t,i):this.renderer.snapshotCanvas(this.canvas,e,!1,0,0,this.width,this.height,t,i),this},snapshotPixel:function(e,t,i){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,i,!0,e,t):this.renderer.snapshotCanvas(this.canvas,i,!0,e,t),this},preDestroy:function(){this._saved||(RX.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.texture.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.texture=null)}});PX.exports=hCe});var bX=l((A8e,AX)=>{var uCe={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:` !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ`,TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:`ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789"(),-.' `,TEXT_SET7:`AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW")28FLRX-'39`,TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:`ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'"?!`,TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:`ABCDEFGHIJKLMNOPQRSTUVWXYZ.,"-+!?()':;0123456789`};AX.exports=uCe});var qX=l((b8e,MX)=>{var hs=ie(),lCe=function(e,t){var i=t.width,r=t.height,s=Math.floor(i/2),n=Math.floor(r/2),a=hs(t,"chars","");if(a!==""){var o=hs(t,"image",""),h=e.sys.textures.getFrame(o),u=h.cutX,f=h.cutY,d=h.source.width,v=h.source.height,c=hs(t,"offset.x",0),p=hs(t,"offset.y",0),m=hs(t,"spacing.x",0),g=hs(t,"spacing.y",0),x=hs(t,"lineSpacing",0),T=hs(t,"charsPerRow",null);T===null&&(T=d/i,T>a.length&&(T=a.length));for(var E=c,R=p,y={retroFont:!0,font:o,size:i,lineHeight:r+x,chars:{}},C=0,S=0;S<a.length;S++){var w=a.charCodeAt(S),P=(u+E)/d,A=(f+R)/v,M=(u+E+i)/d,N=(f+R+r)/v;y.chars[w]={x:E,y:R,width:i,height:r,centerX:s,centerY:n,xOffset:0,yOffset:0,xAdvance:i,data:{},kerning:{},u0:P,v0:A,u1:M,v1:N},C++,C===T?(C=0,E=c,R+=r+g):E+=i+m}var O={data:y,frame:null,texture:o};return O}};MX.exports=lCe});var LX=l((M8e,OX)=>{var fCe=bX(),dCe=Fe(),Hp={Parse:qX()};Hp=dCe(!1,Hp,fCe);OX.exports=Hp});var NX=l((q8e,FX)=>{var vCe=Re(),cCe=fe(),pCe=function(e,t,i,r){i.addToRenderList(t);var s=e.pipelines.set(t.pipeline,t),n=vCe(t,i,r).calc,a=t.vertices,o=t.uv,h=t.colors,u=t.alphas,f=t.alpha,d=cCe.getTintAppendFloatAlpha,v=i.roundPixels,c=a.length,p=Math.floor(c*.5);s.flush(),e.pipelines.preBatch(t);var m=s.setGameObject(t),g=s.vertexViewF32,x=s.vertexViewU32,T=s.vertexCount*s.currentShader.vertexComponentCount-1,E=0,R=t.tintFill;t.dirty&&t.updateVertices();for(var y=t.debugCallback,C=[],S=0;S<c;S+=2){var w=a[S+0],P=a[S+1],A=w*n.a+P*n.c+n.e,M=w*n.b+P*n.d+n.f;v&&(A=Math.round(A),M=Math.round(M)),g[++T]=A,g[++T]=M,g[++T]=o[S+0],g[++T]=o[S+1],g[++T]=m,g[++T]=R,x[++T]=d(h[E],i.alpha*(u[E]*f)),E++,y&&(C[S+0]=A,C[S+1]=M)}y&&y.call(t,t,c,C),s.vertexCount+=p,e.pipelines.postBatch(t)};FX.exports=pCe});var DX=l((O8e,GX)=>{var mCe=function(){};GX.exports=mCe});var UX=l((L8e,VX)=>{var IX=B(),BX=B();IX=NX();BX=DX();VX.exports={renderWebGL:IX,renderCanvas:BX}});var Hu=l((F8e,zX)=>{var gCe=Np(),xCe=_(),qi=de(),kX=Ae(),TCe=Is(),ECe=UX(),yCe=le(),SCe=new xCe({Extends:kX,Mixins:[qi.AlphaSingle,qi.BlendMode,qi.Depth,qi.Flip,qi.Mask,qi.Pipeline,qi.Size,qi.Texture,qi.Transform,qi.Visible,qi.ScrollFactor,ECe],initialize:function(t,i,r,s,n,a,o,h,u){s===void 0&&(s="__DEFAULT"),a===void 0&&(a=2),o===void 0&&(o=!0),kX.call(this,t,"Rope"),this.anims=new gCe(this),this.points=a,this.vertices,this.uv,this.colors,this.alphas,this.tintFill=s==="__DEFAULT",this.dirty=!1,this.horizontal=o,this._flipX=!1,this._flipY=!1,this._perp=new yCe,this.debugCallback=null,this.debugGraphic=null,this.setTexture(s,n),this.setPosition(i,r),this.setSizeToFrame(),this.initPipeline(TCe.ROPE_PIPELINE),Array.isArray(a)&&this.resizeArrays(a.length),this.setPoints(a,h,u),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(e,t){var i=this.anims.currentFrame;this.anims.update(e,t),this.anims.currentFrame!==i&&(this.updateUVs(),this.updateVertices())},play:function(e,t,i){return this.anims.play(e,t,i),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(e,t,i){return e===void 0&&(e=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(e,t,i))},setVertical:function(e,t,i){return e===void 0&&(e=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(e,t,i)):this},setTintFill:function(e){return e===void 0&&(e=!1),this.tintFill=e,this},setAlphas:function(e,t){var i=this.points.length;if(i<1)return this;var r=this.alphas;e===void 0?e=[1]:!Array.isArray(e)&&t===void 0&&(e=[e]);var s,n=0;if(t!==void 0)for(s=0;s<i;s++)n=s*2,r[n]=e,r[n+1]=t;else if(e.length===i)for(s=0;s<i;s++)n=s*2,r[n]=e[s],r[n+1]=e[s];else{var a=e[0];for(s=0;s<i;s++)n=s*2,e.length>n&&(a=e[n]),r[n]=a,e.length>n+1&&(a=e[n+1]),r[n+1]=a}return this},setColors:function(e){var t=this.points.length;if(t<1)return this;var i=this.colors;e===void 0?e=[16777215]:Array.isArray(e)||(e=[e]);var r,s=0;if(e.length===t)for(r=0;r<t;r++)s=r*2,i[s]=e[r],i[s+1]=e[r];else{var n=e[0];for(r=0;r<t;r++)s=r*2,e.length>s&&(n=e[s]),i[s]=n,e.length>s+1&&(n=e[s+1]),i[s+1]=n}return this},setPoints:function(e,t,i){if(e===void 0&&(e=2),typeof e=="number"){var r=e;r<2&&(r=2),e=[];var s,n,a;if(this.horizontal)for(a=-this.frame.halfWidth,n=this.frame.width/(r-1),s=0;s<r;s++)e.push({x:a+s*n,y:0});else for(a=-this.frame.halfHeight,n=this.frame.height/(r-1),s=0;s<r;s++)e.push({x:0,y:a+s*n})}var o=e.length,h=this.points.length;return o<1?(console.warn("Rope: Not enough points given"),this):(o===1&&(e.unshift({x:0,y:0}),o++),h!==o&&this.resizeArrays(o),this.points=e,this.updateUVs(),t!=null&&this.setColors(t),i!=null&&this.setAlphas(i),this)},updateUVs:function(){for(var e=this.uv,t=this.points.length,i=this.frame.u0,r=this.frame.v0,s=this.frame.u1,n=this.frame.v1,a=(s-i)/(t-1),o=(n-r)/(t-1),h=0;h<t;h++){var u=h*4,f,d,v,c;this.horizontal?(this._flipX?(f=s-h*a,v=s-h*a):(f=i+h*a,v=i+h*a),this._flipY?(d=n,c=r):(d=r,c=n)):(this._flipX?(f=i,v=s):(f=s,v=i),this._flipY?(d=n-h*o,c=n-h*o):(d=r+h*o,c=r+h*o)),e[u+0]=f,e[u+1]=d,e[u+2]=v,e[u+3]=c}return this},resizeArrays:function(e){var t=this.colors,i=this.alphas;this.vertices=new Float32Array(e*4),this.uv=new Float32Array(e*4),t=new Uint32Array(e*2),i=new Float32Array(e*2);for(var r=0;r<e*2;r++)t[r]=16777215,i[r]=1;return this.colors=t,this.alphas=i,this.dirty=!0,this},updateVertices:function(){var e=this._perp,t=this.points,i=this.vertices,r=t.length;if(this.dirty=!1,!(r<1)){for(var s,n=t[0],a=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,o=0;o<r;o++){var h=t[o],u=o*4;o<r-1?s=t[o+1]:s=h,e.x=s.y-n.y,e.y=-(s.x-n.x);var f=e.length();e.x/=f,e.y/=f,e.x*=a,e.y*=a,i[u]=h.x+e.x,i[u+1]=h.y+e.y,i[u+2]=h.x-e.x,i[u+3]=h.y-e.y,n=h}return this}},setDebug:function(e,t){return this.debugGraphic=e,!e&&!t?this.debugCallback=null:t?this.debugCallback=t:this.debugCallback=this.renderDebugVerts,this},renderDebugVerts:function(e,t,i){var r=e.debugGraphic,s=i[0],n=i[1],a=i[2],o=i[3];r.lineBetween(s,n,a,o);for(var h=4;h<t;h+=4){var u=i[h+0],f=i[h+1],d=i[h+2],v=i[h+3];r.lineBetween(s,n,u,f),r.lineBetween(a,o,d,v),r.lineBetween(a,o,u,f),r.lineBetween(u,f,d,v),s=u,n=f,a=d,o=v}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(e){return this._flipX=e,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(e){return this._flipY=e,this.updateUVs()}}});zX.exports=SCe});var jp=l((N8e,XX)=>{var CCe=function(e,t,i){var r=e.canvas,s=e.context,n=e.style,a=[],o=0,h=i.length;n.maxLines>0&&n.maxLines<i.length&&(h=n.maxLines),n.syncFont(r,s);for(var u=0;u<h;u++){var f=n.strokeThickness;f+=s.measureText(i[u]).width,n.wordWrap&&(f-=s.measureText(" ").width),a[u]=Math.ceil(f),o=Math.max(o,a[u])}var d=t.fontSize+n.strokeThickness,v=d*h,c=e.lineSpacing;return h>1&&(v+=c*(h-1)),{width:o,height:v,lines:h,lineWidths:a,lineSpacing:c,lineHeight:d}};XX.exports=CCe});var WX=l((G8e,YX)=>{var RCe=fe(),_Ce=function(e,t,i,r){if(!(t.width===0||t.height===0)){i.addToRenderList(t);var s=t.frame,n=s.width,a=s.height,o=RCe.getTintAppendFloatAlpha,h=e.pipelines.set(t.pipeline,t),u=h.setTexture2D(s.glTexture,t);e.pipelines.preBatch(t),h.batchTexture(t,s.glTexture,n,a,t.x,t.y,n/t.style.resolution,a/t.style.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,n,a,o(t.tintTopLeft,i.alpha*t._alphaTL),o(t.tintTopRight,i.alpha*t._alphaTR),o(t.tintBottomLeft,i.alpha*t._alphaBL),o(t.tintBottomRight,i.alpha*t._alphaBR),t.tintFill,0,0,i,r,!1,u),e.pipelines.postBatch(t)}};YX.exports=_Ce});var jX=l((D8e,HX)=>{var wCe=function(e,t,i,r){t.width===0||t.height===0||(i.addToRenderList(t),e.batchSprite(t,t.frame,i,r))};HX.exports=wCe});var QX=l((I8e,JX)=>{var KX=B(),ZX=B();KX=WX();ZX=jX();JX.exports={renderWebGL:KX,renderCanvas:ZX}});var Kp=l((B8e,$X)=>{var ju=Et(),PCe=function(e){var t=ju.create(this),i=t.getContext("2d");e.syncFont(t,i);var r=i.measureText(e.testString);if("actualBoundingBoxAscent"in r){var s=r.actualBoundingBoxAscent,n=r.actualBoundingBoxDescent;return ju.remove(t),{ascent:s,descent:n,fontSize:s+n}}var a=Math.ceil(r.width*e.baselineX),o=a,h=2*o;o=o*e.baselineY|0,t.width=a,t.height=h,i.fillStyle="#f00",i.fillRect(0,0,a,h),i.font=e._font,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(e.testString,0,o);var u={ascent:0,descent:0,fontSize:0},f=i.getImageData(0,0,a,h);if(!f)return u.ascent=o,u.descent=o+6,u.fontSize=u.ascent+u.descent,ju.remove(t),u;var d=f.data,v=d.length,c=a*4,p,m,g=0,x=!1;for(p=0;p<o;p++){for(m=0;m<c;m+=4)if(d[g+m]!==255){x=!0;break}if(!x)g+=c;else break}for(u.ascent=o-p,g=v-c,x=!1,p=h;p>o;p--){for(m=0;m<c;m+=4)if(d[g+m]!==255){x=!0;break}if(!x)g-=c;else break}return u.descent=p-o,u.fontSize=u.ascent+u.descent,ju.remove(t),u};$X.exports=PCe});var Zp=l((V8e,tY)=>{var ACe=_(),bCe=pe(),Ji=ie(),eY=Kp(),go={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|M\xC3\u2030qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},MCe=new ACe({initialize:function(t,i){this.parent=t,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(i,!1,!0);var r=Ji(i,"metrics",!1);r?this.metrics={ascent:Ji(r,"ascent",0),descent:Ji(r,"descent",0),fontSize:Ji(r,"fontSize",0)}:this.metrics=eY(this)},setStyle:function(e,t,i){t===void 0&&(t=!0),i===void 0&&(i=!1),e&&e.hasOwnProperty("fontSize")&&typeof e.fontSize=="number"&&(e.fontSize=e.fontSize.toString()+"px");for(var r in go){var s=i?go[r][1]:this[r];r==="wordWrapCallback"||r==="wordWrapCallbackScope"?this[r]=Ji(e,go[r][0],s):this[r]=bCe(e,go[r][0],s)}var n=Ji(e,"font",null);n!==null&&this.setFont(n,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var a=Ji(e,"fill",null);return a!==null&&(this.color=a),t?this.update(!0):this.parent},syncFont:function(e,t){t.font=this._font},syncStyle:function(e,t){t.textBaseline="alphabetic",t.fillStyle=this.color,t.strokeStyle=this.stroke,t.lineWidth=this.strokeThickness,t.lineCap="round",t.lineJoin="round"},syncShadow:function(e,t){t?(e.shadowOffsetX=this.shadowOffsetX,e.shadowOffsetY=this.shadowOffsetY,e.shadowColor=this.shadowColor,e.shadowBlur=this.shadowBlur):(e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowColor=0,e.shadowBlur=0)},update:function(e){return e&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=eY(this)),this.parent.updateText()},setFont:function(e,t){t===void 0&&(t=!0);var i=e,r="",s="";if(typeof e!="string")i=Ji(e,"fontFamily","Courier"),r=Ji(e,"fontSize","16px"),s=Ji(e,"fontStyle","");else{var n=e.split(" "),a=0;s=n.length>2?n[a++]:"",r=n[a++]||"16px",i=n[a++]||"Courier"}return(i!==this.fontFamily||r!==this.fontSize||s!==this.fontStyle)&&(this.fontFamily=i,this.fontSize=r,this.fontStyle=s,t&&this.update(!0)),this.parent},setFontFamily:function(e){return this.fontFamily!==e&&(this.fontFamily=e,this.update(!0)),this.parent},setFontStyle:function(e){return this.fontStyle!==e&&(this.fontStyle=e,this.update(!0)),this.parent},setFontSize:function(e){return typeof e=="number"&&(e=e.toString()+"px"),this.fontSize!==e&&(this.fontSize=e,this.update(!0)),this.parent},setTestString:function(e){return this.testString=e,this.update(!0)},setFixedSize:function(e,t){return this.fixedWidth=e,this.fixedHeight=t,e&&(this.parent.width=e),t&&(this.parent.height=t),this.update(!1)},setBackgroundColor:function(e){return this.backgroundColor=e,this.update(!1)},setFill:function(e){return this.color=e,this.update(!1)},setColor:function(e){return this.color=e,this.update(!1)},setResolution:function(e){return this.resolution=e,this.update(!1)},setStroke:function(e,t){return t===void 0&&(t=this.strokeThickness),e===void 0&&this.strokeThickness!==0?(this.strokeThickness=0,this.update(!0)):(this.stroke!==e||this.strokeThickness!==t)&&(this.stroke=e,this.strokeThickness=t,this.update(!0)),this.parent},setShadow:function(e,t,i,r,s,n){return e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i="#000"),r===void 0&&(r=0),s===void 0&&(s=!1),n===void 0&&(n=!0),this.shadowOffsetX=e,this.shadowOffsetY=t,this.shadowColor=i,this.shadowBlur=r,this.shadowStroke=s,this.shadowFill=n,this.update(!1)},setShadowOffset:function(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),this.shadowOffsetX=e,this.shadowOffsetY=t,this.update(!1)},setShadowColor:function(e){return e===void 0&&(e="#000"),this.shadowColor=e,this.update(!1)},setShadowBlur:function(e){return e===void 0&&(e=0),this.shadowBlur=e,this.update(!1)},setShadowStroke:function(e){return this.shadowStroke=e,this.update(!1)},setShadowFill:function(e){return this.shadowFill=e,this.update(!1)},setWordWrapWidth:function(e,t){return t===void 0&&(t=!1),this.wordWrapWidth=e,this.wordWrapUseAdvanced=t,this.update(!1)},setWordWrapCallback:function(e,t){return t===void 0&&(t=null),this.wordWrapCallback=e,this.wordWrapCallbackScope=t,this.update(!1)},setAlign:function(e){return e===void 0&&(e="left"),this.align=e,this.update(!1)},setMaxLines:function(e){return e===void 0&&(e=0),this.maxLines=e,this.update(!1)},getTextMetrics:function(){var e=this.metrics;return{ascent:e.ascent,descent:e.descent,fontSize:e.fontSize}},toJSON:function(){var e={};for(var t in go)e[t]=this[t];return e.metrics=this.getTextMetrics(),e},destroy:function(){this.parent=void 0}});tY.exports=MCe});var Ku=l((U8e,sY)=>{var qCe=$a(),iY=Et(),OCe=_(),wt=de(),LCe=Ne(),rY=Ae(),FCe=jp(),ea=ie(),NCe=$h(),GCe=QX(),DCe=Zp(),ICe=new OCe({Extends:rY,Mixins:[wt.Alpha,wt.BlendMode,wt.ComputedSize,wt.Crop,wt.Depth,wt.Flip,wt.GetBounds,wt.Mask,wt.Origin,wt.Pipeline,wt.ScrollFactor,wt.Tint,wt.Transform,wt.Visible,GCe],initialize:function(t,i,r,s,n){i===void 0&&(i=0),r===void 0&&(r=0),rY.call(this,t,"Text"),this.renderer=t.sys.renderer,this.setPosition(i,r),this.setOrigin(0,0),this.initPipeline(),this.canvas=iY.create(this),this.context=this.canvas.getContext("2d"),this.style=new DCe(this,n),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(s),n&&n.padding&&this.setPadding(n.padding),n&&n.lineSpacing&&this.setLineSpacing(n.lineSpacing),t.sys.game.events.on(LCe.CONTEXT_RESTORED,function(){this.dirty=!0},this)},initRTL:function(){!this.style.rtl||(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",qCe(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(e){var t=this.style;if(t.wordWrapCallback){var i=t.wordWrapCallback.call(t.wordWrapCallbackScope,e,this);return Array.isArray(i)&&(i=i.join(`
`)),i}else return t.wordWrapWidth?t.wordWrapUseAdvanced?this.advancedWordWrap(e,this.context,this.style.wordWrapWidth):this.basicWordWrap(e,this.context,this.style.wordWrapWidth):e},advancedWordWrap:function(e,t,i){for(var r="",s=e.replace(/ +/gi," ").split(this.splitRegExp),n=s.length,a=0;a<n;a++){var o=s[a],h="";o=o.replace(/^ *|\s*$/gi,"");var u=t.measureText(o).width;if(u<i){r+=o+`
`;continue}for(var f=i,d=o.split(" "),v=0;v<d.length;v++){var c=d[v],p=c+" ",m=t.measureText(p).width;if(m>f){if(v===0){for(var g=p;g.length&&(g=g.slice(0,-1),m=t.measureText(g).width,!(m<=f)););if(!g.length)throw new Error("This text's wordWrapWidth setting is less than a single character!");var x=c.substr(g.length);d[v]=x,h+=g}var T=d[v].length?v:v+1,E=d.slice(T).join(" ").replace(/[ \n]*$/gi,"");s[a+1]=E+" "+(s[a+1]||""),n=s.length;break}else h+=p,f-=m}r+=h.replace(/[ \n]*$/gi,"")+`
`}return r=r.replace(/[\s|\n]*$/gi,""),r},basicWordWrap:function(e,t,i){for(var r="",s=e.split(this.splitRegExp),n=s.length-1,a=t.measureText(" ").width,o=0;o<=n;o++){for(var h=i,u=s[o].split(" "),f=u.length-1,d=0;d<=f;d++){var v=u[d],c=t.measureText(v).width,p=c;d<f&&(p+=a),p>h&&d>0&&(r+=`
`,h=i),r+=v,d<f?(r+=" ",h-=p):h-=c}o<n&&(r+=`
`)}return r},getWrappedText:function(e){e===void 0&&(e=this._text),this.style.syncFont(this.canvas,this.context);var t=this.runWordWrap(e);return t.split(this.splitRegExp)},setText:function(e){return!e&&e!==0&&(e=""),Array.isArray(e)&&(e=e.join(`
`)),e!==this._text&&(this._text=e.toString(),this.updateText()),this},setStyle:function(e){return this.style.setStyle(e)},setFont:function(e){return this.style.setFont(e)},setFontFamily:function(e){return this.style.setFontFamily(e)},setFontSize:function(e){return this.style.setFontSize(e)},setFontStyle:function(e){return this.style.setFontStyle(e)},setFixedSize:function(e,t){return this.style.setFixedSize(e,t)},setBackgroundColor:function(e){return this.style.setBackgroundColor(e)},setFill:function(e){return this.style.setFill(e)},setColor:function(e){return this.style.setColor(e)},setStroke:function(e,t){return this.style.setStroke(e,t)},setShadow:function(e,t,i,r,s,n){return this.style.setShadow(e,t,i,r,s,n)},setShadowOffset:function(e,t){return this.style.setShadowOffset(e,t)},setShadowColor:function(e){return this.style.setShadowColor(e)},setShadowBlur:function(e){return this.style.setShadowBlur(e)},setShadowStroke:function(e){return this.style.setShadowStroke(e)},setShadowFill:function(e){return this.style.setShadowFill(e)},setWordWrapWidth:function(e,t){return this.style.setWordWrapWidth(e,t)},setWordWrapCallback:function(e,t){return this.style.setWordWrapCallback(e,t)},setAlign:function(e){return this.style.setAlign(e)},setResolution:function(e){return this.style.setResolution(e)},setLineSpacing:function(e){return this.lineSpacing=e,this.updateText()},setPadding:function(e,t,i,r){if(typeof e=="object"){var s=e,n=ea(s,"x",null);n!==null?(e=n,i=n):(e=ea(s,"left",0),i=ea(s,"right",e));var a=ea(s,"y",null);a!==null?(t=a,r=a):(t=ea(s,"top",0),r=ea(s,"bottom",t))}else e===void 0&&(e=0),t===void 0&&(t=e),i===void 0&&(i=e),r===void 0&&(r=t);return this.padding.left=e,this.padding.top=t,this.padding.right=i,this.padding.bottom=r,this.updateText()},setMaxLines:function(e){return this.style.setMaxLines(e)},updateText:function(){var e=this.canvas,t=this.context,i=this.style,r=i.resolution,s=i.metrics;i.syncFont(e,t);var n=this._text;(i.wordWrapWidth||i.wordWrapCallback)&&(n=this.runWordWrap(this._text));var a=n.split(this.splitRegExp),o=FCe(this,s,a),h=this.padding,u;i.fixedWidth===0?(this.width=o.width+h.left+h.right,u=o.width):(this.width=i.fixedWidth,u=this.width-h.left-h.right,u<o.width&&(u=o.width)),i.fixedHeight===0?this.height=o.height+h.top+h.bottom:this.height=i.fixedHeight;var f=this.width,d=this.height;this.updateDisplayOrigin(),f*=r,d*=r,f=Math.max(f,1),d=Math.max(d,1),e.width!==f||e.height!==d?(e.width=f,e.height=d,this.frame.setSize(f,d),i.syncFont(e,t)):t.clearRect(0,0,f,d),t.save(),t.scale(r,r),i.backgroundColor&&(t.fillStyle=i.backgroundColor,t.fillRect(0,0,f,d)),i.syncStyle(e,t),t.textBaseline="alphabetic",t.translate(h.left,h.top);for(var v,c,p=0;p<o.lines;p++){if(v=i.strokeThickness/2,c=i.strokeThickness/2+p*o.lineHeight+s.ascent,p>0&&(c+=o.lineSpacing*p),i.rtl)v=f-v;else if(i.align==="right")v+=u-o.lineWidths[p];else if(i.align==="center")v+=(u-o.lineWidths[p])/2;else if(i.align==="justify"){var m=.85;if(o.lineWidths[p]/o.width>=m){var g=o.width-o.lineWidths[p],x=t.measureText(" ").width,T=a[p].trim(),E=T.split(" ");g+=(a[p].length-T.length)*x;for(var R=Math.floor(g/x),y=0;R>0;)E[y]+=" ",y=(y+1)%(E.length-1||1),--R;a[p]=E.join(" ")}}this.autoRound&&(v=Math.round(v),c=Math.round(c)),i.strokeThickness&&(this.style.syncShadow(t,i.shadowStroke),t.strokeText(a[p],v,c)),i.color&&(this.style.syncShadow(t,i.shadowFill),t.fillText(a[p],v,c))}t.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(e,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var C=this.input;return C&&!C.customHitArea&&(C.hitArea.width=this.width,C.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(e){this.setText(e)}},toJSON:function(){var e=wt.ToJSON(this),t={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return e.data=t,e},preDestroy:function(){this.style.rtl&&NCe(this.canvas),iY.remove(this.canvas),this.texture.destroy()}});sY.exports=ICe});var aY=l((k8e,nY)=>{var BCe=fe(),VCe=function(e,t,i,r){t.updateCanvas();var s=t.width,n=t.height;if(!(s===0||n===0)){i.addToRenderList(t),e.pipelines.preBatch(t);var a=BCe.getTintAppendFloatAlpha,o=e.pipelines.set(t.pipeline,t),h=o.setTexture2D(t.fillPattern,t);o.batchTexture(t,t.fillPattern,t.displayFrame.width*t.tileScaleX,t.displayFrame.height*t.tileScaleY,t.x,t.y,s,n,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.originX*s,t.originY*n,0,0,s,n,a(t.tintTopLeft,i.alpha*t._alphaTL),a(t.tintTopRight,i.alpha*t._alphaTR),a(t.tintBottomLeft,i.alpha*t._alphaBL),a(t.tintBottomRight,i.alpha*t._alphaBR),t.tintFill,t.tilePositionX%t.displayFrame.width/t.displayFrame.width,t.tilePositionY%t.displayFrame.height/t.displayFrame.height,i,r,!1,h),e.pipelines.postBatch(t)}};nY.exports=VCe});var hY=l((z8e,oY)=>{var UCe=function(e,t,i,r){t.updateCanvas(),i.addToRenderList(t),e.batchSprite(t,t.frame,i,r)};oY.exports=UCe});var dY=l((X8e,fY)=>{var uY=B(),lY=B();uY=aY();lY=hY();fY.exports={renderWebGL:uY,renderCanvas:lY}});var Qu=l((Y8e,mY)=>{var Zu=Et(),kCe=_(),Nt=de(),zCe=Ne(),vY=Ae(),Ju=td(),XCe=Wo(),YCe=dY(),cY=le(),pY=8,WCe=new kCe({Extends:vY,Mixins:[Nt.Alpha,Nt.BlendMode,Nt.ComputedSize,Nt.Crop,Nt.Depth,Nt.Flip,Nt.GetBounds,Nt.Mask,Nt.Origin,Nt.Pipeline,Nt.ScrollFactor,Nt.Tint,Nt.Transform,Nt.Visible,YCe],initialize:function(t,i,r,s,n,a,o){var h=t.sys.renderer;vY.call(this,t,"TileSprite");var u=t.sys.textures.get(a),f=u.get(o);!s||!n?(s=f.width,n=f.height):(s=Math.floor(s),n=Math.floor(n)),this._tilePosition=new cY,this._tileScale=new cY(1,1),this.dirty=!1,this.renderer=h,this.canvas=Zu.create(this,s,n),this.context=this.canvas.getContext("2d"),this.displayTexture=u,this.displayFrame=f,this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.potWidth=Ju(f.width),this.potHeight=Ju(f.height),this.fillCanvas=Zu.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d"),this.fillPattern=null,this.setPosition(i,r),this.setSize(s,n),this.setFrame(o),this.setOriginFromFrame(),this.initPipeline(),t.sys.game.events.on(zCe.CONTEXT_RESTORED,function(d){if(!!d){var v=d.gl;this.dirty=!0,this.fillPattern=null,this.fillPattern=d.createTexture2D(0,v.LINEAR,v.LINEAR,v.REPEAT,v.REPEAT,v.RGBA,this.fillCanvas,this.potWidth,this.potHeight)}},this)},setTexture:function(e,t){return this.displayTexture=this.scene.sys.textures.get(e),this.setFrame(t)},setFrame:function(e){var t=this.displayTexture.get(e);return this.potWidth=Ju(t.width),this.potHeight=Ju(t.height),this.canvas.width=0,!t.cutWidth||!t.cutHeight?this.renderFlags&=~pY:this.renderFlags|=pY,this.displayFrame=t,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(e,t){return e!==void 0&&(this.tilePositionX=e),t!==void 0&&(this.tilePositionY=t),this},setTileScale:function(e,t){return e===void 0&&(e=this.tileScaleX),t===void 0&&(t=e),this.tileScaleX=e,this.tileScaleY=t,this},updateTileTexture:function(){if(!(!this.dirty||!this.renderer)){var e=this.displayFrame;if(e.source.isRenderTexture||e.source.isGLTexture){console.warn("TileSprites can only use Image or Canvas based textures"),this.dirty=!1;return}var t=this.fillContext,i=this.fillCanvas,r=this.potWidth,s=this.potHeight;(!this.renderer||!this.renderer.gl)&&(r=e.cutWidth,s=e.cutHeight),t.clearRect(0,0,r,s),i.width=r,i.height=s,t.drawImage(e.source.image,e.cutX,e.cutY,e.cutWidth,e.cutHeight,0,0,r,s),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(i,this.fillPattern):this.fillPattern=t.createPattern(i,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var e=this.canvas;if((e.width!==this.width||e.height!==this.height)&&(e.width=this.width,e.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl){this.dirty=!1;return}var t=this.context;this.scene.sys.game.config.antialias||XCe.disable(t);var i=this._tileScale.x,r=this._tileScale.y,s=this._tilePosition.x,n=this._tilePosition.y;t.clearRect(0,0,this.width,this.height),t.save(),t.scale(i,r),t.translate(-s,-n),t.fillStyle=this.fillPattern,t.fillRect(s,n,this.width/i,this.height/r),t.restore(),this.dirty=!1},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),Zu.remove(this.canvas),Zu.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null,this.texture.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(e){this._tilePosition.x=e,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(e){this._tilePosition.y=e,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(e){this._tileScale.x=e,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(e){this._tileScale.y=e,this.dirty=!0}}});mY.exports=WCe});var xY=l((W8e,gY)=>{var HCe=function(e,t,i,r){t.videoTexture&&(i.addToRenderList(t),t.pipeline.batchSprite(t,i,r))};gY.exports=HCe});var EY=l((H8e,TY)=>{var jCe=function(e,t,i,r){t.videoTexture&&(i.addToRenderList(t),e.batchSprite(t,t.frame,i,r))};TY.exports=jCe});var RY=l((j8e,CY)=>{var yY=B(),SY=B();yY=xY();SY=EY();CY.exports={renderWebGL:yY,renderCanvas:SY}});var el=l((K8e,AY)=>{var KCe=_(),ZCe=Pe(),Gt=de(),ct=Xr(),$u=Ne(),JCe=Xi(),_Y=Ae(),wY=$r(),PY=Yu(),QCe=RY(),$Ce=we(),eRe=new KCe({Extends:_Y,Mixins:[Gt.Alpha,Gt.BlendMode,Gt.Depth,Gt.Flip,Gt.GetBounds,Gt.Mask,Gt.Origin,Gt.Pipeline,Gt.ScrollFactor,Gt.Size,Gt.TextureCrop,Gt.Tint,Gt.Transform,Gt.Visible,QCe],initialize:function(t,i,r,s){_Y.call(this,t,"Video"),this.video=null,this.videoTexture=null,this.videoTextureSource=null,this.snapshotTexture=null,this.flipY=!1,this._key=PY(),this.touchLocked=!0,this.playWhenUnlocked=!1,this.retryLimit=20,this.retry=0,this.retryInterval=500,this._retryID=null,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={play:this.playHandler.bind(this),error:this.loadErrorHandler.bind(this),end:this.completeHandler.bind(this),time:this.timeUpdateHandler.bind(this),seeking:this.seekingHandler.bind(this),seeked:this.seekedHandler.bind(this)},this._crop=this.resetCropObject(),this.markers={},this._markerIn=-1,this._markerOut=$Ce.MAX_SAFE_INTEGER,this._lastUpdate=0,this._cacheKey="",this._isSeeking=!1,this.removeVideoElementOnDestroy=!1,this.setPosition(i,r),this.initPipeline(),s&&this.changeSource(s,!1);var n=t.sys.game.events;n.on($u.PAUSE,this.globalPause,this),n.on($u.RESUME,this.globalResume,this);var a=t.sys.sound;a&&a.on(wY.GLOBAL_MUTE,this.globalMute,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},play:function(e,t,i){if(this.touchLocked&&this.playWhenUnlocked||this.isPlaying())return this;var r=this.video;if(!r)return console.warn("Video not loaded"),this;e===void 0&&(e=r.loop);var s=this.scene.sys.sound;s&&s.mute&&this.setMute(!0),isNaN(t)||(this._markerIn=t),!isNaN(i)&&i>t&&(this._markerOut=i),r.loop=e;var n=this._callbacks,a=r.play();return a!==void 0?a.then(this.playPromiseSuccessHandler.bind(this)).catch(this.playPromiseErrorHandler.bind(this)):(r.addEventListener("playing",n.play,!0),r.readyState<2&&(this.retry=this.retryLimit,this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval))),r.addEventListener("ended",n.end,!0),r.addEventListener("timeupdate",n.time,!0),r.addEventListener("seeking",n.seeking,!0),r.addEventListener("seeked",n.seeked,!0),this},changeSource:function(e,t,i,r,s){t===void 0&&(t=!0);var n=this.video;n&&this.stop();var a=this.scene.sys.cache.video.get(e);return a?(this.video=a,this._cacheKey=e,this._codePaused=a.paused,this._codeMuted=a.muted,this.videoTexture?(this.scene.sys.textures.remove(this._key),this.videoTexture=this.scene.sys.textures.create(this._key,a,a.videoWidth,a.videoHeight),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,a.videoWidth,a.videoHeight),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(ct.VIDEO_CREATED,this,a.videoWidth,a.videoHeight)):this.updateTexture(),a.currentTime=0,this._lastUpdate=0,t&&this.play(i,r,s)):this.video=null,this},addMarker:function(e,t,i){return!isNaN(t)&&t>=0&&!isNaN(i)&&(this.markers[e]=[t,i]),this},playMarker:function(e,t){var i=this.markers[e];return i&&this.play(t,i[0],i[1]),this},removeMarker:function(e){return delete this.markers[e],this},snapshot:function(e,t){return e===void 0&&(e=this.width),t===void 0&&(t=this.height),this.snapshotArea(0,0,this.width,this.height,e,t)},snapshotArea:function(e,t,i,r,s,n){e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=this.width),r===void 0&&(r=this.height),s===void 0&&(s=i),n===void 0&&(n=r);var a=this.video,o=this.snapshotTexture;return o?(o.setSize(s,n),a&&o.context.drawImage(a,e,t,i,r,0,0,s,n)):(o=this.scene.sys.textures.createCanvas(PY(),s,n),this.snapshotTexture=o,a&&o.context.drawImage(a,e,t,i,r,0,0,s,n)),o.update()},saveSnapshotTexture:function(e){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,e):this.snapshotTexture=this.scene.sys.textures.createCanvas(e,this.width,this.height),this.snapshotTexture},loadURL:function(e,t,i){t===void 0&&(t="loadeddata"),i===void 0&&(i=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var r=document.createElement("video");return r.controls=!1,i&&(r.muted=!0,r.defaultMuted=!0,r.setAttribute("autoplay","autoplay")),r.setAttribute("playsinline","playsinline"),r.setAttribute("preload","auto"),r.addEventListener("error",this._callbacks.error,!0),r.src=e,r.load(),this.video=r,this},loadMediaStream:function(e,t,i){t===void 0&&(t="loadeddata"),i===void 0&&(i=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var r=document.createElement("video");r.controls=!1,i&&(r.muted=!0,r.defaultMuted=!0,r.setAttribute("autoplay","autoplay")),r.setAttribute("playsinline","playsinline"),r.setAttribute("preload","auto"),r.addEventListener("error",this._callbacks.error,!0);try{r.srcObject=e}catch(s){r.src=window.URL.createObjectURL(e)}return r.load(),this.video=r,this},playPromiseSuccessHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(ct.VIDEO_PLAY,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn)},playPromiseErrorHandler:function(e){this.scene.sys.input.once(JCe.POINTER_DOWN,this.unlockHandler,this),this.touchLocked=!0,this.playWhenUnlocked=!0,this.emit(ct.VIDEO_ERROR,this,e)},playHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(ct.VIDEO_PLAY,this),this.video.removeEventListener("playing",this._callbacks.play,!0)},loadErrorHandler:function(e){this.stop(),this.emit(ct.VIDEO_ERROR,this,e)},unlockHandler:function(){this.touchLocked=!1,this.playWhenUnlocked=!1,this.emit(ct.VIDEO_UNLOCKED,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn),this.video.play(),this.emit(ct.VIDEO_PLAY,this)},completeHandler:function(){this.emit(ct.VIDEO_COMPLETE,this)},timeUpdateHandler:function(){this.video&&this.video.currentTime<this._lastUpdate&&(this.emit(ct.VIDEO_LOOP,this),this._lastUpdate=0)},preUpdate:function(){var e=this.video;if(e){var t=e.currentTime;t!==this._lastUpdate&&(this._lastUpdate=t,this.updateTexture(),t>=this._markerOut&&(e.loop?(e.currentTime=this._markerIn,this.updateTexture(),this._lastUpdate=t,this.emit(ct.VIDEO_LOOP,this)):(this.emit(ct.VIDEO_COMPLETE,this),this.stop())))}},checkVideoProgress:function(){this.video.readyState>=2?this.updateTexture():(this.retry--,this.retry>0?this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval):this.emit(ct.VIDEO_TIMEOUT,this))},updateTexture:function(){var e=this.video,t=e.videoWidth,i=e.videoHeight;if(!this.videoTexture)this.videoTexture=this.scene.sys.textures.create(this._key,e,t,i),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,t,i),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(ct.VIDEO_CREATED,this,t,i);else{var r=this.videoTextureSource;r.source!==e&&(r.source=e,r.width=t,r.height=i),r.update()}},getVideoKey:function(){return this._cacheKey},seekTo:function(e){var t=this.video;if(t){var i=t.duration;if(i!==1/0&&!isNaN(i)){var r=i*e;this.setCurrentTime(r)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(e){var t=this.video;if(t){if(typeof e=="string"){var i=e[0],r=parseFloat(e.substr(1));i==="+"?e=t.currentTime+r:i==="-"&&(e=t.currentTime-r)}t.currentTime=e,this._lastUpdate=e}return this},isSeeking:function(){return this._isSeeking},seekingHandler:function(){this._isSeeking=!0,this.emit(ct.VIDEO_SEEKING,this)},seekedHandler:function(){this._isSeeking=!1,this.emit(ct.VIDEO_SEEKED,this);var e=this.video;e&&this.updateTexture()},getProgress:function(){var e=this.video;if(e){var t=e.currentTime,i=e.duration;if(i!==1/0&&!isNaN(i))return t/i}return 0},getDuration:function(){return this.video?this.video.duration:0},setMute:function(e){e===void 0&&(e=!0),this._codeMuted=e;var t=this.video;return t&&(t.muted=this._systemMuted?!0:e),this},isMuted:function(){return this._codeMuted},globalMute:function(e,t){this._systemMuted=t;var i=this.video;i&&(i.muted=this._codeMuted?!0:t)},globalPause:function(){this._systemPaused=!0,this.video&&this.video.pause()},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&this.video.play()},setPaused:function(e){e===void 0&&(e=!0);var t=this.video;return this._codePaused=e,t&&(e?t.paused||t.pause():e||t.paused&&!this._systemPaused&&t.play()),this},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(e){return e===void 0&&(e=1),this.video&&(this.video.volume=ZCe(e,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(e){return this.video&&(this.video.playbackRate=e),this},getLoop:function(){return this.video?this.video.loop:!1},setLoop:function(e){return e===void 0&&(e=!0),this.video&&(this.video.loop=e),this},isPlaying:function(){return this.video?!(this.video.paused||this.video.ended):!1},isPaused:function(){return this.video&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(e,t){return t===void 0&&(t=!1),this.videoTexture&&this.scene.sys.textures.renameTexture(this._key,e),this._key=e,this.flipY=t,this.videoTextureSource&&this.videoTextureSource.setFlipY(t),this.videoTexture},stop:function(){var e=this.video;if(e){var t=this._callbacks;for(var i in t)e.removeEventListener(i,t[i],!0);e.pause()}return this._retryID&&window.clearTimeout(this._retryID),this.emit(ct.VIDEO_STOP,this),this},removeVideoElement:function(){var e=this.video;if(!!e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("autoplay"),e.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(),this.removeVideoElementOnDestroy&&this.removeVideoElement();var e=this.scene.sys.game.events;e.off($u.PAUSE,this.globalPause,this),e.off($u.RESUME,this.globalResume,this);var t=this.scene.sys.sound;t&&t.off(wY.GLOBAL_MUTE,this.globalMute,this),this._retryID&&window.clearTimeout(this._retryID)}});AY.exports=eRe});var Zt=l((Z8e,MY)=>{var tRe=_(),Qi=de(),bY=Ae(),iRe=Ri(),rRe=new tRe({Extends:bY,Mixins:[Qi.AlphaSingle,Qi.BlendMode,Qi.Depth,Qi.GetBounds,Qi.Mask,Qi.Origin,Qi.Pipeline,Qi.ScrollFactor,Qi.Transform,Qi.Visible],initialize:function(t,i,r){i===void 0&&(i="Shape"),bY.call(this,t,i),this.geom=r,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new iRe,this.width=0,this.height=0,this.initPipeline()},setFillStyle:function(e,t){return t===void 0&&(t=1),e===void 0?this.isFilled=!1:(this.fillColor=e,this.fillAlpha=t,this.isFilled=!0),this},setStrokeStyle:function(e,t,i){return i===void 0&&(i=1),e===void 0?this.isStroked=!1:(this.lineWidth=e,this.strokeColor=t,this.strokeAlpha=i,this.isStroked=!0),this},setClosePath:function(e){return this.closePath=e,this},setSize:function(e,t){return this.width=e,this.height=t,this},setDisplaySize:function(e,t){return this.displayWidth=e,this.displayHeight=t,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(e){this.scaleX=e/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(e){this.scaleY=e/this.height}}});MY.exports=rRe});var ta=l((J8e,qY)=>{var sRe=fe(),nRe=function(e,t,i,r,s,n){for(var a=sRe.getTintAppendFloatAlpha(i.fillColor,i.fillAlpha*r),o=i.pathData,h=i.pathIndexes,u=0;u<h.length;u+=3){var f=h[u]*2,d=h[u+1]*2,v=h[u+2]*2,c=o[f+0]-s,p=o[f+1]-n,m=o[d+0]-s,g=o[d+1]-n,x=o[v+0]-s,T=o[v+1]-n,E=t.getX(c,p),R=t.getY(c,p),y=t.getX(m,g),C=t.getY(m,g),S=t.getX(x,T),w=t.getY(x,T);e.batchTri(i,E,R,y,C,S,w,0,0,1,1,a,a,a,2)}};qY.exports=nRe});var us=l((Q8e,OY)=>{var aRe=fe(),oRe=function(e,t,i,r,s){var n=e.strokeTint,a=aRe.getTintAppendFloatAlpha(t.strokeColor,t.strokeAlpha*i);n.TL=a,n.TR=a,n.BL=a,n.BR=a;var o=t.pathData,h=o.length-1,u=t.lineWidth,f=u/2,d=o[0]-r,v=o[1]-s;t.closePath||(h-=2);for(var c=2;c<h;c+=2){var p=o[c]-r,m=o[c+1]-s;e.batchLine(d,v,p,m,f,f,u,c-2,t.closePath?c===h-1:!1),d=p,v=m}};OY.exports=oRe});var FY=l(($8e,LY)=>{var hRe=Re(),uRe=ta(),lRe=us(),fRe=function(e,t,i,r){i.addToRenderList(t);var s=e.pipelines.set(t.pipeline),n=hRe(t,i,r),a=s.calcMatrix.copyFrom(n.calc),o=t._displayOriginX,h=t._displayOriginY,u=i.alpha*t.alpha;e.pipelines.preBatch(t),t.isFilled&&uRe(s,a,t,u,o,h),t.isStroked&&lRe(s,t,u,o,h),e.pipelines.postBatch(t)};LY.exports=fRe});var Oi=l((e7e,NY)=>{var dRe=function(e,t,i,r){var s=i||t.fillColor,n=r||t.fillAlpha,a=(s&16711680)>>>16,o=(s&65280)>>>8,h=s&255;e.fillStyle="rgba("+a+","+o+","+h+","+n+")"};NY.exports=dRe});var $i=l((t7e,GY)=>{var vRe=function(e,t,i,r){var s=i||t.strokeColor,n=r||t.strokeAlpha,a=(s&16711680)>>>16,o=(s&65280)>>>8,h=s&255;e.strokeStyle="rgba("+a+","+o+","+h+","+n+")",e.lineWidth=t.lineWidth};GY.exports=vRe});var BY=l((i7e,IY)=>{var DY=or(),cRe=Oi(),pRe=$i(),mRe=vt(),gRe=function(e,t,i,r){i.addToRenderList(t);var s=e.currentContext;if(mRe(e,s,t,i,r)){var n=t.radius;s.beginPath(),s.arc(n-t.originX*(n*2),n-t.originY*(n*2),n,DY(t._startAngle),DY(t._endAngle),t.anticlockwise),t.closePath&&s.closePath(),t.isFilled&&(cRe(s,t),s.fill()),t.isStroked&&(pRe(s,t),s.stroke()),s.restore()}};IY.exports=gRe});var zY=l((r7e,kY)=>{var VY=B(),UY=B();VY=FY();UY=BY();kY.exports={renderWebGL:VY,renderCanvas:UY}});var Jp=l((s7e,WY)=>{var xRe=zY(),TRe=_(),XY=or(),ERe=Di(),yRe=kr(),ls=we(),YY=Zt(),SRe=new TRe({Extends:YY,Mixins:[xRe],initialize:function(t,i,r,s,n,a,o,h,u){i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=128),n===void 0&&(n=0),a===void 0&&(a=360),o===void 0&&(o=!1),YY.call(this,t,"Arc",new yRe(0,0,s)),this._startAngle=n,this._endAngle=a,this._anticlockwise=o,this._iterations=.01,this.setPosition(i,r);var f=this.geom.radius*2;this.setSize(f,f),h!==void 0&&this.setFillStyle(h,u),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(e){this._iterations=e,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(e){this.geom.radius=e;var t=e*2;this.setSize(t,t),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(e){this._startAngle=e,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(e){this._endAngle=e,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(e){this._anticlockwise=e,this.updateData()}},setRadius:function(e){return this.radius=e,this},setIterations:function(e){return e===void 0&&(e=.01),this.iterations=e,this},setStartAngle:function(e,t){return this._startAngle=e,t!==void 0&&(this._anticlockwise=t),this.updateData()},setEndAngle:function(e,t){return this._endAngle=e,t!==void 0&&(this._anticlockwise=t),this.updateData()},updateData:function(){var e=this._iterations,t=e,i=this.geom.radius,r=XY(this._startAngle),s=XY(this._endAngle),n=this._anticlockwise,a=i,o=i;s-=r,n?s<-ls.PI2?s=-ls.PI2:s>0&&(s=-ls.PI2+s%ls.PI2):s>ls.PI2?s=ls.PI2:s<0&&(s=ls.PI2+s%ls.PI2);for(var h=[a+Math.cos(r)*i,o+Math.sin(r)*i],u;t<1;)u=s*t+r,h.push(a+Math.cos(u)*i,o+Math.sin(u)*i),t+=e;return u=s+r,h.push(a+Math.cos(u)*i,o+Math.sin(u)*i),h.push(a+Math.cos(r)*i,o+Math.sin(r)*i),this.pathIndexes=ERe(h),this.pathData=h,this}});WY.exports=SRe});var jY=l((n7e,HY)=>{var CRe=ta(),RRe=Re(),_Re=us(),wRe=function(e,t,i,r){i.addToRenderList(t);var s=e.pipelines.set(t.pipeline),n=RRe(t,i,r),a=s.calcMatrix.copyFrom(n.calc),o=t._displayOriginX+t._curveBounds.x,h=t._displayOriginY+t._curveBounds.y,u=i.alpha*t.alpha;e.pipelines.preBatch(t),t.isFilled&&CRe(s,a,t,u,o,h),t.isStroked&&_Re(s,t,u,o,h),e.pipelines.postBatch(t)};HY.exports=wRe});var ZY=l((a7e,KY)=>{var PRe=Oi(),ARe=$i(),bRe=vt(),MRe=function(e,t,i,r){i.addToRenderList(t);var s=e.currentContext;if(bRe(e,s,t,i,r)){var n=t._displayOriginX+t._curveBounds.x,a=t._displayOriginY+t._curveBounds.y,o=t.pathData,h=o.length-1,u=o[0]-n,f=o[1]-a;s.beginPath(),s.moveTo(u,f),t.closePath||(h-=2);for(var d=2;d<h;d+=2){var v=o[d]-n,c=o[d+1]-a;s.lineTo(v,c)}t.closePath&&s.closePath(),t.isFilled&&(PRe(s,t),s.fill()),t.isStroked&&(ARe(s,t),s.stroke()),s.restore()}};KY.exports=MRe});var e3=l((o7e,$Y)=>{var JY=B(),QY=B();JY=jY();QY=ZY();$Y.exports={renderWebGL:JY,renderCanvas:QY}});var Qp=l((h7e,i3)=>{var qRe=_(),ORe=e3(),LRe=Di(),FRe=ye(),t3=Zt(),NRe=new qRe({Extends:t3,Mixins:[ORe],initialize:function(t,i,r,s,n,a){i===void 0&&(i=0),r===void 0&&(r=0),t3.call(this,t,"Curve",s),this._smoothness=32,this._curveBounds=new FRe,this.closePath=!1,this.setPosition(i,r),n!==void 0&&this.setFillStyle(n,a),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(e){this._smoothness=e,this.updateData()}},setSmoothness:function(e){return this._smoothness=e,this.updateData()},updateData:function(){var e=this._curveBounds,t=this._smoothness;this.geom.getBounds(e,t),this.setSize(e.width,e.height),this.updateDisplayOrigin();for(var i=[],r=this.geom.getPoints(t),s=0;s<r.length;s++)i.push(r[s].x,r[s].y);return i.push(r[0].x,r[0].y),this.pathIndexes=LRe(i),this.pathData=i,this}});i3.exports=NRe});var s3=l((u7e,r3)=>{var GRe=ta(),DRe=Re(),IRe=us(),BRe=function(e,t,i,r){i.addToRenderList(t);var s=e.pipelines.set(t.pipeline),n=DRe(t,i,r),a=s.calcMatrix.copyFrom(n.calc),o=t._displayOriginX,h=t._displayOriginY,u=i.alpha*t.alpha;e.pipelines.preBatch(t),t.isFilled&&GRe(s,a,t,u,o,h),t.isStroked&&IRe(s,t,u,o,h),e.pipelines.postBatch(t)};r3.exports=BRe});var a3=l((l7e,n3)=>{var VRe=Oi(),URe=$i(),kRe=vt(),zRe=function(e,t,i,r){i.addToRenderList(t);var s=e.currentContext;if(kRe(e,s,t,i,r)){var n=t._displayOriginX,a=t._displayOriginY,o=t.pathData,h=o.length-1,u=o[0]-n,f=o[1]-a;s.beginPath(),s.moveTo(u,f),t.closePath||(h-=2);for(var d=2;d<h;d+=2){var v=o[d]-n,c=o[d+1]-a;s.lineTo(v,c)}s.closePath(),t.isFilled&&(VRe(s,t),s.fill()),t.isStroked&&(URe(s,t),s.stroke()),s.restore()}};n3.exports=zRe});var l3=l((f7e,u3)=>{var o3=B(),h3=B();o3=s3();h3=a3();u3.exports={renderWebGL:o3,renderCanvas:h3}});var $p=l((d7e,d3)=>{var XRe=_(),YRe=Di(),WRe=l3(),HRe=Zn(),f3=Zt(),jRe=new XRe({Extends:f3,Mixins:[WRe],initialize:function(t,i,r,s,n,a,o){i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=128),n===void 0&&(n=128),f3.call(this,t,"Ellipse",new HRe(s/2,n/2,s,n)),this._smoothness=64,this.setPosition(i,r),this.width=s,this.height=n,a!==void 0&&this.setFillStyle(a,o),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(e){this._smoothness=e,this.updateData()}},setSize:function(e,t){return this.width=e,this.height=t,this.geom.setPosition(e/2,t/2),this.geom.setSize(e,t),this.updateData()},setSmoothness:function(e){return this._smoothness=e,this.updateData()},updateData:function(){for(var e=[],t=this.geom.getPoints(this._smoothness),i=0;i<t.length;i++)e.push(t[i].x,t[i].y);return e.push(t[0].x,t[0].y),this.pathIndexes=YRe(e),this.pathData=e,this}});d3.exports=jRe});var c3=l((v7e,v3)=>{var KRe=Re(),em=fe(),ZRe=function(e,t,i,r){i.addToRenderList(t);var s=e.pipelines.set(t.pipeline),n=KRe(t,i,r),a=s.calcMatrix.copyFrom(n.calc);a.translate(-t._displayOriginX,-t._displayOriginY);var o=i.alpha*t.alpha,h=t.width,u=t.height,f=t.cellWidth,d=t.cellHeight,v=Math.ceil(h/f),c=Math.ceil(u/d),p=f,m=d,g=f-(v*f-h),x=d-(c*d-u),T,E,R=t.showCells,y=t.showAltCells,C=t.showOutline,S=0,w=0,P=0,A=0,M=0;if(C&&(p--,m--,g===f&&g--,x===d&&x--),e.pipelines.preBatch(t),R&&t.fillAlpha>0)for(T=s.fillTint,E=em.getTintAppendFloatAlpha(t.fillColor,t.fillAlpha*o),T.TL=E,T.TR=E,T.BL=E,T.BR=E,w=0;w<c;w++)for(y&&(P=w%2),S=0;S<v;S++){if(y&&P){P=0;continue}P++,A=S<v-1?p:g,M=w<c-1?m:x,s.batchFillRect(S*f,w*d,A,M)}if(y&&t.altFillAlpha>0)for(T=s.fillTint,E=em.getTintAppendFloatAlpha(t.altFillColor,t.altFillAlpha*o),T.TL=E,T.TR=E,T.BL=E,T.BR=E,w=0;w<c;w++)for(y&&(P=w%2),S=0;S<v;S++){if(y&&!P){P=1;continue}P=0,A=S<v-1?p:g,M=w<c-1?m:x,s.batchFillRect(S*f,w*d,A,M)}if(C&&t.outlineFillAlpha>0){var N=s.strokeTint,O=em.getTintAppendFloatAlpha(t.outlineFillColor,t.outlineFillAlpha*o);for(N.TL=O,N.TR=O,N.BL=O,N.BR=O,S=1;S<v;S++){var D=S*f;s.batchLine(D,0,D,u,1,1,1,0,!1)}for(w=1;w<c;w++){var b=w*d;s.batchLine(0,b,h,b,1,1,1,0,!1)}}e.pipelines.postBatch(t)};v3.exports=ZRe});var g3=l((c7e,m3)=>{var p3=Oi(),JRe=$i(),QRe=vt(),$Re=function(e,t,i,r){i.addToRenderList(t);var s=e.currentContext;if(QRe(e,s,t,i,r)){var n=-t._displayOriginX,a=-t._displayOriginY,o=i.alpha*t.alpha,h=t.width,u=t.height,f=t.cellWidth,d=t.cellHeight,v=Math.ceil(h/f),c=Math.ceil(u/d),p=f,m=d,g=f-(v*f-h),x=d-(c*d-u),T=t.showCells,E=t.showAltCells,R=t.showOutline,y=0,C=0,S=0,w=0,P=0;if(R&&(p--,m--,g===f&&g--,x===d&&x--),T&&t.fillAlpha>0)for(p3(s,t),C=0;C<c;C++)for(E&&(S=C%2),y=0;y<v;y++){if(E&&S){S=0;continue}S++,w=y<v-1?p:g,P=C<c-1?m:x,s.fillRect(n+y*f,a+C*d,w,P)}if(E&&t.altFillAlpha>0)for(p3(s,t,t.altFillColor,t.altFillAlpha*o),C=0;C<c;C++)for(E&&(S=C%2),y=0;y<v;y++){if(E&&!S){S=1;continue}S=0,w=y<v-1?p:g,P=C<c-1?m:x,s.fillRect(n+y*f,a+C*d,w,P)}if(R&&t.outlineFillAlpha>0){for(JRe(s,t,t.outlineFillColor,t.outlineFillAlpha*o),y=1;y<v;y++){var A=y*f;s.beginPath(),s.moveTo(A+n,a),s.lineTo(A+n,u+a),s.stroke()}for(C=1;C<c;C++){var M=C*d;s.beginPath(),s.moveTo(n,M+a),s.lineTo(n+h,M+a),s.stroke()}}s.restore()}};m3.exports=$Re});var y3=l((p7e,E3)=>{var x3=B(),T3=B();x3=c3();T3=g3();E3.exports={renderWebGL:x3,renderCanvas:T3}});var tm=l((m7e,C3)=>{var e_e=_(),S3=Zt(),t_e=y3(),i_e=new e_e({Extends:S3,Mixins:[t_e],initialize:function(t,i,r,s,n,a,o,h,u,f,d){i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=128),n===void 0&&(n=128),a===void 0&&(a=32),o===void 0&&(o=32),S3.call(this,t,"Grid",null),this.cellWidth=a,this.cellHeight=o,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(i,r),this.setSize(s,n),this.setFillStyle(h,u),f!==void 0&&this.setOutlineStyle(f,d),this.updateDisplayOrigin()},setFillStyle:function(e,t){return t===void 0&&(t=1),e===void 0?this.showCells=!1:(this.fillColor=e,this.fillAlpha=t,this.showCells=!0),this},setAltFillStyle:function(e,t){return t===void 0&&(t=1),e===void 0?this.showAltCells=!1:(this.altFillColor=e,this.altFillAlpha=t,this.showAltCells=!0),this},setOutlineStyle:function(e,t){return t===void 0&&(t=1),e===void 0?this.showOutline=!1:(this.outlineFillColor=e,this.outlineFillAlpha=t,this.showOutline=!0),this}});C3.exports=i_e});var _3=l((g7e,R3)=>{var r_e=Re(),im=fe(),s_e=function(e,t,i,r){i.addToRenderList(t);var s=e.pipelines.set(t.pipeline),n=r_e(t,i,r),a=s.calcMatrix.copyFrom(n.calc),o=t.width,h=t.height,u=o/2,f=o/t.projection,d=i.alpha*t.alpha;if(!!t.isFilled){var v,c,p,m,g,x,T,E,R;e.pipelines.preBatch(t),t.showTop&&(v=im.getTintAppendFloatAlpha(t.fillTop,d),c=a.getX(-u,-h),p=a.getY(-u,-h),m=a.getX(0,-f-h),g=a.getY(0,-f-h),x=a.getX(u,-h),T=a.getY(u,-h),E=a.getX(0,f-h),R=a.getY(0,f-h),s.batchQuad(t,c,p,m,g,x,T,E,R,0,0,1,1,v,v,v,v,2)),t.showLeft&&(v=im.getTintAppendFloatAlpha(t.fillLeft,d),c=a.getX(-u,0),p=a.getY(-u,0),m=a.getX(0,f),g=a.getY(0,f),x=a.getX(0,f-h),T=a.getY(0,f-h),E=a.getX(-u,-h),R=a.getY(-u,-h),s.batchQuad(t,c,p,m,g,x,T,E,R,0,0,1,1,v,v,v,v,2)),t.showRight&&(v=im.getTintAppendFloatAlpha(t.fillRight,d),c=a.getX(u,0),p=a.getY(u,0),m=a.getX(0,f),g=a.getY(0,f),x=a.getX(0,f-h),T=a.getY(0,f-h),E=a.getX(u,-h),R=a.getY(u,-h),s.batchQuad(t,c,p,m,g,x,T,E,R,0,0,1,1,v,v,v,v,2)),e.pipelines.postBatch(t)}};R3.exports=s_e});var P3=l((x7e,w3)=>{var rm=Oi(),n_e=vt(),a_e=function(e,t,i,r){i.addToRenderList(t);var s=e.currentContext;if(n_e(e,s,t,i,r)&&t.isFilled){var n=t.width,a=t.height,o=n/2,h=n/t.projection;t.showTop&&(rm(s,t,t.fillTop),s.beginPath(),s.moveTo(-o,-a),s.lineTo(0,-h-a),s.lineTo(o,-a),s.lineTo(o,-1),s.lineTo(0,h-1),s.lineTo(-o,-1),s.lineTo(-o,-a),s.fill()),t.showLeft&&(rm(s,t,t.fillLeft),s.beginPath(),s.moveTo(-o,0),s.lineTo(0,h),s.lineTo(0,h-a),s.lineTo(-o,-a),s.lineTo(-o,0),s.fill()),t.showRight&&(rm(s,t,t.fillRight),s.beginPath(),s.moveTo(o,0),s.lineTo(0,h),s.lineTo(0,h-a),s.lineTo(o,-a),s.lineTo(o,0),s.fill()),s.restore()}};w3.exports=a_e});var q3=l((T7e,M3)=>{var A3=B(),b3=B();A3=_3();b3=P3();M3.exports={renderWebGL:A3,renderCanvas:b3}});var sm=l((E7e,L3)=>{var o_e=q3(),h_e=_(),O3=Zt(),u_e=new h_e({Extends:O3,Mixins:[o_e],initialize:function(t,i,r,s,n,a,o,h){i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=48),n===void 0&&(n=32),a===void 0&&(a=15658734),o===void 0&&(o=10066329),h===void 0&&(h=13421772),O3.call(this,t,"IsoBox",null),this.projection=4,this.fillTop=a,this.fillLeft=o,this.fillRight=h,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(i,r),this.setSize(s,n),this.updateDisplayOrigin()},setProjection:function(e){return this.projection=e,this},setFaces:function(e,t,i){return e===void 0&&(e=!0),t===void 0&&(t=!0),i===void 0&&(i=!0),this.showTop=e,this.showLeft=t,this.showRight=i,this},setFillStyle:function(e,t,i){return this.fillTop=e,this.fillLeft=t,this.fillRight=i,this.isFilled=!0,this}});L3.exports=u_e});var N3=l((y7e,F3)=>{var l_e=Re(),nm=fe(),f_e=function(e,t,i,r){i.addToRenderList(t);var s=e.pipelines.set(t.pipeline),n=l_e(t,i,r),a=s.calcMatrix.copyFrom(n.calc),o=t.width,h=t.height,u=o/2,f=o/t.projection,d=t.isReversed,v=i.alpha*t.alpha;if(!!t.isFilled){e.pipelines.preBatch(t);var c,p,m,g,x,T,E;if(t.showTop&&d){c=nm.getTintAppendFloatAlpha(t.fillTop,v),p=a.getX(-u,-h),m=a.getY(-u,-h),g=a.getX(0,-f-h),x=a.getY(0,-f-h),T=a.getX(u,-h),E=a.getY(u,-h);var R=a.getX(0,f-h),y=a.getY(0,f-h);s.batchQuad(t,p,m,g,x,T,E,R,y,0,0,1,1,c,c,c,c,2)}t.showLeft&&(c=nm.getTintAppendFloatAlpha(t.fillLeft,v),d?(p=a.getX(-u,-h),m=a.getY(-u,-h),g=a.getX(0,f),x=a.getY(0,f),T=a.getX(0,f-h),E=a.getY(0,f-h)):(p=a.getX(-u,0),m=a.getY(-u,0),g=a.getX(0,f),x=a.getY(0,f),T=a.getX(0,f-h),E=a.getY(0,f-h)),s.batchTri(t,p,m,g,x,T,E,0,0,1,1,c,c,c,2)),t.showRight&&(c=nm.getTintAppendFloatAlpha(t.fillRight,v),d?(p=a.getX(u,-h),m=a.getY(u,-h),g=a.getX(0,f),x=a.getY(0,f),T=a.getX(0,f-h),E=a.getY(0,f-h)):(p=a.getX(u,0),m=a.getY(u,0),g=a.getX(0,f),x=a.getY(0,f),T=a.getX(0,f-h),E=a.getY(0,f-h)),s.batchTri(t,p,m,g,x,T,E,0,0,1,1,c,c,c,2)),e.pipelines.postBatch(t)}};F3.exports=f_e});var D3=l((S7e,G3)=>{var am=Oi(),d_e=vt(),v_e=function(e,t,i,r){i.addToRenderList(t);var s=e.currentContext;if(d_e(e,s,t,i,r)&&t.isFilled){var n=t.width,a=t.height,o=n/2,h=n/t.projection,u=t.isReversed;t.showTop&&u&&(am(s,t,t.fillTop),s.beginPath(),s.moveTo(-o,-a),s.lineTo(0,-h-a),s.lineTo(o,-a),s.lineTo(0,h-a),s.fill()),t.showLeft&&(am(s,t,t.fillLeft),s.beginPath(),u?(s.moveTo(-o,-a),s.lineTo(0,h),s.lineTo(0,h-a)):(s.moveTo(-o,0),s.lineTo(0,h),s.lineTo(0,h-a)),s.fill()),t.showRight&&(am(s,t,t.fillRight),s.beginPath(),u?(s.moveTo(o,-a),s.lineTo(0,h),s.lineTo(0,h-a)):(s.moveTo(o,0),s.lineTo(0,h),s.lineTo(0,h-a)),s.fill()),s.restore()}};G3.exports=v_e});var U3=l((C7e,V3)=>{var I3=B(),B3=B();I3=N3();B3=D3();V3.exports={renderWebGL:I3,renderCanvas:B3}});var om=l((R7e,z3)=>{var c_e=_(),p_e=U3(),k3=Zt(),m_e=new c_e({Extends:k3,Mixins:[p_e],initialize:function(t,i,r,s,n,a,o,h,u){i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=48),n===void 0&&(n=32),a===void 0&&(a=!1),o===void 0&&(o=15658734),h===void 0&&(h=10066329),u===void 0&&(u=13421772),k3.call(this,t,"IsoTriangle",null),this.projection=4,this.fillTop=o,this.fillLeft=h,this.fillRight=u,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=a,this.isFilled=!0,this.setPosition(i,r),this.setSize(s,n),this.updateDisplayOrigin()},setProjection:function(e){return this.projection=e,this},setReversed:function(e){return this.isReversed=e,this},setFaces:function(e,t,i){return e===void 0&&(e=!0),t===void 0&&(t=!0),i===void 0&&(i=!0),this.showTop=e,this.showLeft=t,this.showRight=i,this},setFillStyle:function(e,t,i){return this.fillTop=e,this.fillLeft=t,this.fillRight=i,this.isFilled=!0,this}});z3.exports=m_e});var Y3=l((_7e,X3)=>{var g_e=Re(),x_e=fe(),T_e=function(e,t,i,r){i.addToRenderList(t);var s=e.pipelines.set(t.pipeline),n=g_e(t,i,r);s.calcMatrix.copyFrom(n.calc);var a=t._displayOriginX,o=t._displayOriginY,h=i.alpha*t.alpha;if(e.pipelines.preBatch(t),t.isStroked){var u=s.strokeTint,f=x_e.getTintAppendFloatAlpha(t.strokeColor,t.strokeAlpha*h);u.TL=f,u.TR=f,u.BL=f,u.BR=f;var d=t._startWidth,v=t._endWidth;s.batchLine(t.geom.x1-a,t.geom.y1-o,t.geom.x2-a,t.geom.y2-o,d,v,1,0,!1,n.sprite,n.camera)}e.pipelines.postBatch(t)};X3.exports=T_e});var H3=l((w7e,W3)=>{var E_e=$i(),y_e=vt(),S_e=function(e,t,i,r){i.addToRenderList(t);var s=e.currentContext;if(y_e(e,s,t,i,r)){var n=t._displayOriginX,a=t._displayOriginY;t.isStroked&&(E_e(s,t),s.beginPath(),s.moveTo(t.geom.x1-n,t.geom.y1-a),s.lineTo(t.geom.x2-n,t.geom.y2-a),s.stroke()),s.restore()}};W3.exports=S_e});var J3=l((P7e,Z3)=>{var j3=B(),K3=B();j3=Y3();K3=H3();Z3.exports={renderWebGL:j3,renderCanvas:K3}});var hm=l((A7e,$3)=>{var C_e=_(),Q3=Zt(),R_e=Ri(),__e=J3(),w_e=new C_e({Extends:Q3,Mixins:[__e],initialize:function(t,i,r,s,n,a,o,h,u){i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=0),n===void 0&&(n=0),a===void 0&&(a=128),o===void 0&&(o=0),Q3.call(this,t,"Line",new R_e(s,n,a,o));var f=Math.max(1,this.geom.right-this.geom.left),d=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(i,r),this.setSize(f,d),h!==void 0&&this.setStrokeStyle(1,h,u),this.updateDisplayOrigin()},setLineWidth:function(e,t){return t===void 0&&(t=e),this._startWidth=e,this._endWidth=t,this.lineWidth=e,this},setTo:function(e,t,i,r){return this.geom.setTo(e,t,i,r),this}});$3.exports=w_e});var tW=l((b7e,eW)=>{var P_e=ta(),A_e=Re(),b_e=us(),M_e=function(e,t,i,r){i.addToRenderList(t);var s=e.pipelines.set(t.pipeline),n=A_e(t,i,r),a=s.calcMatrix.copyFrom(n.calc),o=t._displayOriginX,h=t._displayOriginY,u=i.alpha*t.alpha;e.pipelines.preBatch(t),t.isFilled&&P_e(s,a,t,u,o,h),t.isStroked&&b_e(s,t,u,o,h),e.pipelines.postBatch(t)};eW.exports=M_e});var rW=l((M7e,iW)=>{var q_e=Oi(),O_e=$i(),L_e=vt(),F_e=function(e,t,i,r){i.addToRenderList(t);var s=e.currentContext;if(L_e(e,s,t,i,r)){var n=t._displayOriginX,a=t._displayOriginY,o=t.pathData,h=o.length-1,u=o[0]-n,f=o[1]-a;s.beginPath(),s.moveTo(u,f),t.closePath||(h-=2);for(var d=2;d<h;d+=2){var v=o[d]-n,c=o[d+1]-a;s.lineTo(v,c)}s.closePath(),t.isFilled&&(q_e(s,t),s.fill()),t.isStroked&&(O_e(s,t),s.stroke()),s.restore()}};iW.exports=F_e});var oW=l((q7e,aW)=>{var sW=B(),nW=B();sW=tW();nW=rW();aW.exports={renderWebGL:sW,renderCanvas:nW}});var um=l((O7e,hW)=>{var N_e=ye(),G_e=function(e,t){t===void 0&&(t=new N_e);for(var i=1/0,r=1/0,s=-i,n=-r,a,o=0;o<e.points.length;o++)a=e.points[o],i=Math.min(i,a.x),r=Math.min(r,a.y),s=Math.max(s,a.x),n=Math.max(n,a.y);return t.x=i,t.y=r,t.width=s-i,t.height=n-r,t};hW.exports=G_e});var tl=l((L7e,uW)=>{var D_e=function(e,t,i){for(var r=!1,s=-1,n=e.points.length-1;++s<e.points.length;n=s){var a=e.points[s].x,o=e.points[s].y,h=e.points[n].x,u=e.points[n].y;(o<=i&&i<u||u<=i&&i<o)&&t<(h-a)*(i-o)/(u-o)+a&&(r=!r)}return r};uW.exports=D_e});var lm=l((F7e,lW)=>{var I_e=lr(),B_e=Ri(),V_e=function(e){for(var t=e.points,i=0,r=0;r<t.length;r++){var s=t[r],n=t[(r+1)%t.length],a=new B_e(s.x,s.y,n.x,n.y);i+=I_e(a)}return i};lW.exports=V_e});var fm=l((N7e,fW)=>{var U_e=lr(),k_e=Ri(),z_e=lm(),X_e=function(e,t,i,r){r===void 0&&(r=[]);var s=e.points,n=z_e(e);!t&&i>0&&(t=n/i);for(var a=0;a<t;a++)for(var o=n*(a/t),h=0,u=0;u<s.length;u++){var f=s[u],d=s[(u+1)%s.length],v=new k_e(f.x,f.y,d.x,d.y),c=U_e(v);if(o<h||o>h+c){h+=c;continue}var p=v.getPoint((o-h)/c);r.push(p);break}return r};fW.exports=X_e});var il=l((G7e,dW)=>{var Y_e=_(),W_e=tl(),H_e=fm(),j_e=ki(),K_e=new Y_e({initialize:function(t){this.type=j_e.POLYGON,this.area=0,this.points=[],t&&this.setTo(t)},contains:function(e,t){return W_e(this,e,t)},setTo:function(e){if(this.area=0,this.points=[],typeof e=="string"&&(e=e.split(" ")),!Array.isArray(e))return this;for(var t,i=Number.MAX_VALUE,r=0;r<e.length;r++)t={x:0,y:0},typeof e[r]=="number"||typeof e[r]=="string"?(t.x=parseFloat(e[r]),t.y=parseFloat(e[r+1]),r++):Array.isArray(e[r])?(t.x=e[r][0],t.y=e[r][1]):(t.x=e[r].x,t.y=e[r].y),this.points.push(t),t.y<i&&(i=t.y);return this.calculateArea(i),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var e=0,t,i,r=0;r<this.points.length-1;r++)t=this.points[r],i=this.points[r+1],e+=(i.x-t.x)*(t.y+i.y);return t=this.points[0],i=this.points[this.points.length-1],e+=(t.x-i.x)*(i.y+t.y),this.area=-e*.5,this.area},getPoints:function(e,t,i){return H_e(this,e,t,i)}});dW.exports=K_e});var dm=l((D7e,cW)=>{var vW=function(e,t){return e[0]=t[0],e[1]=t[1],e},Z_e=function(e){var t,i=[],r=e.points;for(t=0;t<r.length;t++)i.push([r[t].x,r[t].y]);var s=[];for(i.length>0&&s.push(vW([0,0],i[0])),t=0;t<i.length-1;t++){var n=i[t],a=i[t+1],o=n[0],h=n[1],u=a[0],f=a[1];s.push([.85*o+.15*u,.85*h+.15*f]),s.push([.15*o+.85*u,.15*h+.85*f])}return i.length>1&&s.push(vW([0,0],i[i.length-1])),e.setTo(s)};cW.exports=Z_e});var vm=l((I7e,mW)=>{var J_e=oW(),Q_e=_(),$_e=Di(),ewe=um(),twe=il(),pW=Zt(),iwe=dm(),rwe=new Q_e({Extends:pW,Mixins:[J_e],initialize:function(t,i,r,s,n,a){i===void 0&&(i=0),r===void 0&&(r=0),pW.call(this,t,"Polygon",new twe(s));var o=ewe(this.geom);this.setPosition(i,r),this.setSize(o.width,o.height),n!==void 0&&this.setFillStyle(n,a),this.updateDisplayOrigin(),this.updateData()},smooth:function(e){e===void 0&&(e=1);for(var t=0;t<e;t++)iwe(this.geom);return this.updateData()},updateData:function(){for(var e=[],t=this.geom.points,i=0;i<t.length;i++)e.push(t[i].x,t[i].y);return e.push(t[0].x,t[0].y),this.pathIndexes=$_e(e),this.pathData=e,this}});mW.exports=rwe});var xW=l((B7e,gW)=>{var swe=Re(),nwe=us(),awe=fe(),owe=function(e,t,i,r){i.addToRenderList(t);var s=e.pipelines.set(t.pipeline),n=swe(t,i,r);s.calcMatrix.copyFrom(n.calc);var a=t._displayOriginX,o=t._displayOriginY,h=i.alpha*t.alpha;if(e.pipelines.preBatch(t),t.isFilled){var u=s.fillTint,f=awe.getTintAppendFloatAlpha(t.fillColor,t.fillAlpha*h);u.TL=f,u.TR=f,u.BL=f,u.BR=f,s.batchFillRect(-a,-o,t.width,t.height)}t.isStroked&&nwe(s,t,h,a,o),e.pipelines.postBatch(t)};gW.exports=owe});var EW=l((V7e,TW)=>{var hwe=Oi(),uwe=$i(),lwe=vt(),fwe=function(e,t,i,r){i.addToRenderList(t);var s=e.currentContext;if(lwe(e,s,t,i,r)){var n=t._displayOriginX,a=t._displayOriginY;t.isFilled&&(hwe(s,t),s.fillRect(-n,-a,t.width,t.height)),t.isStroked&&(uwe(s,t),s.beginPath(),s.rect(-n,-a,t.width,t.height),s.stroke()),s.restore()}};TW.exports=fwe});var RW=l((U7e,CW)=>{var yW=B(),SW=B();yW=xW();SW=EW();CW.exports={renderWebGL:yW,renderCanvas:SW}});var cm=l((k7e,wW)=>{var dwe=_(),vwe=ye(),_W=Zt(),cwe=RW(),pwe=new dwe({Extends:_W,Mixins:[cwe],initialize:function(t,i,r,s,n,a,o){i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=128),n===void 0&&(n=128),_W.call(this,t,"Rectangle",new vwe(0,0,s,n)),this.setPosition(i,r),this.setSize(s,n),a!==void 0&&this.setFillStyle(a,o),this.updateDisplayOrigin(),this.updateData()},setSize:function(e,t){return this.width=e,this.height=t,this.geom.setSize(e,t),this.updateData(),this},updateData:function(){var e=[],t=this.geom,i=this._tempLine;return t.getLineA(i),e.push(i.x1,i.y1,i.x2,i.y2),t.getLineB(i),e.push(i.x2,i.y2),t.getLineC(i),e.push(i.x2,i.y2),t.getLineD(i),e.push(i.x2,i.y2),this.pathData=e,this}});wW.exports=pwe});var AW=l((z7e,PW)=>{var mwe=ta(),gwe=Re(),xwe=us(),Twe=function(e,t,i,r){i.addToRenderList(t);var s=e.pipelines.set(t.pipeline),n=gwe(t,i,r),a=s.calcMatrix.copyFrom(n.calc),o=t._displayOriginX,h=t._displayOriginY,u=i.alpha*t.alpha;e.pipelines.preBatch(t),t.isFilled&&mwe(s,a,t,u,o,h),t.isStroked&&xwe(s,t,u,o,h),e.pipelines.postBatch(t)};PW.exports=Twe});var MW=l((X7e,bW)=>{var Ewe=Oi(),ywe=$i(),Swe=vt(),Cwe=function(e,t,i,r){i.addToRenderList(t);var s=e.currentContext;if(Swe(e,s,t,i,r)){var n=t._displayOriginX,a=t._displayOriginY,o=t.pathData,h=o.length-1,u=o[0]-n,f=o[1]-a;s.beginPath(),s.moveTo(u,f),t.closePath||(h-=2);for(var d=2;d<h;d+=2){var v=o[d]-n,c=o[d+1]-a;s.lineTo(v,c)}s.closePath(),t.isFilled&&(Ewe(s,t),s.fill()),t.isStroked&&(ywe(s,t),s.stroke()),s.restore()}};bW.exports=Cwe});var FW=l((Y7e,LW)=>{var qW=B(),OW=B();qW=AW();OW=MW();LW.exports={renderWebGL:qW,renderCanvas:OW}});var pm=l((W7e,GW)=>{var Rwe=FW(),_we=_(),wwe=Di(),NW=Zt(),Pwe=new _we({Extends:NW,Mixins:[Rwe],initialize:function(t,i,r,s,n,a,o,h){i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=5),n===void 0&&(n=32),a===void 0&&(a=64),NW.call(this,t,"Star",null),this._points=s,this._innerRadius=n,this._outerRadius=a,this.setPosition(i,r),this.setSize(a*2,a*2),o!==void 0&&this.setFillStyle(o,h),this.updateDisplayOrigin(),this.updateData()},setPoints:function(e){return this._points=e,this.updateData()},setInnerRadius:function(e){return this._innerRadius=e,this.updateData()},setOuterRadius:function(e){return this._outerRadius=e,this.updateData()},points:{get:function(){return this._points},set:function(e){this._points=e,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(e){this._innerRadius=e,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(e){this._outerRadius=e,this.updateData()}},updateData:function(){var e=[],t=this._points,i=this._innerRadius,r=this._outerRadius,s=Math.PI/2*3,n=Math.PI/t,a=r,o=r;e.push(a,o+-r);for(var h=0;h<t;h++)e.push(a+Math.cos(s)*r,o+Math.sin(s)*r),s+=n,e.push(a+Math.cos(s)*i,o+Math.sin(s)*i),s+=n;return e.push(a,o+-r),this.pathIndexes=wwe(e),this.pathData=e,this}});GW.exports=Pwe});var ia=l((H7e,DW)=>{var Awe=function(e,t,i){var r=e.x3-e.x1,s=e.y3-e.y1,n=e.x2-e.x1,a=e.y2-e.y1,o=t-e.x1,h=i-e.y1,u=r*r+s*s,f=r*n+s*a,d=r*o+s*h,v=n*n+a*a,c=n*o+a*h,p=u*v-f*f,m=p===0?0:1/p,g=(v*d-f*c)*m,x=(u*c-f*d)*m;return g>=0&&x>=0&&g+x<1};DW.exports=Awe});var gm=l((j7e,IW)=>{var bwe=j(),mm=lr(),Mwe=function(e,t,i){i===void 0&&(i=new bwe);var r=e.getLineA(),s=e.getLineB(),n=e.getLineC();if(t<=0||t>=1)return i.x=r.x1,i.y=r.y1,i;var a=mm(r),o=mm(s),h=mm(n),u=a+o+h,f=u*t,d=0;return f<a?(d=f/a,i.x=r.x1+(r.x2-r.x1)*d,i.y=r.y1+(r.y2-r.y1)*d):f>a+o?(f-=a+o,d=f/h,i.x=n.x1+(n.x2-n.x1)*d,i.y=n.y1+(n.y2-n.y1)*d):(f-=a,d=f/o,i.x=s.x1+(s.x2-s.x1)*d,i.y=s.y1+(s.y2-s.y1)*d),i};IW.exports=Mwe});var Tm=l((K7e,BW)=>{var xm=lr(),qwe=j(),Owe=function(e,t,i,r){r===void 0&&(r=[]);var s=e.getLineA(),n=e.getLineB(),a=e.getLineC(),o=xm(s),h=xm(n),u=xm(a),f=o+h+u;!t&&i>0&&(t=f/i);for(var d=0;d<t;d++){var v=f*(d/t),c=0,p=new qwe;v<o?(c=v/o,p.x=s.x1+(s.x2-s.x1)*c,p.y=s.y1+(s.y2-s.y1)*c):v>o+h?(v-=o+h,c=v/u,p.x=a.x1+(a.x2-a.x1)*c,p.y=a.y1+(a.y2-a.y1)*c):(v-=o,c=v/h,p.x=n.x1+(n.x2-n.x1)*c,p.y=n.y1+(n.y2-n.y1)*c),r.push(p)}return r};BW.exports=Owe});var fs=l((Z7e,VW)=>{var Lwe=_(),Fwe=ia(),Nwe=gm(),Gwe=Tm(),Dwe=ki(),Em=Ri(),Iwe=Bh(),Bwe=new Lwe({initialize:function(t,i,r,s,n,a){t===void 0&&(t=0),i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=0),n===void 0&&(n=0),a===void 0&&(a=0),this.type=Dwe.TRIANGLE,this.x1=t,this.y1=i,this.x2=r,this.y2=s,this.x3=n,this.y3=a},contains:function(e,t){return Fwe(this,e,t)},getPoint:function(e,t){return Nwe(this,e,t)},getPoints:function(e,t,i){return Gwe(this,e,t,i)},getRandomPoint:function(e){return Iwe(this,e)},setTo:function(e,t,i,r,s,n){return e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=0),n===void 0&&(n=0),this.x1=e,this.y1=t,this.x2=i,this.y2=r,this.x3=s,this.y3=n,this},getLineA:function(e){return e===void 0&&(e=new Em),e.setTo(this.x1,this.y1,this.x2,this.y2),e},getLineB:function(e){return e===void 0&&(e=new Em),e.setTo(this.x2,this.y2,this.x3,this.y3),e},getLineC:function(e){return e===void 0&&(e=new Em),e.setTo(this.x3,this.y3,this.x1,this.y1),e},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(e){var t=0;this.x1<=this.x2&&this.x1<=this.x3?t=this.x1-e:this.x2<=this.x1&&this.x2<=this.x3?t=this.x2-e:t=this.x3-e,this.x1-=t,this.x2-=t,this.x3-=t}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(e){var t=0;this.x1>=this.x2&&this.x1>=this.x3?t=this.x1-e:this.x2>=this.x1&&this.x2>=this.x3?t=this.x2-e:t=this.x3-e,this.x1-=t,this.x2-=t,this.x3-=t}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(e){var t=0;this.y1<=this.y2&&this.y1<=this.y3?t=this.y1-e:this.y2<=this.y1&&this.y2<=this.y3?t=this.y2-e:t=this.y3-e,this.y1-=t,this.y2-=t,this.y3-=t}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(e){var t=0;this.y1>=this.y2&&this.y1>=this.y3?t=this.y1-e:this.y2>=this.y1&&this.y2>=this.y3?t=this.y2-e:t=this.y3-e,this.y1-=t,this.y2-=t,this.y3-=t}}});VW.exports=Bwe});var kW=l((J7e,UW)=>{var Vwe=Re(),Uwe=us(),kwe=fe(),zwe=function(e,t,i,r){i.addToRenderList(t);var s=e.pipelines.set(t.pipeline),n=Vwe(t,i,r);s.calcMatrix.copyFrom(n.calc);var a=t._displayOriginX,o=t._displayOriginY,h=i.alpha*t.alpha;if(e.pipelines.preBatch(t),t.isFilled){var u=s.fillTint,f=kwe.getTintAppendFloatAlpha(t.fillColor,t.fillAlpha*h);u.TL=f,u.TR=f,u.BL=f,u.BR=f;var d=t.geom.x1-a,v=t.geom.y1-o,c=t.geom.x2-a,p=t.geom.y2-o,m=t.geom.x3-a,g=t.geom.y3-o;s.batchFillTriangle(d,v,c,p,m,g,n.sprite,n.camera)}t.isStroked&&Uwe(s,t,h,a,o),e.pipelines.postBatch(t)};UW.exports=zwe});var XW=l((Q7e,zW)=>{var Xwe=Oi(),Ywe=$i(),Wwe=vt(),Hwe=function(e,t,i,r){i.addToRenderList(t);var s=e.currentContext;if(Wwe(e,s,t,i,r)){var n=t._displayOriginX,a=t._displayOriginY,o=t.geom.x1-n,h=t.geom.y1-a,u=t.geom.x2-n,f=t.geom.y2-a,d=t.geom.x3-n,v=t.geom.y3-a;s.beginPath(),s.moveTo(o,h),s.lineTo(u,f),s.lineTo(d,v),s.closePath(),t.isFilled&&(Xwe(s,t),s.fill()),t.isStroked&&(Ywe(s,t),s.stroke()),s.restore()}};zW.exports=Hwe});var jW=l(($7e,HW)=>{var YW=B(),WW=B();YW=kW();WW=XW();HW.exports={renderWebGL:YW,renderCanvas:WW}});var ym=l((eKe,ZW)=>{var jwe=_(),KW=Zt(),Kwe=fs(),Zwe=jW(),Jwe=new jwe({Extends:KW,Mixins:[Zwe],initialize:function(t,i,r,s,n,a,o,h,u,f,d){i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=0),n===void 0&&(n=128),a===void 0&&(a=64),o===void 0&&(o=0),h===void 0&&(h=128),u===void 0&&(u=128),KW.call(this,t,"Triangle",new Kwe(s,n,a,o,h,u));var v=this.geom.right-this.geom.left,c=this.geom.bottom-this.geom.top;this.setPosition(i,r),this.setSize(v,c),f!==void 0&&this.setFillStyle(f,d),this.updateDisplayOrigin(),this.updateData()},setTo:function(e,t,i,r,s,n){return this.geom.setTo(e,t,i,r,s,n),this.updateData()},updateData:function(){var e=[],t=this.geom,i=this._tempLine;return t.getLineA(i),e.push(i.x1,i.y1,i.x2,i.y2),t.getLineB(i),e.push(i.x2,i.y2),t.getLineC(i),e.push(i.x2,i.y2),this.pathData=e,this}});ZW.exports=Jwe});var JW=l(()=>{var Qwe=Pu(),$we=J();$we.register("blitter",function(e,t,i,r){return this.displayList.add(new Qwe(this.scene,e,t,i,r))})});var QW=l(()=>{var ePe=Au(),tPe=J();tPe.register("container",function(e,t,i){return this.displayList.add(new ePe(this.scene,e,t,i))})});var $W=l(()=>{var iPe=Pp(),rPe=J();rPe.register("dom",function(e,t,i,r,s){var n=new iPe(this.scene,e,t,i,r,s);return this.displayList.add(n),n})});var e5=l(()=>{var sPe=Mu(),nPe=J();nPe.register("dynamicBitmapText",function(e,t,i,r,s){return this.displayList.add(new sPe(this.scene,e,t,i,r,s))})});var t5=l(()=>{var aPe=Ap(),oPe=J();oPe.register("extern",function(){var e=new aPe(this.scene);return this.displayList.add(e),e})});var i5=l(()=>{var hPe=Fu(),uPe=J();uPe.register("graphics",function(e){return this.displayList.add(new hPe(this.scene,e))})});var r5=l(()=>{var lPe=Du(),fPe=J();fPe.register("group",function(e,t){return this.updateList.add(new lPe(this.scene,e,t))})});var s5=l(()=>{var dPe=Iu(),vPe=J();vPe.register("image",function(e,t,i,r){return this.displayList.add(new dPe(this.scene,e,t,i,r))})});var n5=l(()=>{var cPe=Bu(),pPe=J();pPe.register("layer",function(e){return this.displayList.add(new cPe(this.scene,e))})});var a5=l(()=>{var mPe=J(),gPe=Xu();mPe.register("particles",function(e,t,i){return this.displayList.add(new gPe(this.scene,e,t,i))})});var o5=l(()=>{var xPe=J(),TPe=Wp();xPe.register("follower",function(e,t,i,r,s){var n=new TPe(this.scene,e,t,i,r,s);return this.displayList.add(n),this.updateList.add(n),n})});var h5=l(()=>{var EPe=J(),yPe=Wu();EPe.register("renderTexture",function(e,t,i,r,s,n){return this.displayList.add(new yPe(this.scene,e,t,i,r,s,n))})});var u5=l(()=>{var SPe=Hu(),CPe=J();CPe.register("rope",function(e,t,i,r,s,n,a,o){return this.displayList.add(new SPe(this.scene,e,t,i,r,s,n,a,o))})});var l5=l(()=>{var RPe=J(),_Pe=Jn();RPe.register("sprite",function(e,t,i,r){var s=new _Pe(this.scene,e,t,i,r);return this.displayList.add(s),s})});var f5=l(()=>{var wPe=fo(),PPe=J();PPe.register("bitmapText",function(e,t,i,r,s,n){return this.displayList.add(new wPe(this.scene,e,t,i,r,s,n))})});var d5=l(()=>{var APe=Ku(),bPe=J();bPe.register("text",function(e,t,i,r){return this.displayList.add(new APe(this.scene,e,t,i,r))})});var v5=l(()=>{var MPe=Qu(),qPe=J();qPe.register("tileSprite",function(e,t,i,r,s,n){return this.displayList.add(new MPe(this.scene,e,t,i,r,s,n))})});var c5=l(()=>{var OPe=Wa(),LPe=J();LPe.register("zone",function(e,t,i,r){return this.displayList.add(new OPe(this.scene,e,t,i,r))})});var p5=l(()=>{var FPe=el(),NPe=J();NPe.register("video",function(e,t,i){return this.displayList.add(new FPe(this.scene,e,t,i))})});var x5=l(()=>{var m5=Jp(),g5=J();g5.register("arc",function(e,t,i,r,s,n,a,o){return this.displayList.add(new m5(this.scene,e,t,i,r,s,n,a,o))});g5.register("circle",function(e,t,i,r,s){return this.displayList.add(new m5(this.scene,e,t,i,0,360,!1,r,s))})});var T5=l(()=>{var GPe=J(),DPe=Qp();GPe.register("curve",function(e,t,i,r,s){return this.displayList.add(new DPe(this.scene,e,t,i,r,s))})});var E5=l(()=>{var IPe=$p(),BPe=J();BPe.register("ellipse",function(e,t,i,r,s,n){return this.displayList.add(new IPe(this.scene,e,t,i,r,s,n))})});var y5=l(()=>{var VPe=J(),UPe=tm();VPe.register("grid",function(e,t,i,r,s,n,a,o,h,u){return this.displayList.add(new UPe(this.scene,e,t,i,r,s,n,a,o,h,u))})});var S5=l(()=>{var kPe=J(),zPe=sm();kPe.register("isobox",function(e,t,i,r,s,n,a){return this.displayList.add(new zPe(this.scene,e,t,i,r,s,n,a))})});var C5=l(()=>{var XPe=J(),YPe=om();XPe.register("isotriangle",function(e,t,i,r,s,n,a,o){return this.displayList.add(new YPe(this.scene,e,t,i,r,s,n,a,o))})});var R5=l(()=>{var WPe=J(),HPe=hm();WPe.register("line",function(e,t,i,r,s,n,a,o){return this.displayList.add(new HPe(this.scene,e,t,i,r,s,n,a,o))})});var _5=l(()=>{var jPe=J(),KPe=vm();jPe.register("polygon",function(e,t,i,r,s){return this.displayList.add(new KPe(this.scene,e,t,i,r,s))})});var w5=l(()=>{var ZPe=J(),JPe=cm();ZPe.register("rectangle",function(e,t,i,r,s,n){return this.displayList.add(new JPe(this.scene,e,t,i,r,s,n))})});var P5=l(()=>{var QPe=pm(),$Pe=J();$Pe.register("star",function(e,t,i,r,s,n,a){return this.displayList.add(new QPe(this.scene,e,t,i,r,s,n,a))})});var A5=l(()=>{var e1e=J(),t1e=ym();e1e.register("triangle",function(e,t,i,r,s,n,a,o,h,u){return this.displayList.add(new t1e(this.scene,e,t,i,r,s,n,a,o,h,u))})});var M5=l(()=>{var i1e=Pu(),r1e=nt(),s1e=Ce(),b5=pe();s1e.register("blitter",function(e,t){e===void 0&&(e={});var i=b5(e,"key",null),r=b5(e,"frame",null),s=new i1e(this.scene,0,0,i,r);return t!==void 0&&(e.add=t),r1e(this.scene,s,e),s})});var q5=l(()=>{var n1e=nt(),a1e=Au(),o1e=Ce(),Sm=pe();o1e.register("container",function(e,t){e===void 0&&(e={});var i=Sm(e,"x",0),r=Sm(e,"y",0),s=Sm(e,"children",null),n=new a1e(this.scene,i,r,s);return t!==void 0&&(e.add=t),n1e(this.scene,n,e),n})});var O5=l(()=>{var h1e=Mu(),u1e=nt(),l1e=Ce(),Cm=pe();l1e.register("dynamicBitmapText",function(e,t){e===void 0&&(e={});var i=Cm(e,"font",""),r=Cm(e,"text",""),s=Cm(e,"size",!1),n=new h1e(this.scene,0,0,i,r,s);return t!==void 0&&(e.add=t),u1e(this.scene,n,e),n})});var L5=l(()=>{var f1e=Ce(),d1e=Fu();f1e.register("graphics",function(e,t){e===void 0&&(e={}),t!==void 0&&(e.add=t);var i=new d1e(this.scene,e);return e.add&&this.scene.sys.displayList.add(i),i})});var F5=l(()=>{var v1e=Ce(),c1e=Du();v1e.register("group",function(e){return new c1e(this.scene,null,e)})});var G5=l(()=>{var p1e=nt(),m1e=Ce(),N5=pe(),g1e=Iu();m1e.register("image",function(e,t){e===void 0&&(e={});var i=N5(e,"key",null),r=N5(e,"frame",null),s=new g1e(this.scene,0,0,i,r);return t!==void 0&&(e.add=t),p1e(this.scene,s,e),s})});var D5=l(()=>{var x1e=nt(),T1e=Bu(),E1e=Ce(),y1e=pe();E1e.register("layer",function(e,t){e===void 0&&(e={});var i=y1e(e,"children",null),r=new T1e(this.scene,i);return t!==void 0&&(e.add=t),x1e(this.scene,r,e),r})});var V5=l(()=>{var S1e=Ce(),I5=pe(),B5=X(),C1e=Xu();S1e.register("particles",function(e,t){e===void 0&&(e={});var i=I5(e,"key",null),r=I5(e,"frame",null),s=B5(e,"emitters",null),n=new C1e(this.scene,i,r,s);t!==void 0&&(e.add=t);var a=B5(e,"add",!1);return a?this.displayList.add(n):this.updateList.add(n),n})});var U5=l(()=>{var R1e=nt(),_1e=Ce(),ra=pe(),w1e=Wu();_1e.register("renderTexture",function(e,t){e===void 0&&(e={});var i=ra(e,"x",0),r=ra(e,"y",0),s=ra(e,"width",32),n=ra(e,"height",32),a=ra(e,"key",void 0),o=ra(e,"frame",void 0),h=new w1e(this.scene,i,r,s,n,a,o);return t!==void 0&&(e.add=t),R1e(this.scene,h,e),h})});var k5=l(()=>{var P1e=nt(),A1e=Ce(),Rm=pe(),_m=ie(),b1e=Hu();A1e.register("rope",function(e,t){e===void 0&&(e={});var i=Rm(e,"key",null),r=Rm(e,"frame",null),s=Rm(e,"horizontal",!0),n=_m(e,"points",void 0),a=_m(e,"colors",void 0),o=_m(e,"alphas",void 0),h=new b1e(this.scene,0,0,i,r,n,s,a,o);return t!==void 0&&(e.add=t),P1e(this.scene,h,e),e.add||this.updateList.add(h),h})});var X5=l(()=>{var M1e=nt(),q1e=Ep(),O1e=Ce(),z5=pe(),L1e=Jn();O1e.register("sprite",function(e,t){e===void 0&&(e={});var i=z5(e,"key",null),r=z5(e,"frame",null),s=new L1e(this.scene,0,0,i,r);return t!==void 0&&(e.add=t),M1e(this.scene,s,e),q1e(s,e),s})});var H5=l(()=>{var F1e=fo(),N1e=nt(),G1e=Ce(),Y5=pe(),W5=ie();G1e.register("bitmapText",function(e,t){e===void 0&&(e={});var i=W5(e,"font",""),r=Y5(e,"text",""),s=Y5(e,"size",!1),n=W5(e,"align",0),a=new F1e(this.scene,0,0,i,r,s,n);return t!==void 0&&(e.add=t),N1e(this.scene,a,e),a})});var j5=l(()=>{var D1e=nt(),I1e=Ce(),xo=pe(),B1e=Ku();I1e.register("text",function(e,t){e===void 0&&(e={});var i=xo(e,"text",""),r=xo(e,"style",null),s=xo(e,"padding",null);s!==null&&(r.padding=s);var n=new B1e(this.scene,0,0,i,r);return t!==void 0&&(e.add=t),D1e(this.scene,n,e),n.autoRound=xo(e,"autoRound",!0),n.resolution=xo(e,"resolution",1),n})});var K5=l(()=>{var V1e=nt(),U1e=Ce(),sa=pe(),k1e=Qu();U1e.register("tileSprite",function(e,t){e===void 0&&(e={});var i=sa(e,"x",0),r=sa(e,"y",0),s=sa(e,"width",512),n=sa(e,"height",512),a=sa(e,"key",""),o=sa(e,"frame",""),h=new k1e(this.scene,i,r,s,n,a,o);return t!==void 0&&(e.add=t),V1e(this.scene,h,e),h})});var Z5=l(()=>{var z1e=Ce(),rl=pe(),X1e=Wa();z1e.register("zone",function(e){var t=rl(e,"x",0),i=rl(e,"y",0),r=rl(e,"width",1),s=rl(e,"height",r);return new X1e(this.scene,t,i,r,s)})});var J5=l(()=>{var Y1e=nt(),W1e=Ce(),H1e=pe(),j1e=el();W1e.register("video",function(e,t){e===void 0&&(e={});var i=H1e(e,"key",null),r=new j1e(this.scene,0,0,i);return t!==void 0&&(e.add=t),Y1e(this.scene,r,e),e.add||this.updateList.add(r),r})});var wm=l((BZe,Q5)=>{var K1e=function(e,t,i){if(!e||typeof e=="number")return!1;if(e.hasOwnProperty(t))return e[t]=i,!0;if(t.indexOf(".")!==-1){for(var r=t.split("."),s=e,n=e,a=0;a<r.length;a++)if(s.hasOwnProperty(r[a]))n=s,s=s[r[a]];else return!1;return n[r[r.length-1]]=i,!0}return!1};Q5.exports=K1e});var eH=l((VZe,$5)=>{var Z1e=Re(),J1e=function(e,t,i,r){if(!!t.shader){if(i.addToRenderList(t),e.pipelines.clear(),t.renderToTexture)t.load(),t.flush();else{var s=Z1e(t,i,r).calc;(e.width!==t._rendererWidth||e.height!==t._rendererHeight)&&t.projOrtho(0,e.width,e.height,0),t.load(s.matrix),t.flush()}e.pipelines.rebind()}};$5.exports=J1e});var iH=l((UZe,tH)=>{var Q1e=function(){};tH.exports=Q1e});var aH=l((kZe,nH)=>{var rH=B(),sH=B();rH=eH();sH=iH();nH.exports={renderWebGL:rH,renderCanvas:sH}});var sl=l((zZe,oH)=>{var $1e=_(),ds=de(),Pm=Ae(),yr=X(),eAe=Fe(),tAe=wm(),iAe=aH(),Am=dt(),rAe=new $1e({Extends:Pm,Mixins:[ds.ComputedSize,ds.Depth,ds.GetBounds,ds.Mask,ds.Origin,ds.ScrollFactor,ds.Transform,ds.Visible,iAe],initialize:function(t,i,r,s,n,a,o,h){r===void 0&&(r=0),s===void 0&&(s=0),n===void 0&&(n=128),a===void 0&&(a=128),Pm.call(this,t,"Shader"),this.blendMode=-1,this.shader;var u=t.sys.renderer;this.renderer=u,this.gl=u.gl,this.vertexData=new ArrayBuffer(6*(Float32Array.BYTES_PER_ELEMENT*2)),this.vertexBuffer=u.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new Am,this._tempMatrix2=new Am,this._tempMatrix3=new Am,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=u.width,this._rendererHeight=u.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(r,s),this.setSize(n,a),this.setOrigin(.5,.5),this.setShader(i,o,h)},willRender:function(e){return this.renderToTexture?!0:!(Pm.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&e.id)},setRenderToTexture:function(e,t){if(t===void 0&&(t=!1),!this.renderToTexture){var i=this.width,r=this.height,s=this.renderer;this.glTexture=s.createTextureFromSource(null,i,r,0),this.glTexture.flipY=t,this.framebuffer=s.createFramebuffer(i,r,this.glTexture,!1),this._rendererWidth=i,this._rendererHeight=r,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),e&&(this.texture=this.scene.sys.textures.addGLTexture(e,this.glTexture,i,r))}return this.shader&&(s.pipelines.clear(),this.load(),this.flush(),s.pipelines.rebind()),this},setShader:function(e,t,i){if(t===void 0&&(t=[]),typeof e=="string"){var r=this.scene.sys.cache.shader;if(!r.has(e))return console.warn("Shader missing: "+e),this;this.shader=r.get(e)}else this.shader=e;var s=this.gl,n=this.renderer;this.program&&s.deleteProgram(this.program);var a=n.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);s.uniformMatrix4fv(s.getUniformLocation(a,"uViewMatrix"),!1,this.viewMatrix),s.uniformMatrix4fv(s.getUniformLocation(a,"uProjectionMatrix"),!1,this.projectionMatrix),s.uniform2f(s.getUniformLocation(a,"uResolution"),this.width,this.height),this.program=a;var o=new Date,h={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[o.getFullYear(),o.getMonth(),o.getDate(),o.getHours()*60*60+o.getMinutes()*60+o.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=eAe(!0,{},this.shader.uniforms,h):this.uniforms=h;for(var u=0;u<4;u++)t[u]&&this.setSampler2D("iChannel"+u,t[u],u,i);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(e){return this.pointer=e,this},projOrtho:function(e,t,i,r){var s=-1e3,n=1e3,a=1/(e-t),o=1/(i-r),h=1/(s-n),u=this.projectionMatrix;u[0]=-2*a,u[5]=-2*o,u[10]=2*h,u[12]=(e+t)*a,u[13]=(r+i)*o,u[14]=(n+s)*h;var f=this.program,d=this.gl,v=this.renderer;v.setProgram(f),d.uniformMatrix4fv(d.getUniformLocation(f,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=t,this._rendererHeight=i},initUniforms:function(){var e=this.gl,t=this.renderer.glFuncMap,i=this.program;this._textureCount=0;for(var r in this.uniforms){var s=this.uniforms[r],n=s.type,a=t[n];s.uniformLocation=e.getUniformLocation(i,r),n!=="sampler2D"&&(s.glMatrix=a.matrix,s.glValueLength=a.length,s.glFunc=a.func)}},setSampler2DBuffer:function(e,t,i,r,s,n){s===void 0&&(s=0),n===void 0&&(n={});var a=this.uniforms[e];return a.value=t,n.width=i,n.height=r,a.textureData=n,this._textureCount=s,this.initSampler2D(a),this},setSampler2D:function(e,t,i,r){i===void 0&&(i=0);var s=this.scene.sys.textures;if(s.exists(t)){var n=s.getFrame(t);if(n.glTexture&&n.glTexture.isRenderTexture)return this.setSampler2DBuffer(e,n.glTexture,n.width,n.height,i,r);var a=this.uniforms[e],o=n.source;a.textureKey=t,a.source=o.image,a.value=n.glTexture,o.isGLTexture&&(r||(r={}),r.width=o.width,r.height=o.height),r&&(a.textureData=r),this._textureCount=i,this.initSampler2D(a)}return this},setUniform:function(e,t){return tAe(this.uniforms,e,t),this},getUniform:function(e){return yr(this.uniforms,e,null)},setChannel0:function(e,t){return this.setSampler2D("iChannel0",e,0,t)},setChannel1:function(e,t){return this.setSampler2D("iChannel1",e,1,t)},setChannel2:function(e,t){return this.setSampler2D("iChannel2",e,2,t)},setChannel3:function(e,t){return this.setSampler2D("iChannel3",e,3,t)},initSampler2D:function(e){if(!!e.value){var t=this.gl;t.activeTexture(t.TEXTURE0+this._textureCount),t.bindTexture(t.TEXTURE_2D,e.value);var i=e.textureData;if(i&&!e.value.isRenderTexture){var r=t[yr(i,"magFilter","linear").toUpperCase()],s=t[yr(i,"minFilter","linear").toUpperCase()],n=t[yr(i,"wrapS","repeat").toUpperCase()],a=t[yr(i,"wrapT","repeat").toUpperCase()],o=t[yr(i,"format","rgba").toUpperCase()];if(i.repeat&&(n=t.REPEAT,a=t.REPEAT),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!!i.flipY),i.width){var h=yr(i,"width",512),u=yr(i,"height",2),f=yr(i,"border",0);t.texImage2D(t.TEXTURE_2D,0,o,h,u,f,o,t.UNSIGNED_BYTE,null)}else t.texImage2D(t.TEXTURE_2D,0,o,t.RGBA,t.UNSIGNED_BYTE,e.source);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,s),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,a)}this.renderer.setProgram(this.program),t.uniform1i(e.uniformLocation,this._textureCount),this._textureCount++}},syncUniforms:function(){var e=this.gl,t=this.uniforms,i,r,s,n,a,o=0;for(var h in t)i=t[h],s=i.glFunc,r=i.glValueLength,n=i.uniformLocation,a=i.value,a!==null&&(r===1?i.glMatrix?s.call(e,n,i.transpose,a):s.call(e,n,a):r===2?s.call(e,n,a.x,a.y):r===3?s.call(e,n,a.x,a.y,a.z):r===4?s.call(e,n,a.x,a.y,a.z,a.w):i.type==="sampler2D"&&(e.activeTexture(e.TEXTURE0+o),e.bindTexture(e.TEXTURE_2D,a),e.uniform1i(n,o),o++))},load:function(e){var t=this.gl,i=this.width,r=this.height,s=this.renderer,n=this.program,a=this.viewMatrix;if(!this.renderToTexture){var o=-this._displayOriginX,h=-this._displayOriginY;a[0]=e[0],a[1]=e[1],a[4]=e[2],a[5]=e[3],a[8]=e[4],a[9]=e[5],a[12]=a[0]*o+a[4]*h,a[13]=a[1]*o+a[5]*h}t.useProgram(n),t.uniformMatrix4fv(t.getUniformLocation(n,"uViewMatrix"),!1,a),t.uniform2f(t.getUniformLocation(n,"uResolution"),this.width,this.height);var u=this.uniforms,f=u.resolution;f.value.x=i,f.value.y=r,u.time.value=s.game.loop.getDuration();var d=this.pointer;if(d){var v=u.mouse,c=d.x/i,p=1-d.y/r;v.value.x=c.toFixed(2),v.value.y=p.toFixed(2)}this.syncUniforms()},flush:function(){var e=this.width,t=this.height,i=this.program,r=this.gl,s=this.vertexBuffer,n=this.renderer,a=Float32Array.BYTES_PER_ELEMENT*2;this.renderToTexture&&(n.setFramebuffer(this.framebuffer),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT)),r.bindBuffer(r.ARRAY_BUFFER,s);var o=r.getAttribLocation(i,"inPosition");o!==-1&&(r.enableVertexAttribArray(o),r.vertexAttribPointer(o,2,r.FLOAT,!1,a,0));var h=this.vertexViewF32;h[3]=t,h[4]=e,h[5]=t,h[8]=e,h[9]=t,h[10]=e;var u=6;r.bufferSubData(r.ARRAY_BUFFER,0,this.bytes.subarray(0,u*a)),r.drawArrays(r.TRIANGLES,0,u),this.renderToTexture&&n.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},preDestroy:function(){var e=this.gl;e.deleteProgram(this.program),e.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null)}});oH.exports=rAe});var na=l((XZe,hH)=>{var sAe=_(),nAe=ye(),aAe=le();function bm(e,t,i,r){var s=e-i,n=t-r,a=s*s+n*n;return Math.sqrt(a)}var oAe=new sAe({initialize:function(t,i,r){this.vertex1=t,this.vertex2=i,this.vertex3=r,this.bounds=new nAe,this._inCenter=new aAe},getInCenter:function(e){e===void 0&&(e=!0);var t=this.vertex1,i=this.vertex2,r=this.vertex3,s,n,a,o,h,u;e?(s=t.x,n=t.y,a=i.x,o=i.y,h=r.x,u=r.y):(s=t.vx,n=t.vy,a=i.vx,o=i.vy,h=r.vx,u=r.vy);var f=bm(h,u,a,o),d=bm(s,n,h,u),v=bm(a,o,s,n),c=f+d+v;return this._inCenter.set((s*f+a*d+h*v)/c,(n*f+o*d+u*v)/c)},contains:function(e,t,i){var r=this.vertex1,s=this.vertex2,n=this.vertex3,a=r.vx,o=r.vy,h=s.vx,u=s.vy,f=n.vx,d=n.vy;if(i){var v=i.a,c=i.b,p=i.c,m=i.d,g=i.e,x=i.f;a=r.vx*v+r.vy*p+g,o=r.vx*c+r.vy*m+x,h=s.vx*v+s.vy*p+g,u=s.vx*c+s.vy*m+x,f=n.vx*v+n.vy*p+g,d=n.vx*c+n.vy*m+x}var T=f-a,E=d-o,R=h-a,y=u-o,C=e-a,S=t-o,w=T*T+E*E,P=T*R+E*y,A=T*C+E*S,M=R*R+y*y,N=R*C+y*S,O=w*M-P*P,D=O===0?0:1/O,b=(M*A-P*N)*D,q=(w*N-P*A)*D;return b>=0&&q>=0&&b+q<1},isCounterClockwise:function(e){var t=this.vertex1,i=this.vertex2,r=this.vertex3,s=(i.vx-t.vx)*(r.vy-t.vy)-(i.vy-t.vy)*(r.vx-t.vx);return e<=0?s>=0:s<0},load:function(e,t,i,r,s){return i=this.vertex1.load(e,t,i,r,s),i=this.vertex2.load(e,t,i,r,s),i=this.vertex3.load(e,t,i,r,s),i},transformCoordinatesLocal:function(e,t,i,r){return this.vertex1.transformCoordinatesLocal(e,t,i,r),this.vertex2.transformCoordinatesLocal(e,t,i,r),this.vertex3.transformCoordinatesLocal(e,t,i,r),this},updateBounds:function(){var e=this.vertex1,t=this.vertex2,i=this.vertex3,r=this.bounds;return r.x=Math.min(e.vx,t.vx,i.vx),r.y=Math.min(e.vy,t.vy,i.vy),r.width=Math.max(e.vx,t.vx,i.vx)-r.x,r.height=Math.max(e.vy,t.vy,i.vy)-r.y,this},isInView:function(e,t,i,r,s,n,a,o,h,u,f){var d=this.vertex1.update(s,n,a,o,h,u,f,r),v=this.vertex2.update(s,n,a,o,h,u,f,r),c=this.vertex3.update(s,n,a,o,h,u,f,r);if(d.ta<=0&&v.ta<=0&&c.ta<=0||t&&!this.isCounterClockwise(i))return!1;var p=this.bounds;p.x=Math.min(d.tx,v.tx,c.tx),p.y=Math.min(d.ty,v.ty,c.ty),p.width=Math.max(d.tx,v.tx,c.tx)-p.x,p.height=Math.max(d.ty,v.ty,c.ty)-p.y;var m=e.x+e.width,g=e.y+e.height;return p.width<=0||p.height<=0||e.width<=0||e.height<=0?!1:!(p.right<e.x||p.bottom<e.y||p.x>m||p.y>g)},translate:function(e,t){t===void 0&&(t=0);var i=this.vertex1,r=this.vertex2,s=this.vertex3;return i.x+=e,i.y+=t,r.x+=e,r.y+=t,s.x+=e,s.y+=t,this},x:{get:function(){return this.getInCenter().x},set:function(e){var t=this.getInCenter();this.translate(e-t.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(e){var t=this.getInCenter();this.translate(0,e-t.y)}},alpha:{get:function(){var e=this.vertex1,t=this.vertex2,i=this.vertex3;return(e.alpha+t.alpha+i.alpha)/3},set:function(e){this.vertex1.alpha=e,this.vertex2.alpha=e,this.vertex3.alpha=e}},depth:{get:function(){var e=this.vertex1,t=this.vertex2,i=this.vertex3;return(e.vz+t.vz+i.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});hH.exports=oAe});var aa=l((YZe,lH)=>{var hAe=_(),uAe=fe(),uH=si(),lAe=new hAe({Extends:uH,initialize:function(t,i,r,s,n,a,o,h,u,f){a===void 0&&(a=16777215),o===void 0&&(o=1),h===void 0&&(h=0),u===void 0&&(u=0),f===void 0&&(f=0),uH.call(this,t,i,r),this.vx=0,this.vy=0,this.vz=0,this.nx=h,this.ny=u,this.nz=f,this.u=s,this.v=n,this.color=a,this.alpha=o,this.tx=0,this.ty=0,this.ta=0},setUVs:function(e,t){return this.u=e,this.v=t,this},transformCoordinatesLocal:function(e,t,i,r){var s=this.x,n=this.y,a=this.z,o=e.val,h=s*o[0]+n*o[4]+a*o[8]+o[12],u=s*o[1]+n*o[5]+a*o[9]+o[13],f=s*o[2]+n*o[6]+a*o[10]+o[14],d=s*o[3]+n*o[7]+a*o[11]+o[15];this.vx=h/d*t,this.vy=-(u/d)*i,r<=0?this.vz=f/d:this.vz=-(f/d)},update:function(e,t,i,r,s,n,a,o){var h=this.vx*e+this.vy*i+s,u=this.vx*t+this.vy*r+n;return a&&(h=Math.round(h),u=Math.round(u)),this.tx=h,this.ty=u,this.ta=this.alpha*o,this},load:function(e,t,i,r,s){return e[++i]=this.tx,e[++i]=this.ty,e[++i]=this.u,e[++i]=this.v,e[++i]=r,e[++i]=s,t[++i]=uAe.getTintAppendFloatAlpha(this.color,this.ta),i}});lH.exports=lAe});var Mm=l((WZe,dH)=>{var fAe=na(),fH=aa(),dAe=function(e,t,i,r,s,n,a){if(r===void 0&&(r=!1),n===void 0&&(n=16777215),a===void 0&&(a=1),e.length!==t.length){console.warn("GenerateVerts: vertices and uvs count not equal");return}var o={faces:[],vertices:[]},h,u,f,d,v,c,p,m,g,x,T,E=r?3:2,R=Array.isArray(n),y=Array.isArray(a);if(Array.isArray(i)&&i.length>0)for(h=0;h<i.length;h++){var C=i[h],S=i[h]*2,w=i[h]*E;u=e[w],f=e[w+1],d=r?e[w+2]:0,v=t[S],c=t[S+1],p=R?n[C]:n,m=y?a[C]:a,g=0,x=0,T=0,s&&(g=s[w],x=s[w+1],T=r?s[w+2]:0),o.vertices.push(new fH(u,f,d,v,c,p,m,g,x,T))}else{var P=0,A=0;for(h=0;h<e.length;h+=E)u=e[h],f=e[h+1],d=r?e[h+2]:0,v=t[P],c=t[P+1],p=R?n[A]:n,m=y?a[A]:a,g=0,x=0,T=0,s&&(g=s[h],x=s[h+1],T=r?s[h+2]:0),o.vertices.push(new fH(u,f,d,v,c,p,m,g,x,T)),P+=2,A++}for(h=0;h<o.vertices.length;h+=3){var M=o.vertices[h],N=o.vertices[h+1],O=o.vertices[h+2];o.faces.push(new fAe(M,N,O))}return o};dH.exports=dAe});var Om=l((HZe,mH)=>{var vAe=na(),cAe=hr(),vH=si(),qm=aa(),cH=new vH,pH=new vH,nl=new cAe,pAe=function(e,t,i,r,s,n,a,o,h,u){i===void 0&&(i=1),r===void 0&&(r=0),s===void 0&&(s=0),n===void 0&&(n=0),a===void 0&&(a=0),o===void 0&&(o=0),h===void 0&&(h=0),u===void 0&&(u=!0);var f={faces:[],verts:[]},d=e.materials;cH.set(r,s,n),pH.set(a,o,h),nl.fromRotationXYTranslation(pH,cH,u);for(var v=0;v<e.models.length;v++)for(var c=e.models[v],p=c.vertices,m=c.textureCoords,g=c.faces,x=0;x<g.length;x++){var T=g[x],E=T.vertices[0],R=T.vertices[1],y=T.vertices[2],C=p[E.vertexIndex],S=p[R.vertexIndex],w=p[y.vertexIndex],P=E.textureCoordsIndex,A=R.textureCoordsIndex,M=y.textureCoordsIndex,N=P===-1?{u:0,v:1}:m[P],O=A===-1?{u:0,v:0}:m[A],D=M===-1?{u:1,v:1}:m[M],b=16777215;T.material!==""&&d[T.material]&&(b=d[T.material]);var q=new qm(C.x*i,C.y*i,C.z*i,N.u,N.v,b).transformMat4(nl),G=new qm(S.x*i,S.y*i,S.z*i,O.u,O.v,b).transformMat4(nl),L=new qm(w.x*i,w.y*i,w.z*i,D.u,D.v,b).transformMat4(nl);f.verts.push(q,G,L),f.faces.push(new vAe(q,G,L))}return t&&(t.faces=t.faces.concat(f.faces),t.vertices=t.vertices.concat(f.verts)),f};mH.exports=pAe});var xH=l((jZe,gH)=>{var mAe=Re(),gAe=function(e,t,i,r){var s=t.faces,n=s.length;if(n!==0){i.addToRenderList(t);var a=e.pipelines.set(t.pipeline,t),o=mAe(t,i,r).calc,h=a.setGameObject(t),u=a.vertexViewF32,f=a.vertexViewU32,d=a.vertexCount*a.currentShader.vertexComponentCount-1,v=t.tintFill,c=[],p=t.debugCallback,m=o.a,g=o.b,x=o.c,T=o.d,E=o.e,R=o.f,y=t.viewPosition.z,C=t.hideCCW,S=i.roundPixels,w=i.alpha*t.alpha,P=0;e.pipelines.preBatch(t);for(var A=0;A<n;A++){var M=s[A];!M.isInView(i,C,y,w,m,g,x,T,E,R,S)||(a.shouldFlush(3)&&(a.flush(),d=0),d=M.load(u,f,d,h,v),P++,a.vertexCount+=3,p&&c.push(M))}t.totalFrame+=P,p&&p.call(t,t,c),e.pipelines.postBatch(t)}};gH.exports=gAe});var EH=l((KZe,TH)=>{var xAe=function(){};TH.exports=xAe});var RH=l((ZZe,CH)=>{var yH=B(),SH=B();yH=xH();SH=EH();CH.exports={renderWebGL:yH,renderCanvas:SH}});var al=l((JZe,PH)=>{var TAe=_(),er=de(),EAe=or(),yAe=na(),_H=Ae(),SAe=Mm(),CAe=Om(),RAe=Re(),Lm=hr(),_Ae=RH(),wH=rs(),oa=si(),wAe=aa(),PAe=new TAe({Extends:_H,Mixins:[er.AlphaSingle,er.BlendMode,er.Depth,er.Mask,er.Pipeline,er.Size,er.Texture,er.Transform,er.Visible,er.ScrollFactor,_Ae],initialize:function(t,i,r,s,n,a,o,h,u,f,d,v){i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s="__WHITE"),_H.call(this,t,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new oa,this.modelScale=new oa(1,1,1),this.modelRotation=new oa,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new Lm,this.viewPosition=new oa,this.viewMatrix=new Lm,this.projectionMatrix=new Lm,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1;var c=t.sys.renderer;this.setPosition(i,r),this.setTexture(s,n),this.setSize(c.width,c.height),this.initPipeline(),this.setPerspective(c.width,c.height),a&&this.addVertices(a,o,h,u,f,d,v)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(e){return this.viewPosition.addScale(oa.LEFT,e),this.dirtyCache[10]=1,this},panY:function(e){return this.viewPosition.y+=oa.DOWN.y*e,this.dirtyCache[10]=1,this},panZ:function(e){return this.viewPosition.z+=e,this.dirtyCache[10]=1,this},setPerspective:function(e,t,i,r,s){return i===void 0&&(i=45),r===void 0&&(r=.01),s===void 0&&(s=1e3),this.projectionMatrix.perspective(EAe(i),e/t,r,s),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(e,t,i,r){return e===void 0&&(e=this.scene.sys.renderer.getAspectRatio()),t===void 0&&(t=1),i===void 0&&(i=-1e3),r===void 0&&(r=1e3),this.projectionMatrix.ortho(-e,e,-t,t,i,r),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach(function(e){e.destroy()}),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(e,t,i,r,s,n,a,o,h){var u=this.scene.sys.cache.obj.get(e);return u&&CAe(u,this,t,i,r,s,n,a,o,h),this},sortByDepth:function(e,t){return e.depth-t.depth},depthSort:function(){return wH(this.faces,this.sortByDepth),this},addVertex:function(e,t,i,r,s,n,a){var o=new wAe(e,t,i,r,s,n,a);return this.vertices.push(o),o},addFace:function(e,t,i){var r=new yAe(e,t,i);return this.faces.push(r),this.dirtyCache[9]=-1,r},addVertices:function(e,t,i,r,s,n,a){var o=SAe(e,t,i,r,s,n,a);return o&&(this.faces=this.faces.concat(o.faces),this.vertices=this.vertices.concat(o.vertices)),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(e){return this.faces[e]},getFaceAt:function(e,t,i){i===void 0&&(i=this.scene.sys.cameras.main);for(var r=RAe(this,i).calc,s=this.faces,n=[],a=0;a<s.length;a++){var o=s[a];o.contains(e,t,r)&&n.push(o)}return wH(n,this.sortByDepth)},setDebug:function(e,t){return this.debugGraphic=e,!e&&!t?this.debugCallback=null:t?this.debugCallback=t:this.debugCallback=this.renderDebug,this},isDirty:function(){var e=this.modelPosition,t=this.modelRotation,i=this.modelScale,r=this.dirtyCache,s=e.x,n=e.y,a=e.z,o=t.x,h=t.y,u=t.z,f=i.x,d=i.y,v=i.z,c=this.getFaceCount(),p=r[0],m=r[1],g=r[2],x=r[3],T=r[4],E=r[5],R=r[6],y=r[7],C=r[8],S=r[9];return r[0]=s,r[1]=n,r[2]=a,r[3]=o,r[4]=h,r[5]=u,r[6]=f,r[7]=d,r[8]=v,r[9]=c,p!==s||m!==n||g!==a||x!==o||T!==h||E!==u||R!==f||y!==d||C!==v||S!==c},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var e=this.dirtyCache;if(!(!this.ignoreDirtyCache&&!e[10]&&!this.isDirty())){var t=this.width,i=this.height,r=this.viewMatrix,s=this.viewPosition;e[10]&&(r.identity(),r.translate(s),r.invert(),e[10]=0);var n=this.transformMatrix;n.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var a=s.z,o=this.faces,h=0;h<o.length;h++)o[h].transformCoordinatesLocal(n,t,i,a);this.depthSort()}},renderDebug:function(e,t){for(var i=e.debugGraphic,r=0;r<t.length;r++){var s=t[r],n=s.vertex1.tx,a=s.vertex1.ty,o=s.vertex2.tx,h=s.vertex2.ty,u=s.vertex3.tx,f=s.vertex3.ty;i.strokeTriangle(n,a,o,h,u,f)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null}});PH.exports=PAe});var bH=l((QZe,AH)=>{var AAe=Re(),bAe=function(e,t,i,r){i.addToRenderList(t);var s=e.pipelines.set(t.pipeline),n=AAe(t,i,r).calc,a=t.width,o=t.height,h=-t._radius,u=-t._radius,f=h+a,d=u+o,v=n.getX(0,0),c=n.getY(0,0),p=n.getX(h,u),m=n.getY(h,u),g=n.getX(h,d),x=n.getY(h,d),T=n.getX(f,d),E=n.getY(f,d),R=n.getX(f,u),y=n.getY(f,u);e.pipelines.preBatch(t),s.batchPointLight(t,i,p,m,g,x,T,E,R,y,v,c),e.pipelines.postBatch(t)};AH.exports=bAe});var OH=l(($Ze,qH)=>{var MH=B(),MAe=B();MH=bH();qH.exports={renderWebGL:MH,renderCanvas:MAe}});var To=l((eJe,FH)=>{var qAe=_(),Sr=de(),LH=Ae(),OAe=lh(),LAe=Is(),FAe=OH(),NAe=new qAe({Extends:LH,Mixins:[Sr.AlphaSingle,Sr.BlendMode,Sr.Depth,Sr.GetBounds,Sr.Mask,Sr.Pipeline,Sr.ScrollFactor,Sr.Transform,Sr.Visible,FAe],initialize:function(t,i,r,s,n,a,o){s===void 0&&(s=16777215),n===void 0&&(n=128),a===void 0&&(a=1),o===void 0&&(o=.1),LH.call(this,t,"PointLight"),this.initPipeline(LAe.POINTLIGHT_PIPELINE),this.setPosition(i,r),this.color=OAe(s),this.intensity=a,this.attenuation=o,this.width=n*2,this.height=n*2,this._radius=n},radius:{get:function(){return this._radius},set:function(e){this._radius=e,this.width=e*2,this.height=e*2}},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});FH.exports=NAe});var NH=l(()=>{var GAe=sl(),DAe=J();DAe.register("shader",function(e,t,i,r,s,n,a){return this.displayList.add(new GAe(this.scene,e,t,i,r,s,n,a))})});var GH=l(()=>{var IAe=al(),BAe=J();BAe.register("mesh",function(e,t,i,r,s,n,a,o,h,u,f){return this.displayList.add(new IAe(this.scene,e,t,i,r,s,n,a,o,h,u,f))})});var DH=l(()=>{var VAe=J(),UAe=To();VAe.register("pointlight",function(e,t,i,r,s,n){return this.displayList.add(new UAe(this.scene,e,t,i,r,s,n))})});var IH=l(()=>{var kAe=nt(),zAe=Ce(),Eo=pe(),XAe=sl();zAe.register("shader",function(e,t){e===void 0&&(e={});var i=Eo(e,"key",null),r=Eo(e,"x",0),s=Eo(e,"y",0),n=Eo(e,"width",128),a=Eo(e,"height",128),o=new XAe(this.scene,i,r,s,n,a);return t!==void 0&&(e.add=t),kAe(this.scene,o,e),o})});var VH=l(()=>{var YAe=nt(),WAe=Ce(),BH=pe(),Qs=ie(),HAe=al();WAe.register("mesh",function(e,t){e===void 0&&(e={});var i=BH(e,"key",null),r=BH(e,"frame",null),s=Qs(e,"vertices",[]),n=Qs(e,"uvs",[]),a=Qs(e,"indicies",[]),o=Qs(e,"containsZ",!1),h=Qs(e,"normals",[]),u=Qs(e,"colors",16777215),f=Qs(e,"alphas",1),d=new HAe(this.scene,0,0,i,r,s,n,a,o,h,u,f);return t!==void 0&&(e.add=t),YAe(this.scene,d,e),d})});var UH=l(()=>{var jAe=nt(),KAe=Ce(),ol=pe(),ZAe=To();KAe.register("pointlight",function(e,t){e===void 0&&(e={});var i=ol(e,"color",16777215),r=ol(e,"radius",128),s=ol(e,"intensity",1),n=ol(e,"attenuation",.1),a=new ZAe(this.scene,0,0,i,r,s,n);return t!==void 0&&(e.add=t),jAe(this.scene,a,e),a})});var Nm=l((vJe,XH)=>{var kH=kr(),JAe=_(),zH=de(),QAe=Jh(),$Ae=fe(),Fm=new JAe({Extends:kH,Mixins:[zH.ScrollFactor,zH.Visible],initialize:function(t,i,r,s,n,a,o){kH.call(this,t,i,r),this.color=new QAe(s,n,a),this.intensity=o,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1)},willRender:function(e){return!(Fm.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&e.id)},setColor:function(e){var t=$Ae.getFloatsFromUintRGB(e);return this.color.set(t[0],t[1],t[2]),this},setIntensity:function(e){return this.intensity=e,this},setRadius:function(e){return this.radius=e,this}});Fm.RENDER_MASK=15;XH.exports=Fm});var hl=l((cJe,YH)=>{var ebe=function(e,t){var i=t.width/2,r=t.height/2,s=Math.abs(e.x-t.x-i),n=Math.abs(e.y-t.y-r),a=i+e.radius,o=r+e.radius;if(s>a||n>o)return!1;if(s<=i||n<=r)return!0;var h=s-i,u=n-r,f=h*h,d=u*u,v=e.radius*e.radius;return f+d<=v};YH.exports=ebe});var Gm=l((pJe,HH)=>{var tbe=hl(),ibe=_(),rbe=Fr(),sbe=Nm(),nbe=To(),abe=Jh(),obe=Gs(),hbe=rs(),WH=fe(),ube=new ibe({initialize:function(){this.lights=[],this.ambientColor=new abe(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(e,t,i,r,s,n){return this.systems.displayList.add(new nbe(this.scene,e,t,i,r,s,n))},enable:function(){return this.maxLights===-1&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(e){for(var t=this.lights,i=e.worldView,r=[],s=0;s<t.length;s++){var n=t[s];n.willRender(e)&&tbe(n,i)&&r.push({light:n,distance:rbe(n.x,n.y,i.centerX,i.centerY)})}return r.length>this.maxLights&&(hbe(r,this.sortByDistance),r=r.slice(0,this.maxLights)),this.visibleLights=r.length,r},sortByDistance:function(e,t){return e.distance>=t.distance},setAmbientColor:function(e){var t=WH.getFloatsFromUintRGB(e);return this.ambientColor.set(t[0],t[1],t[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(e,t,i,r,s){e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=128),r===void 0&&(r=16777215),s===void 0&&(s=1);var n=WH.getFloatsFromUintRGB(r),a=new sbe(e,t,i,n[0],n[1],n[2],s);return this.lights.push(a),a},removeLight:function(e){var t=this.lights.indexOf(e);return t>=0&&obe(this.lights,t),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});HH.exports=ube});var JH=l((mJe,ZH)=>{var lbe=_(),jH=Gm(),fbe=rt(),Dm=qe(),KH=new lbe({Extends:jH,initialize:function(t){this.scene=t,this.systems=t.sys,t.sys.settings.isBooted||t.sys.events.once(Dm.BOOT,this.boot,this),jH.call(this)},boot:function(){var e=this.systems.events;e.on(Dm.SHUTDOWN,this.shutdown,this),e.on(Dm.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});fbe.register("LightsPlugin",KH,"lights");ZH.exports=KH});var $H=l((gJe,QH)=>{var Jt={Events:Xr(),DisplayList:sU(),GameObjectCreator:Ce(),GameObjectFactory:J(),UpdateList:mU(),Components:de(),GetCalcMatrix:Re(),BuildGameObject:nt(),BuildGameObjectAnimation:Ep(),GameObject:Ae(),BitmapText:fo(),Blitter:Pu(),Bob:Cp(),Container:Au(),DOMElement:Pp(),DynamicBitmapText:Mu(),Extern:Ap(),Graphics:Fu(),Group:Du(),Image:Iu(),Layer:Bu(),Particles:dX(),PathFollower:Wp(),RenderTexture:Wu(),RetroFont:LX(),Rope:Hu(),Sprite:Jn(),Text:Ku(),GetTextSize:jp(),MeasureText:Kp(),TextStyle:Zp(),TileSprite:Qu(),Zone:Wa(),Video:el(),Shape:Zt(),Arc:Jp(),Curve:Qp(),Ellipse:$p(),Grid:tm(),IsoBox:sm(),IsoTriangle:om(),Line:hm(),Polygon:vm(),Rectangle:cm(),Star:pm(),Triangle:ym(),Factories:{Blitter:JW(),Container:QW(),DOMElement:$W(),DynamicBitmapText:e5(),Extern:t5(),Graphics:i5(),Group:r5(),Image:s5(),Layer:n5(),Particles:a5(),PathFollower:o5(),RenderTexture:h5(),Rope:u5(),Sprite:l5(),StaticBitmapText:f5(),Text:d5(),TileSprite:v5(),Zone:c5(),Video:p5(),Arc:x5(),Curve:T5(),Ellipse:E5(),Grid:y5(),IsoBox:S5(),IsoTriangle:C5(),Line:R5(),Polygon:_5(),Rectangle:w5(),Star:P5(),Triangle:A5()},Creators:{Blitter:M5(),Container:q5(),DynamicBitmapText:O5(),Graphics:L5(),Group:F5(),Image:G5(),Layer:D5(),Particles:V5(),RenderTexture:U5(),Rope:k5(),Sprite:X5(),StaticBitmapText:H5(),Text:j5(),TileSprite:K5(),Zone:Z5(),Video:J5()}};Jt.Shader=sl(),Jt.Mesh=al(),Jt.PointLight=To(),Jt.Factories.Shader=NH(),Jt.Factories.Mesh=GH(),Jt.Factories.PointLight=DH(),Jt.Creators.Shader=IH(),Jt.Creators.Mesh=VH(),Jt.Creators.PointLight=UH(),Jt.Light=Nm(),Jt.LightsManager=Gm(),Jt.LightsPlugin=JH();QH.exports=Jt});var t4=l((xJe,e4)=>{var dbe=function(e){return e.radius>0?Math.PI*e.radius*e.radius:0};e4.exports=dbe});var r4=l((TJe,i4)=>{var vbe=kr(),cbe=function(e){return new vbe(e.x,e.y,e.radius)};i4.exports=cbe});var n4=l((EJe,s4)=>{var pbe=Ur(),mbe=function(e,t){return pbe(e,t.x,t.y)};s4.exports=mbe});var o4=l((yJe,a4)=>{var ul=Ur(),gbe=function(e,t){return ul(e,t.x,t.y)&&ul(e,t.right,t.y)&&ul(e,t.x,t.bottom)&&ul(e,t.right,t.bottom)};a4.exports=gbe});var u4=l((SJe,h4)=>{var xbe=function(e,t){return t.setTo(e.x,e.y,e.radius)};h4.exports=xbe});var f4=l((CJe,l4)=>{var Tbe=function(e,t){return e.x===t.x&&e.y===t.y&&e.radius===t.radius};l4.exports=Tbe});var v4=l((RJe,d4)=>{var Ebe=ye(),ybe=function(e,t){return t===void 0&&(t=new Ebe),t.x=e.left,t.y=e.top,t.width=e.diameter,t.height=e.diameter,t};d4.exports=ybe});var p4=l((_Je,c4)=>{var Sbe=function(e,t,i){return e.x+=t,e.y+=i,e};c4.exports=Sbe});var g4=l((wJe,m4)=>{var Cbe=function(e,t){return e.x+=t.x,e.y+=t.y,e};m4.exports=Cbe});var T4=l((PJe,x4)=>{var pt=kr();pt.Area=t4();pt.Circumference=Lv();pt.CircumferencePoint=Ph();pt.Clone=r4();pt.Contains=Ur();pt.ContainsPoint=n4();pt.ContainsRect=o4();pt.CopyFrom=u4();pt.Equals=f4();pt.GetBounds=v4();pt.GetPoint=Ov();pt.GetPoints=Fv();pt.Offset=p4();pt.OffsetPoint=g4();pt.Random=Ah();x4.exports=pt});var y4=l((AJe,E4)=>{var Rbe=function(e){return e.isEmpty()?0:e.getMajorRadius()*e.getMinorRadius()*Math.PI};E4.exports=Rbe});var C4=l((bJe,S4)=>{var _be=Zn(),wbe=function(e){return new _be(e.x,e.y,e.width,e.height)};S4.exports=wbe});var _4=l((MJe,R4)=>{var Pbe=Kn(),Abe=function(e,t){return Pbe(e,t.x,t.y)};R4.exports=Abe});var P4=l((qJe,w4)=>{var ll=Kn(),bbe=function(e,t){return ll(e,t.x,t.y)&&ll(e,t.right,t.y)&&ll(e,t.x,t.bottom)&&ll(e,t.right,t.bottom)};w4.exports=bbe});var b4=l((OJe,A4)=>{var Mbe=function(e,t){return t.setTo(e.x,e.y,e.width,e.height)};A4.exports=Mbe});var q4=l((LJe,M4)=>{var qbe=function(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height};M4.exports=qbe});var L4=l((FJe,O4)=>{var Obe=ye(),Lbe=function(e,t){return t===void 0&&(t=new Obe),t.x=e.left,t.y=e.top,t.width=e.width,t.height=e.height,t};O4.exports=Lbe});var N4=l((NJe,F4)=>{var Fbe=function(e,t,i){return e.x+=t,e.y+=i,e};F4.exports=Fbe});var D4=l((GJe,G4)=>{var Nbe=function(e,t){return e.x+=t.x,e.y+=t.y,e};G4.exports=Nbe});var B4=l((DJe,I4)=>{var mt=Zn();mt.Area=y4();mt.Circumference=Mp();mt.CircumferencePoint=Ou();mt.Clone=C4();mt.Contains=Kn();mt.ContainsPoint=_4();mt.ContainsRect=P4();mt.CopyFrom=b4();mt.Equals=q4();mt.GetBounds=L4();mt.GetPoint=bp();mt.GetPoints=qp();mt.Offset=N4();mt.OffsetPoint=D4();mt.Random=Ih();I4.exports=mt});var Im=l((IJe,V4)=>{var Gbe=Fr(),Dbe=function(e,t){return Gbe(e.x,e.y,t.x,t.y)<=e.radius+t.radius};V4.exports=Dbe});var k4=l((BJe,U4)=>{var ha=j(),Ibe=Im(),Bbe=function(e,t,i){if(i===void 0&&(i=[]),Ibe(e,t)){var r=e.x,s=e.y,n=e.radius,a=t.x,o=t.y,h=t.radius,u,f,d,v,c;if(s===o)c=(h*h-n*n-a*a+r*r)/(2*(r-a)),u=1,f=-2*o,d=a*a+c*c-2*a*c+o*o-h*h,v=f*f-4*u*d,v===0?i.push(new ha(c,-f/(2*u))):v>0&&(i.push(new ha(c,(-f+Math.sqrt(v))/(2*u))),i.push(new ha(c,(-f-Math.sqrt(v))/(2*u))));else{var p=(r-a)/(s-o),m=(h*h-n*n-a*a+r*r-o*o+s*s)/(2*(s-o));u=p*p+1,f=2*s*p-2*m*p-2*r,d=r*r+s*s+m*m-n*n-2*s*m,v=f*f-4*u*d,v===0?(c=-f/(2*u),i.push(new ha(c,m-c*p))):v>0&&(c=(-f+Math.sqrt(v))/(2*u),i.push(new ha(c,m-c*p)),c=(-f-Math.sqrt(v))/(2*u),i.push(new ha(c,m-c*p)))}}return i};U4.exports=Bbe});var fl=l((VJe,z4)=>{var Bm=Ur(),Vbe=j(),Ube=new Vbe,kbe=function(e,t,i){if(i===void 0&&(i=Ube),Bm(t,e.x1,e.y1))return i.x=e.x1,i.y=e.y1,!0;if(Bm(t,e.x2,e.y2))return i.x=e.x2,i.y=e.y2,!0;var r=e.x2-e.x1,s=e.y2-e.y1,n=t.x-e.x1,a=t.y-e.y1,o=r*r+s*s,h=r,u=s;if(o>0){var f=(n*r+a*s)/o;h*=f,u*=f}i.x=e.x1+h,i.y=e.y1+u;var d=h*h+u*u;return d<=o&&h*r+u*s>=0&&Bm(t,i.x,i.y)};z4.exports=kbe});var dl=l((UJe,X4)=>{var Vm=j(),zbe=fl(),Xbe=function(e,t,i){if(i===void 0&&(i=[]),zbe(e,t)){var r=e.x1,s=e.y1,n=e.x2,a=e.y2,o=t.x,h=t.y,u=t.radius,f=n-r,d=a-s,v=r-o,c=s-h,p=f*f+d*d,m=2*(f*v+d*c),g=v*v+c*c-u*u,x=m*m-4*p*g,T,E;if(x===0){var R=-m/(2*p);T=r+R*f,E=s+R*d,R>=0&&R<=1&&i.push(new Vm(T,E))}else if(x>0){var y=(-m-Math.sqrt(x))/(2*p);T=r+y*f,E=s+y*d,y>=0&&y<=1&&i.push(new Vm(T,E));var C=(-m+Math.sqrt(x))/(2*p);T=r+C*f,E=s+C*d,C>=0&&C<=1&&i.push(new Vm(T,E))}}return i};X4.exports=Xbe});var W4=l((kJe,Y4)=>{var vl=dl(),Ybe=hl(),Wbe=function(e,t,i){if(i===void 0&&(i=[]),Ybe(e,t)){var r=t.getLineA(),s=t.getLineB(),n=t.getLineC(),a=t.getLineD();vl(r,e,i),vl(s,e,i),vl(n,e,i),vl(a,e,i)}return i};Y4.exports=Wbe});var Um=l((zJe,H4)=>{var Hbe=si(),jbe=function(e,t,i){var r=e.x1,s=e.y1,n=e.x2,a=e.y2,o=t.x1,h=t.y1,u=t.x2,f=t.y2,d=n-r,v=a-s,c=u-o,p=f-h,m=p*d-c*v;if(d===0||m===0)return!1;var g=(d*(h-s)+v*(r-o))/(c*v-p*d),x=(o+c*g-r)/d;return x<0||g<0||g>1?null:(i===void 0&&(i=new Hbe),i.set(r+d*x,s+v*x,x))};H4.exports=jbe});var km=l((XJe,Z4)=>{var j4=si(),Kbe=Um(),Zbe=Ri(),K4=new Zbe,cl=new j4,Jbe=function(e,t,i){i===void 0&&(i=new j4);var r=!1;i.set(),cl.set();for(var s=t[0],n=1;n<t.length;n++){var a=t[n];K4.setTo(s.x,s.y,a.x,a.y),s=a,Kbe(e,K4,cl)&&(!r||cl.z<i.z)&&(i.copy(cl),r=!0)}return r?i:null};Z4.exports=Jbe});var zm=l((YJe,J4)=>{var Qbe=si(),$be=La(),eMe=km(),ua=new Qbe,tMe=function(e,t,i){i===void 0&&(i=new $be),Array.isArray(t)||(t=[t]);var r=!1;i.set(),ua.set();for(var s=0;s<t.length;s++)eMe(e,t[s].points,ua)&&(!r||ua.z<i.z)&&(i.set(ua.x,ua.y,ua.z,s),r=!0);return r?i:null};J4.exports=tMe});var $s=l((WJe,Q4)=>{var iMe=j(),rMe=function(e,t,i){i===void 0&&(i=new iMe);var r=e.x1,s=e.y1,n=e.x2,a=e.y2,o=t.x1,h=t.y1,u=t.x2,f=t.y2,d=(u-o)*(s-h)-(f-h)*(r-o),v=(n-r)*(s-h)-(a-s)*(r-o),c=(f-h)*(n-r)-(u-o)*(a-s);if(c===0)return!1;var p=d/c,m=v/c;return p>=0&&p<=1&&m>=0&&m<=1?(i.x=r+p*(n-r),i.y=s+p*(a-s),!0):!1};Q4.exports=rMe});var Xm=l((HJe,$4)=>{var sMe=function(e,t){var i=e.x1,r=e.y1,s=e.x2,n=e.y2,a=t.x,o=t.y,h=t.right,u=t.bottom,f=0;if(i>=a&&i<=h&&r>=o&&r<=u||s>=a&&s<=h&&n>=o&&n<=u)return!0;if(i<a&&s>=a){if(f=r+(n-r)*(a-i)/(s-i),f>o&&f<=u)return!0}else if(i>h&&s<=h&&(f=r+(n-r)*(h-i)/(s-i),f>=o&&f<=u))return!0;if(r<o&&n>=o){if(f=i+(s-i)*(o-r)/(n-r),f>=a&&f<=h)return!0}else if(r>u&&n<=u&&(f=i+(s-i)*(u-r)/(n-r),f>=a&&f<=h))return!0;return!1};$4.exports=sMe});var gl=l((jJe,e9)=>{var pl=j(),ml=$s(),nMe=Xm(),aMe=function(e,t,i){if(i===void 0&&(i=[]),nMe(e,t))for(var r=t.getLineA(),s=t.getLineB(),n=t.getLineC(),a=t.getLineD(),o=[new pl,new pl,new pl,new pl],h=[ml(r,e,o[0]),ml(s,e,o[1]),ml(n,e,o[2]),ml(a,e,o[3])],u=0;u<4;u++)h[u]&&i.push(o[u]);return i};e9.exports=aMe});var r9=l((KJe,i9)=>{var oMe=La(),hMe=zm(),uMe=Ri(),t9=new uMe;function Ym(e,t,i,r,s){var n=Math.cos(e),a=Math.sin(e);t9.setTo(t,i,t+n,i+a);var o=hMe(t9,r);o&&s.push(new oMe(o.x,o.y,e,o.w))}function lMe(e,t){return e.z-t.z}var fMe=function(e,t,i){Array.isArray(i)||(i=[i]);for(var r=[],s=[],n=0;n<i.length;n++)for(var a=i[n].points,o=0;o<a.length;o++){var h=Math.atan2(a[o].y-t,a[o].x-e);s.indexOf(h)===-1&&(Ym(h,e,t,i,r),Ym(h-1e-5,e,t,i,r),Ym(h+1e-5,e,t,i,r),s.push(h))}return r.sort(lMe)};i9.exports=fMe});var yo=l((ZJe,s9)=>{var dMe=function(e,t){return e.width<=0||e.height<=0||t.width<=0||t.height<=0?!1:!(e.right<t.x||e.bottom<t.y||e.x>t.right||e.y>t.bottom)};s9.exports=dMe});var a9=l((JJe,n9)=>{var vMe=ye(),cMe=yo(),pMe=function(e,t,i){return i===void 0&&(i=new vMe),cMe(e,t)&&(i.x=Math.max(e.x,t.x),i.y=Math.max(e.y,t.y),i.width=Math.min(e.right,t.right)-i.x,i.height=Math.min(e.bottom,t.bottom)-i.y),i};n9.exports=pMe});var h9=l((QJe,o9)=>{var xl=gl(),mMe=yo(),gMe=function(e,t,i){if(i===void 0&&(i=[]),mMe(e,t)){var r=e.getLineA(),s=e.getLineB(),n=e.getLineC(),a=e.getLineD();xl(r,t,i),xl(s,t,i),xl(n,t,i),xl(a,t,i)}return i};o9.exports=gMe});var Tl=l(($Je,u9)=>{var xMe=function(e,t,i,r){i===void 0&&(i=!1),r===void 0&&(r=[]);for(var s=e.x3-e.x1,n=e.y3-e.y1,a=e.x2-e.x1,o=e.y2-e.y1,h=s*s+n*n,u=s*a+n*o,f=a*a+o*o,d=h*f-u*u,v=d===0?0:1/d,c,p,m,g,x,T,E=e.x1,R=e.y1,y=0;y<t.length&&(m=t[y].x-E,g=t[y].y-R,x=s*m+n*g,T=a*m+o*g,c=(f*x-u*T)*v,p=(h*T-u*x)*v,!(c>=0&&p>=0&&c+p<1&&(r.push({x:t[y].x,y:t[y].y}),i)));y++);return r};u9.exports=xMe});var Wm=l((eQe,l9)=>{var TMe=function(e,t){return t===void 0&&(t=[]),t.push({x:e.x,y:e.y}),t.push({x:e.right,y:e.y}),t.push({x:e.right,y:e.bottom}),t.push({x:e.x,y:e.bottom}),t};l9.exports=TMe});var Hm=l((tQe,f9)=>{var di=$s(),la=zr(),EMe=Tl(),yMe=Wm(),SMe=function(e,t){if(t.left>e.right||t.right<e.left||t.top>e.bottom||t.bottom<e.top)return!1;var i=t.getLineA(),r=t.getLineB(),s=t.getLineC();if(la(e,i.x1,i.y1)||la(e,i.x2,i.y2)||la(e,r.x1,r.y1)||la(e,r.x2,r.y2)||la(e,s.x1,s.y1)||la(e,s.x2,s.y2))return!0;var n=e.getLineA(),a=e.getLineB(),o=e.getLineC(),h=e.getLineD();if(di(i,n)||di(i,a)||di(i,o)||di(i,h)||di(r,n)||di(r,a)||di(r,o)||di(r,h)||di(s,n)||di(s,a)||di(s,o)||di(s,h))return!0;var u=yMe(e),f=EMe(t,u,!0);return f.length>0};f9.exports=SMe});var v9=l((iQe,d9)=>{var CMe=Hm(),jm=gl(),RMe=function(e,t,i){if(i===void 0&&(i=[]),CMe(e,t)){var r=t.getLineA(),s=t.getLineB(),n=t.getLineC();jm(r,e,i),jm(s,e,i),jm(n,e,i)}return i};d9.exports=RMe});var Zm=l((rQe,c9)=>{var Km=fl(),_Me=ia(),wMe=function(e,t){return e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top?!1:!!(_Me(e,t.x,t.y)||Km(e.getLineA(),t)||Km(e.getLineB(),t)||Km(e.getLineC(),t))};c9.exports=wMe});var m9=l((sQe,p9)=>{var Jm=dl(),PMe=Zm(),AMe=function(e,t,i){if(i===void 0&&(i=[]),PMe(e,t)){var r=e.getLineA(),s=e.getLineB(),n=e.getLineC();Jm(r,t,i),Jm(s,t,i),Jm(n,t,i)}return i};p9.exports=AMe});var $m=l((nQe,g9)=>{var Qm=$s(),bMe=function(e,t){return!!(e.contains(t.x1,t.y1)||e.contains(t.x2,t.y2)||Qm(e.getLineA(),t)||Qm(e.getLineB(),t)||Qm(e.getLineC(),t))};g9.exports=bMe});var ig=l((aQe,x9)=>{var eg=j(),MMe=$m(),tg=$s(),qMe=function(e,t,i){if(i===void 0&&(i=[]),MMe(e,t))for(var r=e.getLineA(),s=e.getLineB(),n=e.getLineC(),a=[new eg,new eg,new eg],o=[tg(r,t,a[0]),tg(s,t,a[1]),tg(n,t,a[2])],h=0;h<3;h++)o[h]&&i.push(a[h]);return i};x9.exports=qMe});var rg=l((oQe,T9)=>{var OMe=function(e,t){return t===void 0&&(t=[]),t.push({x:e.x1,y:e.y1}),t.push({x:e.x2,y:e.y2}),t.push({x:e.x3,y:e.y3}),t};T9.exports=OMe});var sg=l((hQe,S9)=>{var E9=Tl(),y9=rg(),Cr=$s(),LMe=function(e,t){if(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top)return!1;var i=e.getLineA(),r=e.getLineB(),s=e.getLineC(),n=t.getLineA(),a=t.getLineB(),o=t.getLineC();if(Cr(i,n)||Cr(i,a)||Cr(i,o)||Cr(r,n)||Cr(r,a)||Cr(r,o)||Cr(s,n)||Cr(s,a)||Cr(s,o))return!0;var h=y9(e),u=E9(t,h,!0);return!!(u.length>0||(h=y9(t),u=E9(e,h,!0),u.length>0))};S9.exports=LMe});var R9=l((uQe,C9)=>{var FMe=sg(),ng=ig(),NMe=function(e,t,i){if(i===void 0&&(i=[]),FMe(e,t)){var r=t.getLineA(),s=t.getLineB(),n=t.getLineC();ng(e,r,i),ng(e,s,i),ng(e,n,i)}return i};C9.exports=NMe});var ag=l((lQe,_9)=>{var GMe=function(e,t,i){i===void 0&&(i=1);var r=t.x1,s=t.y1,n=t.x2,a=t.y2,o=e.x,h=e.y,u=(n-r)*(n-r)+(a-s)*(a-s);if(u===0)return!1;var f=((o-r)*(n-r)+(h-s)*(a-s))/u;if(f<0)return Math.sqrt((r-o)*(r-o)+(s-h)*(s-h))<=i;if(f>=0&&f<=1){var d=((s-h)*(n-r)-(r-o)*(a-s))/u;return Math.abs(d)*Math.sqrt(u)<=i}else return Math.sqrt((n-o)*(n-o)+(a-h)*(a-h))<=i};_9.exports=GMe});var P9=l((fQe,w9)=>{var DMe=ag(),IMe=function(e,t){if(!DMe(e,t))return!1;var i=Math.min(t.x1,t.x2),r=Math.max(t.x1,t.x2),s=Math.min(t.y1,t.y2),n=Math.max(t.y1,t.y2);return e.x>=i&&e.x<=r&&e.y>=s&&e.y<=n};w9.exports=IMe});var b9=l((dQe,A9)=>{var BMe=function(e,t,i,r,s,n){return n===void 0&&(n=0),!(t>e.right+n||i<e.left-n||r>e.bottom+n||s<e.top-n)};A9.exports=BMe});var q9=l((vQe,M9)=>{M9.exports={CircleToCircle:Im(),CircleToRectangle:hl(),GetCircleToCircle:k4(),GetCircleToRectangle:W4(),GetLineToCircle:dl(),GetLineToLine:Um(),GetLineToPoints:km(),GetLineToPolygon:zm(),GetLineToRectangle:gl(),GetRaysFromPointToPolygon:r9(),GetRectangleIntersection:a9(),GetRectangleToRectangle:h9(),GetRectangleToTriangle:v9(),GetTriangleToCircle:m9(),GetTriangleToLine:ig(),GetTriangleToTriangle:R9(),LineToCircle:fl(),LineToLine:$s(),LineToRectangle:Xm(),PointToLine:ag(),PointToLineSegment:P9(),RectangleToRectangle:yo(),RectangleToTriangle:Hm(),RectangleToValues:b9(),TriangleToCircle:Zm(),TriangleToLine:$m(),TriangleToTriangle:sg()}});var en=l((cQe,O9)=>{var VMe=function(e){return Math.atan2(e.y2-e.y1,e.x2-e.x1)};O9.exports=VMe});var F9=l((pQe,L9)=>{var UMe=function(e,t,i){var r=t-(e.x1+e.x2)/2,s=i-(e.y1+e.y2)/2;return e.x1+=r,e.y1+=s,e.x2+=r,e.y2+=s,e};L9.exports=UMe});var G9=l((mQe,N9)=>{var kMe=Ri(),zMe=function(e){return new kMe(e.x1,e.y1,e.x2,e.y2)};N9.exports=zMe});var I9=l((gQe,D9)=>{var XMe=function(e,t){return t.setTo(e.x1,e.y1,e.x2,e.y2)};D9.exports=XMe});var V9=l((xQe,B9)=>{var YMe=function(e,t){return e.x1===t.x1&&e.y1===t.y1&&e.x2===t.x2&&e.y2===t.y2};B9.exports=YMe});var k9=l((TQe,U9)=>{var WMe=lr(),HMe=function(e,t,i){i===void 0&&(i=t);var r=WMe(e),s=e.x2-e.x1,n=e.y2-e.y1;return t&&(e.x1=e.x1-s/r*t,e.y1=e.y1-n/r*t),i&&(e.x2=e.x2+s/r*i,e.y2=e.y2+n/r*i),e};U9.exports=HMe});var W9=l((EQe,Y9)=>{var z9=Gf(),jMe=os(),X9=j(),KMe=function(e,t,i,r,s){r===void 0&&(r=0),s===void 0&&(s=[]);var n=[],a=e.x1,o=e.y1,h=e.x2-a,u=e.y2-o,f=jMe(t,s),d,v,c=i-1;for(d=0;d<c;d++)v=f(d/c),n.push(new X9(a+h*v,o+u*v));if(v=f(1),n.push(new X9(a+h*v,o+u*v)),r>0){var p=n[0],m=[p];for(d=1;d<n.length-1;d++){var g=n[d];z9(p,g)>=r&&(m.push(g),p=g)}var x=n[n.length-1];return z9(p,x)<r&&m.pop(),m.push(x),m}else return n};Y9.exports=KMe});var j9=l((yQe,H9)=>{var ZMe=j(),JMe=function(e,t){return t===void 0&&(t=new ZMe),t.x=(e.x1+e.x2)/2,t.y=(e.y1+e.y2)/2,t};H9.exports=JMe});var Z9=l((SQe,K9)=>{var QMe=j(),$Me=function(e,t,i){i===void 0&&(i=new QMe);var r=e.x1,s=e.y1,n=e.x2,a=e.y2,o=(n-r)*(n-r)+(a-s)*(a-s);if(o===0)return i;var h=((t.x-r)*(n-r)+(t.y-s)*(a-s))/o;return i.x=r+h*(n-r),i.y=s+h*(a-s),i};K9.exports=$Me});var Q9=l((CQe,J9)=>{var eqe=we(),tqe=en(),iqe=j(),rqe=function(e,t){t===void 0&&(t=new iqe);var i=tqe(e)-eqe.TAU;return t.x=Math.cos(i),t.y=Math.sin(i),t};J9.exports=rqe});var e6=l((RQe,$9)=>{var sqe=function(e,t){var i=e.x1,r=e.y1,s=e.x2,n=e.y2,a=(s-i)*(s-i)+(n-r)*(n-r);if(a===0)return!1;var o=((r-t.y)*(s-i)-(i-t.x)*(n-r))/a;return Math.abs(o)*Math.sqrt(a)};$9.exports=sqe});var i6=l((_Qe,t6)=>{var nqe=function(e){return Math.abs(e.y1-e.y2)};t6.exports=nqe});var og=l((wQe,r6)=>{var aqe=we(),oqe=Lr(),hqe=en(),uqe=function(e){var t=hqe(e)-aqe.TAU;return oqe(t,-Math.PI,Math.PI)};r6.exports=uqe});var n6=l((PQe,s6)=>{var lqe=we(),fqe=en(),dqe=function(e){return Math.cos(fqe(e)-lqe.TAU)};s6.exports=dqe});var o6=l((AQe,a6)=>{var vqe=we(),cqe=en(),pqe=function(e){return Math.sin(cqe(e)-vqe.TAU)};a6.exports=pqe});var u6=l((bQe,h6)=>{var mqe=function(e,t,i){return e.x1+=t,e.y1+=i,e.x2+=t,e.y2+=i,e};h6.exports=mqe});var f6=l((MQe,l6)=>{var gqe=function(e){return-((e.x2-e.x1)/(e.y2-e.y1))};l6.exports=gqe});var v6=l((qQe,d6)=>{var xqe=en(),Tqe=og(),Eqe=function(e,t){return 2*Tqe(t)-Math.PI-xqe(e)};d6.exports=Eqe});var El=l((OQe,c6)=>{var yqe=function(e,t,i,r){var s=Math.cos(r),n=Math.sin(r),a=e.x1-t,o=e.y1-i;return e.x1=a*s-o*n+t,e.y1=a*n+o*s+i,a=e.x2-t,o=e.y2-i,e.x2=a*s-o*n+t,e.y2=a*n+o*s+i,e};c6.exports=yqe});var m6=l((LQe,p6)=>{var Sqe=El(),Cqe=function(e,t){var i=(e.x1+e.x2)/2,r=(e.y1+e.y2)/2;return Sqe(e,i,r,t)};p6.exports=Cqe});var x6=l((FQe,g6)=>{var Rqe=El(),_qe=function(e,t,i){return Rqe(e,t.x,t.y,i)};g6.exports=_qe});var E6=l((NQe,T6)=>{var wqe=function(e,t,i,r,s){return e.x1=t,e.y1=i,e.x2=t+Math.cos(r)*s,e.y2=i+Math.sin(r)*s,e};T6.exports=wqe});var S6=l((GQe,y6)=>{var Pqe=function(e){return(e.y2-e.y1)/(e.x2-e.x1)};y6.exports=Pqe});var R6=l((DQe,C6)=>{var Aqe=function(e){return Math.abs(e.x1-e.x2)};C6.exports=Aqe});var w6=l((IQe,_6)=>{var ae=Ri();ae.Angle=en();ae.BresenhamPoints=Qv();ae.CenterOn=F9();ae.Clone=G9();ae.CopyFrom=I9();ae.Equals=V9();ae.Extend=k9();ae.GetEasedPoints=W9();ae.GetMidPoint=j9();ae.GetNearestPoint=Z9();ae.GetNormal=Q9();ae.GetPoint=Bv();ae.GetPoints=Mh();ae.GetShortestDistance=e6();ae.Height=i6();ae.Length=lr();ae.NormalAngle=og();ae.NormalX=n6();ae.NormalY=o6();ae.Offset=u6();ae.PerpSlope=f6();ae.Random=qh();ae.ReflectAngle=v6();ae.Rotate=m6();ae.RotateAroundPoint=x6();ae.RotateAroundXY=El();ae.SetToAngle=E6();ae.Slope=S6();ae.Width=R6();_6.exports=ae});var O6=l((BQe,q6)=>{var P6=na(),Be=X(),bqe=hr(),A6=si(),fa=aa(),b6=new A6,M6=new A6,tn=new bqe,Mqe=function(e){var t=Be(e,"mesh"),i=Be(e,"texture",null),r=Be(e,"frame"),s=Be(e,"width",1),n=Be(e,"height",s),a=Be(e,"widthSegments",1),o=Be(e,"heightSegments",a),h=Be(e,"x",0),u=Be(e,"y",0),f=Be(e,"z",0),d=Be(e,"rotateX",0),v=Be(e,"rotateY",0),c=Be(e,"rotateZ",0),p=Be(e,"zIsUp",!0),m=Be(e,"isOrtho",t?t.dirtyCache[11]:!1),g=Be(e,"colors",[16777215]),x=Be(e,"alphas",[1]),T=Be(e,"tile",!1),E=Be(e,"flipY",!1),R=Be(e,"width",null),y={faces:[],verts:[]};if(b6.set(h,u,f),M6.set(d,v,c),tn.fromRotationXYTranslation(M6,b6,p),!i&&t)i=t.texture;else if(t&&typeof i=="string")i=t.scene.sys.textures.get(i);else return y;var C=i.get(r);!R&&m&&i&&t&&(s=C.width/t.height,n=C.height/t.height);var S=s/2,w=n/2,P=Math.floor(a),A=Math.floor(o),M=P+1,N=A+1,O=s/P,D=n/A,b=[],q=[],G,L,F=0,V=1,Y=0,z=1;C&&(F=C.u0,V=C.u1,E?(Y=C.v1,z=C.v0):(Y=C.v0,z=C.v1));var Z=V-F,U=z-Y;for(L=0;L<N;L++){var H=L*D-w;for(G=0;G<M;G++){var at=G*O-S;q.push(at,-H);var Te=F+Z*(G/P),Bt=Y+U*(L/A);b.push(Te,Bt)}}Array.isArray(g)||(g=[g]),Array.isArray(x)||(x=[x]);var Ue=0,ot=0;for(L=0;L<A;L++)for(G=0;G<P;G++){var xt=(G+M*L)*2,re=(G+M*(L+1))*2,ht=(G+1+M*(L+1))*2,_e=(G+1+M*L)*2,ti=g[ot],bt=x[Ue],$e=new fa(q[xt],q[xt+1],0,b[xt],b[xt+1],ti,bt).transformMat4(tn),Vt=new fa(q[re],q[re+1],0,b[re],b[re+1],ti,bt).transformMat4(tn),ii=new fa(q[_e],q[_e+1],0,b[_e],b[_e+1],ti,bt).transformMat4(tn),Ee=new fa(q[re],q[re+1],0,b[re],b[re+1],ti,bt).transformMat4(tn),oe=new fa(q[ht],q[ht+1],0,b[ht],b[ht+1],ti,bt).transformMat4(tn),Tt=new fa(q[_e],q[_e+1],0,b[_e],b[_e+1],ti,bt).transformMat4(tn);T&&($e.setUVs(F,z),Vt.setUVs(F,Y),ii.setUVs(V,z),Ee.setUVs(F,Y),oe.setUVs(V,Y),Tt.setUVs(V,z)),ot++,ot===g.length&&(ot=0),Ue++,Ue===x.length&&(Ue=0),y.verts.push($e,Vt,ii,Ee,oe,Tt),y.faces.push(new P6($e,Vt,ii),new P6(Ee,oe,Tt))}return t&&(t.faces=t.faces.concat(y.faces),t.vertices=t.vertices.concat(y.verts)),y};q6.exports=Mqe});var ug=l((VQe,N6)=>{var L6=!0,F6="untitled",So="",hg="";function qqe(e){var t=e.indexOf("#");return t>-1?e.substring(0,t):e}function Co(e){return e.models.length===0&&e.models.push({faces:[],name:F6,textureCoords:[],vertexNormals:[],vertices:[]}),So="",e.models[e.models.length-1]}function Oqe(e,t){var i=e.length>=2?e[1]:F6;t.models.push({faces:[],name:i,textureCoords:[],vertexNormals:[],vertices:[]}),So=""}function Lqe(e){e.length===2&&(So=e[1])}function Fqe(e,t){var i=e.length,r=i>=2?parseFloat(e[1]):0,s=i>=3?parseFloat(e[2]):0,n=i>=4?parseFloat(e[3]):0;Co(t).vertices.push({x:r,y:s,z:n})}function Nqe(e,t){var i=e.length,r=i>=2?parseFloat(e[1]):0,s=i>=3?parseFloat(e[2]):0,n=i>=4?parseFloat(e[3]):0;isNaN(r)&&(r=0),isNaN(s)&&(s=0),isNaN(n)&&(n=0),L6&&(s=1-s),Co(t).textureCoords.push({u:r,v:s,w:n})}function Gqe(e,t){var i=e.length,r=i>=2?parseFloat(e[1]):0,s=i>=3?parseFloat(e[2]):0,n=i>=4?parseFloat(e[3]):0;Co(t).vertexNormals.push({x:r,y:s,z:n})}function Dqe(e,t){var i=e.length-1;if(!(i<3)){for(var r={group:So,material:hg,vertices:[]},s=0;s<i;s++){var n=e[s+1],a=n.split("/"),o=a.length;if(!(o<1||o>3)){var h=0,u=0,f=0;h=parseInt(a[0],10),o>1&&a[1]!==""&&(u=parseInt(a[1],10)),o>2&&(f=parseInt(a[2],10)),h!==0&&(h<0&&(h=Co(t).vertices.length+1+h),u-=1,h-=1,f-=1,r.vertices.push({textureCoordsIndex:u,vertexIndex:h,vertexNormalIndex:f}))}}Co(t).faces.push(r)}}function Iqe(e,t){e.length>=2&&t.materialLibraries.push(e[1])}function Bqe(e){e.length>=2&&(hg=e[1])}var Vqe=function(e,t){t===void 0&&(t=!0),L6=t;var i={materials:{},materialLibraries:[],models:[]};So="",hg="";for(var r=e.split(`
`),s=0;s<r.length;s++){var n=qqe(r[s]),a=n.replace(/\s\s+/g," ").trim().split(" ");switch(a[0].toLowerCase()){case"o":Oqe(a,i);break;case"g":Lqe(a);break;case"v":Fqe(a,i);break;case"vt":Nqe(a,i);break;case"vn":Gqe(a,i);break;case"f":Dqe(a,i);break;case"mtllib":Iqe(a,i);break;case"usemtl":Bqe(a);break}}return i};N6.exports=Vqe});var lg=l((UQe,G6)=>{var Uqe=xn(),kqe=function(e){for(var t={},i=e.split(`
`),r="",s=0;s<i.length;s++){var n=i[s].trim();if(!(n.indexOf("#")===0||n==="")){var a=n.replace(/\s\s+/g," ").trim().split(" ");switch(a[0].toLowerCase()){case"newmtl":{r=a[1];break}case"kd":{var o=Math.floor(a[1]*255),h=a.length>=2?Math.floor(a[2]*255):o,u=a.length>=3?Math.floor(a[3]*255):o;t[r]=Uqe(o,h,u);break}}}}return t};G6.exports=kqe});var I6=l((kQe,D6)=>{var zqe=function(e,t,i,r){var s,n;if(i===void 0&&r===void 0){var a=e.getInCenter();s=a.x,n=a.y}var o=Math.cos(t),h=Math.sin(t),u=e.vertex1,f=e.vertex2,d=e.vertex3,v=u.x-s,c=u.y-n;u.set(v*o-c*h+s,v*h+c*o+n),v=f.x-s,c=f.y-n,f.set(v*o-c*h+s,v*h+c*o+n),v=d.x-s,c=d.y-n,d.set(v*o-c*h+s,v*h+c*o+n)};D6.exports=zqe});var V6=l((zQe,B6)=>{var Xqe={Face:na(),GenerateGridVerts:O6(),GenerateObjVerts:Om(),GenerateVerts:Mm(),ParseObj:ug(),ParseObjMaterial:lg(),RotateFace:I6(),Vertex:aa()};B6.exports=Xqe});var k6=l((XQe,U6)=>{var Yqe=function(e){return e.setTo(Math.ceil(e.x),Math.ceil(e.y))};U6.exports=Yqe});var X6=l((YQe,z6)=>{var Wqe=j(),Hqe=function(e){return new Wqe(e.x,e.y)};z6.exports=Hqe});var W6=l((WQe,Y6)=>{var jqe=function(e,t){return t.setTo(e.x,e.y)};Y6.exports=jqe});var j6=l((HQe,H6)=>{var Kqe=function(e,t){return e.x===t.x&&e.y===t.y};H6.exports=Kqe});var Z6=l((jQe,K6)=>{var Zqe=function(e){return e.setTo(Math.floor(e.x),Math.floor(e.y))};K6.exports=Zqe});var Q6=l((KQe,J6)=>{var Jqe=j(),Qqe=function(e,t){if(t===void 0&&(t=new Jqe),!Array.isArray(e))throw new Error("GetCentroid points argument must be an array");var i=e.length;if(i<1)throw new Error("GetCentroid points array must not be empty");if(i===1)t.x=e[0].x,t.y=e[0].y;else{for(var r=0;r<i;r++)t.x+=e[r].x,t.y+=e[r].y;t.x/=i,t.y/=i}return t};J6.exports=Qqe});var fg=l((ZQe,$6)=>{var $qe=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)};$6.exports=$qe});var dg=l((JQe,ej)=>{var eOe=function(e){return e.x*e.x+e.y*e.y};ej.exports=eOe});var ij=l((QQe,tj)=>{var tOe=ye(),iOe=function(e,t){t===void 0&&(t=new tOe);for(var i=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY,a=0;a<e.length;a++){var o=e[a];o.x>i&&(i=o.x),o.x<r&&(r=o.x),o.y>s&&(s=o.y),o.y<n&&(n=o.y)}return t.x=r,t.y=n,t.width=i-r,t.height=s-n,t};tj.exports=iOe});var sj=l(($Qe,rj)=>{var rOe=j(),sOe=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=new rOe),r.x=e.x+(t.x-e.x)*i,r.y=e.y+(t.y-e.y)*i,r};rj.exports=sOe});var aj=l((e$e,nj)=>{var nOe=function(e){return e.setTo(e.y,e.x)};nj.exports=nOe});var hj=l((t$e,oj)=>{var aOe=j(),oOe=function(e,t){return t===void 0&&(t=new aOe),t.setTo(-e.x,-e.y)};oj.exports=oOe});var lj=l((i$e,uj)=>{var hOe=j(),uOe=dg(),lOe=function(e,t,i){i===void 0&&(i=new hOe);var r=e.x*t.x+e.y*t.y,s=r/uOe(t);return s!==0&&(i.x=s*t.x,i.y=s*t.y),i};uj.exports=lOe});var dj=l((r$e,fj)=>{var fOe=j(),dOe=function(e,t,i){i===void 0&&(i=new fOe);var r=e.x*t.x+e.y*t.y;return r!==0&&(i.x=r*t.x,i.y=r*t.y),i};fj.exports=dOe});var cj=l((s$e,vj)=>{var vOe=fg(),cOe=function(e,t){if(e.x!==0||e.y!==0){var i=vOe(e);e.x/=i,e.y/=i}return e.x*=t,e.y*=t,e};vj.exports=cOe});var mj=l((n$e,pj)=>{var gt=j();gt.Ceil=k6();gt.Clone=X6();gt.CopyFrom=W6();gt.Equals=j6();gt.Floor=Z6();gt.GetCentroid=Q6();gt.GetMagnitude=fg();gt.GetMagnitudeSq=dg();gt.GetRectangleFromPoints=ij();gt.Interpolate=sj();gt.Invert=aj();gt.Negative=hj();gt.Project=lj();gt.ProjectUnit=dj();gt.SetMagnitude=cj();pj.exports=gt});var xj=l((a$e,gj)=>{var pOe=il(),mOe=function(e){return new pOe(e.points)};gj.exports=mOe});var Ej=l((o$e,Tj)=>{var gOe=tl(),xOe=function(e,t){return gOe(e,t.x,t.y)};Tj.exports=xOe});var Sj=l((h$e,yj)=>{var TOe=function(e,t){t===void 0&&(t=[]);for(var i=0;i<e.points.length;i++)t.push(e.points[i].x),t.push(e.points[i].y);return t};yj.exports=TOe});var Rj=l((u$e,Cj)=>{var EOe=function(e){return e.points.reverse(),e};Cj.exports=EOe});var wj=l((l$e,_j)=>{function yOe(e,t){var i=e.x-t.x,r=e.y-t.y;return i*i+r*r}function SOe(e,t,i){var r=t.x,s=t.y,n=i.x-r,a=i.y-s;if(n!==0||a!==0){var o=((e.x-r)*n+(e.y-s)*a)/(n*n+a*a);o>1?(r=i.x,s=i.y):o>0&&(r+=n*o,s+=a*o)}return n=e.x-r,a=e.y-s,n*n+a*a}function COe(e,t){for(var i=e[0],r=[i],s,n=1,a=e.length;n<a;n++)s=e[n],yOe(s,i)>t&&(r.push(s),i=s);return i!==s&&r.push(s),r}function vg(e,t,i,r,s){for(var n=r,a,o=t+1;o<i;o++){var h=SOe(e[o],e[t],e[i]);h>n&&(a=o,n=h)}n>r&&(a-t>1&&vg(e,t,a,r,s),s.push(e[a]),i-a>1&&vg(e,a,i,r,s))}function ROe(e,t){var i=e.length-1,r=[e[0]];return vg(e,0,i,t,r),r.push(e[i]),r}var _Oe=function(e,t,i){t===void 0&&(t=1),i===void 0&&(i=!1);var r=e.points;if(r.length>2){var s=t*t;i||(r=COe(r,s)),e.setTo(ROe(r,s))}return e};_j.exports=_Oe});var Aj=l((f$e,Pj)=>{var wOe=function(e,t,i){for(var r=e.points,s=0;s<r.length;s++)r[s].x+=t,r[s].y+=i;return e};Pj.exports=wOe});var Mj=l((d$e,bj)=>{var Qt=il();Qt.Clone=xj();Qt.Contains=tl();Qt.ContainsPoint=Ej();Qt.Earcut=Di();Qt.GetAABB=um();Qt.GetNumberArray=Sj();Qt.GetPoints=fm();Qt.Perimeter=lm();Qt.Reverse=Rj();Qt.Simplify=wj();Qt.Smooth=dm();Qt.Translate=Aj();bj.exports=Qt});var Oj=l((v$e,qj)=>{var POe=function(e){return e.width*e.height};qj.exports=POe});var Fj=l((c$e,Lj)=>{var AOe=function(e){return e.x=Math.ceil(e.x),e.y=Math.ceil(e.y),e};Lj.exports=AOe});var Gj=l((p$e,Nj)=>{var bOe=function(e){return e.x=Math.ceil(e.x),e.y=Math.ceil(e.y),e.width=Math.ceil(e.width),e.height=Math.ceil(e.height),e};Nj.exports=bOe});var Ij=l((m$e,Dj)=>{var MOe=ye(),qOe=function(e){return new MOe(e.x,e.y,e.width,e.height)};Dj.exports=qOe});var Vj=l((g$e,Bj)=>{var OOe=zr(),LOe=function(e,t){return OOe(e,t.x,t.y)};Bj.exports=LOe});var cg=l((x$e,Uj)=>{var FOe=function(e,t){return t.width*t.height>e.width*e.height?!1:t.x>e.x&&t.x<e.right&&t.right>e.x&&t.right<e.right&&t.y>e.y&&t.y<e.bottom&&t.bottom>e.y&&t.bottom<e.bottom};Uj.exports=FOe});var zj=l((T$e,kj)=>{var NOe=function(e,t){return t.setTo(e.x,e.y,e.width,e.height)};kj.exports=NOe});var Yj=l((E$e,Xj)=>{var GOe=function(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height};Xj.exports=GOe});var yl=l((y$e,Wj)=>{var DOe=function(e){return e.height===0?NaN:e.width/e.height};Wj.exports=DOe});var Kj=l((S$e,jj)=>{var Hj=yl(),IOe=function(e,t){var i=Hj(e);return i<Hj(t)?e.setSize(t.height*i,t.height):e.setSize(t.width,t.width/i),e.setPosition(t.centerX-e.width/2,t.centerY-e.height/2)};jj.exports=IOe});var Qj=l((C$e,Jj)=>{var Zj=yl(),BOe=function(e,t){var i=Zj(e);return i>Zj(t)?e.setSize(t.height*i,t.height):e.setSize(t.width,t.width/i),e.setPosition(t.centerX-e.width/2,t.centerY-e.height/2)};Jj.exports=BOe});var e8=l((R$e,$j)=>{var VOe=function(e){return e.x=Math.floor(e.x),e.y=Math.floor(e.y),e};$j.exports=VOe});var i8=l((_$e,t8)=>{var UOe=function(e){return e.x=Math.floor(e.x),e.y=Math.floor(e.y),e.width=Math.floor(e.width),e.height=Math.floor(e.height),e};t8.exports=UOe});var n8=l((w$e,s8)=>{var kOe=ye(),r8=we(),zOe=function(e,t){if(t===void 0&&(t=new kOe),e.length===0)return t;for(var i=Number.MAX_VALUE,r=Number.MAX_VALUE,s=r8.MIN_SAFE_INTEGER,n=r8.MIN_SAFE_INTEGER,a,o,h,u=0;u<e.length;u++)a=e[u],Array.isArray(a)?(o=a[0],h=a[1]):(o=a.x,h=a.y),i=Math.min(i,o),r=Math.min(r,h),s=Math.max(s,o),n=Math.max(n,h);return t.x=i,t.y=r,t.width=s-i,t.height=n-r,t};s8.exports=zOe});var o8=l((P$e,a8)=>{var XOe=ye(),YOe=function(e,t,i,r,s){return s===void 0&&(s=new XOe),s.setTo(Math.min(e,i),Math.min(t,r),Math.abs(e-i),Math.abs(t-r))};a8.exports=YOe});var u8=l((A$e,h8)=>{var WOe=j(),HOe=function(e,t){return t===void 0&&(t=new WOe),t.x=e.centerX,t.y=e.centerY,t};h8.exports=HOe});var f8=l((b$e,l8)=>{var jOe=j(),KOe=function(e,t){return t===void 0&&(t=new jOe),t.x=e.width,t.y=e.height,t};l8.exports=KOe});var v8=l((M$e,d8)=>{var ZOe=Uh(),JOe=function(e,t,i){var r=e.centerX,s=e.centerY;return e.setSize(e.width+t*2,e.height+i*2),ZOe(e,r,s)};d8.exports=JOe});var p8=l((q$e,c8)=>{var QOe=ye(),$Oe=yo(),eLe=function(e,t,i){return i===void 0&&(i=new QOe),$Oe(e,t)?(i.x=Math.max(e.x,t.x),i.y=Math.max(e.y,t.y),i.width=Math.min(e.right,t.right)-i.x,i.height=Math.min(e.bottom,t.bottom)-i.y):i.setEmpty(),i};c8.exports=eLe});var g8=l((O$e,m8)=>{var tLe=function(e,t){for(var i=e.x,r=e.right,s=e.y,n=e.bottom,a=0;a<t.length;a++)i=Math.min(i,t[a].x),r=Math.max(r,t[a].x),s=Math.min(s,t[a].y),n=Math.max(n,t[a].y);return e.x=i,e.y=s,e.width=r-i,e.height=n-s,e};m8.exports=tLe});var T8=l((L$e,x8)=>{var iLe=function(e,t){var i=Math.min(e.x,t.x),r=Math.max(e.right,t.right);e.x=i,e.width=r-i;var s=Math.min(e.y,t.y),n=Math.max(e.bottom,t.bottom);return e.y=s,e.height=n-s,e};x8.exports=iLe});var y8=l((F$e,E8)=>{var rLe=function(e,t,i){var r=Math.min(e.x,t),s=Math.max(e.right,t);e.x=r,e.width=s-r;var n=Math.min(e.y,i),a=Math.max(e.bottom,i);return e.y=n,e.height=a-n,e};E8.exports=rLe});var C8=l((N$e,S8)=>{var sLe=function(e,t,i){return e.x+=t,e.y+=i,e};S8.exports=sLe});var _8=l((G$e,R8)=>{var nLe=function(e,t){return e.x+=t.x,e.y+=t.y,e};R8.exports=nLe});var P8=l((D$e,w8)=>{var aLe=function(e,t){return e.x<t.right&&e.right>t.x&&e.y<t.bottom&&e.bottom>t.y};w8.exports=aLe});var b8=l((I$e,A8)=>{var oLe=j(),hLe=or(),uLe=function(e,t,i){i===void 0&&(i=new oLe),t=hLe(t);var r=Math.sin(t),s=Math.cos(t),n=s>0?e.width/2:e.width/-2,a=r>0?e.height/2:e.height/-2;return Math.abs(n*r)<Math.abs(a*s)?a=n*r/s:n=a*s/r,i.x=n+e.centerX,i.y=a+e.centerY,i};A8.exports=uLe});var q8=l((B$e,M8)=>{var lLe=eh(),fLe=cg(),dLe=j(),vLe=function(e,t,i){if(i===void 0&&(i=new dLe),fLe(e,t))switch(lLe(0,3)){case 0:i.x=e.x+Math.random()*(t.right-e.x),i.y=e.y+Math.random()*(t.top-e.y);break;case 1:i.x=t.x+Math.random()*(e.right-t.x),i.y=t.bottom+Math.random()*(e.bottom-t.bottom);break;case 2:i.x=e.x+Math.random()*(t.x-e.x),i.y=t.y+Math.random()*(e.bottom-t.y);break;case 3:i.x=t.right+Math.random()*(e.right-t.right),i.y=e.y+Math.random()*(t.bottom-e.y);break}return i};M8.exports=vLe});var L8=l((V$e,O8)=>{var cLe=function(e,t){return e.width===t.width&&e.height===t.height};O8.exports=cLe});var N8=l((U$e,F8)=>{var pLe=function(e,t,i){return i===void 0&&(i=t),e.width*=t,e.height*=i,e};F8.exports=pLe});var D8=l((k$e,G8)=>{var K=ye();K.Area=Oj();K.Ceil=Fj();K.CeilAll=Gj();K.CenterOn=Uh();K.Clone=Ij();K.Contains=zr();K.ContainsPoint=Vj();K.ContainsRect=cg();K.CopyFrom=zj();K.Decompose=Wm();K.Equals=Yj();K.FitInside=Kj();K.FitOutside=Qj();K.Floor=e8();K.FloorAll=i8();K.FromPoints=n8();K.FromXY=o8();K.GetAspectRatio=yl();K.GetCenter=u8();K.GetPoint=bh();K.GetPoints=Iv();K.GetSize=f8();K.Inflate=v8();K.Intersection=p8();K.MarchingAnts=Jv();K.MergePoints=g8();K.MergeRect=T8();K.MergeXY=y8();K.Offset=C8();K.OffsetPoint=_8();K.Overlaps=P8();K.Perimeter=ka();K.PerimeterPoint=b8();K.Random=Oh();K.RandomOutside=q8();K.SameDimensions=L8();K.Scale=N8();K.Union=Rp();G8.exports=K});var B8=l((z$e,I8)=>{var mLe=function(e){var t=e.x1,i=e.y1,r=e.x2,s=e.y2,n=e.x3,a=e.y3;return Math.abs(((n-t)*(s-i)-(r-t)*(a-i))/2)};I8.exports=mLe});var U8=l((X$e,V8)=>{var gLe=fs(),xLe=function(e,t,i){var r=i*(Math.sqrt(3)/2),s=e,n=t,a=e+i/2,o=t+r,h=e-i/2,u=t+r;return new gLe(s,n,a,o,h,u)};V8.exports=xLe});var z8=l((Y$e,k8)=>{var TLe=Di(),ELe=fs(),yLe=function(e,t,i,r,s){t===void 0&&(t=null),i===void 0&&(i=1),r===void 0&&(r=1),s===void 0&&(s=[]);for(var n=TLe(e,t),a,o,h,u,f,d,v,c,p,m=0;m<n.length;m+=3)a=n[m],o=n[m+1],h=n[m+2],u=e[a*2]*i,f=e[a*2+1]*r,d=e[o*2]*i,v=e[o*2+1]*r,c=e[h*2]*i,p=e[h*2+1]*r,s.push(new ELe(u,f,d,v,c,p));return s};k8.exports=yLe});var Y8=l((W$e,X8)=>{var SLe=fs(),CLe=function(e,t,i,r){r===void 0&&(r=i);var s=e,n=t,a=e,o=t-r,h=e+i,u=t;return new SLe(s,n,a,o,h,u)};X8.exports=CLe});var pg=l((H$e,W8)=>{var RLe=j(),_Le=function(e,t){return t===void 0&&(t=new RLe),t.x=(e.x1+e.x2+e.x3)/3,t.y=(e.y1+e.y2+e.y3)/3,t};W8.exports=_Le});var mg=l((j$e,H8)=>{var wLe=function(e,t,i){return e.x1+=t,e.y1+=i,e.x2+=t,e.y2+=i,e.x3+=t,e.y3+=i,e};H8.exports=wLe});var K8=l((K$e,j8)=>{var PLe=pg(),ALe=mg(),bLe=function(e,t,i,r){r===void 0&&(r=PLe);var s=r(e),n=t-s.x,a=i-s.y;return ALe(e,n,a)};j8.exports=bLe});var J8=l((Z$e,Z8)=>{var MLe=le();function gg(e,t,i,r){return e*r-t*i}var qLe=function(e,t){t===void 0&&(t=new MLe);var i=e.x3,r=e.y3,s=e.x1-i,n=e.y1-r,a=e.x2-i,o=e.y2-r,h=2*gg(s,n,a,o),u=gg(n,s*s+n*n,o,a*a+o*o),f=gg(s,s*s+n*n,a,a*a+o*o);return t.x=i-u/h,t.y=r+f/h,t};Z8.exports=qLe});var $8=l((J$e,Q8)=>{var OLe=kr(),LLe=function(e,t){t===void 0&&(t=new OLe);var i=e.x1,r=e.y1,s=e.x2,n=e.y2,a=e.x3,o=e.y3,h=s-i,u=n-r,f=a-i,d=o-r,v=h*(i+s)+u*(r+n),c=f*(i+a)+d*(r+o),p=2*(h*(o-n)-u*(a-s)),m,g;if(Math.abs(p)<1e-6){var x=Math.min(i,s,a),T=Math.min(r,n,o);m=(Math.max(i,s,a)-x)*.5,g=(Math.max(r,n,o)-T)*.5,t.x=x+m,t.y=T+g,t.radius=Math.sqrt(m*m+g*g)}else t.x=(d*v-u*c)/p,t.y=(h*c-f*v)/p,m=t.x-i,g=t.y-r,t.radius=Math.sqrt(m*m+g*g);return t};Q8.exports=LLe});var t7=l((Q$e,e7)=>{var FLe=fs(),NLe=function(e){return new FLe(e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)};e7.exports=NLe});var r7=l(($$e,i7)=>{var GLe=ia(),DLe=function(e,t){return GLe(e,t.x,t.y)};i7.exports=DLe});var n7=l((eet,s7)=>{var ILe=function(e,t){return t.setTo(e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)};s7.exports=ILe});var o7=l((tet,a7)=>{var BLe=function(e,t){return e.x1===t.x1&&e.y1===t.y1&&e.x2===t.x2&&e.y2===t.y2&&e.x3===t.x3&&e.y3===t.y3};a7.exports=BLe});var Tg=l((iet,h7)=>{var VLe=j();function xg(e,t,i,r){var s=e-i,n=t-r,a=s*s+n*n;return Math.sqrt(a)}var ULe=function(e,t){t===void 0&&(t=new VLe);var i=e.x1,r=e.y1,s=e.x2,n=e.y2,a=e.x3,o=e.y3,h=xg(a,o,s,n),u=xg(i,r,a,o),f=xg(s,n,i,r),d=h+u+f;return t.x=(i*h+s*u+a*f)/d,t.y=(r*h+n*u+o*f)/d,t};h7.exports=ULe});var l7=l((ret,u7)=>{var Eg=lr(),kLe=function(e){var t=e.getLineA(),i=e.getLineB(),r=e.getLineC();return Eg(t)+Eg(i)+Eg(r)};u7.exports=kLe});var Sl=l((set,f7)=>{var zLe=function(e,t,i,r){var s=Math.cos(r),n=Math.sin(r),a=e.x1-t,o=e.y1-i;return e.x1=a*s-o*n+t,e.y1=a*n+o*s+i,a=e.x2-t,o=e.y2-i,e.x2=a*s-o*n+t,e.y2=a*n+o*s+i,a=e.x3-t,o=e.y3-i,e.x3=a*s-o*n+t,e.y3=a*n+o*s+i,e};f7.exports=zLe});var v7=l((net,d7)=>{var XLe=Sl(),YLe=Tg(),WLe=function(e,t){var i=YLe(e);return XLe(e,i.x,i.y,t)};d7.exports=WLe});var p7=l((aet,c7)=>{var HLe=Sl(),jLe=function(e,t,i){return HLe(e,t.x,t.y,i)};c7.exports=jLe});var g7=l((oet,m7)=>{var ge=fs();ge.Area=B8();ge.BuildEquilateral=U8();ge.BuildFromPolygon=z8();ge.BuildRight=Y8();ge.CenterOn=K8();ge.Centroid=pg();ge.CircumCenter=J8();ge.CircumCircle=$8();ge.Clone=t7();ge.Contains=ia();ge.ContainsArray=Tl();ge.ContainsPoint=r7();ge.CopyFrom=n7();ge.Decompose=rg();ge.Equals=o7();ge.GetPoint=gm();ge.GetPoints=Tm();ge.InCenter=Tg();ge.Perimeter=l7();ge.Offset=mg();ge.Random=Bh();ge.Rotate=v7();ge.RotateAroundPoint=p7();ge.RotateAroundXY=Sl();m7.exports=ge});var T7=l((het,x7)=>{var KLe=ki(),ZLe=Fe(),yg={Circle:T4(),Ellipse:B4(),Intersects:q9(),Line:w6(),Mesh:V6(),Point:mj(),Polygon:Mj(),Rectangle:D8(),Triangle:g7()};yg=ZLe(!1,yg,KLe);x7.exports=yg});var Sg=l((uet,E7)=>{var JLe=function(e,t){return function(i,r,s,n){var a=e.getPixelAlpha(r,s,n.texture.key,n.frame.name);return a&&a>=t}};E7.exports=JLe});var Cg=l((fet,y7)=>{var QLe=function(e,t,i){return{gameObject:e,enabled:!0,alwaysEnabled:!1,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:t,hitAreaCallback:i,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}};y7.exports=QLe});var Rg=l((det,S7)=>{var $Le=_(),eFe=new $Le({initialize:function(t,i){this.pad=t,this.events=t.events,this.index=i,this.value=0,this.threshold=.1},update:function(e){this.value=e},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});S7.exports=eFe});var R7=l((vet,C7)=>{C7.exports="down"});var w7=l((cet,_7)=>{_7.exports="up"});var A7=l((pet,P7)=>{P7.exports="connected"});var M7=l((met,b7)=>{b7.exports="disconnected"});var O7=l((get,q7)=>{q7.exports="down"});var F7=l((xet,L7)=>{L7.exports="up"});var Cl=l((Tet,N7)=>{N7.exports={BUTTON_DOWN:R7(),BUTTON_UP:w7(),CONNECTED:A7(),DISCONNECTED:M7(),GAMEPAD_BUTTON_DOWN:O7(),GAMEPAD_BUTTON_UP:F7()}});var _g=l((Eet,G7)=>{var tFe=_(),Rl=Cl(),iFe=new tFe({initialize:function(t,i){this.pad=t,this.events=t.manager,this.index=i,this.value=0,this.threshold=1,this.pressed=!1},update:function(e){this.value=e;var t=this.pad,i=this.index;e>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(Rl.BUTTON_DOWN,t,this,e),this.pad.emit(Rl.GAMEPAD_BUTTON_DOWN,i,e,this)):this.pressed&&(this.pressed=!1,this.events.emit(Rl.BUTTON_UP,t,this,e),this.pad.emit(Rl.GAMEPAD_BUTTON_UP,i,e,this))},destroy:function(){this.pad=null,this.events=null}});G7.exports=iFe});var wg=l((yet,B7)=>{var rFe=Rg(),sFe=_g(),nFe=_(),D7=se(),I7=le(),aFe=new nFe({Extends:D7,initialize:function(t,i){D7.call(this),this.manager=t,this.pad=i,this.id=i.id,this.index=i.index;for(var r=[],s=0;s<i.buttons.length;s++)r.push(new sFe(this,s));this.buttons=r;var n=[];for(s=0;s<i.axes.length;s++)n.push(new rFe(this,s));this.axes=n,this.vibration=i.vibrationActuator;var a={value:0,pressed:!1};this._LCLeft=r[14]?r[14]:a,this._LCRight=r[15]?r[15]:a,this._LCTop=r[12]?r[12]:a,this._LCBottom=r[13]?r[13]:a,this._RCLeft=r[2]?r[2]:a,this._RCRight=r[1]?r[1]:a,this._RCTop=r[3]?r[3]:a,this._RCBottom=r[0]?r[0]:a,this._FBLeftTop=r[4]?r[4]:a,this._FBLeftBottom=r[6]?r[6]:a,this._FBRightTop=r[5]?r[5]:a,this._FBRightBottom=r[7]?r[7]:a;var o={value:0};this._HAxisLeft=n[0]?n[0]:o,this._VAxisLeft=n[1]?n[1]:o,this._HAxisRight=n[2]?n[2]:o,this._VAxisRight=n[3]?n[3]:o,this.leftStick=new I7,this.rightStick=new I7,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(e){return this.axes[e].getValue()},setAxisThreshold:function(e){for(var t=0;t<this.axes.length;t++)this.axes[t].threshold=e},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(e){return this.buttons[e].value},isButtonDown:function(e){return this.buttons[e].pressed},update:function(e){if(!(e.timestamp<this._created)){var t,i=this.buttons,r=e.buttons,s=i.length;for(t=0;t<s;t++)i[t].update(r[t].value);var n=this.axes,a=e.axes;for(s=n.length,t=0;t<s;t++)n[t].update(a[t]);s>=2&&(this.leftStick.set(n[0].getValue(),n[1].getValue()),s>=4&&this.rightStick.set(n[2].getValue(),n[3].getValue()))}},destroy:function(){this.removeAllListeners(),this.manager=null,this.pad=null;var e;for(e=0;e<this.buttons.length;e++)this.buttons[e].destroy();for(e=0;e<this.axes.length;e++)this.axes[e].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});B7.exports=aFe});var _o=l((Set,V7)=>{var oFe=ie(),Rr={},Ro={};Ro.register=function(e,t,i,r,s){Rr[e]={plugin:t,mapping:i,settingsKey:r,configKey:s}};Ro.getPlugin=function(e){return Rr[e]};Ro.install=function(e){var t=e.scene.sys,i=t.settings.input,r=t.game.config;for(var s in Rr){var n=Rr[s].plugin,a=Rr[s].mapping,o=Rr[s].settingsKey,h=Rr[s].configKey;oFe(i,o,r[h])&&(e[a]=new n(e))}};Ro.remove=function(e){Rr.hasOwnProperty(e)&&delete Rr[e]};V7.exports=Ro});var H7=l((Cet,W7)=>{var hFe=_(),U7=se(),k7=Cl(),z7=wg(),X7=ie(),uFe=_o(),da=Xi(),Y7=new hFe({Extends:U7,initialize:function(t){U7.call(this),this.scene=t.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=t,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,t.pluginEvents.once(da.BOOT,this.boot,this),t.pluginEvents.on(da.START,this.start,this)},boot:function(){var e=this.scene.sys.game,t=this.settings.input,i=e.config;this.enabled=X7(t,"gamepad",i.inputGamepad)&&e.device.input.gamepads,this.target=X7(t,"gamepad.target",i.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(da.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(da.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var e=this,t=this.target,i=function(r){r.defaultPrevented||!e.isActive()||(e.refreshPads(),e.queue.push(r))};this.onGamepadHandler=i,t.addEventListener("gamepadconnected",i,!1),t.addEventListener("gamepaddisconnected",i,!1),this.sceneInputPlugin.pluginEvents.on(da.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(da.UPDATE,this.update);for(var e=0;e<this.gamepads.length;e++)this.gamepads[e].removeAllListeners()},disconnectAll:function(){for(var e=0;e<this.gamepads.length;e++)this.gamepads[e].pad.connected=!1},refreshPads:function(){var e=navigator.getGamepads();if(!e)this.disconnectAll();else for(var t=this.gamepads,i=0;i<e.length;i++){var r=e[i];if(!!r){var s=r.id,n=r.index,a=t[n];if(a)a.id!==s?(a.destroy(),t[n]=new z7(this,r)):a.update(r);else{var o=new z7(this,r);t[n]=o,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=o):this._pad3=o:this._pad2=o:this._pad1=o}}}},getAll:function(){for(var e=[],t=this.gamepads,i=0;i<t.length;i++)t[i]&&e.push(t[i]);return e},getPad:function(e){for(var t=this.gamepads,i=0;i<t.length;i++)if(t[i]&&t[i].index===e)return t[i]},update:function(){if(!!this.enabled){this.refreshPads();var e=this.queue.length;if(e!==0)for(var t=this.queue.splice(0,e),i=0;i<e;i++){var r=t[i],s=this.getPad(r.gamepad.index);r.type==="gamepadconnected"?this.emit(k7.CONNECTED,s,r):r.type==="gamepaddisconnected"&&this.emit(k7.DISCONNECTED,s,r)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var e=0;e<this.gamepads.length;e++)this.gamepads[e]&&this.gamepads[e].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});uFe.register("GamepadPlugin",Y7,"gamepad","gamepad","inputGamepad");W7.exports=Y7});var K7=l((Ret,j7)=>{j7.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}});var J7=l((_et,Z7)=>{Z7.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}});var $7=l((wet,Q7)=>{Q7.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}});var tK=l((Pet,eK)=>{eK.exports={DUALSHOCK_4:K7(),SNES_USB:J7(),XBOX_360:$7()}});var rK=l((Aet,iK)=>{iK.exports={Axis:Rg(),Button:_g(),Events:Cl(),Gamepad:wg(),GamepadPlugin:H7(),Configs:tK()}});var uK=l((bet,hK)=>{var lFe=kr(),fFe=Ur(),dFe=_(),vs=ru(),sK=Cg(),vFe=Sg(),cFe=Fr(),pFe=Zn(),mFe=Kn(),W=Xi(),Pg=se(),cs=X(),va=ki(),gFe=_o(),xFe=te(),TFe=rt(),nK=ye(),aK=zr(),Dt=qe(),EFe=fs(),yFe=ia(),oK=new dFe({Extends:Pg,initialize:function(t){Pg.call(this),this.scene=t,this.systems=t.sys,this.settings=t.sys.settings,this.manager=t.sys.game.input,this.pluginEvents=new Pg,this.enabled=!0,this.displayList,this.cameras,gFe.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var i={cancelled:!1};this._eventContainer={stopPropagation:function(){i.cancelled=!0}},this._eventData=i,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,t.sys.events.once(Dt.BOOT,this.boot,this),t.sys.events.on(Dt.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(Dt.DESTROY,this.destroy,this),this.pluginEvents.emit(W.BOOT)},start:function(){var e=this.systems.events;e.on(Dt.TRANSITION_START,this.transitionIn,this),e.on(Dt.TRANSITION_OUT,this.transitionOut,this),e.on(Dt.TRANSITION_COMPLETE,this.transitionComplete,this),e.on(Dt.PRE_UPDATE,this.preUpdate,this),e.once(Dt.SHUTDOWN,this.shutdown,this),this.manager.events.on(W.GAME_OUT,this.onGameOut,this),this.manager.events.on(W.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(W.START)},onGameOver:function(e){this.isActive()&&this.emit(W.GAME_OVER,e.timeStamp,e)},onGameOut:function(e){this.isActive()&&this.emit(W.GAME_OUT,e.timeStamp,e)},preUpdate:function(){this.pluginEvents.emit(W.PRE_UPDATE);var e=this._pendingRemoval,t=this._pendingInsertion,i=e.length,r=t.length;if(!(i===0&&r===0)){for(var s=this._list,n=0;n<i;n++){var a=e[n],o=s.indexOf(a);o>-1&&(s.splice(o,1),this.clear(a,!0))}e.length=0,this._pendingRemoval.length=0,this._list=s.concat(t.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.isActive()},updatePoll:function(e,t){if(!this.isActive())return!1;if(this.pluginEvents.emit(W.UPDATE,e,t),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var i,r=this.manager,s=r.pointers,n=r.pointersTotal;for(i=0;i<n;i++)s[i].updateMotion();if(this._list.length===0)return!1;var a=this.pollRate;if(a===-1)return!1;if(a>0)if(this._pollTimer-=t,this._pollTimer<0)this._pollTimer=this.pollRate;else return!1;var o=!1;for(i=0;i<n;i++){var h=0,u=s[i];this._tempZones=[],this._temp=this.hitTestPointer(u),this.sortGameObjects(this._temp,u),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),h+=this.processOverOutEvents(u),this.getDragState(u)===2&&this.processDragThresholdEvent(u,e),h>0&&(o=!0)}return o},update:function(e,t){if(!this.isActive())return!1;for(var i=t.length,r=!1,s=0;s<i;s++){var n=0,a=t[s];switch(this._tempZones=[],this._temp=this.hitTestPointer(a),this.sortGameObjects(this._temp,a),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),e){case vs.MOUSE_DOWN:n+=this.processDragDownEvent(a),n+=this.processDownEvents(a),n+=this.processOverOutEvents(a);break;case vs.MOUSE_UP:n+=this.processDragUpEvent(a),n+=this.processUpEvents(a),n+=this.processOverOutEvents(a);break;case vs.TOUCH_START:n+=this.processDragDownEvent(a),n+=this.processDownEvents(a),n+=this.processOverEvents(a);break;case vs.TOUCH_END:case vs.TOUCH_CANCEL:n+=this.processDragUpEvent(a),n+=this.processUpEvents(a),n+=this.processOutEvents(a);break;case vs.MOUSE_MOVE:case vs.TOUCH_MOVE:n+=this.processDragMoveEvent(a),n+=this.processMoveEvents(a),n+=this.processOverOutEvents(a);break;case vs.MOUSE_WHEEL:n+=this.processWheelEvent(a);break}n>0&&(r=!0)}return this._updatedThisFrame=!0,r},clear:function(e,t){t===void 0&&(t=!1);var i=e.input;if(!!i){t||this.queueForRemoval(e),i.gameObject=void 0,i.target=void 0,i.hitArea=void 0,i.hitAreaCallback=void 0,i.callbackContext=void 0,e.input=null;var r=this._draggable.indexOf(e);return r>-1&&this._draggable.splice(r,1),r=this._drag[0].indexOf(e),r>-1&&this._drag[0].splice(r,1),r=this._over[0].indexOf(e),r>-1&&(this._over[0].splice(r,1),this.manager.resetCursor(i)),e}},disable:function(e){e.input.enabled=!1},enable:function(e,t,i,r){return r===void 0&&(r=!1),e.input?e.input.enabled=!0:this.setHitArea(e,t,i),e.input&&r&&!e.input.dropZone&&(e.input.dropZone=r),this},hitTestPointer:function(e){for(var t=this.cameras.getCamerasBelowPointer(e),i=0;i<t.length;i++){for(var r=t[i],s=this.manager.hitTest(e,this._list,r),n=0;n<s.length;n++){var a=s[n];a.input.dropZone&&this._tempZones.push(a)}if(s.length>0)return e.camera=r,s}return e.camera=t[0],[]},processDownEvents:function(e){var t=0,i=this._temp,r=this._eventData,s=this._eventContainer;r.cancelled=!1;for(var n=!1,a=0;a<i.length;a++){var o=i[a];if(!!o.input){if(t++,o.emit(W.GAMEOBJECT_POINTER_DOWN,e,o.input.localX,o.input.localY,s),r.cancelled||!o.input){n=!0;break}if(this.emit(W.GAMEOBJECT_DOWN,e,o,s),r.cancelled||!o.input){n=!0;break}}}return!n&&this.manager&&(e.downElement===this.manager.game.canvas?this.emit(W.POINTER_DOWN,e,i):this.emit(W.POINTER_DOWN_OUTSIDE,e)),t},getDragState:function(e){return this._dragState[e.id]},setDragState:function(e,t){this._dragState[e.id]=t},processDragThresholdEvent:function(e,t){var i=!1,r=this.dragTimeThreshold,s=this.dragDistanceThreshold;if((s>0&&cFe(e.x,e.y,e.downX,e.downY)>=s||r>0&&t>=e.downTime+r)&&(i=!0),i)return this.setDragState(e,3),this.processDragStartList(e)},processDragStartList:function(e){if(this.getDragState(e)!==3)return 0;for(var t=this._drag[e.id],i=0;i<t.length;i++){var r=t[i],s=r.input;s.dragState=2,s.dragStartX=r.x,s.dragStartY=r.y,s.dragStartXGlobal=e.worldX,s.dragStartYGlobal=e.worldY,s.dragX=s.dragStartXGlobal-s.dragStartX,s.dragY=s.dragStartYGlobal-s.dragStartY,r.emit(W.GAMEOBJECT_DRAG_START,e,s.dragX,s.dragY),this.emit(W.DRAG_START,e,r)}return this.setDragState(e,4),t.length},processDragDownEvent:function(e){var t=this._temp;if(this._draggable.length===0||t.length===0||!e.primaryDown||this.getDragState(e)!==0)return 0;this.setDragState(e,1);for(var i=[],r=0;r<t.length;r++){var s=t[r];s.input.draggable&&s.input.dragState===0&&i.push(s)}return i.length===0?(this.setDragState(e,0),0):(i.length>1&&(this.sortGameObjects(i,e),this.topOnly&&i.splice(1)),this._drag[e.id]=i,this.dragDistanceThreshold===0&&this.dragTimeThreshold===0?(this.setDragState(e,3),this.processDragStartList(e)):(this.setDragState(e,2),0))},processDragMoveEvent:function(e){if(this.getDragState(e)===2&&this.processDragThresholdEvent(e,this.manager.game.loop.now),this.getDragState(e)!==4)return 0;for(var t=this._tempZones,i=this._drag[e.id],r=0;r<i.length;r++){var s=i[r],n=s.input,a=n.target;if(a){var o=t.indexOf(a);o===0?(s.emit(W.GAMEOBJECT_DRAG_OVER,e,a),this.emit(W.DRAG_OVER,e,s,a)):o>0?(s.emit(W.GAMEOBJECT_DRAG_LEAVE,e,a),this.emit(W.DRAG_LEAVE,e,s,a),n.target=t[0],a=n.target,s.emit(W.GAMEOBJECT_DRAG_ENTER,e,a),this.emit(W.DRAG_ENTER,e,s,a)):(s.emit(W.GAMEOBJECT_DRAG_LEAVE,e,a),this.emit(W.DRAG_LEAVE,e,s,a),t[0]?(n.target=t[0],a=n.target,s.emit(W.GAMEOBJECT_DRAG_ENTER,e,a),this.emit(W.DRAG_ENTER,e,s,a)):n.target=null)}else!a&&t[0]&&(n.target=t[0],a=n.target,s.emit(W.GAMEOBJECT_DRAG_ENTER,e,a),this.emit(W.DRAG_ENTER,e,s,a));var h,u;if(!s.parentContainer)h=e.worldX-n.dragX,u=e.worldY-n.dragY;else{var f=e.worldX-n.dragStartXGlobal,d=e.worldY-n.dragStartYGlobal,v=s.getParentRotation(),c=f*Math.cos(v)+d*Math.sin(v),p=d*Math.cos(v)-f*Math.sin(v);c*=1/s.parentContainer.scaleX,p*=1/s.parentContainer.scaleY,h=c+n.dragStartX,u=p+n.dragStartY}s.emit(W.GAMEOBJECT_DRAG,e,h,u),this.emit(W.DRAG,e,s,h,u)}return i.length},processDragUpEvent:function(e){for(var t=this._drag[e.id],i=0;i<t.length;i++){var r=t[i],s=r.input;if(s&&s.dragState===2){s.dragState=0,s.dragX=s.localX-r.displayOriginX,s.dragY=s.localY-r.displayOriginY;var n=!1,a=s.target;a&&(r.emit(W.GAMEOBJECT_DROP,e,a),this.emit(W.DROP,e,r,a),s.target=null,n=!0),r.input&&(r.emit(W.GAMEOBJECT_DRAG_END,e,s.dragX,s.dragY,n),this.emit(W.DRAG_END,e,r,n))}}return this.setDragState(e,0),t.splice(0),0},processMoveEvents:function(e){var t=0,i=this._temp,r=this._eventData,s=this._eventContainer;r.cancelled=!1;for(var n=!1,a=0;a<i.length;a++){var o=i[a];if(!!o.input){if(t++,o.emit(W.GAMEOBJECT_POINTER_MOVE,e,o.input.localX,o.input.localY,s),r.cancelled||!o.input){n=!0;break}if(this.emit(W.GAMEOBJECT_MOVE,e,o,s),r.cancelled||!o.input){n=!0;break}if(this.topOnly)break}}return n||this.emit(W.POINTER_MOVE,e,i),t},processWheelEvent:function(e){var t=0,i=this._temp,r=this._eventData,s=this._eventContainer;r.cancelled=!1;for(var n=!1,a=e.deltaX,o=e.deltaY,h=e.deltaZ,u=0;u<i.length;u++){var f=i[u];if(!!f.input){if(t++,f.emit(W.GAMEOBJECT_POINTER_WHEEL,e,a,o,h,s),r.cancelled||!f.input){n=!0;break}if(this.emit(W.GAMEOBJECT_WHEEL,e,f,a,o,h,s),r.cancelled||!f.input){n=!0;break}}}return n||this.emit(W.POINTER_WHEEL,e,i,a,o,h),t},processOverEvents:function(e){var t=this._temp,i=0,r=t.length,s=[];if(r>0){var n=this.manager,a=this._eventData,o=this._eventContainer;a.cancelled=!1;for(var h=!1,u=0;u<r;u++){var f=t[u];if(!!f.input){if(s.push(f),n.setCursor(f.input),f.emit(W.GAMEOBJECT_POINTER_OVER,e,f.input.localX,f.input.localY,o),i++,a.cancelled||!f.input){h=!0;break}if(this.emit(W.GAMEOBJECT_OVER,e,f,o),a.cancelled||!f.input){h=!0;break}}}h||this.emit(W.POINTER_OVER,e,s)}return this._over[e.id]=s,i},processOutEvents:function(e){var t=this._over[e.id],i=0,r=t.length;if(r>0){var s=this.manager,n=this._eventData,a=this._eventContainer;n.cancelled=!1;var o=!1;this.sortGameObjects(t,e);for(var h=0;h<r;h++){var u=t[h];if(u=t[h],!!u.input){if(s.resetCursor(u.input),u.emit(W.GAMEOBJECT_POINTER_OUT,e,a),i++,n.cancelled||!u.input){o=!0;break}if(this.emit(W.GAMEOBJECT_OUT,e,u,a),n.cancelled||!u.input){o=!0;break}o||this.emit(W.POINTER_OUT,e,t)}}this._over[e.id]=[]}return i},processOverOutEvents:function(e){var t=this._temp,i,r,s=[],n=[],a=[],o=this._over[e.id],h=this._drag[e.id],u=this.manager;for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)===-1&&h.indexOf(r)===-1?s.push(r):a.push(r);for(i=0;i<t.length;i++)r=t[i],o.indexOf(r)===-1&&n.push(r);var f=s.length,d=0,v=this._eventData,c=this._eventContainer;v.cancelled=!1;var p=!1;if(f>0){for(this.sortGameObjects(s,e),i=0;i<f;i++)if(r=s[i],!!r.input){if(u.resetCursor(r.input),r.emit(W.GAMEOBJECT_POINTER_OUT,e,c),d++,v.cancelled||!r.input){p=!0;break}if(this.emit(W.GAMEOBJECT_OUT,e,r,c),v.cancelled||!r.input){p=!0;break}}p||this.emit(W.POINTER_OUT,e,s)}if(f=n.length,v.cancelled=!1,p=!1,f>0){for(this.sortGameObjects(n,e),i=0;i<f;i++)if(r=n[i],!!r.input){if(u.setCursor(r.input),r.emit(W.GAMEOBJECT_POINTER_OVER,e,r.input.localX,r.input.localY,c),d++,v.cancelled||!r.input){p=!0;break}if(this.emit(W.GAMEOBJECT_OVER,e,r,c),v.cancelled||!r.input){p=!0;break}}p||this.emit(W.POINTER_OVER,e,n)}return o=a.concat(n),this._over[e.id]=this.sortGameObjects(o,e),d},processUpEvents:function(e){var t=this._temp,i=this._eventData,r=this._eventContainer;i.cancelled=!1;for(var s=!1,n=0;n<t.length;n++){var a=t[n];if(!!a.input){if(a.emit(W.GAMEOBJECT_POINTER_UP,e,a.input.localX,a.input.localY,r),i.cancelled||!a.input){s=!0;break}if(this.emit(W.GAMEOBJECT_UP,e,a,r),i.cancelled||!a.input){s=!0;break}}}return!s&&this.manager&&(e.upElement===this.manager.game.canvas?this.emit(W.POINTER_UP,e,t):this.emit(W.POINTER_UP_OUTSIDE,e)),t.length},queueForInsertion:function(e){return this._pendingInsertion.indexOf(e)===-1&&this._list.indexOf(e)===-1&&this._pendingInsertion.push(e),this},queueForRemoval:function(e){return this._pendingRemoval.push(e),this},setDraggable:function(e,t){t===void 0&&(t=!0),Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++){var r=e[i];r.input.draggable=t;var s=this._draggable.indexOf(r);t&&s===-1?this._draggable.push(r):!t&&s>-1&&this._draggable.splice(s,1)}return this},makePixelPerfect:function(e){e===void 0&&(e=1);var t=this.systems.textures;return vFe(t,e)},setHitArea:function(e,t,i){if(t===void 0)return this.setHitAreaFromTexture(e);Array.isArray(e)||(e=[e]);var r=!1,s=!1,n=!1,a=!1,o=!1,h=!0;if(xFe(t)){var u=t;t=cs(u,"hitArea",null),i=cs(u,"hitAreaCallback",null),r=cs(u,"draggable",!1),s=cs(u,"dropZone",!1),n=cs(u,"cursor",!1),a=cs(u,"useHandCursor",!1),o=cs(u,"pixelPerfect",!1);var f=cs(u,"alphaTolerance",1);o&&(t={},i=this.makePixelPerfect(f)),(!t||!i)&&(this.setHitAreaFromTexture(e),h=!1)}else typeof t=="function"&&!i&&(i=t,t={});for(var d=0;d<e.length;d++){var v=e[d];if(o&&v.type==="Container"){console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");continue}var c=v.input?v.input:sK(v,t,i);c.customHitArea=h,c.dropZone=s,c.cursor=a?"pointer":n,v.input=c,r&&this.setDraggable(v),this.queueForInsertion(v)}return this},setHitAreaCircle:function(e,t,i,r,s){s===void 0&&(s=fFe);var n=new lFe(t,i,r);return this.setHitArea(e,n,s)},setHitAreaEllipse:function(e,t,i,r,s,n){n===void 0&&(n=mFe);var a=new pFe(t,i,r,s);return this.setHitArea(e,a,n)},setHitAreaFromTexture:function(e,t){t===void 0&&(t=aK),Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++){var r=e[i],s=r.frame,n=0,a=0;if(r.width?(n=r.width,a=r.height):s&&(n=s.realWidth,a=s.realHeight),r.type==="Container"&&(n===0||a===0)){console.warn("Container.setInteractive must specify a Shape or call setSize() first");continue}n!==0&&a!==0&&(r.input=sK(r,new nK(0,0,n,a),t),this.queueForInsertion(r))}return this},setHitAreaRectangle:function(e,t,i,r,s,n){n===void 0&&(n=aK);var a=new nK(t,i,r,s);return this.setHitArea(e,a,n)},setHitAreaTriangle:function(e,t,i,r,s,n,a,o){o===void 0&&(o=yFe);var h=new EFe(t,i,r,s,n,a);return this.setHitArea(e,h,o)},enableDebug:function(e,t){t===void 0&&(t=65280);var i=e.input;if(!i||!i.hitArea)return this;var r=i.hitArea,s=r.type,n=i.hitAreaDebug,a=this.systems.add,o=this.systems.updateList;n&&(o.remove(n),n.destroy(),n=null);var h=0,u=0;switch(s){case va.CIRCLE:n=a.arc(0,0,r.radius),h=r.x-r.radius,u=r.y-r.radius;break;case va.ELLIPSE:n=a.ellipse(0,0,r.width,r.height),h=r.x-r.width/2,u=r.y-r.height/2;break;case va.LINE:n=a.line(0,0,r.x1,r.y1,r.x2,r.y2);break;case va.POLYGON:n=a.polygon(0,0,r.points);break;case va.RECTANGLE:n=a.rectangle(0,0,r.width,r.height),h=r.x,u=r.y;break;case va.TRIANGLE:n=a.triangle(0,0,r.x1,r.y1,r.x2,r.y2,r.x3,r.y3);break}return n&&(n.isFilled=!1,n.preUpdate=function(){n.setStrokeStyle(1/e.scale,t),n.setDisplayOrigin(e.displayOriginX,e.displayOriginY);var f=e.x,d=e.y,v=e.rotation,c=e.scaleX,p=e.scaleY;if(e.parentContainer){var m=e.getWorldTransformMatrix();f=m.tx,d=m.ty,v=m.rotation,c=m.scaleX,p=m.scaleY}n.setRotation(v),n.setScale(c,p),n.setPosition(f+h,d+u),n.setScrollFactor(e.scrollFactorX,e.scrollFactorY),n.setDepth(e.depth)},o.add(n),i.hitAreaDebug=n),this},removeDebug:function(e){var t=e.input;if(t&&t.hitAreaDebug){var i=t.hitAreaDebug;this.systems.updateList.remove(i),i.destroy(),t.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(e){return this.pollRate=e,this._pollTimer=0,this},setGlobalTopOnly:function(e){return this.manager.globalTopOnly=e,this},setTopOnly:function(e){return this.topOnly=e,this},sortGameObjects:function(e,t){if(e.length<2)return e;var i=t.camera.renderList;return e.sort(function(r,s){return i.indexOf(s)-i.indexOf(r)})},sortDropZones:function(e){return e.length<2?e:(this.scene.sys.depthSort(),e.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(e,t){if(!e.parentContainer&&!t.parentContainer)return this.displayList.getIndex(t)-this.displayList.getIndex(e);if(e.parentContainer===t.parentContainer)return t.parentContainer.getIndex(t)-e.parentContainer.getIndex(e);if(e.parentContainer===t)return-1;if(t.parentContainer===e)return 1;for(var i=e.getIndexList(),r=t.getIndexList(),s=Math.min(i.length,r.length),n=0;n<s;n++){var a=i[n],o=r[n];if(a!==o)return o-a}return r.length-i.length;return 0},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(e){return this.manager.addPointer(e)},setDefaultCursor:function(e){return this.manager.setDefaultCursor(e),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(W.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var e=0;e<10;e++)this._drag[e]=[],this._over[e]=[];this.removeAllListeners();var t=this.manager;t.canvas.style.cursor=t.defaultCursor;var i=this.systems.events;i.off(Dt.TRANSITION_START,this.transitionIn,this),i.off(Dt.TRANSITION_OUT,this.transitionOut,this),i.off(Dt.TRANSITION_COMPLETE,this.transitionComplete,this),i.off(Dt.PRE_UPDATE,this.preUpdate,this),t.events.off(W.GAME_OUT,this.onGameOut,this),t.events.off(W.GAME_OVER,this.onGameOver,this),i.off(Dt.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.pluginEvents.emit(W.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(Dt.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});TFe.register("InputPlugin",oK,"input");hK.exports=oK});var fK=l((Met,lK)=>{lK.exports="keydown"});var vK=l((qet,dK)=>{dK.exports="keyup"});var pK=l((Oet,cK)=>{cK.exports="keycombomatch"});var gK=l((Let,mK)=>{mK.exports="down"});var TK=l((Fet,xK)=>{xK.exports="keydown-"});var yK=l((Net,EK)=>{EK.exports="keyup-"});var CK=l((Get,SK)=>{SK.exports="up"});var wo=l((Det,RK)=>{RK.exports={ANY_KEY_DOWN:fK(),ANY_KEY_UP:vK(),COMBO_MATCH:pK(),DOWN:gK(),KEY_DOWN:TK(),KEY_UP:yK(),UP:CK()}});var bg=l((Iet,wK)=>{var SFe=_(),_K=se(),Ag=wo(),CFe=new SFe({Extends:_K,initialize:function(t,i){_K.call(this),this.plugin=t,this.keyCode=i,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(e){return this.emitOnRepeat=e,this},onDown:function(e){this.originalEvent=e,!!this.enabled&&(this.altKey=e.altKey,this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.location=e.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(Ag.DOWN,this,e):(this.isDown=!0,this.isUp=!1,this.timeDown=e.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(Ag.DOWN,this,e)))},onUp:function(e){this.originalEvent=e,!!this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=e.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(Ag.UP,this,e))},reset:function(){return this.preventDefault=!0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});wK.exports=CFe});var Mg=l((Bet,PK)=>{var RFe=function(e,t){return t.timeLastMatched=e.timeStamp,t.index++,t.index===t.size?!0:(t.current=t.keyCodes[t.index],!1)};PK.exports=RFe});var qg=l((Vet,bK)=>{var AK=Mg(),_Fe=function(e,t){if(t.matched)return!0;var i=!1,r=!1;if(e.keyCode===t.current)if(t.index>0&&t.maxKeyDelay>0){var s=t.timeLastMatched+t.maxKeyDelay;e.timeStamp<=s&&(r=!0,i=AK(e,t))}else r=!0,i=AK(e,t);return!r&&t.resetOnWrongKey&&(t.index=0,t.current=t.keyCodes[0]),i&&(t.timeLastMatched=e.timeStamp,t.matched=!0,t.timeMatched=e.timeStamp),i};bK.exports=_Fe});var Og=l((Uet,MK)=>{var wFe=function(e){return e.current=e.keyCodes[0],e.index=0,e.timeLastMatched=0,e.matched=!1,e.timeMatched=0,e};MK.exports=wFe});var Fg=l((ket,qK)=>{var PFe=_(),Lg=wo(),_l=X(),AFe=qg(),bFe=Og(),MFe=new PFe({initialize:function(t,i,r){if(r===void 0&&(r={}),i.length<2)return!1;this.manager=t,this.enabled=!0,this.keyCodes=[];for(var s=0;s<i.length;s++){var n=i[s];typeof n=="string"?this.keyCodes.push(n.toUpperCase().charCodeAt(0)):typeof n=="number"?this.keyCodes.push(n):n.hasOwnProperty("keyCode")&&this.keyCodes.push(n.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=_l(r,"resetOnWrongKey",!0),this.maxKeyDelay=_l(r,"maxKeyDelay",0),this.resetOnMatch=_l(r,"resetOnMatch",!1),this.deleteOnMatch=_l(r,"deleteOnMatch",!1);var a=this,o=function(h){if(!(a.matched||!a.enabled)){var u=AFe(h,a);u&&(a.manager.emit(Lg.COMBO_MATCH,a,h),a.resetOnMatch?bFe(a):a.deleteOnMatch&&a.destroy())}};this.onKeyDown=o,this.manager.on(Lg.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(Lg.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});qK.exports=MFe});var NK=l((zet,FK)=>{var OK=io(),LK={};for(Ng in OK)LK[OK[Ng]]=Ng;var Ng;FK.exports=LK});var UK=l((Xet,VK)=>{var qFe=_(),GK=se(),wl=wo(),DK=Ne(),IK=ie(),ca=Xi(),OFe=_o(),Gg=bg(),ps=io(),LFe=Fg(),Pl=NK(),Al=qe(),FFe=qa(),BK=new qFe({Extends:GK,initialize:function(t){GK.call(this),this.game=t.systems.game,this.scene=t.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=t,this.manager=t.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,t.pluginEvents.once(ca.BOOT,this.boot,this),t.pluginEvents.on(ca.START,this.start,this)},boot:function(){var e=this.settings.input;this.enabled=IK(e,"keyboard",!0);var t=IK(e,"keyboard.capture",null);t&&this.addCaptures(t),this.sceneInputPlugin.pluginEvents.once(ca.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(ca.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(ca.SHUTDOWN,this.shutdown,this),this.game.events.on(DK.BLUR,this.resetKeys,this),this.scene.sys.events.on(Al.PAUSE,this.resetKeys,this),this.scene.sys.events.on(Al.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},addCapture:function(e){return this.manager.addCapture(e),this},removeCapture:function(e){return this.manager.removeCapture(e),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:ps.UP,down:ps.DOWN,left:ps.LEFT,right:ps.RIGHT,space:ps.SPACE,shift:ps.SHIFT})},addKeys:function(e,t,i){t===void 0&&(t=!0),i===void 0&&(i=!1);var r={};if(typeof e=="string"){e=e.split(",");for(var s=0;s<e.length;s++){var n=e[s].trim();n&&(r[n]=this.addKey(n,t,i))}}else for(var a in e)r[a]=this.addKey(e[a],t,i);return r},addKey:function(e,t,i){t===void 0&&(t=!0),i===void 0&&(i=!1);var r=this.keys;if(e instanceof Gg){var s=r.indexOf(e);return s>-1?r[s]=e:r[e.keyCode]=e,t&&this.addCapture(e.keyCode),e.setEmitOnRepeat(i),e}return typeof e=="string"&&(e=ps[e.toUpperCase()]),r[e]||(r[e]=new Gg(this,e),t&&this.addCapture(e),r[e].setEmitOnRepeat(i)),r[e]},removeKey:function(e,t){t===void 0&&(t=!1);var i=this.keys,r;if(e instanceof Gg){var s=i.indexOf(e);s>-1&&(r=this.keys[s],this.keys[s]=void 0)}else typeof e=="string"&&(e=ps[e.toUpperCase()]);return i[e]&&(r=i[e],i[e]=void 0),r&&(r.plugin=null,t&&r.destroy()),this},removeAllKeys:function(e){for(var t=this.keys,i=0;i<t.length;i++){var r=t[i];r&&(t[i]=void 0,e&&r.destroy())}return this},createCombo:function(e,t){return new LFe(this,e,t)},checkDown:function(e,t){if(t===void 0&&(t=0),this.enabled&&e.isDown){var i=FFe(this.time-e.timeDown,t);if(i>e._tick)return e._tick=i,!0}return!1},update:function(){var e=this.manager.queue,t=e.length;if(!(!this.isActive()||t===0))for(var i=this.keys,r=0;r<t;r++){var s=e[r],n=s.keyCode,a=i[n],o=!1;s.cancelled===void 0&&(s.cancelled=0,s.stopImmediatePropagation=function(){s.cancelled=1},s.stopPropagation=function(){s.cancelled=-1}),s.cancelled!==-1&&(n===this.prevCode&&s.timeStamp===this.prevTime&&s.type===this.prevType||(this.prevCode=n,this.prevTime=s.timeStamp,this.prevType=s.type,s.type==="keydown"?(a&&(o=a.isDown,a.onDown(s)),!s.cancelled&&(!a||!o)&&(Pl[n]&&this.emit(wl.KEY_DOWN+Pl[n],s),s.cancelled||this.emit(wl.ANY_KEY_DOWN,s))):(a&&a.onUp(s),s.cancelled||(Pl[n]&&this.emit(wl.KEY_UP+Pl[n],s),s.cancelled||this.emit(wl.ANY_KEY_UP,s))),s.cancelled===1&&(s.cancelled=0)))}},resetKeys:function(){for(var e=this.keys,t=0;t<e.length;t++)e[t]&&e[t].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(ca.MANAGER_PROCESS,this.update,this),this.game.events.off(DK.BLUR,this.resetKeys),this.scene.sys.events.off(Al.PAUSE,this.resetKeys,this),this.scene.sys.events.off(Al.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var e=this.keys,t=0;t<e.length;t++)e[t]&&e[t].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});OFe.register("KeyboardPlugin",BK,"keyboard","keyboard","inputKeyboard");VK.exports=BK});var zK=l((Yet,kK)=>{var NFe=function(e){return e._justDown?(e._justDown=!1,!0):!1};kK.exports=NFe});var YK=l((Wet,XK)=>{var GFe=function(e){return e._justUp?(e._justUp=!1,!0):!1};XK.exports=GFe});var HK=l((Het,WK)=>{var DFe=function(e,t){t===void 0&&(t=50);var i=e.plugin.game.loop.time-e.timeDown;return e.isDown&&i<t};WK.exports=DFe});var KK=l((jet,jK)=>{var IFe=function(e,t){t===void 0&&(t=50);var i=e.plugin.game.loop.time-e.timeUp;return e.isUp&&i<t};jK.exports=IFe});var JK=l((Ket,ZK)=>{ZK.exports={Events:wo(),KeyboardManager:Bc(),KeyboardPlugin:UK(),Key:bg(),KeyCodes:io(),KeyCombo:Fg(),AdvanceKeyCombo:Mg(),ProcessKeyCombo:qg(),ResetKeyCombo:Og(),JustDown:zK(),JustUp:YK(),DownDuration:HK(),UpDuration:KK()}});var $K=l((Zet,QK)=>{QK.exports={MouseManager:Vc()}});var tZ=l((Jet,eZ)=>{eZ.exports={TouchManager:zc()}});var rZ=l((Qet,iZ)=>{var BFe=ru(),VFe=Fe(),Dg={CreatePixelPerfectHandler:Sg(),CreateInteractiveObject:Cg(),Events:Xi(),Gamepad:rK(),InputManager:Xc(),InputPlugin:uK(),InputPluginCache:_o(),Keyboard:JK(),Mouse:$K(),Pointer:kc(),Touch:tZ()};Dg=VFe(!1,Dg,BFe);iZ.exports=Dg});var Me=l(($et,sZ)=>{var UFe={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19};sZ.exports=UFe});var Po=l((ett,nZ)=>{var kFe=function(e,t){return e.url?e.url.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?e.url:t+e.url:!1};nZ.exports=kFe});var Ao=l((ttt,aZ)=>{var zFe=function(e,t,i,r,s,n){return e===void 0&&(e=""),t===void 0&&(t=!0),i===void 0&&(i=""),r===void 0&&(r=""),s===void 0&&(s=0),n===void 0&&(n=!1),{responseType:e,async:t,user:i,password:r,timeout:s,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:n}};aZ.exports=zFe});var bl=l((itt,oZ)=>{var XFe=Fe(),YFe=Ao(),WFe=function(e,t){var i=e===void 0?YFe():XFe({},e);if(t)for(var r in t)t[r]!==void 0&&(i[r]=t[r]);return i};oZ.exports=WFe});var Ig=l((rtt,hZ)=>{var HFe=bl(),jFe=function(e,t){var i=HFe(t,e.xhrSettings),r=new XMLHttpRequest;if(r.open("GET",e.src,i.async,i.user,i.password),r.responseType=e.xhrSettings.responseType,r.timeout=i.timeout,i.headers)for(var s in i.headers)r.setRequestHeader(s,i.headers[s]);return i.header&&i.headerValue&&r.setRequestHeader(i.header,i.headerValue),i.requestedWith&&r.setRequestHeader("X-Requested-With",i.requestedWith),i.overrideMimeType&&r.overrideMimeType(i.overrideMimeType),i.withCredentials&&(r.withCredentials=!0),r.onload=e.onLoad.bind(e,r),r.onerror=e.onError.bind(e,r),r.onprogress=e.onProgress.bind(e),r.send(),r};hZ.exports=jFe});var Ve=l((stt,uZ)=>{var KFe=_(),ms=Me(),Bg=Hs(),_r=X(),ZFe=Po(),JFe=bl(),QFe=Ig(),$Fe=Ao(),Vg=new KFe({initialize:function(t,i){this.loader=t,this.cache=_r(i,"cache",!1),this.type=_r(i,"type",!1),this.key=_r(i,"key",!1);var r=this.key;if(t.prefix&&t.prefix!==""&&(this.key=t.prefix+r),!this.type||!this.key)throw new Error("Invalid Loader."+this.type+" key");var s=_r(i,"url");s===void 0?s=t.path+r+"."+_r(i,"extension",""):typeof s=="string"&&!s.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)&&(s=t.path+s),this.url=s,this.src="",this.xhrSettings=$Fe(_r(i,"responseType",void 0)),_r(i,"xhrSettings",!1)&&(this.xhrSettings=JFe(this.xhrSettings,_r(i,"xhrSettings",{}))),this.xhrLoader=null,this.state=typeof this.url=="function"?ms.FILE_POPULATED:ms.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=_r(i,"config",{}),this.multiFile,this.linkFile},setLink:function(e){this.linkFile=e,e.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===ms.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=ms.FILE_LOADING,this.src=ZFe(this,this.loader.baseURL),this.src.indexOf("data:")===0?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=QFe(this,this.loader.xhr))},onLoad:function(e,t){var i=e.responseURL&&(e.responseURL.indexOf("file://")===0||e.responseURL.indexOf("capacitor://")===0),r=i&&t.target.status===0,s=!(t.target&&t.target.status!==200)||r;e.readyState===4&&e.status>=400&&e.status<=599&&(s=!1),this.state=ms.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,s)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(e){e.lengthComputable&&(this.bytesLoaded=e.loaded,this.bytesTotal=e.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(Bg.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=ms.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=ms.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){this.state=ms.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.cache.add(this.key,this.data),this.pendingDestroy()},pendingDestroy:function(e){e===void 0&&(e=this.data);var t=this.key,i=this.type;this.loader.emit(Bg.FILE_COMPLETE,t,i,e),this.loader.emit(Bg.FILE_KEY_COMPLETE+i+"-"+t,t,i,e),this.loader.flagForRemoval(this)},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});Vg.createObjectURL=function(e,t,i){if(typeof URL=="function")e.src=URL.createObjectURL(t);else{var r=new FileReader;r.onload=function(){e.removeAttribute("crossOrigin"),e.src="data:"+(t.type||i)+";base64,"+r.result.split(",")[1]},r.onerror=e.onerror,r.readAsDataURL(t)}};Vg.revokeObjectURL=function(e){typeof URL=="function"&&URL.revokeObjectURL(e.src)};uZ.exports=Vg});var tr=l((ntt,vZ)=>{var eNe=_(),Ug=Me(),lZ=Ve(),tNe=$(),bo=X(),fZ=ie(),dZ=te(),kg=new eNe({Extends:lZ,initialize:function(t,i,r,s,n){var a="json";if(dZ(i)){var o=i;i=bo(o,"key"),r=bo(o,"url"),s=bo(o,"xhrSettings"),a=bo(o,"extension",a),n=bo(o,"dataKey",n)}var h={type:"json",cache:t.cacheManager.json,extension:a,responseType:"text",key:i,url:r,xhrSettings:s,config:n};lZ.call(this,t,h),dZ(r)&&(n?this.data=fZ(r,n):this.data=r,this.state=Ug.FILE_POPULATED)},onProcess:function(){if(this.state!==Ug.FILE_POPULATED){this.state=Ug.FILE_PROCESSING;try{var e=JSON.parse(this.xhrLoader.responseText)}catch(i){throw console.warn("Invalid JSON: "+this.key),this.onProcessError(),i}var t=this.config;typeof t=="string"?this.data=fZ(e,t,e):this.data=e}this.onProcessComplete()}});tNe.register("json",function(e,t,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)this.addFile(new kg(this,e[s]));else this.addFile(new kg(this,e,t,r,i));return this});vZ.exports=kg});var pZ=l((att,cZ)=>{var iNe=_(),rNe=$(),zg=tr(),sNe=Hs(),Xg=new iNe({Extends:zg,initialize:function(t,i,r,s,n){zg.call(this,t,i,r,s,n),this.type="animationJSON"},onProcess:function(){this.loader.once(sNe.POST_PROCESS,this.onLoadComplete,this),zg.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});rNe.register("animation",function(e,t,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)this.addFile(new Xg(this,e[s]));else this.addFile(new Xg(this,e,t,r,i));return this});cZ.exports=Xg});var wr=l((ott,gZ)=>{var nNe=_(),mZ=Me(),Mo=Ve(),aNe=$(),pa=X(),oNe=te(),Yg=new nNe({Extends:Mo,initialize:function e(t,i,r,s,n){var a="png",o;if(oNe(i)){var h=i;i=pa(h,"key"),r=pa(h,"url"),o=pa(h,"normalMap"),s=pa(h,"xhrSettings"),a=pa(h,"extension",a),n=pa(h,"frameConfig")}Array.isArray(r)&&(o=r[1],r=r[0]);var u={type:"image",cache:t.textureManager,extension:a,responseType:"blob",key:i,url:r,xhrSettings:s,config:n};if(Mo.call(this,t,u),o){var f=new e(t,this.key,o,s,n);f.type="normalMap",this.setLink(f),t.addFile(f)}},onProcess:function(){this.state=mZ.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var e=this;this.data.onload=function(){Mo.revokeObjectURL(e.data),e.onProcessComplete()},this.data.onerror=function(){Mo.revokeObjectURL(e.data),e.onProcessError()},Mo.createObjectURL(this.data,this.xhrLoader.response,"image/png")},addToCache:function(){var e,t=this.linkFile;t&&t.state===mZ.FILE_COMPLETE?(this.type==="image"?e=this.cache.addImage(this.key,this.data,t.data):e=this.cache.addImage(t.key,t.data,this.data),this.pendingDestroy(e),t.pendingDestroy(e)):t||(e=this.cache.addImage(this.key,this.data),this.pendingDestroy(e))}});aNe.register("image",function(e,t,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.addFile(new Yg(this,e[r]));else this.addFile(new Yg(this,e,t,i));return this});gZ.exports=Yg});var Li=l((htt,xZ)=>{var hNe=_(),uNe=new hNe({initialize:function(t,i,r,s){var n=[];s.forEach(function(o){o&&n.push(o)}),this.loader=t,this.type=i,this.key=r,this.multiKeyIndex=t.multiKeyIndex++,this.files=n,this.complete=!1,this.pending=n.length,this.failed=0,this.config={},this.baseURL=t.baseURL,this.path=t.path,this.prefix=t.prefix;for(var a=0;a<n.length;a++)n[a].multiFile=this},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(e){return this.files.push(e),e.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(e){var t=this.files.indexOf(e);t!==-1&&this.pending--},onFileFailed:function(e){var t=this.files.indexOf(e);t!==-1&&this.failed++}});xZ.exports=uNe});var SZ=l((utt,yZ)=>{var lNe=_(),fNe=$(),gs=X(),TZ=wr(),dNe=te(),EZ=tr(),Wg=Li(),Hg=new lNe({Extends:Wg,initialize:function(t,i,r,s,n,a){var o,h;if(dNe(i)){var u=i;i=gs(u,"key"),o=new TZ(t,{key:i,url:gs(u,"textureURL"),extension:gs(u,"textureExtension","png"),normalMap:gs(u,"normalMap"),xhrSettings:gs(u,"textureXhrSettings")}),h=new EZ(t,{key:i,url:gs(u,"atlasURL"),extension:gs(u,"atlasExtension","json"),xhrSettings:gs(u,"atlasXhrSettings")})}else o=new TZ(t,i,r,n),h=new EZ(t,i,s,a);o.linkFile?Wg.call(this,t,"atlasjson",i,[o,h,o.linkFile]):Wg.call(this,t,"atlasjson",i,[o,h])},addToCache:function(){if(this.isReadyToProcess()){var e=this.files[0],t=this.files[1],i=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(e.key,e.data,t.data,i),t.addToCache(),this.complete=!0}}});fNe.register("aseprite",function(e,t,i,r,s){var n;if(Array.isArray(e))for(var a=0;a<e.length;a++)n=new Hg(this,e[a]),this.addFile(n.files);else n=new Hg(this,e,t,i,r,s),this.addFile(n.files);return this});yZ.exports=Hg});var wZ=l((ltt,_Z)=>{var vNe=_(),cNe=$(),xs=X(),CZ=wr(),pNe=te(),RZ=tr(),jg=Li(),Kg=new vNe({Extends:jg,initialize:function(t,i,r,s,n,a){var o,h;if(pNe(i)){var u=i;i=xs(u,"key"),o=new CZ(t,{key:i,url:xs(u,"textureURL"),extension:xs(u,"textureExtension","png"),normalMap:xs(u,"normalMap"),xhrSettings:xs(u,"textureXhrSettings")}),h=new RZ(t,{key:i,url:xs(u,"atlasURL"),extension:xs(u,"atlasExtension","json"),xhrSettings:xs(u,"atlasXhrSettings")})}else o=new CZ(t,i,r,n),h=new RZ(t,i,s,a);o.linkFile?jg.call(this,t,"atlasjson",i,[o,h,o.linkFile]):jg.call(this,t,"atlasjson",i,[o,h])},addToCache:function(){if(this.isReadyToProcess()){var e=this.files[0],t=this.files[1],i=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(e.key,e.data,t.data,i),t.pendingDestroy(),this.complete=!0}}});cNe.register("atlas",function(e,t,i,r,s){var n;if(Array.isArray(e))for(var a=0;a<e.length;a++)n=new Kg(this,e[a]),this.addFile(n.files);else n=new Kg(this,e,t,i,r,s),this.addFile(n.files);return this});_Z.exports=Kg});var ql=l((ftt,AZ)=>{var mNe=_(),gNe=Me(),PZ=Ve(),xNe=$(),Ml=X(),TNe=te(),ENe=Lc(),Zg=new mNe({Extends:PZ,initialize:function(t,i,r,s){var n="xml";if(TNe(i)){var a=i;i=Ml(a,"key"),r=Ml(a,"url"),s=Ml(a,"xhrSettings"),n=Ml(a,"extension",n)}var o={type:"xml",cache:t.cacheManager.xml,extension:n,responseType:"text",key:i,url:r,xhrSettings:s};PZ.call(this,t,o)},onProcess:function(){this.state=gNe.FILE_PROCESSING,this.data=ENe(this.xhrLoader.responseText),this.data?this.onProcessComplete():(console.warn("Invalid XMLFile: "+this.key),this.onProcessError())}});xNe.register("xml",function(e,t,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.addFile(new Zg(this,e[r]));else this.addFile(new Zg(this,e,t,i));return this});AZ.exports=Zg});var OZ=l((dtt,qZ)=>{var yNe=_(),SNe=$(),Ts=X(),bZ=wr(),CNe=te(),Jg=Li(),MZ=ql(),Qg=new yNe({Extends:Jg,initialize:function(t,i,r,s,n,a){var o,h;if(CNe(i)){var u=i;i=Ts(u,"key"),o=new bZ(t,{key:i,url:Ts(u,"textureURL"),extension:Ts(u,"textureExtension","png"),normalMap:Ts(u,"normalMap"),xhrSettings:Ts(u,"textureXhrSettings")}),h=new MZ(t,{key:i,url:Ts(u,"atlasURL"),extension:Ts(u,"atlasExtension","xml"),xhrSettings:Ts(u,"atlasXhrSettings")})}else o=new bZ(t,i,r,n),h=new MZ(t,i,s,a);o.linkFile?Jg.call(this,t,"atlasxml",i,[o,h,o.linkFile]):Jg.call(this,t,"atlasxml",i,[o,h])},addToCache:function(){if(this.isReadyToProcess()){var e=this.files[0],t=this.files[1],i=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(e.key,e.data,t.data,i),t.pendingDestroy(),this.complete=!0}}});SNe.register("atlasXML",function(e,t,i,r,s){var n;if(Array.isArray(e))for(var a=0;a<e.length;a++)n=new Qg(this,e[a]),this.addFile(n.files);else n=new Qg(this,e,t,i,r,s),this.addFile(n.files);return this});qZ.exports=Qg});var $g=l((vtt,NZ)=>{var RNe=_(),_Ne=Hs(),LZ=Ve(),FZ=X(),wNe=Po(),PNe=te(),ANe=new RNe({Extends:LZ,initialize:function(t,i,r,s){if(PNe(i)){var n=i;i=FZ(n,"key"),s=FZ(n,"config",s)}var a={type:"audio",cache:t.cacheManager.audio,extension:r.type,key:i,url:r.url,config:s};LZ.call(this,t,a),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var e=0;e<this.data.length;e++){var t=this.data[e];t.oncanplaythrough=null,t.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(e){var t=e.target;t.oncanplaythrough=null,t.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(_Ne.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var e=this.config&&this.config.instances||1;this.filesTotal=e,this.filesLoaded=0,this.percentComplete=0;for(var t=0;t<e;t++){var i=new Audio;i.dataset||(i.dataset={}),i.dataset.name=this.key+("0"+t).slice(-2),i.dataset.used="false",this.locked?i.dataset.locked="true":(i.dataset.locked="false",i.preload="auto",i.oncanplaythrough=this.onProgress.bind(this),i.onerror=this.onError.bind(this)),this.data.push(i)}for(t=0;t<this.data.length;t++)i=this.data[t],i.src=wNe(this,this.loader.baseURL),this.locked||i.load();this.locked&&setTimeout(this.onLoad.bind(this))}});NZ.exports=ANe});var e0=l((ctt,IZ)=>{var bNe=_(),MNe=Me(),GZ=Ve(),qNe=$(),rn=X(),ONe=$g(),DZ=te(),sn=new bNe({Extends:GZ,initialize:function(t,i,r,s,n){if(DZ(i)){var a=i;i=rn(a,"key"),s=rn(a,"xhrSettings"),n=rn(a,"context",n)}var o={type:"audio",cache:t.cacheManager.audio,extension:r.type,responseType:"arraybuffer",key:i,url:r.url,xhrSettings:s,config:{context:n}};GZ.call(this,t,o)},onProcess:function(){this.state=MNe.FILE_PROCESSING;var e=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(t){e.data=t,e.onProcessComplete()},function(t){console.error("Error decoding audio: "+e.key+" - ",t?t.message:null),e.onProcessError()}),this.config.context=null}});sn.create=function(e,t,i,r,s){var n=e.systems.game,a=n.config.audio,o=n.device.audio;DZ(t)&&(i=rn(t,"url",[]),r=rn(t,"config",{}));var h=sn.getAudioURL(n,i);return h?o.webAudio&&!a.disableWebAudio?new sn(e,t,h,s,n.sound.context):new ONe(e,t,h,r):null};sn.getAudioURL=function(e,t){Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var r=rn(t[i],"url",t[i]);if(r.indexOf("blob:")===0||r.indexOf("data:")===0)return{url:r,type:""};var s=r.match(/\.([a-zA-Z0-9]+)($|\?)/);if(s=rn(t[i],"type",s?s[1]:"").toLowerCase(),e.device.audio[s])return{url:r,type:s}}return null};qNe.register("audio",function(e,t,i,r){var s=this.systems.game,n=s.config.audio,a=s.device.audio;if(n.noAudio||!a.webAudio&&!a.audioData)return this;var o;if(Array.isArray(e))for(var h=0;h<e.length;h++)o=sn.create(this,e[h]),o&&this.addFile(o);else o=sn.create(this,e,t,i,r),o&&this.addFile(o);return this});IZ.exports=sn});var kZ=l(()=>{var BZ=e0(),LNe=_(),FNe=$(),Es=X(),NNe=te(),VZ=tr(),t0=Li(),UZ=new LNe({Extends:t0,initialize:function(t,i,r,s,n,a,o){if(NNe(i)){var h=i;i=Es(h,"key"),r=Es(h,"jsonURL"),s=Es(h,"audioURL"),n=Es(h,"audioConfig"),a=Es(h,"audioXhrSettings"),o=Es(h,"jsonXhrSettings")}var u;if(!s)u=new VZ(t,i,r,o),t0.call(this,t,"audiosprite",i,[u]),this.config.resourceLoad=!0,this.config.audioConfig=n,this.config.audioXhrSettings=a;else{var f=BZ.create(t,i,s,n,a);f&&(u=new VZ(t,i,r,o),t0.call(this,t,"audiosprite",i,[f,u]),this.config.resourceLoad=!1)}},onFileComplete:function(e){var t=this.files.indexOf(e);if(t!==-1&&(this.pending--,this.config.resourceLoad&&e.type==="json"&&e.data.hasOwnProperty("resources"))){var i=e.data.resources,r=Es(this.config,"audioConfig"),s=Es(this.config,"audioXhrSettings"),n=BZ.create(this.loader,e.key,i,r,s);n&&(this.addToMultiFile(n),this.loader.addFile(n))}},addToCache:function(){if(this.isReadyToProcess()){var e=this.files[0],t=this.files[1];e.addToCache(),t.addToCache(),this.complete=!0}}});FNe.register("audioSprite",function(e,t,i,r,s,n){var a=this.systems.game,o=a.config.audio,h=a.device.audio;if(o&&o.noAudio||!h.webAudio&&!h.audioData)return this;var u;if(Array.isArray(e))for(var f=0;f<e.length;f++)u=new UZ(this,e[f]),u.files&&this.addFile(u.files);else u=new UZ(this,e,t,i,r,s,n),u.files&&this.addFile(u.files);return this})});var YZ=l((gtt,XZ)=>{var GNe=_(),DNe=Me(),zZ=Ve(),INe=$(),qo=X(),BNe=te(),i0=new GNe({Extends:zZ,initialize:function(t,i,r,s,n){var a="bin";if(BNe(i)){var o=i;i=qo(o,"key"),r=qo(o,"url"),s=qo(o,"xhrSettings"),a=qo(o,"extension",a),n=qo(o,"dataType",n)}var h={type:"binary",cache:t.cacheManager.binary,extension:a,responseType:"arraybuffer",key:i,url:r,xhrSettings:s,config:{dataType:n}};zZ.call(this,t,h)},onProcess:function(){this.state=DNe.FILE_PROCESSING;var e=this.config.dataType;this.data=e?new e(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});INe.register("binary",function(e,t,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)this.addFile(new i0(this,e[s]));else this.addFile(new i0(this,e,t,r,i));return this});XZ.exports=i0});var KZ=l((xtt,jZ)=>{var VNe=_(),UNe=$(),ys=X(),WZ=wr(),kNe=te(),r0=Li(),zNe=wu(),HZ=ql(),s0=new VNe({Extends:r0,initialize:function(t,i,r,s,n,a){var o,h;if(kNe(i)){var u=i;i=ys(u,"key"),o=new WZ(t,{key:i,url:ys(u,"textureURL"),extension:ys(u,"textureExtension","png"),normalMap:ys(u,"normalMap"),xhrSettings:ys(u,"textureXhrSettings")}),h=new HZ(t,{key:i,url:ys(u,"fontDataURL"),extension:ys(u,"fontDataExtension","xml"),xhrSettings:ys(u,"fontDataXhrSettings")})}else o=new WZ(t,i,r,n),h=new HZ(t,i,s,a);o.linkFile?r0.call(this,t,"bitmapfont",i,[o,h,o.linkFile]):r0.call(this,t,"bitmapfont",i,[o,h])},addToCache:function(){if(this.isReadyToProcess()){var e=this.files[0],t=this.files[1];e.addToCache(),t.pendingDestroy();var i=e.cache.get(e.key),r=zNe(t.data,e.cache.getFrame(e.key),0,0,i);this.loader.cacheManager.bitmapFont.add(e.key,{data:r,texture:e.key,frame:null}),this.complete=!0}}});UNe.register("bitmapFont",function(e,t,i,r,s){var n;if(Array.isArray(e))for(var a=0;a<e.length;a++)n=new s0(this,e[a]),this.addFile(n.files);else n=new s0(this,e,t,i,r,s),this.addFile(n.files);return this});jZ.exports=s0});var QZ=l((Ttt,JZ)=>{var XNe=_(),YNe=Me(),ZZ=Ve(),WNe=$(),Ol=X(),HNe=te(),n0=new XNe({Extends:ZZ,initialize:function(t,i,r,s){var n="css";if(HNe(i)){var a=i;i=Ol(a,"key"),r=Ol(a,"url"),s=Ol(a,"xhrSettings"),n=Ol(a,"extension",n)}var o={type:"script",cache:!1,extension:n,responseType:"text",key:i,url:r,xhrSettings:s};ZZ.call(this,t,o)},onProcess:function(){this.state=YNe.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});WNe.register("css",function(e,t,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.addFile(new n0(this,e[r]));else this.addFile(new n0(this,e,t,i));return this});JZ.exports=n0});var tJ=l((Ett,eJ)=>{var jNe=_(),KNe=Me(),$Z=Ve(),ZNe=$(),Oo=X(),JNe=te(),Ll=xc(),a0=new jNe({Extends:$Z,initialize:function(t,i,r,s,n){var a="glsl";if(JNe(i)){var o=i;i=Oo(o,"key"),r=Oo(o,"url"),s=Oo(o,"shaderType","fragment"),n=Oo(o,"xhrSettings"),a=Oo(o,"extension",a)}else s===void 0&&(s="fragment");var h={type:"glsl",cache:t.cacheManager.shader,extension:a,responseType:"text",key:i,url:r,config:{shaderType:s},xhrSettings:n};$Z.call(this,t,h)},onProcess:function(){this.state=KNe.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var e=this.data.split(`
`),t=this.extractBlock(e,0);if(t)for(;t;){var i=this.getShaderName(t.header),r=this.getShaderType(t.header),s=this.getShaderUniforms(t.header),n=t.shader;if(this.cache.has(i)){var a=this.cache.get(i);r==="fragment"?a.fragmentSrc=n:a.vertexSrc=n,a.uniforms||(a.uniforms=s)}else r==="fragment"?this.cache.add(i,new Ll(i,n,"",s)):this.cache.add(i,new Ll(i,"",n,s));t=this.extractBlock(e,t.offset)}else this.config.shaderType==="fragment"?this.cache.add(this.key,new Ll(this.key,this.data)):this.cache.add(this.key,new Ll(this.key,"",this.data));this.pendingDestroy()},getShaderName:function(e){for(var t=0;t<e.length;t++){var i=e[t].trim();if(i.substring(0,5)==="name:")return i.substring(5).trim()}return this.key},getShaderType:function(e){for(var t=0;t<e.length;t++){var i=e[t].trim();if(i.substring(0,5)==="type:")return i.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(e){for(var t={},i=0;i<e.length;i++){var r=e[i].trim();if(r.substring(0,8)==="uniform."){var s=r.indexOf(":");if(s){var n=r.substring(8,s);try{t[n]=JSON.parse(r.substring(s+1))}catch(a){console.warn("Invalid uniform JSON: "+n)}}}}return t},extractBlock:function(e,t){for(var i=-1,r=-1,s=-1,n=!1,a=!1,o=[],h=[],u=t;u<e.length;u++){var f=e[u].trim();if(f==="---")if(i===-1)i=u,n=!0;else if(n)r=u,n=!1,a=!0;else{a=!1;break}else n?o.push(f):a&&(h.push(f),s=u)}return!n&&r!==-1?{header:o,shader:h.join(`
`),offset:s}:null}});ZNe.register("glsl",function(e,t,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)this.addFile(new a0(this,e[s]));else this.addFile(new a0(this,e,t,i,r));return this});eJ.exports=a0});var sJ=l((ytt,rJ)=>{var QNe=_(),$Ne=Me(),iJ=Ve(),eGe=$(),Fl=X(),tGe=te(),o0=new QNe({Extends:iJ,initialize:function(t,i,r,s){var n="html";if(tGe(i)){var a=i;i=Fl(a,"key"),r=Fl(a,"url"),s=Fl(a,"xhrSettings"),n=Fl(a,"extension",n)}var o={type:"text",cache:t.cacheManager.html,extension:n,responseType:"text",key:i,url:r,xhrSettings:s};iJ.call(this,t,o)},onProcess:function(){this.state=$Ne.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});eGe.register("html",function(e,t,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.addFile(new o0(this,e[r]));else this.addFile(new o0(this,e,t,i));return this});rJ.exports=o0});var oJ=l((Stt,aJ)=>{var iGe=_(),nJ=Me(),Lo=Ve(),rGe=$(),ma=X(),sGe=te(),h0=new iGe({Extends:Lo,initialize:function(t,i,r,s,n,a){s===void 0&&(s=512),n===void 0&&(n=512);var o="html";if(sGe(i)){var h=i;i=ma(h,"key"),r=ma(h,"url"),a=ma(h,"xhrSettings"),o=ma(h,"extension",o),s=ma(h,"width",s),n=ma(h,"height",n)}var u={type:"html",cache:t.textureManager,extension:o,responseType:"text",key:i,url:r,xhrSettings:a,config:{width:s,height:n}};Lo.call(this,t,u)},onProcess:function(){this.state=nJ.FILE_PROCESSING;var e=this.config.width,t=this.config.height,i=[];i.push('<svg width="'+e+'px" height="'+t+'px" viewBox="0 0 '+e+" "+t+'" xmlns="http://www.w3.org/2000/svg">'),i.push('<foreignObject width="100%" height="100%">'),i.push('<body xmlns="http://www.w3.org/1999/xhtml">'),i.push(this.xhrLoader.responseText),i.push("</body>"),i.push("</foreignObject>"),i.push("</svg>");var r=[i.join(`
`)],s=this;try{var n=new window.Blob(r,{type:"image/svg+xml;charset=utf-8"})}catch(a){s.state=nJ.FILE_ERRORED,s.onProcessComplete();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){Lo.revokeObjectURL(s.data),s.onProcessComplete()},this.data.onerror=function(){Lo.revokeObjectURL(s.data),s.onProcessError()},Lo.createObjectURL(this.data,n,"image/svg+xml")},addToCache:function(){var e=this.cache.addImage(this.key,this.data);this.pendingDestroy(e)}});rGe.register("htmlTexture",function(e,t,i,r,s){if(Array.isArray(e))for(var n=0;n<e.length;n++)this.addFile(new h0(this,e[n]));else this.addFile(new h0(this,e,t,i,r,s));return this});aJ.exports=h0});var fJ=l((Ctt,lJ)=>{var nGe=_(),aGe=$(),vi=X(),hJ=wr(),oGe=te(),hGe=tr(),uJ=Li(),u0=new nGe({Extends:uJ,initialize:function(t,i,r,s,n,a,o){if(oGe(i)){var h=i;i=vi(h,"key"),vi(h,"url",!1)?r=vi(h,"url"):r=vi(h,"atlasURL"),a=vi(h,"xhrSettings"),s=vi(h,"path"),n=vi(h,"baseURL"),o=vi(h,"textureXhrSettings")}var u=new hGe(t,i,r,a);uJ.call(this,t,"multiatlas",i,[u]),this.config.path=s,this.config.baseURL=n,this.config.textureXhrSettings=o},onFileComplete:function(e){var t=this.files.indexOf(e);if(t!==-1&&(this.pending--,e.type==="json"&&e.data.hasOwnProperty("textures"))){var i=e.data.textures,r=this.config,s=this.loader,n=s.baseURL,a=s.path,o=s.prefix,h=vi(r,"baseURL",this.baseURL),u=vi(r,"path",this.path),f=vi(r,"prefix",this.prefix),d=vi(r,"textureXhrSettings");s.setBaseURL(h),s.setPath(u),s.setPrefix(f);for(var v=0;v<i.length;v++){var c=i[v].image,p="MA"+this.multiKeyIndex+"_"+c,m=new hJ(s,p,c,d);if(this.addToMultiFile(m),s.addFile(m),i[v].normalMap){var g=new hJ(s,p,i[v].normalMap,d);g.type="normalMap",m.setLink(g),this.addToMultiFile(g),s.addFile(g)}}s.setBaseURL(n),s.setPath(a),s.setPrefix(o)}},addToCache:function(){if(this.isReadyToProcess()){for(var e=this.files[0],t=[],i=[],r=[],s=1;s<this.files.length;s++){var n=this.files[s];if(n.type!=="normalMap")for(var a=n.key.indexOf("_"),o=n.key.substr(a+1),h=n.data,u=0;u<e.data.textures.length;u++){var f=e.data.textures[u];if(f.image===o){i.push(h),t.push(f),n.linkFile&&r.push(n.linkFile.data);break}}}for(r.length===0&&(r=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,i,t,r),this.complete=!0,s=0;s<this.files.length;s++)this.files[s].pendingDestroy()}}});aGe.register("multiatlas",function(e,t,i,r,s){var n;if(Array.isArray(e))for(var a=0;a<e.length;a++)n=new u0(this,e[a]),this.addFile(n.files);else n=new u0(this,e,t,i,r,s),this.addFile(n.files);return this});lJ.exports=u0});var f0=l((Rtt,vJ)=>{var uGe=_(),lGe=Me(),dJ=Ve(),fGe=$(),Nl=X(),dGe=te(),l0=new uGe({Extends:dJ,initialize:function(t,i,r,s){var n="js";if(dGe(i)){var a=i;i=Nl(a,"key"),r=Nl(a,"url"),s=Nl(a,"xhrSettings"),n=Nl(a,"extension",n)}var o={type:"script",cache:!1,extension:n,responseType:"text",key:i,url:r,xhrSettings:s};dJ.call(this,t,o)},onProcess:function(){this.state=lGe.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});fGe.register("script",function(e,t,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.addFile(new l0(this,e[r]));else this.addFile(new l0(this,e,t,i));return this});vJ.exports=l0});var mJ=l((_tt,pJ)=>{var vGe=_(),cGe=$(),Gl=X(),pGe=te(),cJ=Li(),mGe=f0(),d0=new vGe({Extends:cJ,initialize:function(t,i,r,s){var n="js",a=[];if(pGe(i)){var o=i;i=Gl(o,"key"),r=Gl(o,"url"),s=Gl(o,"xhrSettings"),n=Gl(o,"extension",n)}Array.isArray(r)||(r=[r]);for(var h=0;h<r.length;h++){var u=new mGe(t,{key:i+"_"+h.toString(),url:r[h],extension:n,xhrSettings:s});u.onProcess=function(){this.onProcessComplete()},a.push(u)}cJ.call(this,t,"scripts",i,a)},addToCache:function(){if(this.isReadyToProcess()){for(var e=0;e<this.files.length;e++){var t=this.files[e];t.data=document.createElement("script"),t.data.language="javascript",t.data.type="text/javascript",t.data.defer=!1,t.data.text=t.xhrLoader.responseText,document.head.appendChild(t.data)}this.complete=!0}}});cGe.register("scripts",function(e,t,i){var r;if(Array.isArray(e))for(var s=0;s<e.length;s++)r=new d0(this,e[s]),this.addFile(r.files);else r=new d0(this,e,t,i),this.addFile(r.files);return this});pJ.exports=d0});var Dl=l((wtt,xJ)=>{var gGe=_(),xGe=Me(),gJ=Ve(),TGe=$(),ga=X(),EGe=te(),v0=new gGe({Extends:gJ,initialize:function(t,i,r,s){var n="text",a="txt",o=t.cacheManager.text;if(EGe(i)){var h=i;i=ga(h,"key"),r=ga(h,"url"),s=ga(h,"xhrSettings"),a=ga(h,"extension",a),n=ga(h,"type",n),o=ga(h,"cache",o)}var u={type:n,cache:o,extension:a,responseType:"text",key:i,url:r,xhrSettings:s};gJ.call(this,t,u)},onProcess:function(){this.state=xGe.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});TGe.register("text",function(e,t,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.addFile(new v0(this,e[r]));else this.addFile(new v0(this,e,t,i));return this});xJ.exports=v0});var yJ=l((Ptt,EJ)=>{var yGe=_(),SGe=$(),Ss=X(),CGe=te(),TJ=Li(),RGe=ug(),_Ge=lg(),Il=Dl(),c0=new yGe({Extends:TJ,initialize:function(t,i,r,s,n,a){var o,h,u=t.cacheManager.obj;if(CGe(i)){var f=i;i=Ss(f,"key"),o=new Il(t,{key:i,type:"obj",cache:u,url:Ss(f,"url"),extension:Ss(f,"extension","obj"),xhrSettings:Ss(f,"xhrSettings"),config:{flipUV:Ss(f,"flipUV",n)}}),s=Ss(f,"matURL"),s&&(h=new Il(t,{key:i,type:"mat",cache:u,url:s,extension:Ss(f,"matExtension","mat"),xhrSettings:Ss(f,"xhrSettings")}))}else o=new Il(t,{key:i,url:r,type:"obj",cache:u,extension:"obj",xhrSettings:a,config:{flipUV:n}}),s&&(h=new Il(t,{key:i,url:s,type:"mat",cache:u,extension:"mat",xhrSettings:a}));TJ.call(this,t,"obj",i,[o,h])},addToCache:function(){if(this.isReadyToProcess()){var e=this.files[0],t=this.files[1],i=RGe(e.data,e.config.flipUV);t&&(i.materials=_Ge(t.data)),e.cache.add(e.key,i),this.complete=!0}}});SGe.register("obj",function(e,t,i,r,s){var n;if(Array.isArray(e))for(var a=0;a<e.length;a++)n=new c0(this,e[a]),this.addFile(n.files);else n=new c0(this,e,t,i,r,s),this.addFile(n.files);return this});EJ.exports=c0});var _J=l((Att,RJ)=>{var wGe=_(),SJ=Me(),PGe=$(),CJ=tr(),p0=new wGe({Extends:CJ,initialize:function(t,i,r,s,n){CJ.call(this,t,i,r,s,n),this.type="packfile"},onProcess:function(){this.state!==SJ.FILE_POPULATED&&(this.state=SJ.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.loader.addPack(this.data,this.config),this.onProcessComplete()}});PGe.register("pack",function(e,t,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)this.addFile(new p0(this,e[s]));else this.addFile(new p0(this,e,t,r,i));return this});RJ.exports=p0});var AJ=l((btt,PJ)=>{var AGe=_(),m0=Me(),wJ=Ve(),bGe=$(),Cs=X(),MGe=te(),g0=new AGe({Extends:wJ,initialize:function(t,i,r,s,n,a){var o="js";if(MGe(i)){var h=i;i=Cs(h,"key"),r=Cs(h,"url"),a=Cs(h,"xhrSettings"),o=Cs(h,"extension",o),s=Cs(h,"start"),n=Cs(h,"mapping")}var u={type:"plugin",cache:!1,extension:o,responseType:"text",key:i,url:r,xhrSettings:a,config:{start:s,mapping:n}};wJ.call(this,t,u),typeof r=="function"&&(this.data=r,this.state=m0.FILE_POPULATED)},onProcess:function(){var e=this.loader.systems.plugins,t=this.config,i=Cs(t,"start",!1),r=Cs(t,"mapping",null);if(this.state===m0.FILE_POPULATED)e.install(this.key,this.data,i,r);else{this.state=m0.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var s=e.install(this.key,window[this.key],i,r);(i||r)&&(this.loader.systems[r]=s,this.loader.scene[r]=s)}this.onProcessComplete()}});bGe.register("plugin",function(e,t,i,r,s){if(Array.isArray(e))for(var n=0;n<e.length;n++)this.addFile(new g0(this,e[n]));else this.addFile(new g0(this,e,t,i,r,s));return this});PJ.exports=g0});var qJ=l((Mtt,MJ)=>{var qGe=_(),OGe=Me(),bJ=Ve(),LGe=$(),Bl=X(),FGe=te(),x0=new qGe({Extends:bJ,initialize:function(t,i,r,s){var n="js";if(FGe(i)){var a=i;i=Bl(a,"key"),r=Bl(a,"url"),s=Bl(a,"xhrSettings"),n=Bl(a,"extension",n)}var o={type:"text",extension:n,responseType:"text",key:i,url:r,xhrSettings:s};bJ.call(this,t,o)},onProcess:function(){this.state=OGe.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var e=this.data.concat(`(function(){
return new `+this.key+`();
}).call(this);`),t=eval;this.loader.sceneManager.add(this.key,t(e)),this.complete=!0}});LGe.register("sceneFile",function(e,t,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.addFile(new x0(this,e[r]));else this.addFile(new x0(this,e,t,i));return this});MJ.exports=x0});var FJ=l((qtt,LJ)=>{var NGe=_(),T0=Me(),OJ=Ve(),GGe=$(),Rs=X(),DGe=te(),E0=new NGe({Extends:OJ,initialize:function(t,i,r,s,n,a){var o="js";if(DGe(i)){var h=i;i=Rs(h,"key"),r=Rs(h,"url"),a=Rs(h,"xhrSettings"),o=Rs(h,"extension",o),s=Rs(h,"systemKey"),n=Rs(h,"sceneKey")}var u={type:"scenePlugin",cache:!1,extension:o,responseType:"text",key:i,url:r,xhrSettings:a,config:{systemKey:s,sceneKey:n}};OJ.call(this,t,u),typeof r=="function"&&(this.data=r,this.state=T0.FILE_POPULATED)},onProcess:function(){var e=this.loader.systems.plugins,t=this.config,i=this.key,r=Rs(t,"systemKey",i),s=Rs(t,"sceneKey",i);this.state===T0.FILE_POPULATED?e.installScenePlugin(r,this.data,s,this.loader.scene,!0):(this.state=T0.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),e.installScenePlugin(r,window[this.key],s,this.loader.scene,!0)),this.onProcessComplete()}});GGe.register("scenePlugin",function(e,t,i,r,s){if(Array.isArray(e))for(var n=0;n<e.length;n++)this.addFile(new E0(this,e[n]));else this.addFile(new E0(this,e,t,i,r,s));return this});LJ.exports=E0});var DJ=l((Ott,GJ)=>{var IGe=_(),BGe=$(),NJ=wr(),y0=new IGe({Extends:NJ,initialize:function(t,i,r,s,n){NJ.call(this,t,i,r,n,s),this.type="spritesheet"},addToCache:function(){var e=this.cache.addSpriteSheet(this.key,this.data,this.config);this.pendingDestroy(e)}});BGe.register("spritesheet",function(e,t,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)this.addFile(new y0(this,e[s]));else this.addFile(new y0(this,e,t,i,r));return this});GJ.exports=y0});var BJ=l((Ltt,IJ)=>{var VGe=_(),UGe=Me(),Fo=Ve(),kGe=$(),_s=X(),zGe=te(),S0=new VGe({Extends:Fo,initialize:function(t,i,r,s,n){var a="svg";if(zGe(i)){var o=i;i=_s(o,"key"),r=_s(o,"url"),s=_s(o,"svgConfig",{}),n=_s(o,"xhrSettings"),a=_s(o,"extension",a)}var h={type:"svg",cache:t.textureManager,extension:a,responseType:"text",key:i,url:r,xhrSettings:n,config:{width:_s(s,"width"),height:_s(s,"height"),scale:_s(s,"scale")}};Fo.call(this,t,h)},onProcess:function(){this.state=UGe.FILE_PROCESSING;var e=this.xhrLoader.responseText,t=[e],i=this.config.width,r=this.config.height,s=this.config.scale;e:if(i&&r||s){var n=null,a=new DOMParser;n=a.parseFromString(e,"text/xml");var o=n.getElementsByTagName("svg")[0],h=o.hasAttribute("viewBox"),u=parseFloat(o.getAttribute("width")),f=parseFloat(o.getAttribute("height"));if(!h&&u&&f)o.setAttribute("viewBox","0  0 "+u+" "+f);else if(h&&!u&&!f){var d=o.getAttribute("viewBox").split(/\s+|,/);u=d[2],f=d[3]}if(s)if(u&&f)i=u*s,r=f*s;else break e;o.setAttribute("width",i.toString()+"px"),o.setAttribute("height",r.toString()+"px"),t=[new XMLSerializer().serializeToString(o)]}try{var v=new window.Blob(t,{type:"image/svg+xml;charset=utf-8"})}catch(m){this.onProcessError();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var c=this,p=!1;this.data.onload=function(){p||Fo.revokeObjectURL(c.data),c.onProcessComplete()},this.data.onerror=function(){p?c.onProcessError():(p=!0,Fo.revokeObjectURL(c.data),c.data.src="data:image/svg+xml,"+encodeURIComponent(t.join("")))},Fo.createObjectURL(this.data,v,"image/svg+xml")},addToCache:function(){var e=this.cache.addImage(this.key,this.data);this.pendingDestroy(e)}});kGe.register("svg",function(e,t,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)this.addFile(new S0(this,e[s]));else this.addFile(new S0(this,e,t,i,r));return this});IJ.exports=S0});var Vl=l((Ftt,VJ)=>{VJ.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}});var zJ=l((Ntt,kJ)=>{var XGe=_(),YGe=Me(),UJ=Ve(),WGe=$(),Ul=X(),HGe=te(),jGe=Vl(),C0=new XGe({Extends:UJ,initialize:function(t,i,r,s){var n="csv";if(HGe(i)){var a=i;i=Ul(a,"key"),r=Ul(a,"url"),s=Ul(a,"xhrSettings"),n=Ul(a,"extension",n)}var o={type:"tilemapCSV",cache:t.cacheManager.tilemap,extension:n,responseType:"text",key:i,url:r,xhrSettings:s};UJ.call(this,t,o),this.tilemapFormat=jGe.CSV},onProcess:function(){this.state=YGe.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var e={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,e),this.pendingDestroy(e)}});WGe.register("tilemapCSV",function(e,t,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.addFile(new C0(this,e[r]));else this.addFile(new C0(this,e,t,i));return this});kJ.exports=C0});var WJ=l((Gtt,YJ)=>{var KGe=_(),ZGe=$(),XJ=tr(),JGe=Vl(),R0=new KGe({Extends:XJ,initialize:function(t,i,r,s){XJ.call(this,t,i,r,s),this.type="tilemapJSON",this.cache=t.cacheManager.tilemap},addToCache:function(){var e={format:JGe.WELTMEISTER,data:this.data};this.cache.add(this.key,e),this.pendingDestroy(e)}});ZGe.register("tilemapImpact",function(e,t,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.addFile(new R0(this,e[r]));else this.addFile(new R0(this,e,t,i));return this});YJ.exports=R0});var KJ=l((Dtt,jJ)=>{var QGe=_(),$Ge=$(),HJ=tr(),e2e=Vl(),_0=new QGe({Extends:HJ,initialize:function(t,i,r,s){HJ.call(this,t,i,r,s),this.type="tilemapJSON",this.cache=t.cacheManager.tilemap},addToCache:function(){var e={format:e2e.TILED_JSON,data:this.data};this.cache.add(this.key,e),this.pendingDestroy(e)}});$Ge.register("tilemapTiledJSON",function(e,t,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.addFile(new _0(this,e[r]));else this.addFile(new _0(this,e,t,i));return this});jJ.exports=_0});var $J=l((Itt,QJ)=>{var t2e=_(),i2e=$(),ws=X(),ZJ=wr(),r2e=te(),w0=Li(),JJ=Dl(),P0=new t2e({Extends:w0,initialize:function(t,i,r,s,n,a){var o,h;if(r2e(i)){var u=i;i=ws(u,"key"),o=new ZJ(t,{key:i,url:ws(u,"textureURL"),extension:ws(u,"textureExtension","png"),normalMap:ws(u,"normalMap"),xhrSettings:ws(u,"textureXhrSettings")}),h=new JJ(t,{key:i,url:ws(u,"atlasURL"),extension:ws(u,"atlasExtension","txt"),xhrSettings:ws(u,"atlasXhrSettings")})}else o=new ZJ(t,i,r,n),h=new JJ(t,i,s,a);o.linkFile?w0.call(this,t,"unityatlas",i,[o,h,o.linkFile]):w0.call(this,t,"unityatlas",i,[o,h])},addToCache:function(){if(this.isReadyToProcess()){var e=this.files[0],t=this.files[1],i=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(e.key,e.data,t.data,i),t.pendingDestroy(),this.complete=!0}}});i2e.register("unityAtlas",function(e,t,i,r,s){var n;if(Array.isArray(e))for(var a=0;a<e.length;a++)n=new P0(this,e[a]),this.addFile(n.files);else n=new P0(this,e,t,i,r,s),this.addFile(n.files);return this});QJ.exports=P0});var tQ=l((Btt,eQ)=>{var s2e=_(),n2e=Me(),No=Ve(),a2e=$(),o2e=Po(),Ps=X(),h2e=te(),nn=new s2e({Extends:No,initialize:function(t,i,r,s,n,a,o){s===void 0&&(s="loadeddata"),n===void 0&&(n=!1),a===void 0&&(a=!1),s!=="loadeddata"&&s!=="canplay"&&s!=="canplaythrough"&&(s="loadeddata");var h={type:"video",cache:t.cacheManager.video,extension:r.type,responseType:"blob",key:i,url:r.url,xhrSettings:o,config:{loadEvent:s,asBlob:n,noAudio:a}};this.onLoadCallback=this.onVideoLoadHandler.bind(this),this.onErrorCallback=this.onVideoErrorHandler.bind(this),No.call(this,t,h)},onProcess:function(){if(this.state=n2e.FILE_PROCESSING,!this.config.asBlob){this.onProcessComplete();return}var e=this.createVideoElement();this.data=e;var t=this;this.data.onloadeddata=function(){t.onProcessComplete()},this.data.onerror=function(){No.revokeObjectURL(t.data),t.onProcessError()},No.createObjectURL(e,this.xhrLoader.response,""),e.load()},createVideoElement:function(){var e=document.createElement("video");return e.controls=!1,e.crossOrigin=this.loader.crossOrigin,this.config.noAudio&&(e.muted=!0,e.defaultMuted=!0,e.setAttribute("autoplay","autoplay")),e.setAttribute("playsinline","playsinline"),e.setAttribute("preload","auto"),e},onVideoLoadHandler:function(e){var t=e.target;t.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),t.removeEventListener("error",this.onErrorCallback,!0),this.data=t,this.resetXHR(),this.loader.nextFile(this,!0)},onVideoErrorHandler:function(e){var t=e.target;t&&(t.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),t.removeEventListener("error",this.onErrorCallback,!0)),this.resetXHR(),this.loader.nextFile(this,!1)},load:function(){var e=this.config.loadEvent;if(this.config.asBlob)No.prototype.load.call(this);else{this.percentComplete=0;var t=this.createVideoElement();t.addEventListener(e,this.onLoadCallback,!0),t.addEventListener("error",this.onErrorCallback,!0),t.src=o2e(this,this.loader.baseURL),t.load()}}});nn.create=function(e,t,i,r,s,n,a){var o=e.systems.game;h2e(t)&&(i=Ps(t,"url",[]),r=Ps(t,"loadEvent","loadeddata"),s=Ps(t,"asBlob",!1),n=Ps(t,"noAudio",!1),a=Ps(t,"xhrSettings"),t=Ps(t,"key"));var h=nn.getVideoURL(o,i);if(h)return new nn(e,t,h,r,s,n,a)};nn.getVideoURL=function(e,t){Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var r=Ps(t[i],"url",t[i]);if(r.indexOf("blob:")===0)return{url:r,type:""};var s;if(r.indexOf("data:")===0?s=r.split(",")[0].match(/\/(.*?);/):s=r.match(/\.([a-zA-Z0-9]+)($|\?)/),s=Ps(t[i],"type",s?s[1]:"").toLowerCase(),e.device.video[s])return{url:r,type:s}}return null};a2e.register("video",function(e,t,i,r,s,n){var a;if(Array.isArray(e))for(var o=0;o<e.length;o++)a=nn.create(this,e[o]),a&&this.addFile(a);else a=nn.create(this,e,t,i,r,s,n),a&&this.addFile(a);return this});eQ.exports=nn});var rQ=l((Vtt,iQ)=>{iQ.exports={AnimationJSONFile:pZ(),AsepriteFile:SZ(),AtlasJSONFile:wZ(),AtlasXMLFile:OZ(),AudioFile:e0(),AudioSpriteFile:kZ(),BinaryFile:YZ(),BitmapFontFile:KZ(),CSSFile:QZ(),GLSLFile:tJ(),HTML5AudioFile:$g(),HTMLFile:sJ(),HTMLTextureFile:oJ(),ImageFile:wr(),JSONFile:tr(),MultiAtlasFile:fJ(),MultiScriptFile:mJ(),OBJFile:yJ(),PackFile:_J(),PluginFile:AJ(),SceneFile:qJ(),ScenePluginFile:FJ(),ScriptFile:f0(),SpriteSheetFile:DJ(),SVGFile:BJ(),TextFile:Dl(),TilemapCSVFile:zJ(),TilemapImpactFile:WJ(),TilemapJSONFile:KJ(),UnityAtlasFile:$J(),VideoFile:tQ(),XMLFile:ql()}});var oQ=l((Utt,aQ)=>{var u2e=_(),Pt=Me(),kl=Gu(),sQ=se(),an=Hs(),l2e=$(),je=X(),f2e=rt(),ir=qe(),d2e=Ao(),nQ=new u2e({Extends:sQ,initialize:function(t){sQ.call(this);var i=t.sys.game.config,r=t.sys.settings.loader;this.scene=t,this.systems=t.sys,this.cacheManager=t.sys.cache,this.textureManager=t.sys.textures,this.sceneManager=t.sys.game.scene,l2e.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(je(r,"baseURL",i.loaderBaseURL)),this.setPath(je(r,"path",i.loaderPath)),this.setPrefix(je(r,"prefix",i.loaderPrefix)),this.maxParallelDownloads=je(r,"maxParallelDownloads",i.loaderMaxParallelDownloads),this.xhr=d2e(je(r,"responseType",i.loaderResponseType),je(r,"async",i.loaderAsync),je(r,"user",i.loaderUser),je(r,"password",i.loaderPassword),je(r,"timeout",i.loaderTimeout),je(r,"withCredentials",i.loaderWithCredentials)),this.crossOrigin=je(r,"crossOrigin",i.loaderCrossOrigin),this.totalToLoad=0,this.progress=0,this.list=new kl,this.inflight=new kl,this.queue=new kl,this._deleteQueue=new kl,this.totalFailed=0,this.totalComplete=0,this.state=Pt.LOADER_IDLE,this.multiKeyIndex=0,t.sys.events.once(ir.BOOT,this.boot,this),t.sys.events.on(ir.START,this.pluginStart,this)},boot:function(){this.systems.events.once(ir.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(ir.SHUTDOWN,this.shutdown,this)},setBaseURL:function(e){return e===void 0&&(e=""),e!==""&&e.substr(-1)!=="/"&&(e=e.concat("/")),this.baseURL=e,this},setPath:function(e){return e===void 0&&(e=""),e!==""&&e.substr(-1)!=="/"&&(e=e.concat("/")),this.path=e,this},setPrefix:function(e){return e===void 0&&(e=""),this.prefix=e,this},setCORS:function(e){return this.crossOrigin=e,this},addFile:function(e){Array.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++){var i=e[t];this.keyExists(i)||(this.list.set(i),this.emit(an.ADD,i.key,i.type,this,i),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(e){var t=e.hasCacheConflict();return t||this.list.iterate(function(i){if(i.type===e.type&&i.key===e.key)return t=!0,!1}),!t&&this.isLoading()&&(this.inflight.iterate(function(i){if(i.type===e.type&&i.key===e.key)return t=!0,!1}),this.queue.iterate(function(i){if(i.type===e.type&&i.key===e.key)return t=!0,!1})),t},addPack:function(e,t){t&&e.hasOwnProperty(t)&&(e={packKey:e[t]});var i=0,r=this.baseURL,s=this.path,n=this.prefix;for(var a in e)if(!!Object.prototype.hasOwnProperty.call(e,a)){var o=e[a],h=je(o,"baseURL",r),u=je(o,"path",s),f=je(o,"prefix",n),d=je(o,"files",null),v=je(o,"defaultType","void");if(Array.isArray(d)){this.setBaseURL(h),this.setPath(u),this.setPrefix(f);for(var c=0;c<d.length;c++){var p=d[c],m=p.hasOwnProperty("type")?p.type:v;this[m]&&(this[m](p),i++)}}}return this.setBaseURL(r),this.setPath(s),this.setPrefix(n),i>0},isLoading:function(){return this.state===Pt.LOADER_LOADING||this.state===Pt.LOADER_PROCESSING},isReady:function(){return this.state===Pt.LOADER_IDLE||this.state===Pt.LOADER_COMPLETE},start:function(){!this.isReady()||(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(an.START,this),this.list.size===0?this.loadComplete():(this.state=Pt.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(ir.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(an.PROGRESS,this.progress)},update:function(){this.state===Pt.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(e){if((e.state===Pt.FILE_POPULATED||e.state===Pt.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(e),this.list.delete(e),e.crossOrigin||(e.crossOrigin=this.crossOrigin),e.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(e,t){!this.inflight||(this.inflight.delete(e),this.updateProgress(),t?(this.totalComplete++,this.queue.set(e),this.emit(an.FILE_LOAD,e),e.onProcess()):(this.totalFailed++,this._deleteQueue.set(e),this.emit(an.FILE_LOAD_ERROR,e),this.fileProcessComplete(e)))},fileProcessComplete:function(e){!this.scene||!this.systems||!this.systems.game||this.systems.game.pendingDestroy||(e.state===Pt.FILE_ERRORED?e.multiFile&&e.multiFile.onFileFailed(e):e.state===Pt.FILE_COMPLETE&&(e.multiFile?e.multiFile.isReadyToProcess()&&e.multiFile.addToCache():e.addToCache()),this.queue.delete(e),this.list.size===0&&this.inflight.size===0&&this.queue.size===0&&this.loadComplete())},loadComplete:function(){this.emit(an.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=Pt.LOADER_COMPLETE,this.systems.events.off(ir.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(an.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(e){this._deleteQueue.set(e)},saveJSON:function(e,t){return this.save(JSON.stringify(e),t)},save:function(e,t,i){t===void 0&&(t="file.json"),i===void 0&&(i="application/json");var r=new Blob([e],{type:i}),s=URL.createObjectURL(r),n=document.createElement("a");return n.download=t,n.textContent="Download "+t,n.href=s,n.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var e=this.systems.game.config,t=this.systems.settings.loader;this.setBaseURL(je(t,"baseURL",e.loaderBaseURL)),this.setPath(je(t,"path",e.loaderPath)),this.setPrefix(je(t,"prefix",e.loaderPrefix)),this.state=Pt.LOADER_IDLE},shutdown:function(){this.reset(),this.state=Pt.LOADER_SHUTDOWN,this.systems.events.off(ir.UPDATE,this.update,this),this.systems.events.off(ir.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=Pt.LOADER_DESTROYED,this.systems.events.off(ir.UPDATE,this.update,this),this.systems.events.off(ir.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});f2e.register("Loader",nQ,"load");aQ.exports=nQ});var uQ=l((ktt,hQ)=>{var v2e=Me(),c2e=Fe(),A0={Events:Hs(),FileTypes:rQ(),File:Ve(),FileTypesManager:$(),GetURL:Po(),LoaderPlugin:oQ(),MergeXHRSettings:bl(),MultiFile:Li(),XHRLoader:Ig(),XHRSettings:Ao()};A0=c2e(!1,A0,v2e);hQ.exports=A0});var b0=l((ztt,lQ)=>{var p2e=_(),m2e=new p2e({initialize:function(t){this.pluginManager=t,this.game=t.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});lQ.exports=m2e});var vQ=l((Xtt,dQ)=>{var fQ=b0(),g2e=_(),x2e=qe(),T2e=new g2e({Extends:fQ,initialize:function(t,i,r){fQ.call(this,i),this.scene=t,this.systems=t.sys,this.pluginKey=r,t.sys.events.once(x2e.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});dQ.exports=T2e});var pQ=l((Ytt,cQ)=>{cQ.exports={BasePlugin:b0(),DefaultPlugins:oh(),PluginCache:rt(),PluginManager:Yc(),ScenePlugin:vQ()}});var gQ=l((Wtt,mQ)=>{mQ.exports={CanvasRenderer:wd(),GetBlendModes:Rd(),SetTransform:vt()}});var TQ=l((Htt,xQ)=>{xQ.exports={Canvas:Sd(),WebGL:tv()}});var yQ=l((jtt,EQ)=>{EQ.exports=["#define SHADER_NAME PHASER_POSTFX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}",""].join(`
`)});var CQ=l((Ktt,SQ)=>{var E2e=_(),y2e=Eh(),zl=X(),S2e=yQ(),C2e=Kd(),M0=Gi(),R2e=new E2e({Extends:M0,initialize:function(t){t.renderTarget=zl(t,"renderTarget",1),t.fragShader=zl(t,"fragShader",S2e),t.vertShader=zl(t,"vertShader",C2e),t.attributes=zl(t,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),t.batchSize=1,t.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],M0.call(this,t),this.isPostFX=!0,this.gameObject,this.colorMatrix=new y2e,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){M0.prototype.boot.call(this);var e=this.manager.UTILITY_PIPELINE;this.fullFrame1=e.fullFrame1,this.fullFrame2=e.fullFrame2,this.halfFrame1=e.halfFrame1,this.halfFrame2=e.halfFrame2,this.set1i("uMainSampler",0)},onDraw:function(e){this.bindAndDraw(e)},copyFrame:function(e,t,i,r,s){this.manager.copyFrame(e,t,i,r,s)},copyToGame:function(e){this.manager.copyToGame(e)},drawFrame:function(e,t,i){this.manager.drawFrame(e,t,i,this.colorMatrix)},blendFrames:function(e,t,i,r,s){this.manager.blendFrames(e,t,i,r,s)},blendFramesAdditive:function(e,t,i,r,s){this.manager.blendFramesAdditive(e,t,i,r,s)},clearFrame:function(e,t){this.manager.clearFrame(e,t)},blitFrame:function(e,t,i,r,s,n){this.manager.blitFrame(e,t,i,r,s,n)},copyFrameRect:function(e,t,i,r,s,n,a,o){this.manager.copyFrameRect(e,t,i,r,s,n,a,o)},bindAndDraw:function(e,t,i,r,s){i===void 0&&(i=!0),r===void 0&&(r=!0);var n=this.gl,a=this.renderer;this.bind(s),this.set1i("uMainSampler",0),t?(n.viewport(0,0,t.width,t.height),n.bindFramebuffer(n.FRAMEBUFFER,t.framebuffer),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t.texture,0),i&&(r?n.clearColor(0,0,0,0):n.clearColor(0,0,0,1),n.clear(n.COLOR_BUFFER_BIT))):(a.popFramebuffer(!1,!1,!1),a.currentFramebuffer||n.viewport(0,0,a.width,a.height)),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,e.texture),n.bufferData(n.ARRAY_BUFFER,this.vertexData,n.STATIC_DRAW),n.drawArrays(n.TRIANGLES,0,6),t?(n.bindTexture(n.TEXTURE_2D,null),n.bindFramebuffer(n.FRAMEBUFFER,null)):a.resetTextures()}});SQ.exports=R2e});var _Q=l((Ztt,RQ)=>{var _2e=Is(),w2e=Fe(),q0={BitmapMaskPipeline:qd(),Events:Pd(),GraphicsPipeline:Id(),LightPipeline:Xd(),MultiPipeline:Rn(),PointLightPipeline:Wd(),PostFXPipeline:CQ(),RopePipeline:Hd(),SinglePipeline:jd(),UtilityPipeline:Jd()};q0=w2e(!1,q0,_2e);RQ.exports=q0});var PQ=l((Jtt,wQ)=>{var P2e=Sn(),A2e=Fe(),O0={PipelineManager:$d(),Pipelines:_Q(),RenderTarget:Na(),Utils:fe(),WebGLPipeline:Gi(),WebGLRenderer:iv(),WebGLShader:bd()};O0=A2e(!1,O0,P2e);wQ.exports=O0});var bQ=l((Qtt,AQ)=>{AQ.exports={Canvas:gQ(),Events:Ns(),Snapshot:TQ(),WebGL:PQ()}});var qQ=l(($tt,MQ)=>{var Xl=Fe(),Yl=Qh(),Pr={Center:Pc(),Events:Tn(),Orientation:Ac(),ScaleManager:Hc(),ScaleModes:bc(),Zoom:Mc()};Pr=Xl(!1,Pr,Yl.CENTER);Pr=Xl(!1,Pr,Yl.ORIENTATION);Pr=Xl(!1,Pr,Yl.SCALE_MODE);Pr=Xl(!1,Pr,Yl.ZOOM);MQ.exports=Pr});var FQ=l((eit,LQ)=>{var b2e=Pe(),M2e=_(),ci=qe(),Fi=X(),q2e=rt(),OQ=new M2e({initialize:function(t){this.scene=t,this.systems=t.sys,this.settings=t.sys.settings,this.key=t.sys.settings.key,this.manager=t.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,t.sys.events.once(ci.BOOT,this.boot,this),t.sys.events.on(ci.START,this.pluginStart,this)},boot:function(){this.systems.events.once(ci.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(ci.SHUTDOWN,this.shutdown,this)},start:function(e,t){return e===void 0&&(e=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",e,t),this},restart:function(e){var t=this.key;return this.manager.queueOp("stop",t),this.manager.queueOp("start",t,e),this},transition:function(e){e===void 0&&(e={});var t=Fi(e,"target",!1),i=this.manager.getScene(t);if(!t||!this.checkValidTransition(i))return!1;var r=Fi(e,"duration",1e3);this._elapsed=0,this._target=i,this._duration=r,this._willSleep=Fi(e,"sleep",!1),this._willRemove=Fi(e,"remove",!1);var s=Fi(e,"onUpdate",null);s&&(this._onUpdate=s,this._onUpdateScope=Fi(e,"onUpdateScope",this.scene));var n=Fi(e,"allowInput",!1);this.settings.transitionAllowInput=n;var a=i.sys.settings;return a.isTransition=!0,a.transitionFrom=this.scene,a.transitionDuration=r,a.transitionAllowInput=n,Fi(e,"moveAbove",!1)?this.manager.moveAbove(this.key,t):Fi(e,"moveBelow",!1)&&this.manager.moveBelow(this.key,t),i.sys.isSleeping()?i.sys.wake(Fi(e,"data")):this.manager.start(t,Fi(e,"data")),this.systems.events.emit(ci.TRANSITION_OUT,i,r),this.systems.events.on(ci.UPDATE,this.step,this),!0},checkValidTransition:function(e){return!(!e||e.sys.isActive()||e.sys.isTransitioning()||e===this.scene||this.systems.isTransitioning())},step:function(e,t){this._elapsed+=t,this.transitionProgress=b2e(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var e=this._target.sys,t=this._target.sys.settings;this.systems.events.off(ci.UPDATE,this.step,this),e.events.emit(ci.TRANSITION_COMPLETE,this.scene),t.isTransition=!1,t.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(e,t,i,r){return this.manager.add(e,t,i,r)},launch:function(e,t){return e&&e!==this.key&&this.manager.queueOp("start",e,t),this},run:function(e,t){return e&&e!==this.key&&this.manager.queueOp("run",e,t),this},pause:function(e,t){return e===void 0&&(e=this.key),this.manager.queueOp("pause",e,t),this},resume:function(e,t){return e===void 0&&(e=this.key),this.manager.queueOp("resume",e,t),this},sleep:function(e,t){return e===void 0&&(e=this.key),this.manager.queueOp("sleep",e,t),this},wake:function(e,t){return e===void 0&&(e=this.key),this.manager.queueOp("wake",e,t),this},switch:function(e){return e!==this.key&&this.manager.queueOp("switch",this.key,e),this},stop:function(e,t){return e===void 0&&(e=this.key),this.manager.queueOp("stop",e,t),this},setActive:function(e,t,i){t===void 0&&(t=this.key);var r=this.manager.getScene(t);return r&&r.sys.setActive(e,i),this},setVisible:function(e,t){t===void 0&&(t=this.key);var i=this.manager.getScene(t);return i&&i.sys.setVisible(e),this},isSleeping:function(e){return e===void 0&&(e=this.key),this.manager.isSleeping(e)},isActive:function(e){return e===void 0&&(e=this.key),this.manager.isActive(e)},isPaused:function(e){return e===void 0&&(e=this.key),this.manager.isPaused(e)},isVisible:function(e){return e===void 0&&(e=this.key),this.manager.isVisible(e)},swapPosition:function(e,t){return t===void 0&&(t=this.key),e!==t&&this.manager.swapPosition(e,t),this},moveAbove:function(e,t){return t===void 0&&(t=this.key),e!==t&&this.manager.moveAbove(e,t),this},moveBelow:function(e,t){return t===void 0&&(t=this.key),e!==t&&this.manager.moveBelow(e,t),this},remove:function(e){return e===void 0&&(e=this.key),this.manager.remove(e),this},moveUp:function(e){return e===void 0&&(e=this.key),this.manager.moveUp(e),this},moveDown:function(e){return e===void 0&&(e=this.key),this.manager.moveDown(e),this},bringToTop:function(e){return e===void 0&&(e=this.key),this.manager.bringToTop(e),this},sendToBack:function(e){return e===void 0&&(e=this.key),this.manager.sendToBack(e),this},get:function(e){return this.manager.getScene(e)},getIndex:function(e){return e===void 0&&(e=this.key),this.manager.getIndex(e)},shutdown:function(){var e=this.systems.events;e.off(ci.SHUTDOWN,this.shutdown,this),e.off(ci.POST_UPDATE,this.step,this),e.off(ci.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(ci.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});q2e.register("ScenePlugin",OQ,"scenePlugin");LQ.exports=OQ});var GQ=l((tit,NQ)=>{var O2e=so(),L2e=Fe(),L0={Events:qe(),GetPhysicsPlugins:jc(),GetScenePlugins:Kc(),SceneManager:tp(),ScenePlugin:FQ(),Settings:Qc(),Systems:vu()};L0=L2e(!1,L0,O2e);NQ.exports=L0});var UQ=l((iit,VQ)=>{var F2e=cp();function Wl(e){var t=[".left",".top",".right",".bottom"];if(!(this instanceof Wl))return new Wl(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}Wl.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,i=[],r=this.toBBox;if(!jl(e,t))return i;for(var s=[],n,a,o,h;t;){for(n=0,a=t.children.length;n<a;n++)o=t.children[n],h=t.leaf?r(o):o,jl(e,h)&&(t.leaf?i.push(o):N0(e,h)?this._all(o,i):s.push(o));t=s.pop()}return i},collides:function(e){var t=this.data,i=this.toBBox;if(!jl(e,t))return!1;for(var r=[],s,n,a,o;t;){for(s=0,n=t.children.length;s<n;s++)if(a=t.children[s],o=t.leaf?i(a):a,jl(e,o)){if(t.leaf||N0(e,o))return!0;r.push(a)}t=r.pop()}return!1},load:function(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(var t=0,i=e.length;t<i;t++)this.insert(e[t]);return this}var r=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=r;else if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var s=this.data;this.data=r,r=s}this._insert(r,this.data.height-r.height-1,!0)}return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=Ta([]),this},remove:function(e,t){if(!e)return this;for(var i=this.data,r=this.toBBox(e),s=[],n=[],a,o,h,u;i||s.length;){if(i||(i=s.pop(),o=s[s.length-1],a=n.pop(),u=!0),i.leaf&&(h=N2e(e,i.children,t),h!==-1))return i.children.splice(h,1),s.push(i),this._condense(s),this;!u&&!i.leaf&&N0(i,r)?(s.push(i),n.push(a),a=0,o=i,i=i.children[0]):o?(a++,i=o.children[a],u=!1):i=null}return this},toBBox:function(e){return e},compareMinX:DQ,compareMinY:IQ,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var i=[];e;)e.leaf?t.push.apply(t,e.children):i.push.apply(i,e.children),e=i.pop();return t},_build:function(e,t,i,r){var s=i-t+1,n=this._maxEntries,a;if(s<=n)return a=Ta(e.slice(t,i+1)),xa(a,this.toBBox),a;r||(r=Math.ceil(Math.log(s)/Math.log(n)),n=Math.ceil(s/Math.pow(n,r-1))),a=Ta([]),a.leaf=!1,a.height=r;var o=Math.ceil(s/n),h=o*Math.ceil(Math.sqrt(n)),u,f,d,v;for(BQ(e,t,i,h,this.compareMinX),u=t;u<=i;u+=h)for(d=Math.min(u+h-1,i),BQ(e,u,d,o,this.compareMinY),f=u;f<=d;f+=o)v=Math.min(f+o-1,d),a.children.push(this._build(e,f,v,r-1));return xa(a,this.toBBox),a},_chooseSubtree:function(e,t,i,r){for(var s,n,a,o,h,u,f,d;r.push(t),!(t.leaf||r.length-1===i);){for(f=d=1/0,s=0,n=t.children.length;s<n;s++)a=t.children[s],h=F0(a),u=G2e(e,a)-h,u<d?(d=u,f=h<f?h:f,o=a):u===d&&h<f&&(f=h,o=a);t=o||t.children[0]}return t},_insert:function(e,t,i){var r=this.toBBox,s=i?e:r(e),n=[],a=this._chooseSubtree(s,this.data,t,n);for(a.children.push(e),Do(a,s);t>=0&&n[t].children.length>this._maxEntries;)this._split(n,t),t--;this._adjustParentBBoxes(s,n,t)},_split:function(e,t){var i=e[t],r=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,r);var n=this._chooseSplitIndex(i,s,r),a=Ta(i.children.splice(n,i.children.length-n));a.height=i.height,a.leaf=i.leaf,xa(i,this.toBBox),xa(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(i,a)},_splitRoot:function(e,t){this.data=Ta([e,t]),this.data.height=e.height+1,this.data.leaf=!1,xa(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,i){var r,s,n,a,o,h,u,f;for(h=u=1/0,r=t;r<=i-t;r++)s=Go(e,0,r,this.toBBox),n=Go(e,r,i,this.toBBox),a=D2e(s,n),o=F0(s)+F0(n),a<h?(h=a,f=r,u=o<u?o:u):a===h&&o<u&&(u=o,f=r);return f},_chooseSplitAxis:function(e,t,i){var r=e.leaf?this.compareMinX:DQ,s=e.leaf?this.compareMinY:IQ,n=this._allDistMargin(e,t,i,r),a=this._allDistMargin(e,t,i,s);n<a&&e.children.sort(r)},_allDistMargin:function(e,t,i,r){e.children.sort(r);var s=this.toBBox,n=Go(e,0,t,s),a=Go(e,i-t,i,s),o=Hl(n)+Hl(a),h,u;for(h=t;h<i-t;h++)u=e.children[h],Do(n,e.leaf?s(u):u),o+=Hl(n);for(h=i-t-1;h>=t;h--)u=e.children[h],Do(a,e.leaf?s(u):u),o+=Hl(a);return o},_adjustParentBBoxes:function(e,t,i){for(var r=i;r>=0;r--)Do(t[r],e)},_condense:function(e){for(var t=e.length-1,i;t>=0;t--)e[t].children.length===0?t>0?(i=e[t-1].children,i.splice(i.indexOf(e[t]),1)):this.clear():xa(e[t],this.toBBox)},compareMinX:function(e,t){return e.left-t.left},compareMinY:function(e,t){return e.top-t.top},toBBox:function(e){return{minX:e.left,minY:e.top,maxX:e.right,maxY:e.bottom}}};function N2e(e,t,i){if(!i)return t.indexOf(e);for(var r=0;r<t.length;r++)if(i(e,t[r]))return r;return-1}function xa(e,t){Go(e,0,e.children.length,t,e)}function Go(e,t,i,r,s){s||(s=Ta(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(var n=t,a;n<i;n++)a=e.children[n],Do(s,e.leaf?r(a):a);return s}function Do(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function DQ(e,t){return e.minX-t.minX}function IQ(e,t){return e.minY-t.minY}function F0(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function Hl(e){return e.maxX-e.minX+(e.maxY-e.minY)}function G2e(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function D2e(e,t){var i=Math.max(e.minX,t.minX),r=Math.max(e.minY,t.minY),s=Math.min(e.maxX,t.maxX),n=Math.min(e.maxY,t.maxY);return Math.max(0,s-i)*Math.max(0,n-r)}function N0(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function jl(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function Ta(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function BQ(e,t,i,r,s){for(var n=[t,i],a;n.length;)i=n.pop(),t=n.pop(),!(i-t<=r)&&(a=t+Math.ceil((i-t)/r/2)*r,F2e(e,a,t,i,s),n.push(t,a,a,i))}VQ.exports=Wl});var zQ=l((rit,kQ)=>{kQ.exports={Events:mp(),List:jn(),Map:yn(),ProcessQueue:gp(),RTree:UQ(),Set:Gu(),Size:Wc()}});var YQ=l((sit,XQ)=>{var I2e={LINEAR:0,NEAREST:1};XQ.exports=I2e});var jQ=l((nit,HQ)=>{var B2e=Fe(),WQ=YQ(),G0={CanvasTexture:np(),Events:En(),FilterMode:WQ,Frame:Vn(),Parsers:ap(),Texture:pu(),TextureManager:op(),TextureSource:ip()};G0=B2e(!1,G0,WQ);HQ.exports=G0});var D0=l((ait,KQ)=>{var V2e=_(),Ar=X(),U2e=new V2e({initialize:function(t){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(t)},reset:function(e){return this.delay=Ar(e,"delay",0),this.repeat=Ar(e,"repeat",0),this.loop=Ar(e,"loop",!1),this.callback=Ar(e,"callback",void 0),this.callbackScope=Ar(e,"callbackScope",this.callback),this.args=Ar(e,"args",[]),this.timeScale=Ar(e,"timeScale",1),this.startAt=Ar(e,"startAt",0),this.paused=Ar(e,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=this.repeat===-1||this.loop?999999999999:this.repeat,this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var e=this.delay+this.delay*this.repeat,t=this.elapsed+this.delay*(this.repeat-this.repeatCount);return t/e}else return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return this.elapsed*.001},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return this.getRemaining()*.001},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return this.getOverallRemaining()*.001},remove:function(e){e===void 0&&(e=!1),this.elapsed=this.delay,this.hasDispatched=!e,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});KQ.exports=U2e});var $Q=l((oit,QQ)=>{var k2e=_(),z2e=rt(),rr=qe(),ZQ=D0(),I0=Ds(),JQ=new k2e({initialize:function(t){this.scene=t,this.systems=t.sys,this.now=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],t.sys.events.once(rr.BOOT,this.boot,this),t.sys.events.on(rr.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(rr.DESTROY,this.destroy,this)},start:function(){var e=this.systems.events;e.on(rr.PRE_UPDATE,this.preUpdate,this),e.on(rr.UPDATE,this.update,this),e.once(rr.SHUTDOWN,this.shutdown,this)},addEvent:function(e){var t;return e instanceof ZQ?(t=e,this.removeEvent(t),t.elapsed=t.startAt,t.hasDispatched=!1,t.repeatCount=t.repeat===-1||t.loop?999999999999:t.repeat):t=new ZQ(e),this._pendingInsertion.push(t),t},delayedCall:function(e,t,i,r){return this.addEvent({delay:e,callback:t,args:i,callbackScope:r})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(e){Array.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++){var i=e[t];I0(this._pendingRemoval,i),I0(this._pendingInsertion,i),I0(this._active,i)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var e=this._pendingRemoval.length,t=this._pendingInsertion.length;if(!(e===0&&t===0)){var i,r;for(i=0;i<e;i++){r=this._pendingRemoval[i];var s=this._active.indexOf(r);s>-1&&this._active.splice(s,1),r.destroy()}for(i=0;i<t;i++)r=this._pendingInsertion[i],this._active.push(r);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(e,t){if(this.now=e,!this.paused){t*=this.timeScale;for(var i=0;i<this._active.length;i++){var r=this._active[i];if(!r.paused&&(r.elapsed+=t*r.timeScale,r.elapsed>=r.delay)){var s=r.elapsed-r.delay;r.elapsed=r.delay,!r.hasDispatched&&r.callback&&(r.hasDispatched=!0,r.callback.apply(r.callbackScope,r.args)),r.repeatCount>0?(r.repeatCount--,r.elapsed=s,r.hasDispatched=!1):this._pendingRemoval.push(r)}}}},shutdown:function(){var e;for(e=0;e<this._pendingInsertion.length;e++)this._pendingInsertion[e].destroy();for(e=0;e<this._active.length;e++)this._active[e].destroy();for(e=0;e<this._pendingRemoval.length;e++)this._pendingRemoval[e].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var t=this.systems.events;t.off(rr.PRE_UPDATE,this.preUpdate,this),t.off(rr.UPDATE,this.update,this),t.off(rr.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(rr.START,this.start,this),this.scene=null,this.systems=null}});z2e.register("Clock",JQ,"time");QQ.exports=JQ});var t$=l((hit,e$)=>{e$.exports={Clock:$Q(),TimerEvent:D0()}});var Io=l((uit,i$)=>{var X2e=function(e,t,i){var r;if(e.hasOwnProperty(t)){var s=typeof e[t];s==="function"?r=function(n,a,o,h,u,f){return e[t](n,a,o,h,u,f)}:r=function(){return e[t]}}else typeof i=="function"?r=i:r=function(){return i};return r};i$.exports=X2e});var s$=l((lit,r$)=>{r$.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","loop","loopDelay","offset","onActive","onActiveParams","onActiveScope","onComplete","onCompleteParams","onCompleteScope","onLoop","onLoopParams","onLoopScope","onRepeat","onRepeatParams","onRepeatScope","onStart","onStartParams","onStartScope","onStop","onStopParams","onStopScope","onUpdate","onUpdateParams","onUpdateScope","onYoyo","onYoyoParams","onYoyoScope","paused","props","repeat","repeatDelay","targets","useFrames","yoyo"]});var B0=l((fit,n$)=>{var Y2e=s$(),W2e=function(e){var t,i=[];if(e.hasOwnProperty("props"))for(t in e.props)t.substr(0,1)!=="_"&&i.push({key:t,value:e.props[t]});else for(t in e)Y2e.indexOf(t)===-1&&t.substr(0,1)!=="_"&&i.push({key:t,value:e[t]});return i};n$.exports=W2e});var Kl=l((dit,a$)=>{var H2e=ie(),j2e=function(e){var t=H2e(e,"targets",null);return t===null||(typeof t=="function"&&(t=t.call()),Array.isArray(t)||(t=[t])),t};a$.exports=j2e});var V0=l((vit,o$)=>{var K2e=ie(),Z2e=function(e){var t=K2e(e,"tweens",null);return t===null?[]:(typeof t=="function"&&(t=t.call()),Array.isArray(t)||(t=[t]),t)};o$.exports=Z2e});var Zl=l((cit,f$)=>{function h$(e){return!!e.getActive&&typeof e.getActive=="function"}function u$(e){return!!e.getStart&&typeof e.getStart=="function"}function l$(e){return!!e.getEnd&&typeof e.getEnd=="function"}function J2e(e){return u$(e)||l$(e)||h$(e)}var Bo=function(e,t){var i,r=function(p,m,g){return g},s=function(p,m,g){return g},n=null,a=typeof t;if(a==="number")r=function(){return t};else if(a==="string"){var o=t[0],h=parseFloat(t.substr(2));switch(o){case"+":r=function(p,m,g){return g+h};break;case"-":r=function(p,m,g){return g-h};break;case"*":r=function(p,m,g){return g*h};break;case"/":r=function(p,m,g){return g/h};break;default:r=function(){return parseFloat(t)}}}else if(a==="function")r=t;else if(a==="object")if(J2e(t))h$(t)&&(n=t.getActive),l$(t)&&(r=t.getEnd),u$(t)&&(s=t.getStart);else if(t.hasOwnProperty("value"))i=Bo(e,t.value);else{var u=t.hasOwnProperty("to"),f=t.hasOwnProperty("from"),d=t.hasOwnProperty("start");if(u&&(f||d)){if(i=Bo(e,t.to),d){var v=Bo(e,t.start);i.getActive=v.getEnd}if(f){var c=Bo(e,t.from);i.getStart=c.getEnd}}}return i||(i={getActive:n,getEnd:r,getStart:s}),i};f$.exports=Bo});var Jl=l((pit,d$)=>{var Q2e={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1};d$.exports=Q2e});var c$=l((mit,v$)=>{v$.exports="complete"});var m$=l((git,p$)=>{p$.exports="loop"});var x$=l((xit,g$)=>{g$.exports="pause"});var E$=l((Tit,T$)=>{T$.exports="resume"});var S$=l((Eit,y$)=>{y$.exports="start"});var R$=l((yit,C$)=>{C$.exports="update"});var w$=l((Sit,_$)=>{_$.exports="active"});var A$=l((Cit,P$)=>{P$.exports="complete"});var M$=l((Rit,b$)=>{b$.exports="loop"});var O$=l((_it,q$)=>{q$.exports="repeat"});var F$=l((wit,L$)=>{L$.exports="start"});var G$=l((Pit,N$)=>{N$.exports="stop"});var I$=l((Ait,D$)=>{D$.exports="update"});var V$=l((bit,B$)=>{B$.exports="yoyo"});var Ql=l((Mit,U$)=>{U$.exports={TIMELINE_COMPLETE:c$(),TIMELINE_LOOP:m$(),TIMELINE_PAUSE:x$(),TIMELINE_RESUME:E$(),TIMELINE_START:S$(),TIMELINE_UPDATE:R$(),TWEEN_ACTIVE:w$(),TWEEN_COMPLETE:A$(),TWEEN_LOOP:M$(),TWEEN_REPEAT:O$(),TWEEN_START:F$(),TWEEN_STOP:G$(),TWEEN_UPDATE:I$(),TWEEN_YOYO:V$()}});var $l=l((qit,X$)=>{var $2e=_(),k$=se(),$t=Ql(),eDe=Ce(),tDe=J(),k=bn(),iDe=we(),z$=new $2e({Extends:k$,initialize:function(t,i,r){k$.call(this),this.parent=t,this.parentIsTimeline=t.hasOwnProperty("isTimeline"),this.data=i,this.totalData=i.length,this.targets=r,this.totalTargets=r.length,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.startDelay=0,this.hasStarted=!1,this.isSeeking=!1,this.completeDelay=0,this.countdown=0,this.offset=0,this.calculatedOffset=0,this.state=k.PENDING_ADD,this._pausedState=k.INIT,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onActive:null,onComplete:null,onLoop:null,onRepeat:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope},getValue:function(e){return e===void 0&&(e=0),this.data[e].current},setTimeScale:function(e){return this.timeScale=e,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===k.ACTIVE},isPaused:function(){return this.state===k.PAUSED},hasTarget:function(e){return this.targets.indexOf(e)!==-1},updateTo:function(e,t,i){i===void 0&&(i=!1);for(var r=0;r<this.totalData;r++){var s=this.data[r];s.key===e&&(s.end=t,i&&(s.start=s.current))}return this},restart:function(){return this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0,this.state===k.ACTIVE?this.seek(0):this.state===k.REMOVED?(this.seek(0),this.parent.makeActive(this),this):this.state===k.PENDING_ADD?this:this.play()},calcDuration:function(){for(var e=0,t=iDe.MAX_SAFE_INTEGER,i=this.data,r=0;r<this.totalData;r++){var s=i[r];s.t1=s.duration+s.hold,s.yoyo&&(s.t1+=s.duration),s.t2=s.t1+s.repeatDelay,s.totalDuration=s.delay+s.t1,s.repeat===-1?s.totalDuration+=s.t2*999999999999:s.repeat>0&&(s.totalDuration+=s.t2*s.repeat),s.totalDuration>e&&(e=s.totalDuration),s.delay<t&&(t=s.delay)}this.duration=Math.max(e,.001),this.loopCounter=this.loop===-1?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay,this.startDelay=t},init:function(){if(this.paused&&!this.parentIsTimeline)return this.state=k.PENDING_ADD,this._pausedState=k.INIT,!1;for(var e=this.data,t=this.totalTargets,i=0;i<this.totalData;i++){var r=e[i],s=r.target,n=r.gen,a=r.key,o=r.index;r.delay=n.delay(s,a,0,o,t,this),r.duration=Math.max(n.duration(s,a,0,o,t,this),.001),r.hold=n.hold(s,a,0,o,t,this),r.repeat=n.repeat(s,a,0,o,t,this),r.repeatDelay=n.repeatDelay(s,a,0,o,t,this)}return this.calcDuration(),this.progress=0,this.totalProgress=0,this.elapsed=0,this.totalElapsed=0,this.state=k.INIT,!0},makeActive:function(){this.parent.makeActive(this),this.dispatchTweenEvent($t.TWEEN_ACTIVE,this.callbacks.onActive)},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=k.LOOP_DELAY):(this.state=k.ACTIVE,this.dispatchTweenEvent($t.TWEEN_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=k.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=k.PENDING_REMOVE,this.dispatchTweenEvent($t.TWEEN_COMPLETE,this.callbacks.onComplete))},pause:function(){return this.state===k.PAUSED?this:(this.paused=!0,this._pausedState=this.state,this.state=k.PAUSED,this)},play:function(e){e===void 0&&(e=!1);var t=this.state;return t===k.INIT&&!this.parentIsTimeline?(this.resetTweenData(!1),this.state=k.ACTIVE,this):t===k.ACTIVE||t===k.PENDING_ADD&&this._pausedState===k.PENDING_ADD?this:!this.parentIsTimeline&&(t===k.PENDING_REMOVE||t===k.REMOVED)?(this.seek(0),this.parent.makeActive(this),this):(this.parentIsTimeline?(this.resetTweenData(e),this.calculatedOffset===0?this.state=k.ACTIVE:(this.countdown=this.calculatedOffset,this.state=k.OFFSET_DELAY)):this.paused?(this.paused=!1,this.makeActive()):(this.resetTweenData(e),this.state=k.ACTIVE,this.makeActive()),this)},resetTweenData:function(e){for(var t=this.data,i=this.totalData,r=this.totalTargets,s=0;s<i;s++){var n=t[s],a=n.target,o=n.key,h=n.index;n.progress=0,n.elapsed=0,n.repeatCounter=n.repeat===-1?999999999999:n.repeat,e?(n.start=n.getStartValue(a,o,n.start,h,r,this),n.end=n.getEndValue(a,o,n.end,h,r,this),n.current=n.start,n.state=k.PLAYING_FORWARD):n.state=k.PENDING_RENDER,n.delay>0&&(n.elapsed=n.delay,n.state=k.DELAY),n.getActiveValue&&(a[o]=n.getActiveValue(n.target,n.key,n.start))}},resume:function(){return this.state===k.PAUSED?(this.paused=!1,this.state=this._pausedState):this.play(),this},seek:function(e,t){t===void 0&&(t=16.6),this.state===k.REMOVED&&this.makeActive(),this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0;for(var i=this.data,r=this.totalTargets,s=0;s<this.totalData;s++){var n=i[s],a=n.target,o=n.gen,h=n.key,u=n.index;n.progress=0,n.elapsed=0,n.repeatCounter=n.repeat===-1?999999999999:n.repeat,n.delay=o.delay(a,h,0,u,r,this),n.duration=Math.max(o.duration(a,h,0,u,r,this),.001),n.hold=o.hold(a,h,0,u,r,this),n.repeat=o.repeat(a,h,0,u,r,this),n.repeatDelay=o.repeatDelay(a,h,0,u,r,this),n.current=n.start,n.state=k.PLAYING_FORWARD,this.updateTweenData(this,n,0,u,r),n.delay>0&&(n.elapsed=n.delay,n.state=k.DELAY)}this.calcDuration();var f=!1;this.state===k.PAUSED&&(f=!0,this.state=k.ACTIVE),this.isSeeking=!0;do this.update(0,t);while(this.totalProgress<e);return this.isSeeking=!1,f&&(this.state=k.PAUSED),this},setCallback:function(e,t,i,r){return this.callbacks[e]={func:t,scope:r,params:i},this},complete:function(e){return e===void 0&&(e=0),e?(this.state=k.COMPLETE_DELAY,this.countdown=e):(this.state=k.PENDING_REMOVE,this.dispatchTweenEvent($t.TWEEN_COMPLETE,this.callbacks.onComplete)),this},remove:function(){return this.parent.remove(this),this},stop:function(e){return this.state===k.ACTIVE&&e!==void 0&&this.seek(e),this.state!==k.REMOVED&&((this.state===k.PAUSED||this.state===k.PENDING_ADD)&&(this.parentIsTimeline?(this.parent.manager._destroy.push(this),this.parent.manager._toProcess++):(this.parent._destroy.push(this),this.parent._toProcess++)),this.dispatchTweenEvent($t.TWEEN_STOP,this.callbacks.onStop),this.removeAllListeners(),this.state=k.PENDING_REMOVE),this},update:function(e,t){if(this.state===k.PAUSED)return!1;switch(this.useFrames&&(t=1*this.parent.timeScale),t*=this.timeScale,this.elapsed+=t,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=t,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case k.ACTIVE:!this.hasStarted&&!this.isSeeking&&(this.startDelay-=t,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchTweenEvent($t.TWEEN_START,this.callbacks.onStart)));for(var i=!1,r=0;r<this.totalData;r++){var s=this.data[r];this.updateTweenData(this,s,t)&&(i=!0)}i||this.nextState();break;case k.LOOP_DELAY:this.countdown-=t,this.countdown<=0&&(this.state=k.ACTIVE,this.dispatchTweenEvent($t.TWEEN_LOOP,this.callbacks.onLoop));break;case k.OFFSET_DELAY:this.countdown-=t,this.countdown<=0&&(this.state=k.ACTIVE);break;case k.COMPLETE_DELAY:this.countdown-=t,this.countdown<=0&&(this.state=k.PENDING_REMOVE,this.dispatchTweenEvent($t.TWEEN_COMPLETE,this.callbacks.onComplete));break}return this.state===k.PENDING_REMOVE},dispatchTweenDataEvent:function(e,t,i){this.isSeeking||(this.emit(e,this,i.key,i.target,i.current,i.previous),t&&(t.params[1]=i.target,t.func.apply(t.scope,t.params)))},dispatchTweenEvent:function(e,t){this.isSeeking||(this.emit(e,this,this.targets),t&&(t.params[1]=this.targets,t.func.apply(t.scope,t.params)))},setStateFromEnd:function(e,t,i){return t.yoyo?(t.elapsed=i,t.progress=i/t.duration,t.flipX&&t.target.toggleFlipX(),t.flipY&&t.target.toggleFlipY(),this.dispatchTweenDataEvent($t.TWEEN_YOYO,e.callbacks.onYoyo,t),t.start=t.getStartValue(t.target,t.key,t.start,t.index,e.totalTargets,e),k.PLAYING_BACKWARD):t.repeatCounter>0?(t.repeatCounter--,t.elapsed=i,t.progress=i/t.duration,t.flipX&&t.target.toggleFlipX(),t.flipY&&t.target.toggleFlipY(),t.start=t.getStartValue(t.target,t.key,t.start,t.index,e.totalTargets,e),t.end=t.getEndValue(t.target,t.key,t.start,t.index,e.totalTargets,e),t.repeatDelay>0?(t.elapsed=t.repeatDelay-i,t.current=t.start,t.target[t.key]=t.current,k.REPEAT_DELAY):(this.dispatchTweenDataEvent($t.TWEEN_REPEAT,e.callbacks.onRepeat,t),k.PLAYING_FORWARD)):k.COMPLETE},setStateFromStart:function(e,t,i){return t.repeatCounter>0?(t.repeatCounter--,t.elapsed=i,t.progress=i/t.duration,t.flipX&&t.target.toggleFlipX(),t.flipY&&t.target.toggleFlipY(),t.end=t.getEndValue(t.target,t.key,t.start,t.index,e.totalTargets,e),t.repeatDelay>0?(t.elapsed=t.repeatDelay-i,t.current=t.start,t.target[t.key]=t.current,k.REPEAT_DELAY):(this.dispatchTweenDataEvent($t.TWEEN_REPEAT,e.callbacks.onRepeat,t),k.PLAYING_FORWARD)):k.COMPLETE},updateTweenData:function(e,t,i){var r=t.target;switch(t.state){case k.PLAYING_FORWARD:case k.PLAYING_BACKWARD:if(!r){t.state=k.COMPLETE;break}var s=t.elapsed,n=t.duration,a=0;s+=i,s>n&&(a=s-n,s=n);var o=t.state===k.PLAYING_FORWARD,h=s/n;if(t.elapsed=s,t.progress=h,t.previous=t.current,h===1)o?(t.current=t.end,r[t.key]=t.end,t.hold>0?(t.elapsed=t.hold-a,t.state=k.HOLD_DELAY):t.state=this.setStateFromEnd(e,t,a)):(t.current=t.start,r[t.key]=t.start,t.state=this.setStateFromStart(e,t,a));else{var u=o?t.ease(h):t.ease(1-h);t.current=t.start+(t.end-t.start)*u,r[t.key]=t.current}this.dispatchTweenDataEvent($t.TWEEN_UPDATE,e.callbacks.onUpdate,t);break;case k.DELAY:t.elapsed-=i,t.elapsed<=0&&(t.elapsed=Math.abs(t.elapsed),t.state=k.PENDING_RENDER);break;case k.REPEAT_DELAY:t.elapsed-=i,t.elapsed<=0&&(t.elapsed=Math.abs(t.elapsed),t.state=k.PLAYING_FORWARD,this.dispatchTweenDataEvent($t.TWEEN_REPEAT,e.callbacks.onRepeat,t));break;case k.HOLD_DELAY:t.elapsed-=i,t.elapsed<=0&&(t.state=this.setStateFromEnd(e,t,Math.abs(t.elapsed)));break;case k.PENDING_RENDER:r?(t.start=t.getStartValue(r,t.key,r[t.key],t.index,e.totalTargets,e),t.end=t.getEndValue(r,t.key,t.start,t.index,e.totalTargets,e),t.current=t.start,r[t.key]=t.start,t.state=k.PLAYING_FORWARD):t.state=k.COMPLETE;break}return t.state!==k.COMPLETE}});z$.TYPES=["onActive","onComplete","onLoop","onRepeat","onStart","onStop","onUpdate","onYoyo"];tDe.register("tween",function(e){return this.scene.sys.tweens.add(e)});eDe.register("tween",function(e){return this.scene.sys.tweens.create(e)});X$.exports=z$});var ef=l((Oit,Y$)=>{var rDe=function(e,t,i,r,s,n,a,o,h,u,f,d,v,c,p){return{target:e,index:t,key:i,getActiveValue:n,getEndValue:r,getStartValue:s,ease:a,duration:0,totalDuration:0,delay:0,yoyo:u,hold:0,repeat:0,repeatDelay:0,flipX:c,flipY:p,progress:0,elapsed:0,repeatCounter:0,start:0,previous:0,current:0,end:0,t1:0,t2:0,gen:{delay:o,duration:h,hold:f,repeat:d,repeatDelay:v},state:0}};Y$.exports=rDe});var k0=l((Lit,H$)=>{var sDe=Jl(),tf=pe(),U0=An(),nDe=os(),Vo=Io(),As=ie(),aDe=Zl(),W$=$l(),oDe=ef(),hDe=function(e,t,i){i===void 0&&(i=sDe);var r=As(t,"from",0),s=As(t,"to",1),n=[{value:r}],a=Vo(t,"delay",i.delay),o=Vo(t,"duration",i.duration),h=As(t,"easeParams",i.easeParams),u=nDe(As(t,"ease",i.ease),h),f=Vo(t,"hold",i.hold),d=Vo(t,"repeat",i.repeat),v=Vo(t,"repeatDelay",i.repeatDelay),c=U0(t,"yoyo",i.yoyo),p=[],m=aDe("value",s),g=oDe(n[0],0,"value",m.getEnd,m.getStart,m.getActive,u,a,o,c,f,d,v,!1,!1);g.start=r,g.current=r,g.to=s,p.push(g);var x=new W$(e,p,n);x.offset=tf(t,"offset",null),x.completeDelay=tf(t,"completeDelay",0),x.loop=Math.round(tf(t,"loop",0)),x.loopDelay=Math.round(tf(t,"loopDelay",0)),x.paused=U0(t,"paused",!1),x.useFrames=U0(t,"useFrames",!1);for(var T=As(t,"callbackScope",x),E=[x,null],R=W$.TYPES,y=0;y<R.length;y++){var C=R[y],S=As(t,C,!1);if(S){var w=As(t,C+"Scope",T),P=As(t,C+"Params",[]);x.setCallback(C,S,E.concat(P),w)}}return x};H$.exports=hDe});var z0=l((Fit,j$)=>{var uDe=os(),rf=ie(),lDe=we(),fDe=function(e,t){t===void 0&&(t={});var i,r=rf(t,"start",0),s=rf(t,"ease",null),n=rf(t,"grid",null),a=rf(t,"from",0),o=a==="first",h=a==="center",u=a==="last",f=typeof a=="number",d=Array.isArray(e),v=parseFloat(d?e[0]:e),c=d?parseFloat(e[1]):0,p=Math.max(v,c);if(d&&(r+=v),n){var m=n[0],g=n[1],x=0,T=0,E=0,R=0,y=[];u?(x=m-1,T=g-1):f?(x=a%m,T=Math.floor(a/m)):h&&(x=(m-1)/2,T=(g-1)/2);for(var C=lDe.MIN_SAFE_INTEGER,S=0;S<g;S++){y[S]=[];for(var w=0;w<m;w++){E=x-w,R=T-S;var P=Math.sqrt(E*E+R*R);P>C&&(C=P),y[S][w]=P}}}var A=s?uDe(s):null;return n?i=function(M,N,O,D){var b=0,q=D%m,G=Math.floor(D/m);q>=0&&q<m&&G>=0&&G<g&&(b=y[G][q]);var L;if(d){var F=c-v;A?L=b/C*F*A(b/C):L=b/C*F}else A?L=b*v*A(b/C):L=b*v;return L+r}:i=function(M,N,O,D,b){b--;var q;o?q=D:h?q=Math.abs(b/2-D):u?q=b-D:f&&(q=Math.abs(a-D));var G;if(d){var L;h?L=(c-v)/b*(q*2):L=(c-v)/b*q,A?G=L*A(q/b):G=L}else A?G=b*p*A(q/b):G=q*v;return G+r},i};j$.exports=fDe});var Uo=l((Nit,J$)=>{var dDe=Jl(),sf=pe(),bs=An(),K$=os(),sr=Io(),vDe=B0(),cDe=Kl(),Ms=ie(),pDe=Zl(),Z$=$l(),mDe=ef(),gDe=function(e,t,i){i===void 0&&(i=dDe);for(var r=i.targets?i.targets:cDe(t),s=vDe(t),n=sr(t,"delay",i.delay),a=sr(t,"duration",i.duration),o=Ms(t,"easeParams",i.easeParams),h=K$(Ms(t,"ease",i.ease),o),u=sr(t,"hold",i.hold),f=sr(t,"repeat",i.repeat),d=sr(t,"repeatDelay",i.repeatDelay),v=bs(t,"yoyo",i.yoyo),c=bs(t,"flipX",i.flipX),p=bs(t,"flipY",i.flipY),m=[],g=0;g<s.length;g++)for(var x=s[g].key,T=s[g].value,E=0;E<r.length;E++){var R=pDe(x,T),y=mDe(r[E],E,x,R.getEnd,R.getStart,R.getActive,K$(Ms(T,"ease",h),Ms(T,"easeParams",o)),sr(T,"delay",n),sr(T,"duration",a),bs(T,"yoyo",v),sr(T,"hold",u),sr(T,"repeat",f),sr(T,"repeatDelay",d),bs(T,"flipX",c),bs(T,"flipY",p));m.push(y)}var C=new Z$(e,m,r);C.offset=sf(t,"offset",null),C.completeDelay=sf(t,"completeDelay",0),C.loop=Math.round(sf(t,"loop",0)),C.loopDelay=Math.round(sf(t,"loopDelay",0)),C.paused=bs(t,"paused",!1),C.useFrames=bs(t,"useFrames",!1);for(var S=Ms(t,"callbackScope",C),w=[C,null],P=Z$.TYPES,A=0;A<P.length;A++){var M=P[A],N=Ms(t,M,!1);if(N){var O=Ms(t,M+"Scope",S),D=Ms(t,M+"Params",[]);C.setCallback(M,N,w.concat(D),O)}}return C};J$.exports=gDe});var Y0=l((Git,$$)=>{var xDe=_(),Q$=se(),qs=Ql(),TDe=Uo(),Le=bn(),X0=new xDe({Extends:Q$,initialize:function(t){Q$.call(this),this.manager=t,this.isTimeline=!0,this.data=[],this.totalData=0,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=Le.PENDING_ADD,this._pausedState=Le.PENDING_ADD,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onComplete:null,onLoop:null,onStart:null,onUpdate:null,onYoyo:null},this.callbackScope},dispatchTimelineEvent:function(e,t){this.emit(e,this),t&&t.func.apply(t.scope,t.params)},setTimeScale:function(e){return this.timeScale=e,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===Le.ACTIVE},add:function(e){return this.queue(TDe(this,e))},queue:function(e){return this.isPlaying()||(e.parent=this,e.parentIsTimeline=!0,this.data.push(e),this.totalData=this.data.length),this},hasOffset:function(e){return e.offset!==null},isOffsetAbsolute:function(e){return typeof e=="number"},isOffsetRelative:function(e){var t=typeof e;if(t==="string"){var i=e[0];if(i==="-"||i==="+")return!0}return!1},getRelativeOffset:function(e,t){var i=e[0],r=parseFloat(e.substr(2)),s=t;switch(i){case"+":s+=r;break;case"-":s-=r;break}return Math.max(0,s)},calcDuration:function(){for(var e=0,t=0,i=0,r=0;r<this.totalData;r++){var s=this.data[r];s.init(),this.hasOffset(s)?this.isOffsetAbsolute(s.offset)?(s.calculatedOffset=s.offset,s.offset===0&&(i=0)):this.isOffsetRelative(s.offset)&&(s.calculatedOffset=this.getRelativeOffset(s.offset,e)):s.calculatedOffset=i,e=s.totalDuration+s.calculatedOffset,t+=s.totalDuration,i+=s.totalDuration}this.duration=t,this.loopCounter=this.loop===-1?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay},init:function(){return this.calcDuration(),this.progress=0,this.totalProgress=0,this.paused?(this.state=Le.PAUSED,!1):!0},resetTweens:function(e){for(var t=0;t<this.totalData;t++){var i=this.data[t];i.play(e)}},setCallback:function(e,t,i,r){return X0.TYPES.indexOf(e)!==-1&&(this.callbacks[e]={func:t,scope:r,params:i}),this},makeActive:function(e){return this.manager.makeActive(e)},play:function(){if(this.state!==Le.ACTIVE){if(this.paused){this.paused=!1,this.manager.makeActive(this);return}else this.resetTweens(!1),this.state=Le.ACTIVE;this.dispatchTimelineEvent(qs.TIMELINE_START,this.callbacks.onStart)}},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweens(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=Le.LOOP_DELAY):(this.state=Le.ACTIVE,this.dispatchTimelineEvent(qs.TIMELINE_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=Le.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=Le.PENDING_REMOVE,this.dispatchTimelineEvent(qs.TIMELINE_COMPLETE,this.callbacks.onComplete))},update:function(e,t){if(this.state!==Le.PAUSED){switch(this.useFrames&&(t=1*this.manager.timeScale),t*=this.timeScale,this.elapsed+=t,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=t,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case Le.ACTIVE:for(var i=this.totalData,r=0;r<this.totalData;r++){var s=this.data[r];s.update(e,t)&&i--}this.dispatchTimelineEvent(qs.TIMELINE_UPDATE,this.callbacks.onUpdate),i===0&&this.nextState();break;case Le.LOOP_DELAY:this.countdown-=t,this.countdown<=0&&(this.state=Le.ACTIVE,this.dispatchTimelineEvent(qs.TIMELINE_LOOP,this.callbacks.onLoop));break;case Le.COMPLETE_DELAY:this.countdown-=t,this.countdown<=0&&(this.state=Le.PENDING_REMOVE,this.dispatchTimelineEvent(qs.TIMELINE_COMPLETE,this.callbacks.onComplete));break}return this.state===Le.PENDING_REMOVE}},stop:function(){this.state=Le.PENDING_REMOVE},pause:function(){if(this.state!==Le.PAUSED)return this.paused=!0,this._pausedState=this.state,this.state=Le.PAUSED,this.emit(qs.TIMELINE_PAUSE,this),this},resume:function(){return this.state===Le.PAUSED&&(this.paused=!1,this.state=this._pausedState,this.emit(qs.TIMELINE_RESUME,this)),this},hasTarget:function(e){for(var t=0;t<this.data.length;t++)if(this.data[t].hasTarget(e))return!0;return!1},destroy:function(){for(var e=0;e<this.data.length;e++)this.data[e].stop()}});X0.TYPES=["onStart","onUpdate","onLoop","onComplete","onYoyo"];$$.exports=X0});var W0=l((Dit,eee)=>{var EDe=Jr(),yDe=Jl(),nf=pe(),ko=An(),SDe=os(),zo=Io(),CDe=Kl(),RDe=V0(),Qe=ie(),_De=Y0(),wDe=Uo(),PDe=function(e,t){var i=new _De(e);i.completeDelay=nf(t,"completeDelay",0),i.loop=Math.round(nf(t,"loop",0)),i.loopDelay=Math.round(nf(t,"loopDelay",0)),i.paused=ko(t,"paused",!1),i.useFrames=ko(t,"useFrames",!1);var r=Qe(t,"callbackScope",i),s=[i],n=Qe(t,"onStart",!1);if(n){var a=Qe(t,"onStartScope",r),o=Qe(t,"onStartParams",[]);i.setCallback("onStart",n,s.concat(o),a)}var h=Qe(t,"onUpdate",!1);if(h){var u=Qe(t,"onUpdateScope",r),f=Qe(t,"onUpdateParams",[]);i.setCallback("onUpdate",h,s.concat(f),u)}var d=Qe(t,"onLoop",!1);if(d){var v=Qe(t,"onLoopScope",r),c=Qe(t,"onLoopParams",[]);i.setCallback("onLoop",d,s.concat(c),v)}var p=Qe(t,"onYoyo",!1);if(p){var m=Qe(t,"onYoyoScope",r),g=Qe(t,"onYoyoParams",[]);i.setCallback("onYoyo",p,s.concat(null,g),m)}var x=Qe(t,"onComplete",!1);if(x){var T=Qe(t,"onCompleteScope",r),E=Qe(t,"onCompleteParams",[]);i.setCallback("onComplete",x,s.concat(E),T)}var R=RDe(t);if(R.length===0)return i.paused=!0,i;var y=EDe(yDe);y.targets=CDe(t);var C=nf(t,"totalDuration",0);C>0?y.duration=Math.floor(C/R.length):y.duration=zo(t,"duration",y.duration),y.delay=zo(t,"delay",y.delay),y.easeParams=Qe(t,"easeParams",y.easeParams),y.ease=SDe(Qe(t,"ease",y.ease),y.easeParams),y.hold=zo(t,"hold",y.hold),y.repeat=zo(t,"repeat",y.repeat),y.repeatDelay=zo(t,"repeatDelay",y.repeatDelay),y.yoyo=ko(t,"yoyo",y.yoyo),y.flipX=ko(t,"flipX",y.flipX),y.flipY=ko(t,"flipY",y.flipY);for(var S=0;S<R.length;S++)i.queue(wDe(i,R[S],y));return i};eee.exports=PDe});var iee=l((Iit,tee)=>{tee.exports={GetBoolean:An(),GetEaseFunction:os(),GetNewValue:Io(),GetProps:B0(),GetTargets:Kl(),GetTweens:V0(),GetValueOp:Zl(),NumberTweenBuilder:k0(),StaggerBuilder:z0(),TimelineBuilder:W0(),TweenBuilder:Uo()}});var oee=l((Bit,aee)=>{var af=Ds(),ADe=_(),bDe=k0(),MDe=rt(),nr=qe(),qDe=z0(),ree=W0(),Xo=bn(),see=Uo(),nee=new ADe({initialize:function(t){this.scene=t,this.systems=t.sys,this.timeScale=1,this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,t.sys.events.once(nr.BOOT,this.boot,this),t.sys.events.on(nr.START,this.start,this)},boot:function(){this.systems.events.once(nr.DESTROY,this.destroy,this)},start:function(){var e=this.systems.events;e.on(nr.PRE_UPDATE,this.preUpdate,this),e.on(nr.UPDATE,this.update,this),e.once(nr.SHUTDOWN,this.shutdown,this),this.timeScale=1},createTimeline:function(e){return ree(this,e)},timeline:function(e){var t=ree(this,e);return t.paused||(this._add.push(t),this._toProcess++),t},create:function(e){return see(this,e)},add:function(e){var t=see(this,e);return this._add.push(t),this._toProcess++,t},existing:function(e){return this._add.push(e),this._toProcess++,this},addCounter:function(e){var t=bDe(this,e);return this._add.push(t),this._toProcess++,t},stagger:function(e,t){return qDe(e,t)},preUpdate:function(){if(this._toProcess!==0){var e=this._destroy,t=this._active,i=this._pending,r,s;for(r=0;r<e.length;r++){s=e[r];var n=t.indexOf(s);n===-1?(n=i.indexOf(s),n>-1&&(s.state=Xo.REMOVED,i.splice(n,1))):(s.state=Xo.REMOVED,t.splice(n,1))}for(e.length=0,e=this._add,r=0;r<e.length;r++)s=e[r],s.state===Xo.PENDING_ADD&&(s.init()?(s.play(),this._active.push(s)):this._pending.push(s));e.length=0,this._toProcess=0}},update:function(e,t){var i=this._active,r;t*=this.timeScale;for(var s=0;s<i.length;s++)r=i[s],r.update(e,t)&&(this._destroy.push(r),this._toProcess++)},remove:function(e){return af(this._add,e),af(this._pending,e),af(this._active,e),af(this._destroy,e),e.state=Xo.REMOVED,this},makeActive:function(e){if(this._add.indexOf(e)!==-1||this._active.indexOf(e)!==-1)return this;var t=this._pending.indexOf(e);return t!==-1&&this._pending.splice(t,1),this._add.push(e),e.state=Xo.PENDING_ADD,this._toProcess++,this},each:function(e,t){for(var i=[null],r=1;r<arguments.length;r++)i.push(arguments[r]);for(var s in this.list)i[0]=this.list[s],e.apply(t,i)},getAllTweens:function(){for(var e=this._active,t=[],i=0;i<e.length;i++)t.push(e[i]);return t},getGlobalTimeScale:function(){return this.timeScale},getTweensOf:function(e,t){t===void 0&&(t=!1);var i=this._active,r,s=[],n,a;for(Array.isArray(e)||(e=[e]),n=0;n<i.length;n++)for(r=i[n],a=0;a<e.length;a++)r.hasTarget(e[a])&&s.push(r);if(t)for(i=this._pending,n=0;n<i.length;n++)for(r=i[n],a=0;a<e.length;a++)r.hasTarget(e[a])&&s.push(r);return s},isTweening:function(e){for(var t=this._active,i,r=0;r<t.length;r++)if(i=t[r],i.hasTarget(e)&&i.isPlaying())return!0;return!1},killAll:function(){for(var e=this.getAllTweens(),t=0;t<e.length;t++)e[t].stop();return this},killTweensOf:function(e){for(var t=this.getTweensOf(e),i=0;i<t.length;i++)t[i].stop();return this},pauseAll:function(){for(var e=this._active,t=0;t<e.length;t++)e[t].pause();return this},resumeAll:function(){for(var e=this._active,t=0;t<e.length;t++)e[t].resume();return this},setGlobalTimeScale:function(e){return this.timeScale=e,this},shutdown:function(){this.killAll(),this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0;var e=this.systems.events;e.off(nr.PRE_UPDATE,this.preUpdate,this),e.off(nr.UPDATE,this.update,this),e.off(nr.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(nr.START,this.start,this),this.scene=null,this.systems=null}});MDe.register("TweenManager",nee,"tweens");aee.exports=nee});var uee=l((Vit,hee)=>{var ODe=bn(),LDe=Fe(),H0={Builders:iee(),Events:Ql(),TweenManager:oee(),Tween:$l(),TweenData:ef(),Timeline:Y0()};H0=LDe(!1,H0,ODe);hee.exports=H0});var fee=l((Uit,lee)=>{var of="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",FDe=function(e,t){for(var i=new Uint8Array(e),r=i.length,s=t?"data:"+t+";base64,":"",n=0;n<r;n+=3)s+=of[i[n]>>2],s+=of[(i[n]&3)<<4|i[n+1]>>4],s+=of[(i[n+1]&15)<<2|i[n+2]>>6],s+=of[i[n+2]&63];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s};lee.exports=FDe});var vee=l((kit,dee)=>{dee.exports={ArrayBufferToBase64:fee(),Base64ToArrayBuffer:fp()}});var pee=l((zit,cee)=>{var NDe=ie(),GDe=Pe(),DDe=function(e,t,i,r,s){s===void 0&&(s=i);var n=NDe(e,t,s);return GDe(n,i,r)};cee.exports=DDe});var gee=l((Xit,mee)=>{var IDe=function(e,t){for(var i=0;i<t.length;i++)if(!e.hasOwnProperty(t[i]))return!1;return!0};mee.exports=IDe});var Tee=l((Yit,xee)=>{var BDe=Jr(),VDe=function(e,t){var i=BDe(e);for(var r in t)i.hasOwnProperty(r)&&(i[r]=t[r]);return i};xee.exports=VDe});var yee=l((Wit,Eee)=>{var UDe=Vu(),kDe=function(e,t){for(var i={},r=0;r<t.length;r++){var s=t[r];UDe(e,s)&&(i[s]=e[s])}return i};Eee.exports=kDe});var Cee=l((Hit,See)=>{See.exports={Clone:Jr(),DeepCopy:ch(),Extend:Fe(),GetAdvancedValue:pe(),GetFastValue:X(),GetMinMaxValue:pee(),GetValue:ie(),HasAll:gee(),HasAny:zp(),HasValue:Vu(),IsPlainObject:te(),Merge:Zc(),MergeRight:Tee(),Pick:yee(),SetValue:wm()}});var _ee=l((jit,Ree)=>{var zDe=function(e,t){return e.replace(/%([0-9]+)/g,function(i,r){return t[Number(r)-1]})};Ree.exports=zDe});var Pee=l((Kit,wee)=>{var XDe=function(e,t){return t===0?e.slice(1):e.slice(0,t-1)+e.slice(t)};wee.exports=XDe});var bee=l((Zit,Aee)=>{var YDe=function(e){return e.split("").reverse().join("")};Aee.exports=YDe});var qee=l((Jit,Mee)=>{Mee.exports={Format:_ee(),Pad:iu(),RemoveAt:Pee(),Reverse:bee(),UppercaseFirst:du(),UUID:Yu()}});var Lee=l((Qit,Oee)=>{Oee.exports={Array:_u(),Base64:vee(),Objects:Cee(),String:qee(),NOOP:B()}});var Fee=l((Yo,uf)=>{(function(e,t){"use strict";var i="0.7.28",r="",s="?",n="function",a="undefined",o="object",h="string",u="major",f="model",d="name",v="type",c="vendor",p="version",m="architecture",g="console",x="mobile",T="tablet",E="smarttv",R="wearable",y="embedded",C=255,S={extend:function(D,b){var q={};for(var G in D)b[G]&&b[G].length%2==0?q[G]=b[G].concat(D[G]):q[G]=D[G];return q},has:function(D,b){return typeof D===h?b.toLowerCase().indexOf(D.toLowerCase())!==-1:!1},lowerize:function(D){return D.toLowerCase()},major:function(D){return typeof D===h?D.replace(/[^\d\.]/g,"").split(".")[0]:t},trim:function(D,b){return D=D.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),typeof b===a?D:D.substring(0,C)}},w={rgx:function(D,b){for(var q=0,G,L,F,V,Y,z;q<b.length&&!Y;){var Z=b[q],U=b[q+1];for(G=L=0;G<Z.length&&!Y;)if(Y=Z[G++].exec(D),Y)for(F=0;F<U.length;F++)z=Y[++L],V=U[F],typeof V===o&&V.length>0?V.length==2?typeof V[1]==n?this[V[0]]=V[1].call(this,z):this[V[0]]=V[1]:V.length==3?typeof V[1]===n&&!(V[1].exec&&V[1].test)?this[V[0]]=z?V[1].call(this,z,V[2]):t:this[V[0]]=z?z.replace(V[1],V[2]):t:V.length==4&&(this[V[0]]=z?V[3].call(this,z.replace(V[1],V[2])):t):this[V]=z||t;q+=2}},str:function(D,b){for(var q in b)if(typeof b[q]===o&&b[q].length>0){for(var G=0;G<b[q].length;G++)if(S.has(b[q][G],D))return q===s?t:q}else if(S.has(b[q],D))return q===s?t:q;return D}},P={browser:{oldSafari:{version:{"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}},oldEdge:{version:{"0.1":"12.","21":"13.","31":"14.","39":"15.","41":"16.","42":"17.","44":"18."}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0","2000":"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0","7":"NT 6.1","8":"NT 6.2","8.1":"NT 6.3","10":["NT 6.4","NT 10.0"],RT:"ARM"}}}},A={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[p,[d,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[p,[d,"Edge"]],[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]{3,6})\b.+version\/([\w\.-]+)/i,/(opera)(?:.+version\/|[\/\s]+)([\w\.]+)/i],[d,p],[/opios[\/\s]+([\w\.]+)/i],[p,[d,"Opera Mini"]],[/\sopr\/([\w\.]+)/i],[p,[d,"Opera"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(ba?idubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i,/(rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([\w\.]+)/i,/(weibo)__([\d\.]+)/i],[d,p],[/(?:[\s\/]uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[p,[d,"UCBrowser"]],[/(?:windowswechat)?\sqbcore\/([\w\.]+)\b.*(?:windowswechat)?/i],[p,[d,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[p,[d,"WeChat"]],[/konqueror\/([\w\.]+)/i],[p,[d,"Konqueror"]],[/trident.+rv[:\s]([\w\.]{1,9})\b.+like\sgecko/i],[p,[d,"IE"]],[/yabrowser\/([\w\.]+)/i],[p,[d,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[d,/(.+)/,"$1 Secure Browser"],p],[/focus\/([\w\.]+)/i],[p,[d,"Firefox Focus"]],[/opt\/([\w\.]+)/i],[p,[d,"Opera Touch"]],[/coc_coc_browser\/([\w\.]+)/i],[p,[d,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[p,[d,"Dolphin"]],[/coast\/([\w\.]+)/i],[p,[d,"Opera Coast"]],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[p,[d,"MIUI Browser"]],[/fxios\/([\w\.-]+)/i],[p,[d,"Firefox"]],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[d,"360 Browser"]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[d,/(.+)/,"$1 Browser"],p],[/(comodo_dragon)\/([\w\.]+)/i],[[d,/_/g," "],p],[/\s(electron)\/([\w\.]+)\ssafari/i,/(tesla)(?:\sqtcarbrowser|\/(20[12]\d\.[\w\.-]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/\s]?([\w\.]+)/i],[d,p],[/(MetaSr)[\/\s]?([\w\.]+)/i,/(LBBROWSER)/i],[d],[/;fbav\/([\w\.]+);/i],[p,[d,"Facebook"]],[/FBAN\/FBIOS|FB_IAB\/FB4A/i],[[d,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/\s]([\w\.-]+)/i],[d,p],[/\bgsa\/([\w\.]+)\s.*safari\//i],[p,[d,"GSA"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[p,[d,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[d,"Chrome WebView"],p],[/droid.+\sversion\/([\w\.]+)\b.+(?:mobile\ssafari|safari)/i],[p,[d,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[d,p],[/version\/([\w\.]+)\s.*mobile\/\w+\s(safari)/i],[p,[d,"Mobile Safari"]],[/version\/([\w\.]+)\s.*(mobile\s?safari|safari)/i],[p,d],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[d,[p,w.str,P.browser.oldSafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[d,p],[/(navigator|netscape)\/([\w\.-]+)/i],[[d,"Netscape"],p],[/ile\svr;\srv:([\w\.]+)\).+firefox/i],[p,[d,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(firefox)\/([\w\.]+)\s[\w\s\-]+\/[\w\.]+$/i,/(mozilla)\/([\w\.]+)\s.+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[d,p]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[m,"amd64"]],[/(ia32(?=;))/i],[[m,S.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[m,"ia32"]],[/\b(aarch64|armv?8e?l?)\b/i],[[m,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[m,"armhf"]],[/windows\s(ce|mobile);\sppc;/i],[[m,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[m,/ower/,"",S.lowerize]],[/(sun4\w)[;\)]/i],[[m,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?:64|(?=v(?:[1-7]|[5-7]1)l?|;|eabi))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[m,S.lowerize]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus\s10)/i],[f,[c,"Samsung"],[v,T]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy\snexus)/i,/\ssamsung[\s-]([\w-]+)/i,/sec-(sgh\w+)/i],[f,[c,"Samsung"],[v,x]],[/\((ip(?:hone|od)[\s\w]*);/i],[f,[c,"Apple"],[v,x]],[/\((ipad);[\w\s\),;-]+apple/i,/applecoremedia\/[\w\.]+\s\((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[f,[c,"Apple"],[v,T]],[/\b((?:agr|ags[23]|bah2?|sht?)-a?[lw]\d{2})/i],[f,[c,"Huawei"],[v,T]],[/d\/huawei([\w\s-]+)[;\)]/i,/\b(nexus\s6p|vog-[at]?l\d\d|ane-[at]?l[x\d]\d|eml-a?l\d\da?|lya-[at]?l\d[\dc]|clt-a?l\d\di?|ele-l\d\d)/i,/\b(\w{2,4}-[atu][ln][01259][019])[;\)\s]/i],[f,[c,"Huawei"],[v,x]],[/\b(poco[\s\w]+)(?:\sbuild|\))/i,/\b;\s(\w+)\sbuild\/hm\1/i,/\b(hm[\s\-_]?note?[\s_]?(?:\d\w)?)\sbuild/i,/\b(redmi[\s\-_]?(?:note|k)?[\w\s_]+)(?:\sbuild|\))/i,/\b(mi[\s\-_]?(?:a\d|one|one[\s_]plus|note lte)?[\s_]?(?:\d?\w?)[\s_]?(?:plus)?)\sbuild/i],[[f,/_/g," "],[c,"Xiaomi"],[v,x]],[/\b(mi[\s\-_]?(?:pad)(?:[\w\s_]+))(?:\sbuild|\))/i],[[f,/_/g," "],[c,"Xiaomi"],[v,T]],[/;\s(\w+)\sbuild.+\soppo/i,/\s(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007)\b/i],[f,[c,"OPPO"],[v,x]],[/\svivo\s(\w+)(?:\sbuild|\))/i,/\s(v[12]\d{3}\w?[at])(?:\sbuild|;)/i],[f,[c,"Vivo"],[v,x]],[/\s(rmx[12]\d{3})(?:\sbuild|;)/i],[f,[c,"Realme"],[v,x]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)\b[\w\s]+build\//i,/\smot(?:orola)?[\s-](\w*)/i,/((?:moto[\s\w\(\)]+|xt\d{3,4}|nexus\s6)(?=\sbuild|\)))/i],[f,[c,"Motorola"],[v,x]],[/\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[f,[c,"Motorola"],[v,T]],[/((?=lg)?[vl]k\-?\d{3})\sbuild|\s3\.[\s\w;-]{10}lg?-([06cv9]{3,4})/i],[f,[c,"LG"],[v,T]],[/(lm-?f100[nv]?|nexus\s[45])/i,/lg[e;\s\/-]+((?!browser|netcast)\w+)/i,/\blg(\-?[\d\w]+)\sbuild/i],[f,[c,"LG"],[v,x]],[/(ideatab[\w\-\s]+)/i,/lenovo\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+)|yt[\d\w-]{6}|tb[\d\w-]{6})/i],[f,[c,"Lenovo"],[v,T]],[/(?:maemo|nokia).*(n900|lumia\s\d+)/i,/nokia[\s_-]?([\w\.-]*)/i],[[f,/_/g," "],[c,"Nokia"],[v,x]],[/droid.+;\s(pixel\sc)[\s)]/i],[f,[c,"Google"],[v,T]],[/droid.+;\s(pixel[\s\daxl]{0,6})(?:\sbuild|\))/i],[f,[c,"Google"],[v,x]],[/droid.+\s([c-g]\d{4}|so[-l]\w+|xq-a\w[4-7][12])(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[f,[c,"Sony"],[v,x]],[/sony\stablet\s[ps]\sbuild\//i,/(?:sony)?sgp\w+(?:\sbuild\/|\))/i],[[f,"Xperia Tablet"],[c,"Sony"],[v,T]],[/\s(kb2005|in20[12]5|be20[12][59])\b/i,/\ba000(1)\sbuild/i,/\boneplus\s(a\d{4})[\s)]/i],[f,[c,"OnePlus"],[v,x]],[/(alexa)webm/i,/(kf[a-z]{2}wi)(\sbuild\/|\))/i,/(kf[a-z]+)(\sbuild\/|\)).+silk\//i],[f,[c,"Amazon"],[v,T]],[/(sd|kf)[0349hijorstuw]+(\sbuild\/|\)).+silk\//i],[[f,"Fire Phone"],[c,"Amazon"],[v,x]],[/\((playbook);[\w\s\),;-]+(rim)/i],[f,c,[v,T]],[/((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10;\s(\w+)/i],[f,[c,"BlackBerry"],[v,x]],[/(?:\b|asus_)(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus\s7|padfone|p00[cj])/i],[f,[c,"ASUS"],[v,T]],[/\s(z[es]6[027][01][km][ls]|zenfone\s\d\w?)\b/i],[f,[c,"ASUS"],[v,x]],[/(nexus\s9)/i],[f,[c,"HTC"],[v,T]],[/(htc)[;_\s-]{1,2}([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[c,[f,/_/g," "],[v,x]],[/droid[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[f,[c,"Acer"],[v,T]],[/droid.+;\s(m[1-5]\snote)\sbuild/i,/\bmz-([\w-]{2,})/i],[f,[c,"Meizu"],[v,x]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i,/(microsoft);\s(lumia[\s\w]+)/i,/(lenovo)[_\s-]?([\w-]+)/i,/linux;.+(jolla);/i,/droid.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[c,f,[v,x]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i,/[;\/]\s?(le[\s\-]+pan)[\s\-]+(\w{1,9})\sbuild/i,/[;\/]\s?(trinity)[\-\s]*(t\d{3})\sbuild/i,/\b(gigaset)[\s\-]+(q\w{1,9})\sbuild/i,/\b(vodafone)\s([\w\s]+)(?:\)|\sbuild)/i],[c,f,[v,T]],[/\s(surface\sduo)\s/i],[f,[c,"Microsoft"],[v,T]],[/droid\s[\d\.]+;\s(fp\du?)\sbuild/i],[f,[c,"Fairphone"],[v,x]],[/\s(u304aa)\sbuild/i],[f,[c,"AT&T"],[v,x]],[/sie-(\w*)/i],[f,[c,"Siemens"],[v,x]],[/[;\/]\s?(rct\w+)\sbuild/i],[f,[c,"RCA"],[v,T]],[/[;\/\s](venue[\d\s]{2,7})\sbuild/i],[f,[c,"Dell"],[v,T]],[/[;\/]\s?(q(?:mv|ta)\w+)\sbuild/i],[f,[c,"Verizon"],[v,T]],[/[;\/]\s(?:barnes[&\s]+noble\s|bn[rt])([\w\s\+]*)\sbuild/i],[f,[c,"Barnes & Noble"],[v,T]],[/[;\/]\s(tm\d{3}\w+)\sbuild/i],[f,[c,"NuVision"],[v,T]],[/;\s(k88)\sbuild/i],[f,[c,"ZTE"],[v,T]],[/;\s(nx\d{3}j)\sbuild/i],[f,[c,"ZTE"],[v,x]],[/[;\/]\s?(gen\d{3})\sbuild.*49h/i],[f,[c,"Swiss"],[v,x]],[/[;\/]\s?(zur\d{3})\sbuild/i],[f,[c,"Swiss"],[v,T]],[/[;\/]\s?((zeki)?tb.*\b)\sbuild/i],[f,[c,"Zeki"],[v,T]],[/[;\/]\s([yr]\d{2})\sbuild/i,/[;\/]\s(dragon[\-\s]+touch\s|dt)(\w{5})\sbuild/i],[[c,"Dragon Touch"],f,[v,T]],[/[;\/]\s?(ns-?\w{0,9})\sbuild/i],[f,[c,"Insignia"],[v,T]],[/[;\/]\s?((nxa|Next)-?\w{0,9})\sbuild/i],[f,[c,"NextBook"],[v,T]],[/[;\/]\s?(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05]))\sbuild/i],[[c,"Voice"],f,[v,x]],[/[;\/]\s?(lvtel\-)?(v1[12])\sbuild/i],[[c,"LvTel"],f,[v,x]],[/;\s(ph-1)\s/i],[f,[c,"Essential"],[v,x]],[/[;\/]\s?(v(100md|700na|7011|917g).*\b)\sbuild/i],[f,[c,"Envizen"],[v,T]],[/[;\/]\s?(trio[\s\w\-\.]+)\sbuild/i],[f,[c,"MachSpeed"],[v,T]],[/[;\/]\s?tu_(1491)\sbuild/i],[f,[c,"Rotor"],[v,T]],[/(shield[\w\s]+)\sbuild/i],[f,[c,"Nvidia"],[v,T]],[/(sprint)\s(\w+)/i],[c,f,[v,x]],[/(kin\.[onetw]{3})/i],[[f,/\./g," "],[c,"Microsoft"],[v,x]],[/droid\s[\d\.]+;\s(cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[f,[c,"Zebra"],[v,T]],[/droid\s[\d\.]+;\s(ec30|ps20|tc[2-8]\d[kx])\)/i],[f,[c,"Zebra"],[v,x]],[/\s(ouya)\s/i,/(nintendo)\s([wids3utch]+)/i],[c,f,[v,g]],[/droid.+;\s(shield)\sbuild/i],[f,[c,"Nvidia"],[v,g]],[/(playstation\s[345portablevi]+)/i],[f,[c,"Sony"],[v,g]],[/[\s\(;](xbox(?:\sone)?(?!;\sxbox))[\s\);]/i],[f,[c,"Microsoft"],[v,g]],[/smart-tv.+(samsung)/i],[c,[v,E]],[/hbbtv.+maple;(\d+)/i],[[f,/^/,"SmartTV"],[c,"Samsung"],[v,E]],[/(?:linux;\snetcast.+smarttv|lg\snetcast\.tv-201\d)/i],[[c,"LG"],[v,E]],[/(apple)\s?tv/i],[c,[f,"Apple TV"],[v,E]],[/crkey/i],[[f,"Chromecast"],[c,"Google"],[v,E]],[/droid.+aft([\w])(\sbuild\/|\))/i],[f,[c,"Amazon"],[v,E]],[/\(dtv[\);].+(aquos)/i],[f,[c,"Sharp"],[v,E]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[c,S.trim],[f,S.trim],[v,E]],[/[\s\/\(](android\s|smart[-\s]?|opera\s)tv[;\)\s]/i],[[v,E]],[/((pebble))app\/[\d\.]+\s/i],[c,f,[v,R]],[/droid.+;\s(glass)\s\d/i],[f,[c,"Google"],[v,R]],[/droid\s[\d\.]+;\s(wt63?0{2,3})\)/i],[f,[c,"Zebra"],[v,R]],[/(tesla)(?:\sqtcarbrowser|\/20[12]\d\.[\w\.-]+)/i],[c,[v,y]],[/droid .+?; ([^;]+?)(?: build|\) applewebkit).+? mobile safari/i],[f,[v,x]],[/droid .+?;\s([^;]+?)(?: build|\) applewebkit).+?(?! mobile) safari/i],[f,[v,T]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[v,S.lowerize]],[/(android[\w\.\s\-]{0,9});.+build/i],[f,[c,"Generic"]],[/(phone)/i],[[v,x]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[p,[d,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[p,[d,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[d,p],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[p,d]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[d,p],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)(?!.+xbox)/i],[d,[p,w.str,P.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[d,"Windows"],[p,w.str,P.os.windows.version]],[/ip[honead]{2,4}\b(?:.*os\s([\w]+)\slike\smac|;\sopera)/i,/cfnetwork\/.+darwin/i],[[p,/_/g,"."],[d,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)(?!.+haiku)/i],[[d,"Mac OS"],[p,/_/g,"."]],[/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/\((series40);/i],[d,p],[/\(bb(10);/i],[p,[d,"BlackBerry"]],[/(?:symbian\s?os|symbos|s60(?=;)|series60)[\/\s-]?([\w\.]*)/i],[p,[d,"Symbian"]],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[d,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[p,[d,"webOS"]],[/crkey\/([\d\.]+)/i],[p,[d,"Chromecast"]],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[d,"Chromium OS"],p],[/(nintendo|playstation)\s([wids345portablevuch]+)/i,/(xbox);\s+xbox\s([^\);]+)/i,/(mint)[\/\s\(\)]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?=\slinux)|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus|raspbian)(?:\sgnu\/linux)?(?:\slinux)?[\/\s-]?(?!chrom|package)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i,/\s([frentopc-]{0,4}bsd|dragonfly)\s?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku)\s(\w+)/i],[d,p],[/(sunos)\s?([\w\.\d]*)/i],[[d,"Solaris"],p],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[d,p]]},M=function(D,b){if(typeof D=="object"&&(b=D,D=t),!(this instanceof M))return new M(D,b).getResult();var q=D||(typeof e!="undefined"&&e.navigator&&e.navigator.userAgent?e.navigator.userAgent:r),G=b?S.extend(A,b):A;return this.getBrowser=function(){var L={name:t,version:t};return w.rgx.call(L,q,G.browser),L.major=S.major(L.version),L},this.getCPU=function(){var L={architecture:t};return w.rgx.call(L,q,G.cpu),L},this.getDevice=function(){var L={vendor:t,model:t,type:t};return w.rgx.call(L,q,G.device),L},this.getEngine=function(){var L={name:t,version:t};return w.rgx.call(L,q,G.engine),L},this.getOS=function(){var L={name:t,version:t};return w.rgx.call(L,q,G.os),L},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return q},this.setUA=function(L){return q=typeof L===h&&L.length>C?S.trim(L,C):L,this},this.setUA(q),this};M.VERSION=i,M.BROWSER={NAME:d,MAJOR:u,VERSION:p},M.CPU={ARCHITECTURE:m},M.DEVICE={MODEL:f,VENDOR:c,TYPE:v,CONSOLE:g,MOBILE:x,SMARTTV:E,TABLET:T,WEARABLE:R,EMBEDDED:y},M.ENGINE={NAME:d,VERSION:p},M.OS={NAME:d,VERSION:p},typeof Yo!==a?(typeof uf!==a&&uf.exports&&(Yo=uf.exports=M),Yo.UAParser=M):typeof define=="function"&&define.amd?define(function(){return M}):typeof e!="undefined"&&(e.UAParser=M);var N=typeof e!="undefined"&&(e.jQuery||e.Zepto);if(N&&!N.ua){var O=new M;N.ua=O.getResult(),N.ua.get=function(){return O.getUA()},N.ua.set=function(D){O.setUA(D);var b=O.getResult();for(var q in b)N.ua[q]=b[q]}}})(typeof window=="object"?window:Yo)});var WDe=Ut(),HDe=Fe(),j0=mP(),jDe=function(e){this.now=e;var t=e-this.lastTime;t<0&&(t=0),this.rawDelta=t;let i=this.deltaIndex,r=this.deltaHistory,s=this.deltaSmoothingMax,n=t,a=t;if(this.smoothStep){(this._coolDown>0||!this.inFocus)&&(this._coolDown--,n=Math.min(n,this._target)),n>this._min&&(n=r[i],n=Math.min(n,this._min)),r[i]=n,this.deltaIndex++,this.deltaIndex>s&&(this.deltaIndex=0),a=0;for(let h=0;h<s;h++)a+=r[h];a/=s}this.delta=a,this.time+=this.rawDelta,e>this.nextFpsUpdate&&(this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=e+1e3,this.framesThisSecond=0),this.framesThisSecond++;let o=a/this._target;this.callback(e,a,o),this.lastTime=e,this.frame++};j0.TimeStep.prototype.step=jDe;j0.TimeStep.prototype.tick=function(){this.step(window.performance.now())};var hf={Actions:ec(),Cache:TO(),Cameras:uL(),Core:j0,Class:_(),Create:CL(),Data:AL(),Display:xF(),DOM:OF(),Events:IF(),Game:DB(),GameObjects:$H(),Geom:T7(),Input:rZ(),Loader:uQ(),Math:ah(),Plugins:pQ(),Renderer:bQ(),Scale:qQ(),Scene:$c(),Scenes:GQ(),Structs:zQ(),Textures:jQ(),Time:t$(),Tweens:uee(),Utils:Lee()};hf=HDe(!1,hf,WDe);var Ea=hf;window.Phaser=hf;var Yte=eie(Fee());var KDe=Phaser.Renderer.WebGL.Utils,ZDe=function(e,t,i,r){if(!(t.width===0||t.height===0)){i.addToRenderList(t);var s=t.frame,n=s.width,a=s.height,o=KDe.getTintAppendFloatAlpha,h=e.pipelines.set(t.pipeline,t),u=h.setTexture2D(s.glTexture,t);e.pipelines.preBatch(t),h.batchTexture(t,s.glTexture,n,a,t.x,t.y,n/t.style.resolution,a/t.style.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,n,a,o(t.tintTopLeft,i.alpha*t._alphaTL),o(t.tintTopRight,i.alpha*t._alphaTR),o(t.tintBottomLeft,i.alpha*t._alphaBL),o(t.tintBottomRight,i.alpha*t._alphaBR),t.tintFill,0,0,i,r,!1,u),e.pipelines.postBatch(t)}},Nee=ZDe;var JDe=function(e,t,i,r){t.width===0||t.height===0||(i.addToRenderList(t),e.batchSprite(t,t.frame,i,r))},Gee=JDe;var Dee={renderWebGL:Nee,renderCanvas:Gee};var lf=Phaser.Display.Canvas.CanvasPool,QDe=function(e){var t=lf.create(this),i=t.getContext("2d");e.syncFont(t,i);var r=i.measureText(e.testString);if(r.hasOwnProperty("actualBoundingBoxAscent")&&r.hasOwnProperty("actualBoundingBoxDescent")){var s=r.actualBoundingBoxAscent,n=r.actualBoundingBoxDescent,u={ascent:s,descent:n,fontSize:s+n};return lf.remove(t),u}var a=Math.ceil(r.width*e.baselineX),o=a,h=2*o;o=o*e.baselineY|0,t.width=a,t.height=h,i.fillStyle="#f00",i.fillRect(0,0,a,h),i.font=e._font,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(e.testString,0,o);var u={ascent:0,descent:0,fontSize:0};if(!i.getImageData(0,0,a,h))return u.ascent=o,u.descent=o+6,u.fontSize=u.ascent+u.descent,lf.remove(t),u;var f=i.getImageData(0,0,a,h).data,d=f.length,v=a*4,c,p,m=0,g=!1;for(c=0;c<o;c++){for(p=0;p<v;p+=4)if(f[m+p]!==255){g=!0;break}if(!g)m+=v;else break}for(u.ascent=o-c,m=d-v,g=!1,c=h;c>o;c--){for(p=0;p<v;p+=4)if(f[m+p]!==255){g=!0;break}if(!g)m-=v;else break}return u.descent=c-o,u.fontSize=u.ascent+u.descent,lf.remove(t),u},K0=QDe;var $De={NO_NEWLINE:0,RAW_NEWLINE:1,WRAPPED_NEWLINE:2,NO_WRAP:0,WORD_WRAP:1,CHAR_WRAP:2,SPLITREGEXP:/(?:\r\n|\r|\n)/},ne=$De;var eIe=Phaser.Utils.String.Pad,tIe=function(e,t,i){if(e==null)return e;switch(typeof e){case"string":return e;case"number":return`#${eIe(Math.floor(e).toString(16),6,"0",1)}`;case"function":return e(t,i);case"object":return e.hasOwnProperty("r")?e.hasOwnProperty("a")?`rgba(${e.r},${e.g},${e.b},${e.a})`:`rgb(${e.r},${e.g},${e.b})`:e.hasOwnProperty("h")?e.hasOwnProperty("a")?`hsla(${e.h},${e.s},${e.l},${e.a})`:`hsl(${e.h},${e.s},${e.l})`:e;default:return e}},Ke=tIe;var iIe=Phaser.Utils.Objects.GetAdvancedValue,ei=Phaser.Utils.Objects.GetValue,Z0={backgroundColor:["backgroundColor",null,Ke],backgroundColor2:["backgroundColor2",null,Ke],backgroundHorizontalGradient:["backgroundHorizontalGradient",!0,null],backgroundStrokeColor:["backgroundStrokeColor",null,Ke],backgroundStrokeLineWidth:["backgroundStrokeLineWidth",2,null],backgroundCornerRadius:["backgroundCornerRadius",0,null],backgroundCornerIteration:["backgroundCornerIteration",null,null],fontFamily:["fontFamily","Courier",null],fontSize:["fontSize","16px",null],fontStyle:["fontStyle","",null],color:["color","#fff",Ke],stroke:["stroke","#fff",Ke],strokeThickness:["strokeThickness",0,null],shadowOffsetX:["shadow.offsetX",0,null],shadowOffsetY:["shadow.offsetY",0,null],shadowColor:["shadow.color","#000",Ke],shadowBlur:["shadow.blur",0,null],shadowStroke:["shadow.stroke",!1,null],shadowFill:["shadow.fill",!1,null],underlineColor:["underline.color","#000",Ke],underlineThickness:["underline.thickness",0,null],underlineOffset:["underline.offset",0,null],halign:["halign","left",null],valign:["valign","top",null],maxLines:["maxLines",0,null],fixedWidth:["fixedWidth",0,null],fixedHeight:["fixedHeight",0,null],resolution:["resolution",0,null],lineSpacing:["lineSpacing",0,null],rtl:["rtl",!1,null],testString:["testString","|M\xC3\u2030qgy",null],baselineX:["baselineX",1.2,null],baselineY:["baselineY",1.4,null],wrapMode:["wrap.mode",0,null],wrapWidth:["wrap.width",0,null]},Iee=class{constructor(t,i){this.parent=t,this.backgroundColor,this.backgroundColor2,this.backgroundHorizontalGradient,this.backgroundStrokeColor,this.backgroundStrokeLineWidth,this.backgroundCornerRadius,this.backgroundCornerIteration,this.fontFamily,this.fontSize,this.fontStyle,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.underlineColor,this.underlineThickness,this.underlineOffset,this.halign,this.valign,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.lineSpacing,this.rtl,this.testString,this.baselineX,this.baselineY,this._font,this.setStyle(i,!1,!0);var r=ei(i,"metrics",!1);r?this.metrics={ascent:ei(r,"ascent",0),descent:ei(r,"descent",0),fontSize:ei(r,"fontSize",0)}:this.metrics=K0(this)}get canvas(){return this.parent.canvasText.canvas}get context(){return this.parent.canvasText.context}get isWrapFitMode(){return this.fixedWidth>0&&this.wrapMode!==ne.NO_WRAP&&this.wrapWidth===0}setStyle(t,i,r){if(i===void 0&&(i=!0),r===void 0&&(r=!1),t&&t.hasOwnProperty("wrap")){var s=t.wrap;if(s.hasOwnProperty("mode")){var n=s.mode;typeof n=="string"&&(s.mode=Bee[n])}else s.hasOwnProperty("width")&&(s.mode=1)}t&&t.hasOwnProperty("fontSize")&&typeof t.fontSize=="number"&&(t.fontSize=t.fontSize.toString()+"px");for(var a in Z0){var o=Z0[a],h=o[0],u=r?o[1]:this[a],f=o[2],d=iIe(t,h,u);f&&(d=f(d)),this[a]=d}var v=ei(t,"font",null);v===null?this._font=this.fontStyle+" "+this.fontSize+" "+this.fontFamily:this._font=v;var c=ei(t,"fill",null);c!==null&&(this.color=Ke(c));var p=ei(t,"images",void 0);return p&&this.parent.addImage(p),i?this.update(!0):this.parent}syncFont(t,i){i.font=this._font}syncStyle(t,i){i.textBaseline="alphabetic",i.fillStyle=this.color,i.strokeStyle=this.stroke,i.lineWidth=this.strokeThickness,i.lineCap="round",i.lineJoin="round"}syncShadow(t,i){i?(t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur):(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowColor=0,t.shadowBlur=0)}update(t){return t&&(this._font=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim(),this.metrics=K0(this)),this.parent.updateText(t)}buildFont(){var t=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim();return t!==this._font&&(this._font=t),this}setFont(t){return typeof t=="string"?(this.fontFamily=t,this.fontSize="",this.fontStyle=""):(this.fontFamily=ei(t,"fontFamily","Courier"),this.fontSize=ei(t,"fontSize","16px"),this.fontStyle=ei(t,"fontStyle","")),this.update(!0)}setFontFamily(t){return this.fontFamily=t,this.update(!0)}setFontStyle(t){return this.fontStyle=t,this.update(!0)}setFontSize(t){return typeof t=="number"&&(t=t.toString()+"px"),this.fontSize=t,this.update(!0)}setTestString(t){return this.testString=t,this.update(!0)}setFixedSize(t,i){return this.fixedWidth=t,this.fixedHeight=i,t&&(this.parent.width=t),i&&(this.parent.height=i),this.update(this.isWrapFitMode)}setResolution(t){return this.resolution=t,this.update(!1)}setLineSpacing(t){return this.lineSpacing=t,this.update(!1)}setBackgroundColor(t,i,r){return r===void 0&&(r=!0),this.backgroundColor=Ke(t,this.canvas,this.context),this.backgroundColor2=Ke(i,this.canvas,this.context),this.backgroundHorizontalGradient=r,this.update(!1)}setBackgroundStrokeColor(t,i){return this.backgroundStrokeColor=Ke(t,this.canvas,this.context),this.backgroundStrokeLineWidth=i,this.update(!1)}setBackgroundCornerRadius(t,i){return this.backgroundCornerRadius=t,this.backgroundCornerIteration=i,this.update(!1)}setFill(t){return this.color=Ke(t,this.canvas,this.context),this.update(!1)}setColor(t){return this.color=Ke(t,this.canvas,this.context),this.update(!1)}setStroke(t,i){return t===void 0?this.strokeThickness=0:(i===void 0&&(i=this.strokeThickness),this.stroke=Ke(t,this.canvas,this.context),this.strokeThickness=i),this.update(!0)}setShadow(t,i,r,s,n,a){return t===void 0&&(t=0),i===void 0&&(i=0),r===void 0&&(r="#000"),s===void 0&&(s=0),n===void 0&&(n=!1),a===void 0&&(a=!0),this.shadowOffsetX=t,this.shadowOffsetY=i,this.shadowColor=Ke(r,this.canvas,this.context),this.shadowBlur=s,this.shadowStroke=n,this.shadowFill=a,this.update(!1)}setShadowOffset(t,i){return t===void 0&&(t=0),i===void 0&&(i=t),this.shadowOffsetX=t,this.shadowOffsetY=i,this.update(!1)}setShadowColor(t){return t===void 0&&(t="#000"),this.shadowColor=Ke(t,this.canvas,this.context),this.update(!1)}setShadowBlur(t){return t===void 0&&(t=0),this.shadowBlur=t,this.update(!1)}setShadowStroke(t){return this.shadowStroke=t,this.update(!1)}setShadowFill(t){return this.shadowFill=t,this.update(!1)}setUnderline(t,i,r){return t===void 0&&(t="#000"),i===void 0&&(i=0),r===void 0&&(r=0),this.underlineColor=Ke(t,this.canvas,this.context),this.underlineThickness=i,this.underlineOffset=r,this.update(!1)}setUnderlineColor(t){return t===void 0&&(t="#000"),this.underlineColor=Ke(t,this.canvas,this.context),this.update(!1)}setUnderlineThickness(t){return t===void 0&&(t=0),this.underlineThickness=t,this.update(!1)}setUnderlineOffset(t){return t===void 0&&(t=0),this.underlineOffset=t,this.update(!1)}setWrapMode(t){return typeof t=="string"&&(t=Bee[t.toLowerCase()]||0),this.wrapMode=t,this.update(!0)}setWrapWidth(t){return this.wrapWidth=t,this.update(!1)}setAlign(t,i){return t===void 0&&(t="left"),i===void 0&&(i="top"),this.halign=t,this.valign=i,this.update(!1)}setHAlign(t){return t===void 0&&(t="left"),this.halign=t,this.update(!1)}setVAlign(t){return t===void 0&&(t="top"),this.valign=t,this.update(!1)}setMaxLines(t){return t===void 0&&(t=0),this.maxLines=t,this.update(!1)}getTextMetrics(){var t=this.metrics;return{ascent:t.ascent,descent:t.descent,fontSize:t.fontSize}}setTextMetrics(t,i){return this.metrics.ascent=t.ascent,this.metrics.descent=t.descent,this.metrics.fontSize=t.fontSize,typeof i=="string"?(this.fontFamily=i,this.fontSize="",this.fontStyle=""):(this.fontFamily=ei(i,"fontFamily",this.fontFamily),this.fontSize=ei(i,"fontSize",this.fontSize),this.fontStyle=ei(i,"fontStyle",this.fontStyle)),this.parent.updateText(!0)}get lineHeight(){return this.metrics.fontSize+this.strokeThickness+this.lineSpacing}toJSON(){var t={};for(var i in Z0)t[i]=this[i];return t.metrics=this.getTextMetrics(),t}destroy(){this.parent=void 0}},frt={left:ne.hleft,center:ne.hcenter,right:ne.hright},drt={top:ne.vtop,center:ne.vcenter,bottom:ne.vbottom},Bee={none:ne.NO_WRAP,word:ne.WORD_WRAP,char:ne.CHAR_WRAP,character:ne.CHAR_WRAP},ff=Iee;var ya=Phaser.Utils.Objects.GetValue,Vee=class{constructor(t,i,r,s,n){this.cornerRadius={},this._width=0,this._height=0,this.setTo(t,i,r,s,n)}setTo(t,i,r,s,n){return this.setPosition(t,i),this.setRadius(n),this.setSize(r,s),this}setPosition(t,i){return t===void 0&&(t=0),i===void 0&&(i=t),this.x=t,this.y=i,this}setRadius(t){t===void 0&&(t=0);var i,r;typeof t=="number"?(i=t,r=t):(i=ya(t,"x",0),r=ya(t,"y",0));var s=this.cornerRadius;return s.tl=df(ya(t,"tl",void 0),i,r),s.tr=df(ya(t,"tr",void 0),i,r),s.bl=df(ya(t,"bl",void 0),i,r),s.br=df(ya(t,"br",void 0),i,r),this}setSize(t,i){return this.width=t,this.height=i,this}get minWidth(){var t=this.cornerRadius;return Math.max(t.tl.x+t.tr.x,t.bl.x+t.br.x)}get minHeight(){var t=this.cornerRadius;return Math.max(t.tl.y+t.bl.y,t.tr.y+t.br.y)}get width(){return this._width}set width(t){t==null&&(t=0),this._width=Math.max(t,this.minWidth)}get height(){return this._height}set height(t){t==null&&(t=0),this._height=Math.max(t,this.minHeight)}get radius(){var t=this.cornerRadius,i=Math.max(t.tl.x,t.tl.y,t.tr.x,t.tr.y,t.bl.x,t.bl.y,t.br.x,t.br.y);return i}},df=function(e,t,i){return e===void 0?{x:t,y:i}:typeof e=="number"?{x:e,y:e}:e},Uee=Vee;var vf=Phaser.Math.DegToRad,kee=vf(0),zee=vf(90),Xee=vf(180),Yee=vf(270),rIe=function(e,t,i,r,s,n,a){var o=new Uee(t,i,r,s,n),h=o.minWidth,u=o.minHeight,f=r>=h?1:r/h,d=s>=u?1:s/u,v=o.cornerRadius,c,p,m,g,x;e.save(),e.beginPath(),e.translate(t,i),c=v.br,p=c.x*f,m=c.y*d,g=r-p,x=s-m,e.moveTo(r,x),p>0&&m>0?cf(e,g,x,p,m,kee,zee,a):(e.lineTo(r,s),e.lineTo(g,s)),c=v.bl,p=c.x*f,m=c.y*d,g=p,x=s-m,e.lineTo(p,s),p>0&&m>0?cf(e,g,x,p,m,zee,Xee,a):(e.lineTo(0,s),e.lineTo(0,x)),c=v.tl,p=c.x*f,m=c.y*d,g=p,x=m,e.lineTo(0,x),p>0&&m>0?cf(e,g,x,p,m,Xee,Yee,a):(e.lineTo(0,0),e.lineTo(g,0)),c=v.tr,p=c.x*f,m=c.y*d,g=r-p,x=m,e.lineTo(g,0),p>0&&m>0?cf(e,g,x,p,m,Yee,kee,a):(e.lineTo(r,0),e.lineTo(r,x)),e.closePath(),e.restore()},cf=function(e,t,i,r,s,n,a,o){if(o==null)e.ellipse(t,i,r,s,0,n,a);else{o+=1;for(var h,u,f,d=(a-n)/o,v=0;v<=o;v++)f=n+d*v,h=t+r*Math.cos(f),u=i+s*Math.sin(f),e.lineTo(h,u)}},Wee=rIe;var sIe=function(e,t,i,r,s,n,a,o,h,u,f,d,v){if(Wee(t,i,r,s,n,a,v),o!=null){if(f!=null){var c;d?c=t.createLinearGradient(0,0,s,0):c=t.createLinearGradient(0,0,0,n),c.addColorStop(0,o),c.addColorStop(1,f),o=c}t.fillStyle=o,t.fill()}h!=null&&u>0&&(t.strokeStyle=h,t.lineWidth=u,t.stroke())},Hee=sIe;var nIe=function(e,t,i,r,s,n,a,o){if(!(t==null&&i==null)){var h=e.canvas.width,u=e.canvas.height;i==null&&(r=0);var f=r/2;h-=r,u-=r,Hee(e.canvas,e.context,f,f,h,u,s,t,i,r,n,a,o)}},jee=nIe;var Kee={draw(e,t,i,r){var s=this.penManager;this.hitAreaManager.clear();var n=this.context;n.save();var a=this.defaultStyle;this.clear(),jee(this,a.backgroundColor,a.backgroundStrokeColor,a.backgroundStrokeLineWidth,a.backgroundCornerRadius,a.backgroundColor2,a.backgroundHorizontalGradient,a.backgroundCornerIteration),e+=this.startXOffset,t+=this.startYOffset;var o=a.halign,h=a.valign,u,f=a.lineHeight,d=s.lines,v=d.length,c=a.maxLines,p,m,g;c>0&&v>c?(p=c,h==="center"?m=Math.floor((v-p)/2):h==="bottom"?m=v-p:m=0):(p=v,m=0),g=m+p;var x,T;h==="center"?T=Math.max((r-p*f)/2,0):h==="bottom"?T=Math.max(r-p*f-2,0):T=0,T+=t;for(var E=m;E<g;E++)if(u=s.getLineWidth(E),u!==0){for(var R=d[E],y=R.length,C=o,S=0;S<y;S++){var w=R[S].prop.align;if(w){C=w;break}}C==="center"?x=(i-u)/2:C==="right"?x=i-u:x=0,x+=e;for(var S=0;S<y;S++)this.drawPen(R[S],x,T)}n.restore()},drawPen(e,t,i){t+=e.x,i+=e.y+(e.prop.y||0);var r=this.canvas,s=this.context;s.save();var n=this.parser.propToContextStyle(this.defaultStyle,e.prop);n.buildFont(),n.syncFont(r,s),n.syncStyle(r,s),n.underlineThickness>0&&e.width>0&&this.drawUnderline(t,i,e.width,n),e.isTextPen&&this.drawText(t,i,e.text,n),e.isImagePen&&this.drawImage(t,i,e.prop.img,n),s.restore(),e.hasAreaMarker&&e.width>0&&this.hitAreaManager.add(e.prop.area,t,i-this.startYOffset,e.width,this.defaultStyle.lineHeight)},clear(){var e=this.canvas;this.context.clearRect(0,0,e.width,e.height)},drawUnderline(e,t,i,r){t+=r.underlineOffset-r.underlineThickness/2,this.autoRound&&(e=Math.round(e),t=Math.round(t));var s=this.context,n=s.lineCap;s.lineCap="butt",s.strokeStyle=r.underlineColor,s.lineWidth=r.underlineThickness,s.beginPath(),s.moveTo(e,t),s.lineTo(e+i,t),s.stroke(),s.lineCap=n},drawText(e,t,i,r){this.autoRound&&(e=Math.round(e),t=Math.round(t));var s=this.context;r.stroke&&r.stroke!=="none"&&r.strokeThickness>0&&(r.syncShadow(s,r.shadowStroke),s.strokeText(i,e,t)),r.color&&r.color!=="none"&&(r.syncShadow(s,r.shadowFill),s.fillText(i,e,t))},drawImage(e,t,i,r){t-=this.startYOffset,this.parent.imageManager.draw(i,this.context,e,t,this.autoRound)}};var Zee=class{constructor(){this.items=[]}destroy(){this.clear(),this.items=void 0}pop(){return this.items.length>0?this.items.pop():null}push(t){return this.items.push(t),this}pushMultiple(t){return this.items.push.apply(this.items,t),t.length=0,this}clear(){return this.items.length=0,this}},Jee=Zee;var br=Jee;var on=Phaser.Utils.Objects.GetValue,aIe=ne.NO_NEWLINE,Qee=ne.RAW_NEWLINE,$ee=class{constructor(t){this.prop={},this.resetFromJSON(t)}resetFromJSON(t){this.text=on(t,"text",""),this.x=on(t,"x",0),this.y=on(t,"y",0),this.width=on(t,"width",0);var i=on(t,"prop",null);i===null&&(i={}),this.prop=i,this.newLineMode=on(t,"newLineMode",0),this.startIndex=on(t,"startIndex",0)}get plainText(){var t=this.text;return this.newLineMode===Qee&&(t+=`
`),t}get wrapText(){var t=this.text;return this.newLineMode!==aIe&&(t+=`
`),t}get rawTextLength(){var t=this.text.length;return this.newLineMode===Qee&&(t+=1),t}get endIndex(){return this.startIndex+this.rawTextLength}get lastX(){return this.x+this.width}get isTextPen(){return this.text!==""}get isImagePen(){return!!this.prop.img}get hasAreaMarker(){return!!this.prop.area}},ete=$ee;var oIe=function(e){if(Array.isArray(e))e.length=0;else for(var t in e)delete e[t]},tte=oIe;var hIe=function(e,t){var i=Array.isArray(e);if(t===void 0?t=i?[]:{}:tte(t),i){t.length=e.length;for(var r=0,s=e.length;r<s;r++)t[r]=e[r]}else for(var n in e)t[n]=e[n];return t},Sa=hIe;var uIe=function(){},ite=uIe;var pf=Phaser.Utils.Objects.GetFastValue,rte=ne.NO_NEWLINE,lIe=ne.WRAPPED_NEWLINE,fIe=new br,dIe=new br,mf=class{constructor(t){this.pens=[],this.lines=[],this.maxLinesWidth=void 0,this.PensPool=pf(t,"pensPool",fIe),this.LinesPool=pf(t,"linesPool",dIe),this.tagToText=pf(t,"tagToText",ite),this.tagToTextScope=pf(t,"tagToTextScope",void 0)}destroy(){this.clear(),this.tagToText=void 0,this.tagToTextScope=void 0}clear(){for(var t=0,i=this.lines.length;t<i;t++)this.lines[t].length=0;this.PensPool.pushMultiple(this.pens),this.LinesPool.pushMultiple(this.lines),this.maxLinesWidth=void 0}addTextPen(t,i,r,s,n,a){var o=this.PensPool.pop();return o==null&&(o=new ete),hn.text=t,hn.x=i,hn.y=r,hn.width=s,hn.prop=n,hn.newLineMode=a,o.resetFromJSON(hn),this.addPen(o),this}addImagePen(t,i,r,s){return this.addTextPen("",t,i,r,s,rte),this}addNewLinePen(){var t=this.lastPen,i=t?t.lastX:0,r=t?t.y:0,s=t?Sa(t.prop):null;return this.addTextPen("",i,r,0,s,lIe),this}addPen(t){var i=this.lastPen;i==null?t.startIndex=0:t.startIndex=i.endIndex,this.pens.push(t);var r=this.lastLine;r==null&&(r=this.LinesPool.pop()||[],this.lines.push(r)),r.push(t),t.newLineMode!==rte&&(r=this.LinesPool.pop()||[],this.lines.push(r)),this.maxLinesWidth=void 0}clone(t){t==null&&(t=new mf),t.clear();for(var i=0,r=this.lines.length;i<r;i++)for(var s=this.lines[i],n=0,a=s.length;n<a;n++){var o=s[n];t.addPen(o.text,o.x,o.y,o.width,Sa(o.prop),o.newLineMode)}return t}get lastPen(){return this.pens[this.pens.length-1]}get lastLine(){return this.lines[this.lines.length-1]}getLineStartIndex(t){if(t>=this.lines.length)return this.getLineEndIndex(t);var i=this.lines[t];return i&&i[0]?i[0].startIndex:0}getLineEndIndex(t){t>=this.lines.length&&(t=this.lines.length-1);var i,r=!1,s;for(i=t;i>=0&&(s=this.lines[i],r=s!=null&&s.length>0,!r);i--);if(!r)return 0;var n=s[s.length-1];return n.endIndex}getLineWidth(t){var i=this.lines[t];if(!i)return 0;var r=i[i.length-1];if(r==null)return 0;var s=r.lastX;return s}getMaxLineWidth(){if(this.maxLinesWidth!==void 0)return this.maxLinesWidth;for(var t,i=0,r=0,s=this.lines.length;r<s;r++)t=this.getLineWidth(r),t>i&&(i=t);return this.maxLinesWidth=i,i}getLineWidths(){for(var t=[],i=0,r=this.lines.length;i<r;i++)t.push(this.getLineWidth(i));return t}get linesCount(){return this.lines.length}get plainText(){for(var t="",i=this.pens,r=0,s=i.length;r<s;r++)t+=i[r].plainText;return t}get rawTextLength(){for(var t=0,i=this.pens,r=0,s=this.pens.length;r<s;r++)t+=i[r].rawTextLength;return t}getSliceTagText(t,i,r){if(t===void 0&&(t=0),i===void 0){var s=this.lastPen;if(s==null)return"";i=s.endIndex}r===void 0&&(r=!1);for(var n="",a,o,h,u,f,d,v,c,p=0,m=this.pens.length;p<m&&(o=this.pens[p],f=o.endIndex,!(!(f<=t)&&(o=this.pens[p],h=r?o.wrapText:o.plainText,v=o.prop,u=o.startIndex,d=u>=t&&f<=i,d||(h=h.substring(t-u,i-u)),this.tagToTextScope?n+=this.tagToText.call(this.tagToTextScope,h,v,c):n+=this.tagToText(h,v,c),c=v,f>=i)));p++);return n}get length(){return this.lines.length}set length(t){this.clear()}},hn={},ste=mf;var vIe=Phaser.Geom.Rectangle,nte=new br,ate=class{constructor(){this.hitAreas=[]}destroy(){this.clear()}clear(){return nte.pushMultiple(this.hitAreas),this}add(t,i,r,s,n){var a=nte.pop();return a===null?a=new vIe(i,r,s,n):a.setTo(i,r,s,n),a.key=t,this.hitAreas.push(a),this}getFirstHitArea(t,i){for(var r=this.hitAreas,s,n=0,a=r.length;n<a;n++)if(s=r[n],s.contains(t,i))return s;return null}drawBounds(t,i,r){i===void 0&&(i=16777215),r&&t.save().scaleCanvas(r.scaleX,r.scaleY).rotateCanvas(r.rotation).translateCanvas(r.x,r.y);for(var s=this.hitAreas,n,a=0,o=s.length;a<o;a++)n=s[a],t.lineStyle(1,i).strokeRect(n.x,n.y,n.width,n.height);return r&&t.restore(),this}},ote=ate;var cIe=function(){this.parent.on("pointerdown",function(e,t,i,r){hte.call(this,"areadown",e,t,i)},this).on("pointerup",function(e,t,i,r){hte.call(this,"areaup",e,t,i)},this)},hte=function(e,t,i,r){var s=this.hitAreaManager.getFirstHitArea(i,r);if(s!==null){var n=s.key;this.parent.emit(`${e}-${n}`,t,i,r),this.parent.emit(e,n,t,i,r)}},ute=cIe;var pIe=ne.NO_NEWLINE,mIe=ne.RAW_NEWLINE,lte=ne.WRAPPED_NEWLINE,fte=ne.NO_WRAP,J0=ne.WORD_WRAP,zrt=ne.CHAR_WRAP,gIe=ne.SPLITREGEXP,xIe=[],TIe=function(e,t,i,r,s){r<=0&&(i=fte);var n=xIe;if(un.pushMultiple(n),!e||!e.length)return n;for(var a=e.split(gIe),o,h,u,f,d=0,v=a.length;d<v;d++){if(o=a[d],f=d===v-1?pIe:mIe,i===fte){var c=t(o);n.push(un.newline(o,c,f));continue}else d===0?h=r-s:h=r;if(o.length<=100){var c=t(o);if(c<=h){n.push(un.newline(o,c,f));continue}}var p;i===J0?p=o.split(" "):p=o;for(var m,g="",x="",T,E=0,R=0,y=p.length;R<y;R++)m=p[R],i===J0?(g+=m,R<y-1&&(g+=" ")):g+=m,T=t(g),T>h&&(R===0?n.push(un.newline("",0,lte)):(n.push(un.newline(x,E,lte)),g=m,i===J0&&R<y-1&&(g+=" "),T=t(g)),h=r),x=g,E=T;n.push(un.newline(x,E,f))}return n},un=new br;un.newline=function(e,t,i){var r=this.pop();return r===null&&(r={}),r.text=e,r.width=t,r.newLineMode=i,r};var dte=TIe;var gf=Phaser.Utils.Objects.GetValue,EIe=ne.NO_WRAP,yIe=ne.NO_NEWLINE,Q0=class{constructor(t){this.parent=t.parent,this.context=gf(t,"context",null),this.canvas=this.context.canvas,this.parser=gf(t,"parser",null),this.defaultStyle=gf(t,"style",null),this.autoRound=!0,this.pensPool=gf(t,"pensPool",null),this.penManager=this.newPenManager(),this._tmpPenManager=null,this.hitAreaManager=new ote;var i=this.context;this.getTextWidth=function(r){return i.measureText(r).width}}destroy(){this.context=void 0,this.canvas=void 0,this.parser=void 0,this.defaultStyle=void 0,this.penManager&&(this.penManager.destroy(),this.penManager=void 0),this._tmpPenManager&&(this._tmpPenManager.destroy(),this._tmpPenManager=void 0),this.hitAreaManager&&(this.hitAreaManager.destroy(),this.hitAreaManager=void 0)}updatePenManager(t,i,r,s,n){if(n===void 0&&(n=this.penManager),n.clear(),t==="")return n;if(this.parent.style.isWrapFitMode){var a=this.parent.padding;r=this.parent.style.fixedWidth-a.left-a.right}for(var o=this.canvas,h=this.context,u=function(w){return h.measureText(w).width},f=0,d=0,v,c,p,m=this.parser.splitText(t),g,x,T=0,E=m.length;T<E;T++)if(g=this.parser.tagTextToProp(m[T],c),v=g.plainText,c=g.prop,c.img){var R=this.imageManager.getOuterWidth(c.img);r>0&&i!==EIe&&r<f+R&&(n.addNewLinePen(),d+=s,f=0),n.addImagePen(f,d,R,Sa(c)),f+=R}else if(v!==""){h.save(),p=this.parser.propToContextStyle(this.defaultStyle,c),p.buildFont(),p.syncFont(o,h),p.syncStyle(o,h),x=dte(v,u,i,r,f);for(var y,C=0,S=x.length;C<S;C++)y=x[C],n.addTextPen(y.text,f,d,y.width,Sa(c),y.newLineMode),y.newLineMode!==yIe?(f=0,d+=s):f+=y.width;h.restore()}return n}get startXOffset(){var t=this.defaultStyle;return t.strokeThickness/2}get startYOffset(){var t=this.defaultStyle;return t.strokeThickness/2+t.metrics.ascent}get lines(){return this.penManager.lines}get desplayLinesCount(){var t=this.penManager.linesCount,i=this.defaultStyle.maxLines;return i>0&&t>i&&(t=i),t}get linesWidth(){return this.penManager.getMaxLineWidth()}get linesHeight(){var t=this.desplayLinesCount,i=this.defaultStyle.lineHeight*t;return t>0&&(i-=this.defaultStyle.lineSpacing),i}get imageManager(){return this.parent.imageManager}newPenManager(){return new ste({pensPool:this.pensPool,tagToText:this.parser.propToTagText,tagToTextScope:this.parser})}get tmpPenManager(){return this._tmpPenManager===null&&(this._tmpPenManager=this.newPenManager()),this._tmpPenManager}getPlainText(t,i,r){var s;if(t==null)s=this.penManager.plainText;else{var n,a=this.parser.splitText(t,1);s="";for(var o=0,h=a.length;o<h;o++)s+=a[o]}return(i!=null||r!=null)&&(i==null&&(i=0),r==null&&(r=s.length),s=s.substring(i,r)),s}getPenManager(t,i){if(t===void 0)return this.copyPenManager(i,this.penManager);i===void 0&&(i=this.newPenManager());var r=this.defaultStyle;return this.updatePenManager(t,r.wrapMode,r.wrapWidth,r.lineHeight,i),i}getText(t,i,r,s){if(t==null)return this.penManager.getSliceTagText(i,r,s);var n=this.tmpPenManager,a=this.defaultStyle;return this.updatePenManager(t,a.wrapMode,a.wrapWidth,a.lineHeight,n),n.getSliceTagText(i,r,s)}copyPenManager(t,i){return i===void 0&&(i=this.penManager),i.copy(t)}getTextWidth(t){return t===void 0&&(t=this.penManager),t.getMaxLineWidth()}getLastPen(t){return t===void 0&&(t=this.penManager),t.lastPen}},SIe={setInteractive:ute};Object.assign(Q0.prototype,Kee,SIe);var vte=Q0;var $0=Phaser.Utils.Objects.GetValue,CIe=function(e,t){t===void 0&&(t={key:e}),t.hasOwnProperty("key")||(t.key=e);var i=t.key,r=t.frame,s=t.width,n=t.height;if(s===void 0||n===void 0){var a=this.textureManager.getFrame(i,r),o=a?a.cutWidth:0,h=a?a.cutHeight:0;s===void 0&&n===void 0?(s=o,n=h):s===void 0?s=o*(n/h):n===void 0&&(n=h*(s/o))}this.images[e]={key:i,frame:r,width:s,height:n,y:$0(t,"y",0),left:$0(t,"left",0),right:$0(t,"right",0)}},xf=CIe;var RIe=function(e,t,i,r,s){var n=this.get(e);i+=n.left,r+=n.y,s&&(i=Math.round(i),r=Math.round(r));var a=this.textureManager.getFrame(n.key,n.frame);t.drawImage(a.source.image,a.cutX,a.cutY,a.cutWidth,a.cutHeight,i,r,n.width,n.height)},cte=RIe;var ex=class{constructor(t){this.textureManager=t.textures,this.images={}}destroy(){this.textureManager=void 0,this.images=void 0}add(t,i){if(typeof t=="string")xf.call(this,t,i);else if(Array.isArray(t))for(var r=t,s=0,n=r.length;s<n;s++)xf.call(this,r[s]);else{var r=t;for(var t in r)xf.call(this,t,r[t])}return this}has(t){return this.images.hasOwnProperty(t)}remove(t){return this.has(t)&&delete this.images[t],this}get(t){return this.has(t)||this.textureManager.exists(t)&&this.add(t),this.images[t]}getOuterWidth(t){var i=this.get(t);return i?i.width+i.left+i.right:0}getFrame(t){var i=this.get(t);return i?this.textureManager.getFrame(i.key,i.frame):void 0}hasTexture(t){return!!this.getFrame(t)}},_Ie={draw:cte};Object.assign(ex.prototype,_Ie);var pte=ex;var wIe=Phaser.Utils.Objects.IsPlainObject,PIe=Phaser.DOM.AddToDOM,mte=Phaser.Display.Canvas.CanvasPool,gte=Phaser.GameObjects.GameObject,ar=Phaser.Utils.Objects.GetValue,AIe=Phaser.DOM.RemoveFromDOM,bIe=ne.SPLITREGEXP,tx={},ix=class extends gte{constructor(t,i,r,s,n,a,o){if(wIe(i)){var h=i;i=ar(h,"x",0),r=ar(h,"y",0),s=ar(h,"text",""),n=ar(h,"style","")}i===void 0&&(i=0),r===void 0&&(r=0);super(t,a);if(this.renderer=t.sys.game.renderer,this.setPosition(i,r),this.setOrigin(0,0),this.initPipeline(),this.canvas=mte.create(this),this.context=this.canvas.getContext("2d"),this._imageManager=void 0,n){if(n.hasOwnProperty("align")){var u=n.align;delete n.align,n.halign=u}n.hasOwnProperty("stroke")&&!n.hasOwnProperty("strokeThickness")&&(n.strokeThickness=1)}this.style=new ff(this,n),this.autoRound=!0,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),tx.hasOwnProperty(a)||(tx[a]=new br),this.canvasText=new vte({parent:this,context:this.context,parser:o,style:this.style,pensPool:tx[a]}),n&&n.padding&&this.setPadding(n.padding),this.setText(s),t.sys.game.events.on("contextrestored",this.onContextRestored,this)}onContextRestored(){this.dirty=!0}preDestroy(){this.style.rtl&&AIe(this.canvas),this.scene.sys.game.events.off("contextrestored",this.onContextRestored,this),mte.remove(this.canvas),this.canvasText.destroy(),this.canvasText=void 0,this._imageManager&&(this._imageManager.destroy(),this._imageManager=void 0)}set text(t){this.setText(t)}get text(){return this._text}initRTL(){!this.style.rtl||(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",PIe(this.canvas,this.scene.sys.canvas),this.originX=1)}setText(t){return t==null&&(t=""),Array.isArray(t)&&(t=t.join(`
`)),t!==this._text&&(this._text=t.toString(),this.updateText()),this}appendText(t){return t==null?this:(Array.isArray(t)&&(t=t.join(`
`)),this.setText(this.text+t.toString()),this)}setStyle(t){return this.style.setStyle(t)}setFont(t){return this.style.setFont(t)}setFontFamily(t){return this.style.setFontFamily(t)}setFontSize(t){return this.style.setFontSize(t)}setFontStyle(t){return this.style.setFontStyle(t)}setFixedSize(t,i){return this.style.setFixedSize(t,i)}setBackgroundColor(t,i,r){return this.style.setBackgroundColor(t,i,r)}setBackgroundStrokeColor(t,i){return this.style.setBackgroundStrokeColor(t,i)}setBackgroundCornerRadius(t,i){return this.style.setBackgroundCornerRadius(t,i)}setFill(t){return this.style.setFill(t)}setColor(t){return this.style.setColor(t)}setStroke(t,i){return this.style.setStroke(t,i)}setShadow(t,i,r,s,n,a){return this.style.setShadow(t,i,r,s,n,a)}setShadowOffset(t,i){return this.style.setShadowOffset(t,i)}setShadowColor(t){return this.style.setShadowColor(t)}setShadowBlur(t){return this.style.setShadowBlur(t)}setShadowStroke(t){return this.style.setShadowStroke(t)}setShadowFill(t){return this.style.setShadowFill(t)}setWrapMode(t){return this.style.setWrapMode(t)}setWrapWidth(t){return this.style.setWrapWidth(t)}setAlign(t){return this.style.setHAlign(t)}setHAlign(t){return this.style.setHAlign(t)}setVAlign(t){return this.style.setVAlign(t)}setLineSpacing(t){return this.style.setLineSpacing(t)}setPadding(t,i,r,s){if(typeof t=="object"){var n=t,a=ar(n,"x",null);a!==null?(t=a,r=a):(t=ar(n,"left",0),r=ar(n,"right",t));var o=ar(n,"y",null);o!==null?(i=o,s=o):(i=ar(n,"top",0),s=ar(n,"bottom",i))}else t===void 0&&(t=0),i===void 0&&(i=t),r===void 0&&(r=t),s===void 0&&(s=i);return this.padding.left=t,this.padding.top=i,this.padding.right=r,this.padding.bottom=s,this.updateText(!1)}setMaxLines(t){return this.style.setMaxLines(t)}setResolution(t){return this.style.setResolution(t)}updateText(t){t===void 0&&(t=!0);var i=this.canvasText,r=this.style;t&&i.updatePenManager(this._text,r.wrapMode,r.wrapWidth,r.lineHeight);var s=this.padding,n,a;r.fixedWidth===0?(this.width=i.linesWidth+s.left+s.right,n=i.linesWidth):(this.width=r.fixedWidth,n=this.width-s.left-s.right,n<i.linesWidth&&(n=i.linesWidth)),r.fixedHeight===0?(this.height=i.linesHeight+s.top+s.bottom,a=i.linesHeight):(this.height=r.fixedHeight,a=this.height-s.top-s.bottom,a<i.linesHeight&&(a=i.linesHeight));var o=this.width,h=this.height;this.updateDisplayOrigin();var u=r.resolution;o*=u,h*=u,o=Math.max(Math.ceil(o),1),h=Math.max(Math.ceil(h),1);var f=this.canvas,d=this.context;f.width!==o||f.height!==h?(f.width=o,f.height=h,this.frame.setSize(o,h)):d.clearRect(0,0,o,h),d.save(),d.scale(u,u),i.draw(s.left,s.top,n,a),d.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(f,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var v=this.input;return v&&!v.customHitArea&&(v.hitArea.width=this.width,v.hitArea.height=this.height),this}getTextMetrics(){return this.style.getTextMetrics()}setTextMetrics(t,i){return this.style.setTextMetrics(t,i)}toJSON(){var t=At.ToJSON(this),i={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),resolution:this.resolution,padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return t.data=i,t}setInteractive(t,i,r){return gte.prototype.setInteractive.call(this,t,i,r),this.canvasText.setInteractive(),this}getWrappedText(t,i,r){return t=this.canvasText.getText(t,i,r,!0),t.split(bIe)}getPlainText(t,i,r){return this.canvasText.getPlainText(t,i,r)}getText(t,i,r){return this.canvasText.getText(t,i,r,!1)}getSubString(t,i,r){return this.getText(t,i,r)}copyPenManager(t){return this.canvasText.copyPenManager(t)}getPenManager(t,i){return this.canvasText.getPenManager(t,i)}setSize(t,i){return this.setFixedSize(t,i)}resize(t,i){return this.setFixedSize(t,i)}set lineSpacing(t){this.setLineSpacing(t)}get lineSpacing(){return this.style.lineSpacing}get imageManager(){return this._imageManager||(this._imageManager=new pte(this.scene)),this._imageManager}addImage(t,i){return this.imageManager.add(t,i),this}drawAreaBounds(t,i){return this.canvasText.hitAreaManager.drawBounds(t,i,this),this}},At=Phaser.GameObjects.Components;Phaser.Class.mixin(ix,[At.Alpha,At.BlendMode,At.ComputedSize,At.Crop,At.Depth,At.Flip,At.GetBounds,At.Mask,At.Origin,At.Pipeline,At.ScrollFactor,At.Tint,At.Transform,At.Visible,Dee]);var xte=ix;var MIe={plainText:null,prevProp:null},qIe=new ff,OIe={},LIe={splitText:function(e,t){for(var i=[],r=0;;){var s=rx.exec(e);if(!s){var n=e.length;return r<n&&i.push(e.substring(r,n)),i}var a=s[0],o=rx.lastIndex-a.length;r<o&&i.push(e.substring(r,o)),t===void 0&&i.push(a),r=rx.lastIndex}},tagTextToProp:function(e,t){var i,r;t==null&&(t={}),t.img&&xe(t,pi,"img"),NIe.test(e)?(xe(t,It,"b",!0),i=""):GIe.test(e)?(xe(t,pi,"b"),i=""):DIe.test(e)?(xe(t,It,"i",!0),i=""):IIe.test(e)?(xe(t,pi,"i"),i=""):Tte.test(e)?(r=e.match(Tte),xe(t,It,"size",`${r[1]}px`),i=""):BIe.test(e)?(xe(t,pi,"size"),i=""):Ete.test(e)?(r=e.match(Ete),xe(t,It,"color",r[1]),i=""):VIe.test(e)?(xe(t,pi,"color"),i=""):yte.test(e)?(r=e.match(yte),xe(t,It,"u",!0),i=""):Ste.test(e)?(r=e.match(Ste),xe(t,It,"u",r[1]),i=""):UIe.test(e)?(xe(t,pi,"u"),i=""):kIe.test(e)?(xe(t,It,"shadow",!0),i=""):zIe.test(e)?(xe(t,pi,"shadow"),i=""):XIe.test(e)?(xe(t,It,"stroke",!0),i=""):Cte.test(e)?(r=e.match(Cte),xe(t,It,"stroke",r[1]),i=""):YIe.test(e)?(xe(t,pi,"stroke"),i=""):Rte.test(e)?(r=e.match(Rte),xe(t,It,"y",parseFloat(r[1])),i=""):WIe.test(e)?(xe(t,pi,"y"),i=""):_te.test(e)?(r=e.match(_te),xe(t,It,"img",r[1]),i=""):HIe.test(e)?(xe(t,pi,"img"),i=""):wte.test(e)?(r=e.match(wte),xe(t,It,"area",r[1]),i=""):jIe.test(e)?(xe(t,pi,"area"),i=""):Pte.test(e)?(r=e.match(Pte),xe(t,It,"align",r[1]),i=""):KIe.test(e)?(xe(t,pi,"align"),i=""):i=e;var s=MIe;return s.plainText=i,s.prop=t,s},propToContextStyle:function(e,t){var i=qIe;if(t.hasOwnProperty("img"))i.image=t.img;else{if(i.image=null,t.hasOwnProperty("family")?i.fontFamily=t.family:i.fontFamily=e.fontFamily,t.hasOwnProperty("size")){var r=t.size;typeof r=="number"&&(r=`${r}px`),i.fontSize=r}else i.fontSize=e.fontSize;i.fontStyle=FIe(t.b,t.i),t.hasOwnProperty("color")?i.color=t.color:i.color=e.color,t.hasOwnProperty("stroke")?t.stroke===!0?(i.stroke=e.stroke,i.strokeThickness=e.strokeThickness):(i.stroke=t.stroke,i.strokeThickness=e.strokeThickness):(i.stroke=e.stroke,i.strokeThickness=0)}return t.hasOwnProperty("shadow")?t.shadow===!0?(i.shadowColor=e.shadowColor,i.shadowOffsetX=e.shadowOffsetX,i.shadowOffsetY=e.shadowOffsetY,i.shadowBlur=e.shadowBlur,i.shadowStroke=!0,i.shadowFill=!0):(i.shadowColor=t.shadow,i.shadowOffsetX=e.shadowOffsetX,i.shadowOffsetY=e.shadowOffsetY,i.shadowBlur=e.shadowBlur,i.shadowStroke=!0,i.shadowFill=!0):(i.shadowColor="#000",i.shadowOffsetX=0,i.shadowOffsetY=0,i.shadowBlur=0,i.shadowStroke=!1,i.shadowFill=!1),t.hasOwnProperty("u")?t.u===!0?(i.underlineColor=e.underlineColor,i.underlineThickness=e.underlineThickness,i.underlineOffset=e.underlineOffset):(i.underlineColor=t.u,i.underlineThickness=e.underlineThickness,i.underlineOffset=e.underlineOffset):(i.underlineColor="#000",i.underlineThickness=0,i.underlineOffset=0),i},propToTagText:function(e,t,i){i==null&&(i=OIe);var r=[];for(var s in i)t.hasOwnProperty(s)||r.push(`[/${s}]`);for(var s in t){var n=t[s];if(i[s]!==n)switch(s){case"size":r.push(`[size=${n.replace("px","")}]`);break;case"color":case"stroke":case"y":case"img":case"area":case"align":r.push(`[${s}=${n}]`);break;case"u":n===!0?r.push("[u]"):r.push(`[u=${n}]`);break;default:r.push(`[${s}]`);break}}return r.push(e),r.join("")}},xe=function(e,t,i,r){return t===It?e[i]=r:e.hasOwnProperty(i)&&delete e[i],e},FIe=function(e,t){return e&&t?"bold italic":e?"bold":t?"italic":""},rx=/\[b\]|\[\/b\]|\[i\]|\[\/i\]|\[size=(\d+)\]|\[\/size\]|\[color=([a-z]+|#[0-9abcdef]+)\]|\[\/color\]|\[u\]|\[u=([a-z]+|#[0-9abcdef]+)\]|\[\/u\]|\[shadow\]|\[\/shadow\]|\[stroke\]|\[stroke=([a-z]+|#[0-9abcdef]+)\]|\[\/stroke\]|\[y=([-.0-9]+)\]|\[\/y\]|\[img=([^\]]+)\]|\[\/img\]|\[area=([^\]]+)\]|\[\/area\]|\[align=([^\]]+)\]|\[\/align\]/ig,NIe=/\[b\]/i,GIe=/\[\/b\]/i,DIe=/\[i\]/i,IIe=/\[\/i\]/i,Tte=/\[size=(\d+)\]/i,BIe=/\[\/size\]/i,Ete=/\[color=([a-z]+|#[0-9abcdef]+)\]/i,VIe=/\[\/color\]/i,yte=/\[u\]/i,Ste=/\[u=([a-z]+|#[0-9abcdef]+)\]/i,UIe=/\[\/u\]/i,kIe=/\[shadow\]/i,zIe=/\[\/shadow\]/i,XIe=/\[stroke\]/i,Cte=/\[stroke=([a-z]+|#[0-9abcdef]+)\]/i,YIe=/\[\/stroke\]/i,Rte=/\[y=([-.0-9]+)\]/i,WIe=/\[\/y\]/i,_te=/\[img=([^\]]+)\]/i,HIe=/\[\/img\]/i,wte=/\[area=([^\]]+)\]/i,jIe=/\[\/area\]/i,Pte=/\[align=([^\]]+)\]/i,KIe=/\[\/align\]/i,pi=!1,It=!0,Ate=LIe;var bte=class extends xte{constructor(t,i,r,s,n){super(t,i,r,s,n,"rexBBCodeText",Ate)}},Ca=bte;function Mte(e,t,i,r){var s=new Ca(this.scene,e,t,i,r);return this.scene.add.existing(s),s}var Tf=Phaser.Utils.Objects.GetAdvancedValue,ZIe=Phaser.GameObjects.BuildGameObject;function qte(e,t){e===void 0&&(e={}),t!==void 0&&(e.add=t);var i=Tf(e,"text",""),r=Tf(e,"style",null),s=Tf(e,"padding",null);s!==null&&(r.padding=s);var n=new Ca(this.scene,0,0,i,r);return ZIe(this.scene,n,e),n.autoRound=Tf(e,"autoRound",!0),n}var Ote=function(e){return e==null||e===""||e.length===0},JIe=function(e,t,i){var r=e;if(!Ote(t)){typeof t=="string"&&(t=t.split("."));for(var s,n=0,a=t.length;n<a;n++){if(s=t[n],r[s]==null||typeof r[s]!="object"){var o;n===a-1?i===void 0?o={}:o=i:o={},r[s]=o}r=r[s]}}return r},QIe=function(e,t,i){if(typeof e=="object"){if(Ote(t)){if(i==null)return;typeof i=="object"&&(e=i)}else{typeof t=="string"&&(t=t.split("."));var r=t.pop(),s=JIe(e,t);s[r]=i}return e}},Lte=QIe;var Fte=class extends Phaser.Plugins.BasePlugin{constructor(t){super(t);t.registerGameObject("rexBBCodeText",Mte,qte)}start(){var t=this.game.events;t.on("destroy",this.destroy,this)}};Lte(window,"RexPlugins.GameObjects.BBCodeText",Ca);var Nte=Fte;var Gte={setEventEmitter(e,t){return t===void 0&&(t=Phaser.Events.EventEmitter),this._privateEE=e===!0||e===void 0,this._eventEmitter=this._privateEE?new t:e,this},destroyEventEmitter(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter(){return this._eventEmitter},on:function(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once:function(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off:function(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit:function(e){return this._eventEmitter&&e&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener:function(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener:function(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners:function(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount:function(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners:function(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames:function(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}};var $Ie=Phaser.Scene,eBe=function(e){return e instanceof $Ie},Ef=eBe;var tBe=function(e){if(e==null||typeof e!="object")return null;if(Ef(e))return e;if(e.scene&&Ef(e.scene))return e.scene;if(e.parent&&e.parent.scene&&Ef(e.parent.scene))return e.parent.scene},Dte=tBe;var iBe=Phaser.Utils.Objects.GetValue,sx=class{constructor(t,i){this.parent=t,this.scene=Dte(t),this.isShutdown=!1,this.setEventEmitter(iBe(i,"eventEmitter",!0)),this.parent&&this.parent===this.scene?this.scene.events.once("shutdown",this.onSceneDestroy,this):this.parent&&this.parent.once&&this.parent.once("destroy",this.onParentDestroy,this)}shutdown(t){this.isShutdown||(this.parent&&this.parent===this.scene?this.scene.events.off("shutdown",this.onSceneDestroy,this):this.parent&&this.parent.once&&this.parent.off("destroy",this.onParentDestroy,this),this.destroyEventEmitter(),this.parent=void 0,this.scene=void 0,this.isShutdown=!0)}destroy(t){this.shutdown(t)}onSceneDestroy(){this.destroy(!0)}onParentDestroy(t,i){this.destroy(i)}};Object.assign(sx.prototype,Gte);var Ite=sx;var ln=Phaser.Utils.Objects.GetFastValue,Bte=Phaser.Utils.Objects.GetValue,Vte=class extends Ite{constructor(t,i){super(t,i);this.timer=null,this.resetFromJSON(i)}resetFromJSON(t){this.setTypeMode(Bte(t,"typeMode",0)),this.setTypeSpeed(Bte(t,"speed",333)),this.setTextCallback=ln(t,"setTextCallback",null),this.setTextCallbackScope=ln(t,"setTextCallbackScope",null),this.typingIdx=ln(t,"typingIdx",0),this.text=nx(ln(t,"text","")),this.textLen=ln(t,"textLen",0),this.insertIdx=ln(t,"insertIdx",null);var i=ln(t,"elapsed",null);return i!==null&&this.start(void 0,void 0,this.typingIdx,i),this}toJSON(){var t,i=this.getTimer();return i?t=i.elapsed:t=null,{typeMode:this.typeMode,speed:this.speed,setTextCallback:this.setTextCallback,setTextCallbackScope:this.setTextCallbackScope,typingIdx:this.typingIdx,text:this.text,textLen:this.textLen,insertIdx:this.insertIdx,elapsed:t}}shutdown(t){this.isShutdown||(this.freeTimer(),super.shutdown(t))}setTypeMode(t){return typeof t=="string"&&(t=rBe[t]),this.typeMode=t,this}setTypeSpeed(t){return this.speed=t,this}get isTyping(){return this.getTimer()!==null}get isLastChar(){return this.typingIdx===this.textLen}start(t,i,r,s){return t!==void 0&&this.setTypingContent(t),i!==void 0&&(this.speed=i),r===void 0&&(r=0),this.typingIdx=r+1,this.speed===0?this.stop(!0):this.startTimer(s),this}appendText(t){var i=this.text.concat(nx(t));return this.isTyping?this.setTypingContent(i):this.start(i,void 0,this.textLen),this}stop(t){var i=this.getTimer();return i&&this.freeTimer(),t&&(this.typingIdx=this.textLen,this.setText(this.text),this.emit("type"),this.emit("complete",this,this.parent)),this}pause(){var t=this.getTimer();return t&&(t.paused=!0),this}resume(){var t=this.getTimer();return t&&(t.paused=!1),this}setTypingContent(t){return this.text=nx(t),this.textLen=this.getTextLength(this.text),this}onTyping(){var t=this.getTypingString(this.text,this.typingIdx,this.textLen,this.typeMode);this.setText(t),this.emit("type"),this.isLastChar?(this.freeTimer(),this.emit("complete",this,this.parent)):(this.timer.delay=this.speed,this.typingIdx++)}getTypingString(t,i,r,s){var n;if(s===0){var a=0,o=i;this.insertIdx=o,n=this.getSubString(t,a,o)}else if(s===1){var o=r,a=o-i;this.insertIdx=0,n=this.getSubString(t,a,o)}else if(s===2){var h=r/2,a=Math.floor(h-i/2),o=a+i;this.insertIdx=i%2?i:0,n=this.getSubString(t,a,o)}else if(s===3){var u=Math.floor(i/2),f;if(u>0){var o=r,a=o-u;f=this.getSubString(t,a,o)}else f="";var d=i-u,v;if(d>0){var a=0,o=a+d;this.insertIdx=o,v=this.getSubString(t,a,o)}else v="",this.insertIdx=0;n=v+f}return n}startTimer(t){this.timer&&this.freeTimer();var i,r;return t===void 0?(i=0,r=0):(i=this.speed,r=t),this.timer=this.scene.time.addEvent({delay:0,startAt:r,loop:!0,callback:this.onTyping,callbackScope:this}),this}getTimer(){return this.timer}freeTimer(){return this.timer&&(this.timer.remove(),this.timer=null),this}setText(t){this.setTextCallback&&(this.setTextCallbackScope?t=this.setTextCallback.call(this.setTextCallbackScope,t,this.isLastChar,this.insertIdx):t=this.setTextCallback(t,this.isLastChar,this.insertIdx)),this.parent.setText(t)}getTextLength(t){var i=this.parent,r;return i.getPlainText?r=i.getPlainText(t).length:r=t.length,r}getSubString(t,i,r){var s=this.parent,n;return s.getSubString?n=s.getSubString(t,i,r):n=t.slice(i,r),n}},nx=function(e){return Array.isArray(e)?e=e.join(`
`):typeof e=="number"&&(e=e.toString()),e},rBe={"left-to-right":0,"right-to-left":1,"middle-to-sides":2,"sides-to-middle":3},Ute=Vte;var kte=Ute;var zte=class extends Phaser.Plugins.BasePlugin{constructor(t){super(t)}start(){var t=this.game.events;t.on("destroy",this.destroy,this)}add(t,i){return new kte(t,i)}},Xte=zte;var Wte=window.screen.height,sBe={type:Ea.AUTO,backgroundColor:"#000000",scale:{parent:"phaser-game",mode:Ea.Scale.FIT,autoCenter:Ea.Scale.CENTER_BOTH,width:Wte,height:Wte},audio:{noAudio:!0},scene:[],plugins:{global:[{key:"rexBBCodeTextPlugin",plugin:Nte,start:!0},{key:"rexTextTypingPlugin",plugin:Xte,start:!0}]}};window.addEventListener("load",()=>{let e=new Ea.Game(sBe),t=new URL(window.location.href).searchParams,i=h=>[...Array(h)].map(()=>(~~(Math.random()*36)).toString(36)).join(""),r=t.get("SONA_ID")||t.get("PROLIFIC_PID")||t.get("id")||i(8),s=270,n=t.get("manipulation")||"clamp";["rotation","clamp"].includes(n)||console.error("Manipulation not found.");let a=new Yte.default().getResult(),o={id:r.slice(0,8),is_prolific:t.get("PROLIFIC_PID")!==null,is_sona:t.get("SONA_ID")!==null,institution:"yale",description:"consciousness clamp v1",datetime:new Date,already_visited:localStorage.getItem("conscious-clamp")!==null,manipulation:n,width:e.config.width,height:e.config.height,renderer:e.config.renderType===Ea.CANVAS?"canvas":"webgl",user_agent:{browser:a.browser,os:a.os},fullscreen_supported:document.fullscreenEnabled,debug:t.get("debug")!==null,version:1,reference_angle:s};e.user_config=o,localStorage.setItem("conscious-clamp",1)});function kst(e){return e.preventDefault(),e.returnValue="","experiment not done yet."}})();
/*!@license
 * UAParser.js v0.7.28
 * Lightweight JavaScript-based User-Agent string parser
 * https://github.com/faisalman/ua-parser-js
 *
 * Copyright © 2012-2021 Faisal Salman <f@faisalman.com>
 * Licensed under MIT License
 */
/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Jason Nicholls <nicholls.jason@gmail.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */
/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Angry Bytes (and contributors)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @author       Matthew Groves <@doormat>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Igor Ognichenko <ognichenko.igor@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       samme <samme.npm@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Vladimir Agafonkin
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Vladislav Forsh <vlad@robowhale.com>
 * @copyright    2021 RoboWhale
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       pi-kei
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       samme
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/
